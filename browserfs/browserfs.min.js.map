{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/async/dist/async.js","node_modules/bfs-buffer/ts/buffer.ts","node_modules/bfs-buffer/ts/buffer_core.ts","node_modules/bfs-buffer/ts/buffer_core_array.ts","node_modules/bfs-buffer/ts/buffer_core_arraybuffer.ts","node_modules/bfs-buffer/ts/buffer_core_imagedata.ts","node_modules/bfs-buffer/ts/extended_ascii.ts","node_modules/bfs-buffer/ts/string_util.ts","node_modules/bfs-buffer/ts/util.ts","node_modules/bfs-path/js/node_modules/bfs-path/ts/path.ts","node_modules/bfs-process/ts/index.ts","node_modules/bfs-process/js/node_modules/bfs-process/ts/process.ts","node_modules/bfs-process/js/node_modules/bfs-process/ts/tty.ts","node_modules/buffer-shims/index.js","node_modules/core-util-is/lib/util.js","node_modules/events/events.js","node_modules/inherits/inherits_browser.js","node_modules/is-buffer/index.js","node_modules/pako/dist/pako_inflate.min.js","node_modules/process-nextick-args/index.js","node_modules/readable-stream/duplex.js","node_modules/readable-stream/lib/_stream_duplex.js","node_modules/readable-stream/lib/_stream_passthrough.js","node_modules/readable-stream/lib/_stream_readable.js","node_modules/readable-stream/lib/_stream_transform.js","node_modules/readable-stream/lib/_stream_writable.js","node_modules/readable-stream/lib/internal/streams/BufferList.js","node_modules/readable-stream/node_modules/isarray/index.js","node_modules/readable-stream/passthrough.js","node_modules/readable-stream/readable.js","node_modules/readable-stream/transform.js","node_modules/readable-stream/writable.js","node_modules/stream-browserify/index.js","node_modules/string_decoder/index.js","node_modules/util-deprecate/browser.js","src/backend/AsyncMirror.ts","src/backend/Dropbox.ts","src/backend/FolderAdapter.ts","src/backend/HTML5FS.ts","src/backend/InMemory.ts","src/backend/IndexedDB.ts","src/backend/LocalStorage.ts","src/backend/MountableFileSystem.ts","src/backend/OverlayFS.ts","src/backend/WorkerFS.ts","src/backend/XmlHttpRequest.ts","src/backend/ZipFS.ts","src/browserify_main.ts","src/core/FS.ts","src/core/api_error.ts","src/core/backends.ts","src/core/browserfs.ts","src/core/file.ts","src/core/file_flag.ts","src/core/file_system.ts","src/core/global.ts","src/core/node_fs.ts","src/core/node_fs_stats.ts","src/core/util.ts","src/generic/emscripten_fs.ts","src/generic/file_index.ts","src/generic/inode.ts","src/generic/key_value_filesystem.ts","src/generic/locked_fs.ts","src/generic/mutex.ts","src/generic/preload_file.ts","src/generic/xhr.ts","src/main.ts"],"names":["f","exports","module","define","amd","g","window","global","self","this","BrowserFS","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","_dereq_","factory","async","apply","func","thisArg","args","isObject","value","type","isFunction","tag","objectToString","funcTag","genTag","isObjectLike","isSymbol","objectToString$1","symbolTag","toNumber","NAN","other","valueOf","replace","reTrim","isBinary","reIsBinary","test","reIsOctal","freeParseInt","slice","reIsBadHex","toFinite","INFINITY","sign","MAX_INTEGER","toInteger","result","remainder","rest","start","TypeError","FUNC_ERROR_TEXT","nativeMax","undefined","arguments","index","array","Array","otherArgs","initialParams","fn","callback","pop","applyEach$1","eachfn","fns","go","that","cb","concat","baseProperty","key","object","isLength","MAX_SAFE_INTEGER","isArrayLike","getLength","noop","once","callFn","getIterator","coll","iteratorSymbol","getPrototype","nativeGetPrototype","Object","baseHas","hasOwnProperty","baseKeys","nativeKeys","baseTimes","iteratee","isArrayLikeObject","isArguments","hasOwnProperty$1","propertyIsEnumerable","objectToString$2","argsTag","isString","isArray","objectToString$3","stringTag","indexKeys","String","isIndex","MAX_SAFE_INTEGER$1","reIsUint","isPrototype","Ctor","constructor","proto","prototype","objectProto$5","keys","isProto","indexes","skipIndexes","push","createArrayIterator","len","createES2015Iterator","iterator","item","next","done","createObjectIterator","obj","okeys","onlyOnce","_eachOfLimit","limit","iterateeCallback","err","running","replenish","elem","nextElem","eachOfLimit","doLimit","iterable","before","FUNC_ERROR_TEXT$1","once$1","eachOfArrayLike","iteratorCallback","completed","eachOf","eachOfImplementation","eachOfGeneric","doParallel","_asyncMap","arr","results","counter","_","v","doParallelLimit","asyncify","then","message","arrayEach","createBaseFor","fromRight","keysFunc","props","baseForOwn","baseFor","indexOfNaN","fromIndex","baseIndexOf","auto","tasks","concurrency","enqueueTask","task","readyTasks","runTask","processQueue","runningTasks","run","shift","addListener","taskName","taskListeners","listeners","taskComplete","hasError","taskCallback","safeResults","val","rkey","taskFn","checkForDeadlocks","currentTask","readyToCheck","getDependents","dependent","uncheckedDependencies","numTasks","keys$$","dependencies","remainingDependencies","dependencyName","join","arrayMap","copyArray","source","checkGlobal","baseToString","symbolToString","INFINITY$1","baseSlice","end","castSlice","charsEndIndex","strSymbols","chrSymbols","charsStartIndex","stringToArray","string","match","reComplexSymbol","toString","trim","chars","guard","reTrim$1","parseParams","STRIP_COMMENTS","FN_ARGS","split","FN_ARG_SPLIT","map","arg","FN_ARG","autoInject","newTasks","newTask","taskCb","newArgs","params","name","fallback","setTimeout","wrap","defer","DLL","head","tail","setInitial","dll","node","queue","worker","payload","_insert","data","insertAtFront","q","started","idle","setImmediate$1","drain","_tasks","unshift","process","_next","workers","workersList","splice","error","buffer","unsaturated","saturated","empty","paused","kill","Math","min","pause","resume","resumeCount","w","cargo","reduce","memo","eachOfSeries","x","concat$1","y","doSeries","identity","_createTester","check","getResult","wrappedIteratee","_findGetResult","consoleFunc","console","doDuring","truth","doWhilst","doUntil","during","_withoutIndex","eachLimit","eachLimit$1","ensureAsync","sync","innerArgs","notId","_filter","sort","b","forever","errback","mapValuesLimit","newObj","has","memoize","hasher","create","queues","memoized","unmemoized","_parallel","parallelLimit","parallelLimit$1","queue$1","items","priorityQueue","priority","nextNode","insertBefore","race","reduceRight","reversed","reverse","reflect","reflectCallback","cbArgs","reject$1","reflectAll","constant$1","retry","opts","parseTimes","acc","times","DEFAULT_TIMES","intervalFunc","interval","DEFAULT_INTERVAL","retryAttempt","attempt","options","retryable","series","sortBy","comparator","left","right","criteria","timeout","asyncFn","milliseconds","info","injectedCallback","timedOut","originalCallback","clearTimeout","timer","timeoutCallback","origCallback","baseRange","step","nativeMax$1","nativeCeil","timeLimit","count","mapLimit","transform","accumulator","k","unmemoize","whilst","until","waterfall","nextTask","taskIndex","_defer","objectProto","objectProto$1","parseInt","max","Symbol","getPrototypeOf","objectProto$2","objectProto$3","objectProto$4","Infinity","applyEach","mapSeries","applyEachSeries","apply$1","callArgs","freeGlobal","freeSelf","thisGlobal","root","Function","Symbol$1","symbolProto","rsAstralRange","rsComboMarksRange","rsComboSymbolsRange","rsVarRange","rsAstral","rsCombo","rsFitz","rsModifier","rsNonAstral","rsRegional","rsSurrPair","rsZWJ","reOptMod","rsOptVar","rsOptJoin","rsSeq","rsSymbol","RegExp","hasSetImmediate","setImmediate","hasNextTick","nextTick","removeLink","prev","insertAfter","newNode","_defer$1","seq","functions","newargs","nextargs","compose","concatSeries","constant","values","ignoredArgs","detect","detectLimit","detectSeries","dir","eachSeries","every","everyLimit","everySeries","filter","filterLimit","filterSeries","log","mapValues","mapValuesSeries","reject","rejectLimit","rejectSeries","some","Boolean","someLimit","someSeries","ceil","timesSeries","each","parallel","timesLimit","all","any","forEach","forEachSeries","forEachLimit","forEachOf","forEachOfSeries","forEachOfLimit","inject","foldl","foldr","select","selectLimit","selectSeries","wrapSync","allLimit","allSeries","anyLimit","anySeries","find","findLimit","findSeries","checkInt","offset","ext","RangeError","checkFloat","checkOffset","buffer_core","BufferCoreArray","BufferCoreArrayBuffer","BufferCoreImageData","string_util_1","util_1","BufferCorePreferences","PreferredBufferCore","bci","isAvailable","byte2maxint","byte2minint","byte2maxuint","Buffer","arg1","arg2","arg3","BufferCoreCommon","isArrayBufferView","byteLength","isArrayBuffer","argBuff","copy","writeUInt8","write","getAvailableBufferCores","getPreferredBufferCore","setPreferredBufferCore","getBufferCore","getOffset","set","writeInt8","get","readUInt8","str","encoding","strUtil","FindUtil","str2byte","byte2str","toJSON","byteArr","inspect","digits","INSPECT_MAX_BYTES","toArrayBuffer","buffCore","dv","getDataView","ab","byteOffset","ArrayBuffer","newBuff","toUint8Array","Uint8Array","subarray","indexOf","normalizedValue","isBuffer","valOffset","valLen","bufLen","target","targetStart","sourceStart","sourceEnd","bytesCopied","targetCore","copyTo","writeInt32LE","readInt32LE","sliceCopy","fill","charCodeAt","byteLen","lastBulkWrite","readUIntLE","noAssert","readUInt16LE","readUInt32LE","readUIntBE","readUInt16BE","readUInt32BE","readIntLE","readInt8","readInt16LE","readIntBE","readInt16BE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","rv","writeUInt16LE","writeUInt32LE","floor","writeUIntBE","writeUInt16BE","writeUInt32BE","writeIntLE","writeInt16LE","writeIntBE","writeInt16BE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","isEncoding","enc","compare","u1","u2","aLen","bLen","cmpLength","list","totalLength","buf","curPos","j","equals","SlowBuffer","_super","__extends","FLOAT_POS_INFINITY","pow","FLOAT_NEG_INFINITY","FLOAT_POS_INFINITY_AS_INT","FLOAT_NEG_INFINITY_AS_INT","FLOAT_NaN_AS_INT","float2intbits","doubleBits","double2longbits","intbits2float","longbits2double","f_val","exp","sig","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","isNaN","abs","round","LN2","d_val","high_bits","int32","exponent","significand","NaN","uint32_a","uint32_b","buffer_core_1","clearMasks","buff","bufflen","arrIdx","intIdx","newBC","bufferType","DataView","setInt8","setInt16","setInt32","setUint8","setUint16","setUint32","setFloat32","setFloat64","getInt8","getInt16","getInt32","getUint8","getUint16","getUint32","getFloat32","getFloat64","aBuff","aBuffOff","newUintArray","oldUintArray","targetU8","sourceU8","intBytes","intVal","getCanvasPixelArray","bytes","ctx","imageDataFactory","document","createElement","getContext","createImageData","ExtendedASCII","charCode","charIdx","extendedChars","charAt","fromCharCode","__esModule","fromCharCodes","charCodes","numChars","numChunks","chunks","toLowerCase","UTF8","ASCII","BINARY","UCS2","HEX","BASE64","BINSTR","BINSTRIE","extended_ascii_1","maxJ","strLen","codePoint","byte3","output","chr1","chr2","chr3","enc1","enc2","enc3","enc4","num2b64","b642num","b64chars","idx","numBytes","char1","hex2num","char2","hex2","hex1","num2hex","HEXCHARS","capitals","startByte","endByte","firstChar","chr","charLen","bytelen","isView","posixSplitPath","filename","out","splitPathRe","exec","path","normalize","p","absolute","sep","_removeDuplicateSeps","components","goodComponents","c","paths","_i","processed","segment","resolve","resolved","substr","cwd","relative","from","to","fromSegs","toSegs","upCount","downSegs","seg","dirname","sections","basename","lastPart","lastPartExt","extname","lastIndexOf","isAbsolute","_makeLong","parse","allParts","base","format","pathObject","_replaceRegex","delimiter","posix","win32","defineKey","processProxy","Process","initializeTTYs","stdin","stdout","stderr","events","Item","fun","NextTickQueue","_queue","_draining","_currentQueue","_queueIndex","_this","_drainQueue","_cleanUpNextTick","startTime","Date","now","_cwd","platform","argv","execArgv","domain","execPath","__dirname","env","exitCode","_gid","_uid","version","versions","http_parser","v8","uv","zlib","ares","icu","modules","openssl","config","target_defaults","cflags","default_configuration","defines","include_dirs","libraries","variables","clang","host_arch","node_install_npm","node_install_waf","node_prefix","node_shared_cares","node_shared_http_parser","node_shared_libuv","node_shared_zlib","node_shared_v8","node_use_dtrace","node_use_etw","node_use_openssl","node_shared_openssl","strict_aliasing","target_arch","v8_use_snapshot","v8_no_strict_aliasing","visibility","pid","random","title","arch","_mask","connected","chdir","uptime","abort","emit","exit","getgid","setgid","gid","getuid","setuid","uid","signal","memoryUsage","rss","heapTotal","heapUsed","umask","mask","oldMask","hrtime","timeinfo","performance","getTime","secs","TTY","disconnect","EventEmitter","stream","isRaw","columns","rows","isTTY","_bufferedWrites","_waitingForWrites","setRawMode","mode","changeColumns","changeRows","isatty","fd","_write","chunk","_read","size","Duplex","MAX_LEN","kMaxLength","alloc","_fill","fillBuf","flen","allocUnsafe","encodingOrOffset","allocUnsafeSlow","isBoolean","isNull","isNullOrUndefined","isNumber","isUndefined","isRegExp","re","isDate","d","isError","isPrimitive","_events","_maxListeners","defaultMaxListeners","setMaxListeners","er","handler","context","listener","m","newListener","warned","trace","on","removeListener","fired","position","removeAllListeners","ret","listenerCount","evlistener","emitter","ctor","superCtor","super_","enumerable","writable","configurable","TempCtor","isSlowBuffer","_isBuffer","pako","Uint16Array","Int32Array","assign","shrinkBuf","arraySet","flattenChunks","setTyped","Buf8","Buf16","Buf32","2","string2buf","buf2binstring","binstring2buf","buf2string","utf8border","./common","3","4","Z_NO_FLUSH","Z_PARTIAL_FLUSH","Z_SYNC_FLUSH","Z_FULL_FLUSH","Z_FINISH","Z_BLOCK","Z_TREES","Z_OK","Z_STREAM_END","Z_NEED_DICT","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_BUF_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","Z_BINARY","Z_TEXT","Z_UNKNOWN","Z_DEFLATED","5","6","text","time","xflags","os","extra","extra_len","comment","hcrc","7","h","S","E","B","Z","A","state","next_in","input","avail_in","next_out","avail_out","dmax","wsize","whave","wnext","hold","bits","lencode","distcode","lenbits","distbits","msg","sane","8","last","havedict","flags","total","wbits","ncode","nlen","ndist","have","lens","work","lendyn","distdyn","back","was","total_in","total_out","adler","D","we","me","z","C","_e","ge","ke","ve","pe","xe","ye","Se","Ee","Be","Ze","Ae","X","W","F","ce","U","L","H","M","K","P","Y","G","N","le","J","ie","$","Q","V","ee","te","ne","fe","ae","oe","se","de","ue","R","O","he","I","be","data_type","T","inflateReset","inflateReset2","inflateResetKeep","inflateInit","inflateInit2","inflate","inflateEnd","inflateGetHeader","inflateSetDictionary","inflateInfo","../utils/common","./adler32","./crc32","./inffast","./inftrees","9","10","0","-1","-2","-3","-4","-5","-6","11","/lib/inflate.js","chunkSize","windowBits","raw","ended","strm","header","dictionary","onEnd","onData","Inflate","inflateRaw","ungzip","./utils/common","./utils/strings","./zlib/constants","./zlib/gzheader","./zlib/inflate","./zlib/messages","./zlib/zstream","Readable","Writable","readable","allowHalfOpen","onend","_writableState","processNextTick","onEndNT","objectKeys","util","inherits","method","PassThrough","Transform","_transform","prependListener","event","ReadableState","objectMode","readableObjectMode","hwm","highWaterMark","defaultHwm","BufferList","pipes","pipesCount","flowing","endEmitted","reading","needReadable","emittedReadable","readableListening","resumeScheduled","defaultEncoding","ranOut","awaitDrain","readingMore","decoder","StringDecoder","_readableState","read","Stream","readableAddChunk","addToFront","chunkInvalid","onEofChunk","skipAdd","emitReadable","maybeReadMore","needMoreData","computeNewHighWaterMark","MAX_HWM","howMuchToRead","debug","emitReadable_","flow","maybeReadMore_","pipeOnDrain","src","EElistenerCount","nReadingNextTick","resume_","fromList","clear","fromListPartial","hasStrings","copyFromBufferString","copyFromBuffer","nb","bufferShim","endReadable","endReadableNT","xs","debugUtil","debuglog","isPaused","setEncoding","nOrig","doRead","pipe","dest","pipeOpts","onunpipe","cleanup","onclose","onfinish","ondrain","onerror","ondata","cleanedUp","needDrain","increasedAwaitDrain","unpipe","doEnd","endFn","dests","ev","res","bind","_fromList","TransformState","afterTransform","needTransform","transforming","writecb","writechunk","writeencoding","ts","_transformState","rs","flush","_flush","ws","nop","WriteReq","WritableState","writableObjectMode","ending","finished","noDecode","decodeStrings","writing","corked","bufferProcessing","onwrite","writelen","bufferedRequest","lastBufferedRequest","pendingcb","prefinished","errorEmitted","bufferedRequestCount","corkedRequestsFree","CorkedRequest","writev","_writev","writeAfterEnd","validChunk","valid","decodeChunk","writeOrBuffer","doWrite","onwriteError","onwriteStateUpdate","needFinish","clearBuffer","asyncWrite","afterWrite","onwriteDrain","finishMaybe","entry","holder","finish","prefinish","need","endWritable","browser","internalUtil","deprecate","getBuffer","current","defineProperty","cork","uncork","setDefaultEncoding","READABLE_STREAM","EE","didOnEnd","destroy","_isStdio","assertEncoding","isBufferEncoding","passThroughWrite","utf16DetectIncompleteChar","charReceived","charLength","base64DetectIncompleteChar","surrogateSize","detectIncompleteChar","charBuffer","charStr","available","substring","cr","deprecated","warn","localStorage","file_system","api_error_1","file_flag","preload_file","MirrorFile","fs","flag","stat","syncSync","isDirty","_fs","_syncSync","resetDirty","closeSync","PreloadFile","AsyncMirror","_queueRunning","_isInitialized","_initializeCallbacks","_sync","_async","supportsSynch","getName","writeFileSync","getPath","FileFlag","getFileFlag","getStats","enqueueOp","apiMethod","getFlag","initialize","userCb","callbacks","copyDirectory_1","mkdirSync","readdir","files","copyNextFile","copyItem_1","copyFile_1","readFile","stats","isDirectory","checkInitialized","ApiError","ErrorCode","EPERM","isReadOnly","supportsLinks","supportsProps","op","doNextOp","renameSync","oldPath","newPath","statSync","isLstat","openSync","readFileSync","unlinkSync","rmdirSync","readdirSync","existsSync","chmodSync","isLchmod","chownSync","isLchown","utimesSync","atime","mtime","SynchronousFileSystem","constructErrorCodeLookup","errorCodeLookup","Dropbox","NETWORK_ERROR","EIO","INVALID_PARAM","EINVAL","INVALID_TOKEN","OAUTH_ERROR","NOT_FOUND","ENOENT","INVALID_METHOD","NOT_ACCEPTABLE","CONFLICT","RATE_LIMITED","EBUSY","SERVER_ERROR","OVER_QUOTA","ENOSPC","isFileInfo","cache","isFile","isDirInfo","isFolder","node_fs_stats_1","CachedDropboxClient","client","_cache","_client","getCachedInfo","putCachedInfo","deleteCachedInfo","getCachedDirInfo","getCachedFileInfo","updateCachedDirInfo","contents","cachedInfo","contentHash","updateCachedFileInfo","versionTag","updateCachedInfo","cacheInfo","_wrap","interceptCb","filenames","folderEntries","status","NO_CONTENT","remove","move","arrayBuffer","writeFile","mkdir","performOp","numRun","timeoutDuration","DropboxFile","_path","_flag","_stat","buffer2ArrayBuffer","_writeFileStrict","close","DropboxFileSystem","supportsSymlinks","mainCb","convert","deleteFile","file","rename","error2","missingPath","response","isRemoved","_statType","FileError","open","content","dbStat","arrayBuffer2Buffer","_makeFile","isReadable","parent","FileType","FILE","DIRECTORY","_remove","ENOTDIR","EISDIR","unlink","rmdir","EEXIST","errorCode","BaseFileSystem","translateError","folder","wrapCallback","wrapFunction","wrapFirst","wrapSecond","_folder","_wrapped","file_system_1","FolderAdapter","wrapped","exists","isDirectoryEntry","_requestQuota","success","errorCallback","navigator","PERSISTENT","webkitPersistentStorage","requestQuota","TEMPORARY","webkitTemporaryStorage","webkitStorageInfo","_toArray","file_flag_1","_getFS","webkitRequestFileSystem","requestFileSystem","HTML5FSFile","createWriter","writer","blob","Blob","onwriteend","truncate","getFile","HTML5FS","expectedDir","EACCES","allocate","granted","_readdir","entries","deleteEntry","succ","fullPath","removeRecursively","semaphore","successCount","currentPath","getDirectory","parentDir","moveTo","loadAsFile","fileFromEntry","failedToLoad","loadAsDir","failedToLoadAsFile","isExclusive","pathNotExistsAction","ActionType","CREATE_FILE","exclusive","reader","FileReader","onloadend","bfs_file","readAsArrayBuffer","ENOTEMPTY","dirEntry","createReader","readEntries","kvfs","InMemoryStore","store","beginTransaction","SimpleSyncRWTransaction","put","overwrite","del","InMemoryFileSystem","SyncKeyValueFileSystem","convertError","onErrorHandler","preventDefault","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","IndexedDBROTransaction","tx","onsuccess","IndexedDBRWTransaction","arraybuffer","add","commit","IndexedDBStore","storeName","openReq","onupgradeneeded","db","objectStoreNames","contains","deleteObjectStore","createObjectStore","transaction","objectStore","IndexedDBFileSystem","init","AsyncKeyValueFileSystem","binaryEncoding","supportsBinaryString","setItem","getItem","LocalStorageStore","removeItem","LocalStorageFileSystem","defineFcn","isSync","numArgs","_getFs","standardizeError","InMemory_1","MountableFileSystem","mountList","mntMap","rootFs","mount","mountPoint","mkdirpSync","umount","i_1","diskSpace","realPath","fs1_rv","fs2_rv","fsInfo","rv2_1","_containsMountPt","mountPoints","i_2","pt","fsCmdMap","cmds","fnName","makeModeWritable","preload_file_1","locked_fs_1","deletionLogPath","OverlayFile","_syncAsync","UnlockedOverlayFS","_deletedFiles","_deleteLog","_writable","_readable","checkInitAsync","getOverlayedFileSystems","createParentDirectoriesAsync","statDone","toCreate","createParents","createParentDirectories","callbackArray","errno","deletePath","writeSync","undeletePath","oldErr","oldStats","newErr","newStats","copyDirContents","oldFile","newFile","mkdirErr","readdirErr","clone","oldStat","pathExistsAction","TRUNCATE_FILE","NOP","readFileErr","writableExists","readableExists","rmdirLower","dirStats","wFiles","rFiles","seenMap","filtered","fPath","fileP","existsWritable","existsReadable","chmod","operateOnWritableAsync","operateOnWritable","chown","utimes","copyToWritable","copyToWritableAsync","pStats","OverlayFS","getFSUnlocked","apiErrorLocal2Remote","SpecialArgType","API_ERROR","errorData","bufferToTransferrableObject","writeToBuffer","apiErrorRemote2Local","fromBuffer","transferrableObjectToBuffer","errorLocal2Remote","ERROR","stack","errorRemote2Local","cnstr","statsLocal2Remote","STATS","statsData","toBuffer","statsRemote2Local","fileFlagLocal2Remote","FILEFLAG","flagStr","getFlagString","fileFlagRemote2Local","remoteFlag","bufferLocal2Remote","BUFFER","bufferRemote2Local","buffArg","isAPIRequest","isAPIResponse","CallbackArgumentConverter","_callbacks","_nextId","toRemoteArg","id","CB","toLocalArg","FileDescriptorArgumentConverter","_fileDescriptors","bytesRead","FD","_applyFdChanges","remoteFd","remoteStats","isWriteable","isAppendable","getPos","applyStatChanges","applyFdAPIRequest","request","fdArg","WorkerFile","remoteFdId","_remoteFdId","getRemoteFdId","_syncClose","syncClose","WorkerFS","_callbackConverter","_isReadOnly","_supportLinks","_supportProps","_outstandingRequests","_worker","addEventListener","resp","fixedArgs","_argRemote2Local","cbId","specialArg","_argLocal2Remote","browserfsMessage","probeResponse","postMessage","_rpc","methodName","realpath","fname","appendFile","link","srcpath","dstpath","symlink","readlink","attachRemoteListener","argLocal2Remote","requestArgs","BaseFile","fdConverter","argRemote2Local","fixedRequestArgs","abortAndSendError","countdown","fixedArg","remoteCb","getRootFS","PROBE","rootFS","tryToString","xhr","file_index_1","XmlHttpRequest","listingUrlOrObj","prefixUrl","listing","_requestFileSync","_index","FileIndex","fromListing","fileIterator","file_data","getXhrPath","filePath","_requestFileSizeAsync","getFileSizeAsync","_requestFileSizeSync","getFileSizeSync","_requestFileAsync","asyncDownloadFile","syncDownloadFile","XMLHttpRequest","preloadFile","inode","getInode","isFileInode","getData","isDirInode","THROW_EXCEPTION","NoSyncFile","getListing","oldCb","err2","fdCast","fdBuff","copyingSlice","msdos2date","date","day","month","year","second","minute","hour","safeToString","useUTF8","ExternalFileAttributeType","CompressionMethod","FileHeader","versionNeeded","compressionMethod","lastModFileTime","rawLastModFileTime","crc32","fileNameLength","extraFieldLength","fileName","extraField","totalSize","FileData","record","decompress","DEFLATE","buffer2Arrayish","compressedSize","uncompressedSize","arrayish2Buffer","STORED","getHeader","getRecord","getRawData","DataDescriptor","ArchiveExtraDataRecord","extraFieldData","DigitalSignature","signatureData","CentralDirectory","zipData","_filename","produceFilename","versionMadeBy","fileCommentLength","diskNumberStart","internalAttributes","externalAttributes","headerRelativeOffset","rawFileName","fileComment","rawFileComment","isEncrypted","getFileData","EndOfCentralDirectory","diskNumber","cdDiskNumber","cdDiskEntryCount","cdTotalEntryCount","cdSize","cdOffset","cdZipCommentLength","cdZipComment","rawCdZipComment","ZipTOC","directoryEntries","eocd","ZipFS","_directoryEntries","_eocd","populateIndex","getCentralDirectoryEntry","getCentralDirectoryEntryAt","getNumberOfCentralDirectoryEntries","getEndOfCentralDirectory","cdRecord","getEOCD","startOffset","endOffset","addToIndex","cd","addPathFast","DirInode","FileInode","computeIndexResponsive","cdPtr","cdEnd","cdEntries","computeIndex","wrapCb","RELEASE","__numWaiting","normalizeMode","def","trueMode","normalizeTime","normalizePath","normalizeOptions","defEnc","defFlag","defMode","nopCb","FS","fdMap","nextFd","F_OK","R_OK","W_OK","X_OK","_wrapCb","getFdForFile","fd2file","EBADF","closeFd","_toUnixTimestamp","newCb","lstat","lstatSync","truncateSync","appendFileSync","fstat","fstatSync","ftruncate","ftruncateSync","fsync","fsyncSync","fdatasync","datasync","fdatasyncSync","datasyncSync","arg4","arg5","readSync","shenanigans","fchown","fchownSync","fchmod","numMode","fchmodSync","futimes","futimesSync","linkSync","symlinkSync","readlinkSync","lchown","lchownSync","lchmod","lchmodSync","realpathSync","watchFile","ENOTSUP","unwatchFile","watch","access","accessSync","createReadStream","createWriteStream","Stats","ErrorStrings","EFBIG","EROFS","syscall","fromJSON","json","bufferSize","bytesWritten","JSON","stringify","AsyncMirror_1","Dropbox_1","FolderAdapter_1","HTML5FS_1","InMemory","IndexedDB_1","IndexedDB","LocalStorage_1","LocalStorage","MountableFileSystem_1","OverlayFS_1","WorkerFS_1","XmlHttpRequest_1","ZipFS_1","install","oldRequire","BFSRequire","registerFileSystem","FileSystem","BFSUtils","rootfs","emscripten_fs_1","EmscriptenFS","api_error","validFlagStrs","flagCache","isTruncating","isSynchronous","openFile","createFile","must_be_file","parentStats","openFileSync","createFileSync","splitPath","addPaths","doesExist","er2","toExport","FS_1","_fsMock","FSProto","newFs","item_type","ctime","dev","ino","rdev","nlink","blksize","birthtime","blocks","isSymbolicLink","SYMLINK","isSocket","isBlockDevice","isCharacterDevice","isFIFO","u8","buffer2Uint8array","u8offset","u8Len","SUPPORTS_TYPED_ARRAYS","uint8Array2Buffer","s0","newS0","buffSlice","isIE","userAgent","isWebWorker","BFSEmscriptenStreamOps","nodefs","getNodeFS","getFS","PATH","getPATH","ERRNO_CODES","getERRNO_CODES","nfd","flagsToPermissionString","ErrnoError","llseek","whence","BFSEmscriptenNodeOps","getattr","setattr","attr","timestamp","lookup","join2","getMode","createNode","mknod","isDir","oldNode","newDir","newName","BFSEmscriptenFS","_FS","_PATH","_ERRNO_CODES","flagsToPermissionStringMap","64","65","66","129","193","514","577","578","705","706","1024","1025","1026","1089","1090","1153","1154","1217","1218","4096","4098","node_ops","stream_ops","isLink","parts","parsedFlags","addPath","_split_path","dirpath","itemname","addItem","itemNameMark","parentPath","itemName","removePath","remItem","children","ls","rootInode","pwd","tree","_ls","setData","_ref","Inode","toStats","getSize","update","hasChanged","atimeMs","mtimeMs","ctimeMs","GenerateRandomID","noError","noErrorTx","ROOT_NODE_ID","originalData","modifiedKeys","stashOldValue","markModified","SyncKeyValueFile","makeRootDirectory","currTime","dirInode","_findINode","read_directory","dirList","getDirListing","getINode","findINode","addNewNode","currId","retries","commitNewFile","parentNode","dirListing","dataId","fileNode","fileNodeId","oldParent","oldName","newParent","oldDirNode","oldDirList","nodeId","newDirNode","newDirList","newNameNode","removeEntry","parentListing","fileInodeId","fileInode","inodeChanged","AsyncKeyValueFile","handle_directory_listings","findINodeAndDirListing","reroll","committed","inodes","lists","errorOccurred","theOleSwitcharoo","oldParentList","oldParentINode","newParentList","newParentINode","fileId","completeRename","processInodeAndListings","mutex_1","LockedFS","_mu","lock","unlock","isLocked","resolvedPath","linkString","Mutex","_locked","_waiters","tryLock","_pos","_dirty","_buffer","advancePos","delta","setPos","newPos","endFp","endRead","getIEByteArray","IEByteArray","rawBytes","IEBinaryToArray_ByteStr","lastChr","IEBinaryToArray_ByteStr_Last","data_str","data_array","downloadFileIE","req","setRequestHeader","onreadystatechange","readyState","responseBody","responseText","send","asyncDownloadFileIE","syncDownloadFileIE","asyncDownloadFileModern","jsonSupported","responseType","syncDownloadFileModern","overrideMimeType","syncDownloadFileIE10","getFileSize","getResponseHeader","vArg","hasDontEnumBug","dontEnums","dontEnumsLength","prop","scope","gScope","timeouts","messageName","canUsePostMessage","importScripts","postMessageIsAsync","oldOnMessage","onmessage","handleMessage","stopPropagation","cancelBubble","attachEvent","MessageChannel","channel","port1","port2","searchElement","pivot","kValue","mappedValue","VBFunction","scriptElement","innerHTML","appendChild","bfs"],"mappings":"CAAA,SAAAA,GAAA,GAAA,gBAAAC,UAAA,mBAAAC,QAAAA,OAAAD,QAAAD,QAAA,IAAA,kBAAAG,SAAAA,OAAAC,IAAAD,UAAAH,OAAA,CAAA,GAAAK,EAAAA,GAAA,mBAAAC,QAAAA,OAAA,mBAAAC,QAAAA,OAAA,mBAAAC,MAAAA,KAAAC,KAAAJ,EAAAK,UAAAV,MAAA,WAAA,GAAAG,EAAA,OAAA,SAAAQ,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAE,GAAA,kBAAAC,UAAAA,OAAA,KAAAF,GAAAC,EAAA,MAAAA,GAAAF,GAAA,EAAA,IAAAI,EAAA,MAAAA,GAAAJ,GAAA,EAAA,IAAAhB,GAAA,GAAAqB,OAAA,uBAAAL,EAAA,IAAA,MAAAhB,GAAAsB,KAAA,mBAAAtB,EAAA,GAAAuB,GAAAV,EAAAG,IAAAf,WAAAW,GAAAI,GAAA,GAAAQ,KAAAD,EAAAtB,QAAA,SAAAU,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,EAAAA,EAAAF,IAAAY,EAAAA,EAAAtB,QAAAU,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAf,QAAA,IAAA,GAAAmB,GAAA,kBAAAD,UAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAW,OAAAT,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,KAAAW,GAAA,SAAAC,EAAAzB,EAAAD,mBCAA,SAAAM,EAAAqB,GACA,gBAAA3B,IAAA,mBAAAC,GAAA0B,EAAA3B,GACA,kBAAAE,IAAAA,EAAAC,IAAAD,GAAA,WAAAyB,GACAA,EAAArB,EAAAsB,MAAAtB,EAAAsB,YACApB,KAAA,SAAAR,GAAA,YAYA,SAAA6B,GAAAC,EAAAC,EAAAC,GACA,GAAAR,GAAAQ,EAAAR,MACA,QAAAA,GACA,IAAA,GAAA,MAAAM,GAAAP,KAAAQ,EACA,KAAA,GAAA,MAAAD,GAAAP,KAAAQ,EAAAC,EAAA,GACA,KAAA,GAAA,MAAAF,GAAAP,KAAAQ,EAAAC,EAAA,GAAAA,EAAA,GACA,KAAA,GAAA,MAAAF,GAAAP,KAAAQ,EAAAC,EAAA,GAAAA,EAAA,GAAAA,EAAA,IAEA,MAAAF,GAAAD,MAAAE,EAAAC,GA4BA,QAAAC,GAAAC,GACA,GAAAC,SAAAD,EACA,SAAAA,IAAA,UAAAC,GAAA,YAAAA,GAiCA,QAAAC,GAAAF,GAIA,GAAAG,GAAAJ,EAAAC,GAAAI,GAAAf,KAAAW,GAAA,EACA,OAAAG,IAAAE,IAAAF,GAAAG,GA2BA,QAAAC,GAAAP,GACA,QAAAA,GAAA,gBAAAA,GAkCA,QAAAQ,GAAAR,GACA,MAAA,gBAAAA,IACAO,EAAAP,IAAAS,GAAApB,KAAAW,IAAAU,GA4CA,QAAAC,GAAAX,GACA,GAAA,gBAAAA,GACA,MAAAA,EAEA,IAAAQ,EAAAR,GACA,MAAAY,GAEA,IAAAb,EAAAC,GAAA,CACA,GAAAa,GAAAX,EAAAF,EAAAc,SAAAd,EAAAc,UAAAd,CACAA,GAAAD,EAAAc,GAAAA,EAAA,GAAAA,EAEA,GAAA,gBAAAb,GACA,MAAA,KAAAA,EAAAA,GAAAA,CAEAA,GAAAA,EAAAe,QAAAC,GAAA,GACA,IAAAC,GAAAC,GAAAC,KAAAnB,EACA,OAAAiB,IAAAG,GAAAD,KAAAnB,GACAqB,GAAArB,EAAAsB,MAAA,GAAAL,EAAA,EAAA,GACAM,GAAAJ,KAAAnB,GAAAY,IAAAZ,EA4BA,QAAAwB,GAAAxB,GACA,IAAAA,EACA,MAAA,KAAAA,EAAAA,EAAA,CAGA,IADAA,EAAAW,EAAAX,GACAA,IAAAyB,IAAAzB,KAAAyB,GAAA,CACA,GAAAC,GAAA1B,EAAA,GAAA,EAAA,CACA,OAAA0B,GAAAC,GAEA,MAAA3B,KAAAA,EAAAA,EAAA,EA6BA,QAAA4B,GAAA5B,GACA,GAAA6B,GAAAL,EAAAxB,GACA8B,EAAAD,EAAA,CAEA,OAAAA,KAAAA,EAAAC,EAAAD,EAAAC,EAAAD,EAAA,EAkCA,QAAAE,GAAAnC,EAAAoC,GACA,GAAA,kBAAApC,GACA,KAAA,IAAAqC,WAAAC,GAGA,OADAF,GAAAG,GAAAC,SAAAJ,EAAApC,EAAAN,OAAA,EAAAsC,EAAAI,GAAA,GACA,WAMA,IALA,GAAAlC,GAAAuC,UACAC,GAAA,EACAhD,EAAA6C,GAAArC,EAAAR,OAAA0C,EAAA,GACAO,EAAAC,MAAAlD,KAEAgD,EAAAhD,GACAiD,EAAAD,GAAAxC,EAAAkC,EAAAM,EAEA,QAAAN,GACA,IAAA,GAAA,MAAApC,GAAAP,KAAAf,KAAAiE,EACA,KAAA,GAAA,MAAA3C,GAAAP,KAAAf,KAAAwB,EAAA,GAAAyC,EACA,KAAA,GAAA,MAAA3C,GAAAP,KAAAf,KAAAwB,EAAA,GAAAA,EAAA,GAAAyC,GAEA,GAAAE,GAAAD,MAAAR,EAAA,EAEA,KADAM,GAAA,IACAA,EAAAN,GACAS,EAAAH,GAAAxC,EAAAwC,EAGA,OADAG,GAAAT,GAAAO,EACA5C,EAAAC,EAAAtB,KAAAmE,IAIA,QAAAC,GAAAC,GACA,MAAAZ,GAAA,SAAAjC,GACA,GAAA8C,GAAA9C,EAAA+C,KACAF,GAAAtD,KAAAf,KAAAwB,EAAA8C,KAIA,QAAAE,GAAAC,GACA,MAAAhB,GAAA,SAAAiB,EAAAlD,GACA,GAAAmD,GAAAP,EAAA,SAAA5C,EAAA8C,GACA,GAAAM,GAAA5E,IACA,OAAAyE,GAAAC,EAAA,SAAAL,EAAAQ,GACAR,EAAAhD,MAAAuD,EAAApD,EAAAsD,QAAAD,MACAP,IAEA,OAAA9C,GAAAR,OACA2D,EAAAtD,MAAArB,KAAAwB,GAEAmD,IAYA,QAAAI,GAAAC,GACA,MAAA,UAAAC,GACA,MAAA,OAAAA,EAAAnB,OAAAmB,EAAAD,IA+CA,QAAAE,GAAAxD,GACA,MAAA,gBAAAA,IACAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,GAAAyD,GA4BA,QAAAC,GAAA1D,GACA,MAAA,OAAAA,GAAAwD,EAAAG,GAAA3D,MAAAE,EAAAF,GAeA,QAAA4D,MAIA,QAAAC,GAAAlB,GACA,MAAA,YACA,GAAA,OAAAA,EAAA,CACA,GAAAmB,GAAAnB,CACAA,GAAA,KACAmB,EAAAnE,MAAArB,KAAA+D,aAMA,QAAA0B,GAAAC,GACA,MAAAC,KAAAD,EAAAC,KAAAD,EAAAC,MAaA,QAAAC,GAAAlE,GACA,MAAAmE,IAAAC,OAAApE,IAiBA,QAAAqE,GAAAd,EAAAD,GAIA,MAAA,OAAAC,IACAe,GAAAjF,KAAAkE,EAAAD,IACA,gBAAAC,IAAAD,IAAAC,IAAA,OAAAW,EAAAX,IAcA,QAAAgB,GAAAhB,GACA,MAAAiB,IAAAJ,OAAAb,IAYA,QAAAkB,GAAA/F,EAAAgG,GAIA,IAHA,GAAApC,IAAA,EACAT,EAAAW,MAAA9D,KAEA4D,EAAA5D,GACAmD,EAAAS,GAAAoC,EAAApC,EAEA,OAAAT,GA4BA,QAAA8C,GAAA3E,GACA,MAAAO,GAAAP,IAAA0D,EAAA1D,GAwCA,QAAA4E,GAAA5E,GAEA,MAAA2E,GAAA3E,IAAA6E,GAAAxF,KAAAW,EAAA,aACA8E,GAAAzF,KAAAW,EAAA,WAAA+E,GAAA1F,KAAAW,IAAAgF,IA6DA,QAAAC,GAAAjF,GACA,MAAA,gBAAAA,KACAkF,GAAAlF,IAAAO,EAAAP,IAAAmF,GAAA9F,KAAAW,IAAAoF,GAWA,QAAAC,GAAA9B,GACA,GAAAjE,GAAAiE,EAAAA,EAAAjE,OAAA8C,MACA,OAAAoB,GAAAlE,KACA4F,GAAA3B,IAAA0B,EAAA1B,IAAAqB,EAAArB,IACAkB,EAAAnF,EAAAgG,QAEA,KAiBA,QAAAC,GAAAvF,EAAAV,GAEA,MADAA,GAAA,MAAAA,EAAAkG,GAAAlG,IACAA,IACA,gBAAAU,IAAAyF,GAAAtE,KAAAnB,KACAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAAV,EAaA,QAAAoG,GAAA1F,GACA,GAAA2F,GAAA3F,GAAAA,EAAA4F,YACAC,EAAA,kBAAAF,IAAAA,EAAAG,WAAAC,EAEA,OAAA/F,KAAA6F,EA+BA,QAAAG,GAAAzC,GACA,GAAA0C,GAAAP,EAAAnC,EACA,KAAA0C,IAAAvC,EAAAH,GACA,MAAAgB,GAAAhB,EAEA,IAAA2C,GAAAb,EAAA9B,GACA4C,IAAAD,EACArE,EAAAqE,MACA5G,EAAAuC,EAAAvC,MAEA,KAAA,GAAAgE,KAAAC,IACAc,EAAAd,EAAAD,IACA6C,IAAA,UAAA7C,GAAAiC,EAAAjC,EAAAhE,KACA2G,GAAA,eAAA3C,GACAzB,EAAAuE,KAAA9C,EAGA,OAAAzB,GAGA,QAAAwE,GAAArC,GACA,GAAA/E,IAAA,EACAqH,EAAAtC,EAAA1E,MACA,OAAA,YACA,QAAAL,EAAAqH,GAAAtG,MAAAgE,EAAA/E,GAAAqE,IAAArE,GAAA,MAIA,QAAAsH,GAAAC,GACA,GAAAvH,IAAA,CACA,OAAA,YACA,GAAAwH,GAAAD,EAAAE,MACA,OAAAD,GAAAE,KAAA,MACA1H,KACAe,MAAAyG,EAAAzG,MAAAsD,IAAArE,KAIA,QAAA2H,GAAAC,GACA,GAAAC,GAAAd,EAAAa,GACA5H,GAAA,EACAqH,EAAAQ,EAAAxH,MACA,OAAA,YACA,GAAAgE,GAAAwD,IAAA7H,EACA,OAAAA,GAAAqH,GAAAtG,MAAA6G,EAAAvD,GAAAA,IAAAA,GAAA,MAIA,QAAAkD,GAAAxC,GACA,GAAAN,EAAAM,GACA,MAAAqC,GAAArC,EAGA,IAAAwC,GAAAzC,EAAAC,EACA,OAAAwC,GAAAD,EAAAC,GAAAI,EAAA5C,GAGA,QAAA+C,GAAApE,GACA,MAAA,YACA,GAAA,OAAAA,EAAA,KAAA,IAAAzD,OAAA,+BACA,IAAA4E,GAAAnB,CACAA,GAAA,KACAmB,EAAAnE,MAAArB,KAAA+D,YAIA,QAAA2E,GAAAC,GACA,MAAA,UAAAJ,EAAAnC,EAAA9B,GASA,QAAAsE,GAAAC,GAEA,GADAC,GAAA,EACAD,EACAR,GAAA,EACA/D,EAAAuE,OACA,CAAA,GAAAR,GAAAS,GAAA,EACA,MAAAxE,GAAA,KAEAyE,MAIA,QAAAA,KACA,KAAAD,EAAAH,IAAAN,GAAA,CACA,GAAAW,GAAAC,GACA,IAAA,OAAAD,EAKA,MAJAX,IAAA,OACAS,GAAA,GACAxE,EAAA,MAIAwE,IAAA,EACA1C,EAAA4C,EAAAtH,MAAAsH,EAAAhE,IAAAyD,EAAAG,KA9BA,GADAtE,EAAAiB,EAAAjB,GAAAgB,GACAqD,GAAA,IAAAJ,EACA,MAAAjE,GAAA,KAEA,IAAA2E,GAAAf,EAAAK,GACAF,GAAA,EACAS,EAAA,CA6BAC,MA0BA,QAAAG,GAAAxD,EAAAiD,EAAAvC,EAAA9B,GACAoE,EAAAC,GAAAjD,EAAAU,EAAA9B,GAGA,QAAA6E,GAAA9E,EAAAsE,GACA,MAAA,UAAAS,EAAAhD,EAAA9B,GACA,MAAAD,GAAA+E,EAAAT,EAAAvC,EAAA9B,IAwBA,QAAA+E,GAAAjJ,EAAAkB,GACA,GAAAiC,EACA,IAAA,kBAAAjC,GACA,KAAA,IAAAqC,WAAA2F,GAGA,OADAlJ,GAAAkD,EAAAlD,GACA,WAOA,QANAA,EAAA,IACAmD,EAAAjC,EAAAD,MAAArB,KAAA+D,YAEA3D,GAAA,IACAkB,EAAAwC,QAEAP,GAsBA,QAAAgG,GAAAjI,GACA,MAAA+H,GAAA,EAAA/H,GAIA,QAAAkI,GAAA9D,EAAAU,EAAA9B,GASA,QAAAmF,GAAAZ,GACAA,EACAvE,EAAAuE,KACAa,IAAA1I,GACAsD,EAAA,MAZAA,EAAAiF,EAAAjF,GAAAgB,EACA,IAAAtB,GAAA,EACA0F,EAAA,EACA1I,EAAA0E,EAAA1E,MAaA,KAZA,IAAAA,GACAsD,EAAA,MAWAN,EAAAhD,EAAAgD,IACAoC,EAAAV,EAAA1B,GAAAA,EAAAyE,EAAAgB,IAgDA,QAAAE,GAAAjE,EAAAU,EAAA9B,GACA,GAAAsF,GAAAxE,EAAAM,GAAA8D,EAAAK,EACAD,GAAAlE,EAAAU,EAAA9B,GAGA,QAAAwF,GAAAzF,GACA,MAAA,UAAAkE,EAAAnC,EAAA9B,GACA,MAAAD,GAAAsF,EAAApB,EAAAnC,EAAA9B,IAIA,QAAAyF,GAAAtF,EAAAuF,EAAA5D,EAAA9B,GACAA,EAAAiB,EAAAjB,GAAAgB,GACA0E,EAAAA,KACA,IAAAC,MACAC,EAAA,CAEAzF,GAAAuF,EAAA,SAAAtI,EAAAyI,EAAA7F,GACA,GAAAN,GAAAkG,GACA9D,GAAA1E,EAAA,SAAAmH,EAAAuB,GACAH,EAAAjG,GAAAoG,EACA9F,EAAAuE,MAEA,SAAAA,GACAvE,EAAAuE,EAAAoB,KA2EA,QAAAI,GAAAhG,GACA,MAAA,UAAAkE,EAAAI,EAAAvC,EAAA9B,GACA,MAAAD,GAAAqE,EAAAC,GAAAJ,EAAAnC,EAAA9B,IA2KA,QAAAgG,GAAAhJ,GACA,MAAA8C,GAAA,SAAA5C,EAAA8C,GACA,GAAAf,EACA,KACAA,EAAAjC,EAAAD,MAAArB,KAAAwB,GACA,MAAAtB,GACA,MAAAoE,GAAApE,GAGAuB,EAAA8B,IAAA,kBAAAA,GAAAgH,KACAhH,EAAAgH,KAAA,SAAA7I,GACA4C,EAAA,KAAA5C,IACA,SAAAmH,GACAvE,EAAAuE,EAAA2B,QAAA3B,EAAA,GAAAjI,OAAAiI,MAGAvE,EAAA,KAAAf,KAcA,QAAAkH,GAAAxG,EAAAmC,GAIA,IAHA,GAAApC,IAAA,EACAhD,EAAAiD,EAAAA,EAAAjD,OAAA,IAEAgD,EAAAhD,GACAoF,EAAAnC,EAAAD,GAAAA,EAAAC,MAAA,IAIA,MAAAA,GAUA,QAAAyG,GAAAC,GACA,MAAA,UAAA1F,EAAAmB,EAAAwE,GAMA,IALA,GAAA5G,IAAA,EACAoF,EAAAtD,OAAAb,GACA4F,EAAAD,EAAA3F,GACAjE,EAAA6J,EAAA7J,OAEAA,KAAA,CACA,GAAAgE,GAAA6F,EAAAF,EAAA3J,IAAAgD,EACA,IAAAoC,EAAAgD,EAAApE,GAAAA,EAAAoE,MAAA,EACA,MAGA,MAAAnE,IAyBA,QAAA6F,GAAA7F,EAAAmB,GACA,MAAAnB,IAAA8F,GAAA9F,EAAAmB,EAAAsB,GAYA,QAAAsD,GAAA/G,EAAAgH,EAAAN,GAIA,IAHA,GAAA3J,GAAAiD,EAAAjD,OACAgD,EAAAiH,GAAAN,EAAA,GAAA,GAEAA,EAAA3G,MAAAA,EAAAhD,GAAA,CACA,GAAAuB,GAAA0B,EAAAD,EACA,IAAAzB,IAAAA,EACA,MAAAyB,GAGA,OAAA,EAYA,QAAAkH,GAAAjH,EAAAvC,EAAAuJ,GACA,GAAAvJ,IAAAA,EACA,MAAAsJ,GAAA/G,EAAAgH,EAKA,KAHA,GAAAjH,GAAAiH,EAAA,EACAjK,EAAAiD,EAAAjD,SAEAgD,EAAAhD,GACA,GAAAiD,EAAAD,KAAAtC,EACA,MAAAsC,EAGA,QAAA,EAkFA,QAAAmH,GAAAC,EAAAC,EAAA/G,GA8DA,QAAAgH,GAAAtG,EAAAuG,GACAC,EAAA1D,KAAA,WACA2D,EAAAzG,EAAAuG,KAIA,QAAAG,KACA,GAAA,IAAAF,EAAAxK,QAAA,IAAA2K,EACA,MAAArH,GAAA,KAAA2F,EAEA,MAAAuB,EAAAxK,QAAA2K,EAAAN,GAAA,CACA,GAAAO,GAAAJ,EAAAK,OACAD,MAIA,QAAAE,GAAAC,EAAA1H,GACA,GAAA2H,GAAAC,EAAAF,EACAC,KACAA,EAAAC,EAAAF,OAGAC,EAAAlE,KAAAzD,GAGA,QAAA6H,GAAAH,GACA,GAAAC,GAAAC,EAAAF,MACAtB,GAAAuB,EAAA,SAAA3H,GACAA,MAEAqH,IAGA,QAAAD,GAAAzG,EAAAuG,GACA,IAAAY,EAAA,CAEA,GAAAC,GAAA3D,EAAAhF,EAAA,SAAAoF,EAAArH,GAKA,GAJAmK,IACAnK,EAAAR,QAAA,IACAQ,EAAAA,EAAA,IAEAqH,EAAA,CACA,GAAAwD,KACAvB,GAAAb,EAAA,SAAAqC,EAAAC,GACAF,EAAAE,GAAAD,IAEAD,EAAArH,GAAAxD,EACA2K,GAAA,EACAF,KAEA3H,EAAAuE,EAAAwD,OAEApC,GAAAjF,GAAAxD,EACA0K,EAAAlH,KAIA2G,IACA,IAAAa,GAAAjB,EAAAA,EAAAvK,OAAA,EACAuK,GAAAvK,OAAA,EACAwL,EAAAvC,EAAAmC,GAEAI,EAAAJ,IAIA,QAAAK,KAMA,IAFA,GAAAC,GACAxC,EAAA,EACAyC,EAAA3L,QACA0L,EAAAC,EAAApI,MACA2F,IACAO,EAAAmC,EAAAF,GAAA,SAAAG,GACA,MAAAC,EAAAD,IACAF,EAAA7E,KAAA+E,IAKA,IAAA3C,IAAA6C,EACA,KAAA,IAAAnM,OAAA,iEAIA,QAAAgM,GAAAb,GACA,GAAAxI,KAMA,OALAuH,GAAAM,EAAA,SAAAG,EAAAvG,GACA4B,GAAA2E,IAAAL,EAAAK,EAAAQ,EAAA,IAAA,GACAxI,EAAAuE,KAAA9C,KAGAzB,EA3JA,kBAAA8H,KAEA/G,EAAA+G,EACAA,EAAA,MAEA/G,EAAAiB,EAAAjB,GAAAgB,EACA,IAAA0H,GAAAtF,EAAA0D,GACA2B,EAAAC,EAAAhM,MACA,KAAA+L,EACA,MAAAzI,GAAA,KAEA+G,KACAA,EAAA0B,EAGA,IAAA9C,MACA0B,EAAA,EACAQ,GAAA,EAEAF,KAEAT,KAGAmB,KAEAG,IAEAhC,GAAAM,EAAA,SAAAG,EAAAvG,GACA,IAAA4B,GAAA2E,GAIA,MAFAD,GAAAtG,GAAAuG,QACAoB,GAAA7E,KAAA9C,EAIA,IAAAiI,GAAA1B,EAAAvI,MAAA,EAAAuI,EAAAvK,OAAA,GACAkM,EAAAD,EAAAjM,MACA,OAAA,KAAAkM,GACA5B,EAAAtG,EAAAuG,OACAoB,GAAA7E,KAAA9C,KAGA8H,EAAA9H,GAAAkI,MAEAzC,GAAAwC,EAAA,SAAAE,GACA,IAAA/B,EAAA+B,GACA,KAAA,IAAAvM,OAAA,oBAAAoE,EAAA,sCAAAiI,EAAAG,KAAA,MAEAtB,GAAAqB,EAAA,WACAD,IACA,IAAAA,GACA5B,EAAAtG,EAAAuG,UAMAkB,IACAf,IA6GA,QAAA2B,GAAApJ,EAAAmC,GAKA,IAJA,GAAApC,IAAA,EACAhD,EAAAiD,EAAAA,EAAAjD,OAAA,EACAuC,EAAAW,MAAAlD,KAEAgD,EAAAhD,GACAuC,EAAAS,GAAAoC,EAAAnC,EAAAD,GAAAA,EAAAC,EAEA,OAAAV,GAWA,QAAA+J,IAAAC,EAAAtJ,GACA,GAAAD,IAAA,EACAhD,EAAAuM,EAAAvM,MAGA,KADAiD,IAAAA,EAAAC,MAAAlD,MACAgD,EAAAhD,GACAiD,EAAAD,GAAAuJ,EAAAvJ,EAEA,OAAAC,GAUA,QAAAuJ,IAAA9L,GACA,MAAAA,IAAAA,EAAAoE,SAAAA,OAAApE,EAAA,KAgCA,QAAA+L,IAAA/L,GAEA,GAAA,gBAAAA,GACA,MAAAA,EAEA,IAAAQ,EAAAR,GACA,MAAAgM,IAAAA,GAAA3M,KAAAW,GAAA,EAEA,IAAA6B,GAAA7B,EAAA,EACA,OAAA,KAAA6B,GAAA,EAAA7B,IAAAiM,GAAA,KAAApK,EAYA,QAAAqK,IAAA3J,EAAAP,EAAAmK,GACA,GAAA7J,IAAA,EACAhD,EAAAiD,EAAAjD,MAEA0C,GAAA,IACAA,GAAAA,EAAA1C,EAAA,EAAAA,EAAA0C,GAEAmK,EAAAA,EAAA7M,EAAAA,EAAA6M,EACAA,EAAA,IACAA,GAAA7M,GAEAA,EAAA0C,EAAAmK,EAAA,EAAAA,EAAAnK,IAAA,EACAA,KAAA,CAGA,KADA,GAAAH,GAAAW,MAAAlD,KACAgD,EAAAhD,GACAuC,EAAAS,GAAAC,EAAAD,EAAAN,EAEA,OAAAH,GAYA,QAAAuK,IAAA7J,EAAAP,EAAAmK,GACA,GAAA7M,GAAAiD,EAAAjD,MAEA,OADA6M,GAAA/J,SAAA+J,EAAA7M,EAAA6M,GACAnK,GAAAmK,GAAA7M,EAAAiD,EAAA2J,GAAA3J,EAAAP,EAAAmK,GAYA,QAAAE,IAAAC,EAAAC,GAGA,IAFA,GAAAjK,GAAAgK,EAAAhN,OAEAgD,KAAAkH,EAAA+C,EAAAD,EAAAhK,GAAA,IAAA,IACA,MAAAA,GAYA,QAAAkK,IAAAF,EAAAC,GAIA,IAHA,GAAAjK,IAAA,EACAhD,EAAAgN,EAAAhN,SAEAgD,EAAAhD,GAAAkK,EAAA+C,EAAAD,EAAAhK,GAAA,IAAA,IACA,MAAAA,GA+BA,QAAAmK,IAAAC,GACA,MAAAA,GAAAC,MAAAC,IAwBA,QAAAC,IAAA7M,GACA,MAAA,OAAAA,EAAA,GAAA+L,GAAA/L,GA4BA,QAAA8M,IAAAJ,EAAAK,EAAAC,GAEA,GADAN,EAAAG,GAAAH,GACAA,IAAAM,GAAA5K,SAAA2K,GACA,MAAAL,GAAA3L,QAAAkM,GAAA,GAEA,KAAAP,KAAAK,EAAAhB,GAAAgB,IACA,MAAAL,EAEA,IAAAJ,GAAAG,GAAAC,GACAH,EAAAE,GAAAM,GACA/K,EAAAwK,GAAAF,EAAAC,GACAJ,EAAAE,GAAAC,EAAAC,GAAA,CAEA,OAAAH,IAAAE,EAAAtK,EAAAmK,GAAAT,KAAA,IAQA,QAAAwB,IAAAtN,GAOA,MANAA,GAAAA,EAAAiN,WAAA9L,QAAAoM,GAAA,IACAvN,EAAAA,EAAA+M,MAAAS,IAAA,GAAArM,QAAA,IAAA,IACAnB,EAAAA,EAAAA,EAAAyN,MAAAC,OACA1N,EAAAA,EAAA2N,IAAA,SAAAC,GACA,MAAAV,IAAAU,EAAAzM,QAAA0M,GAAA,OAuFA,QAAAC,IAAAhE,EAAA9G,GACA,GAAA+K,KAEAvE,GAAAM,EAAA,SAAAoB,EAAAxH,GAsBA,QAAAsK,GAAArF,EAAAsF,GACA,GAAAC,GAAAnC,EAAAoC,EAAA,SAAAC,GACA,MAAAzF,GAAAyF,IAEAF,GAAA1H,KAAAyH,GACA/C,EAAAnL,MAAA,KAAAmO,GA1BA,GAAAC,EAEA,IAAA7I,GAAA4F,GACAiD,EAAAnC,GAAAd,GACAA,EAAAiD,EAAAlL,MAEA8K,EAAArK,GAAAyK,EAAA3K,OAAA2K,EAAAzO,OAAA,EAAAsO,EAAA9C,OACA,IAAA,IAAAA,EAAAxL,OAEAqO,EAAArK,GAAAwH,MACA,CAEA,GADAiD,EAAAb,GAAApC,GACA,IAAAA,EAAAxL,QAAA,IAAAyO,EAAAzO,OACA,KAAA,IAAAJ,OAAA,yDAGA6O,GAAAlL,MAEA8K,EAAArK,GAAAyK,EAAA3K,OAAAwK,MAYAnE,EAAAkE,EAAA/K,GAMA,QAAAqL,IAAAtL,GACAuL,WAAAvL,EAAA,GAGA,QAAAwL,IAAAC,GACA,MAAArM,GAAA,SAAAY,EAAA7C,GACAsO,EAAA,WACAzL,EAAAhD,MAAA,KAAAG,OAqBA,QAAAuO,MACA/P,KAAAgQ,KAAAhQ,KAAAiQ,KAAA,KACAjQ,KAAAgB,OAAA,EAGA,QAAAkP,IAAAC,EAAAC,GACAD,EAAAnP,OAAA,EACAmP,EAAAH,KAAAG,EAAAF,KAAAG,EA8CA,QAAAC,IAAAC,EAAAjF,EAAAkF,GAOA,QAAAC,GAAAC,EAAAC,EAAApM,GACA,GAAA,MAAAA,GAAA,kBAAAA,GACA,KAAA,IAAA1D,OAAA,mCAMA,OAJA+P,GAAAC,SAAA,EACAhK,GAAA6J,KACAA,GAAAA,IAEA,IAAAA,EAAAzP,QAAA2P,EAAAE,OAEAC,GAAA,WACAH,EAAAI,WAGAtG,EAAAgG,EAAA,SAAAlF,GACA,GAAApD,IACAsI,KAAAlF,EACAjH,SAAAA,GAAAgB,EAGAoL,GACAC,EAAAK,OAAAC,QAAA9I,GAEAwI,EAAAK,OAAAlJ,KAAAK,SAGA2I,IAAAH,EAAAO,UAGA,QAAAC,GAAA/F,GACA,MAAA3H,GAAA,SAAAjC,GACA4P,GAAA,EAEA3G,EAAAW,EAAA,SAAAG,GACAd,EAAA4G,EAAA,SAAAf,EAAAtM,GACA,GAAAsM,IAAA/E,EAEA,MADA8F,GAAAC,OAAAtN,EAAA,IACA,IAIAuH,EAAAjH,SAAAjD,MAAAkK,EAAA/J,GAEA,MAAAA,EAAA,IACAmP,EAAAY,MAAA/P,EAAA,GAAA+J,EAAAkF,QAIAW,GAAAT,EAAAtF,YAAAsF,EAAAa,QACAb,EAAAc,cAGAd,EAAAE,QACAF,EAAAI,QAEAJ,EAAAO,YA7DA,GAAA,MAAA7F,EACAA,EAAA,MACA,IAAA,IAAAA,EACA,KAAA,IAAAzK,OAAA,+BA8DA,IAAAwQ,GAAA,EACAC,KACAV,GACAK,OAAA,GAAAjB,IACA1E,YAAAA,EACAkF,QAAAA,EACAmB,UAAApM,EACAmM,YAAAnM,EACAkM,OAAAnG,EAAA,EACAsG,MAAArM,EACAyL,MAAAzL,EACAiM,MAAAjM,EACAsL,SAAA,EACAgB,QAAA,EACA9J,KAAA,SAAA2I,EAAAnM,GACAkM,EAAAC,GAAA,EAAAnM,IAEAuN,KAAA,WACAlB,EAAAI,MAAAzL,EACAqL,EAAAK,OAAAW,SAEAV,QAAA,SAAAR,EAAAnM,GACAkM,EAAAC,GAAA,EAAAnM,IAEA4M,QAAA,WACA,MAAAP,EAAAiB,QAAAR,EAAAT,EAAAtF,aAAAsF,EAAAK,OAAAhQ,QAAA,CACA,GAAAoK,MACAqF,KACA3P,EAAA6P,EAAAK,OAAAhQ,MACA2P,GAAAJ,UAAAzP,EAAAgR,KAAAC,IAAAjR,EAAA6P,EAAAJ,SACA,KAAA,GAAA5P,GAAA,EAAAA,EAAAG,EAAAH,IAAA,CACA,GAAAyP,GAAAO,EAAAK,OAAAnF,OACAT,GAAAtD,KAAAsI,GACAK,EAAA3I,KAAAsI,EAAAK,MAGA,IAAAE,EAAAK,OAAAhQ,QACA2P,EAAAgB,QAEAP,GAAA,EACAC,EAAAvJ,KAAAsD,EAAA,IAEAgG,IAAAT,EAAAtF,aACAsF,EAAAe,WAGA,IAAA7M,GAAA4D,EAAA0I,EAAA/F,GACAkF,GAAAG,EAAA5L,KAGA7D,OAAA,WACA,MAAA2P,GAAAK,OAAAhQ,QAEA8H,QAAA,WACA,MAAAsI,IAEAC,YAAA,WACA,MAAAA,IAEAR,KAAA,WACA,MAAAF,GAAAK,OAAAhQ,OAAAoQ,IAAA,GAEAY,MAAA,WACArB,EAAAiB,QAAA,GAEAK,OAAA,WACA,GAAAtB,EAAAiB,UAAA,EAAA,CAGAjB,EAAAiB,QAAA,CAIA,KAAA,GAHAM,GAAAJ,KAAAC,IAAApB,EAAAtF,YAAAsF,EAAAK,OAAAhQ,QAGAmR,EAAA,EAAAA,GAAAD,EAAAC,IACArB,GAAAH,EAAAO,WAIA,OAAAP,GAiFA,QAAAyB,IAAA9B,EAAAC,GACA,MAAAF,IAAAC,EAAA,EAAAC,GAgEA,QAAA8B,IAAA3M,EAAA4M,EAAAlM,EAAA9B,GACAA,EAAAiB,EAAAjB,GAAAgB,GACAiN,GAAA7M,EAAA,SAAA8M,EAAA7R,EAAA2D,GACA8B,EAAAkM,EAAAE,EAAA,SAAA3J,EAAAuB,GACAkI,EAAAlI,EACA9F,EAAAuE,MAEA,SAAAA,GACAvE,EAAAuE,EAAAyJ,KAsGA,QAAAG,IAAAhO,EAAAuF,EAAA3F,EAAAC,GACA,GAAAf,KACAkB,GAAAuF,EAAA,SAAAwI,EAAAxO,EAAAa,GACAR,EAAAmO,EAAA,SAAA3J,EAAA6J,GACAnP,EAAAA,EAAAuB,OAAA4N,OACA7N,EAAAgE,MAEA,SAAAA,GACAvE,EAAAuE,EAAAtF,KAiCA,QAAAoP,IAAAtO,GACA,MAAA,UAAAkE,EAAAnC,EAAA9B,GACA,MAAAD,GAAAkO,GAAAhK,EAAAnC,EAAA9B,IA0FA,QAAAsO,IAAAlR,GACA,MAAAA,GAGA,QAAAmR,IAAApO,EAAAqO,EAAAC,GACA,MAAA,UAAA/I,EAAArB,EAAAvC,EAAAvB,GACA,QAAAwD,GAAAQ,GACAhE,IACAgE,EACAhE,EAAAgE,GAEAhE,EAAA,KAAAkO,GAAA,KAIA,QAAAC,GAAAR,EAAArI,EAAA7F,GACA,MAAAO,OACAuB,GAAAoM,EAAA,SAAA3J,EAAAuB,GACAvF,IACAgE,GACAhE,EAAAgE,GACAhE,EAAAuB,GAAA,GACA0M,EAAA1I,KACAvF,EAAA,KAAAkO,GAAA,EAAAP,IACA3N,EAAAuB,GAAA,IAGA9B,MAXAA,IAcAP,UAAA/C,OAAA,GACA6D,EAAAA,GAAAS,EACAb,EAAAuF,EAAArB,EAAAqK,EAAA3K,KAEAxD,EAAAuB,EACAvB,EAAAA,GAAAS,EACAc,EAAAuC,EACAlE,EAAAuF,EAAAgJ,EAAA3K,KAKA,QAAA4K,IAAA7I,EAAAoI,GACA,MAAAA,GAsFA,QAAAU,IAAAxD,GACA,MAAAjM,GAAA,SAAAY,EAAA7C,GACA6C,EAAAhD,MAAA,KAAAG,EAAAsD,QAAArB,EAAA,SAAAoF,EAAArH,GACA,gBAAA2R,WACAtK,EACAsK,QAAA5B,OACA4B,QAAA5B,MAAA1I,GAEAsK,QAAAzD,IACAjF,EAAAjJ,EAAA,SAAAgR,GACAW,QAAAzD,GAAA8C,aA2DA,QAAAY,IAAA/O,EAAAxB,EAAAyB,GASA,QAAAwO,GAAAjK,EAAAwK,GACA,MAAAxK,GAAAvE,EAAAuE,GACAwK,MACAhP,GAAA+D,GADA9D,EAAA,MAVAA,EAAAmE,EAAAnE,GAAAgB,EAEA,IAAA8C,GAAA3E,EAAA,SAAAoF,EAAArH,GACA,MAAAqH,GAAAvE,EAAAuE,IACArH,EAAAsG,KAAAgL,OACAjQ,GAAAxB,MAAArB,KAAAwB,KASAsR,GAAA,MAAA,GA0BA,QAAAQ,IAAAlN,EAAAvD,EAAAyB,GACAA,EAAAmE,EAAAnE,GAAAgB,EACA,IAAA8C,GAAA3E,EAAA,SAAAoF,EAAArH,GACA,MAAAqH,GAAAvE,EAAAuE,GACAhG,EAAAxB,MAAArB,KAAAwB,GAAA4E,EAAAgC,OACA9D,GAAAjD,MAAA,MAAA,MAAAyD,OAAAtD,KAEA4E,GAAAgC,GAuBA,QAAAmL,IAAAlP,EAAAxB,EAAAyB,GACAgP,GAAAjP,EAAA,WACA,OAAAxB,EAAAxB,MAAArB,KAAA+D,YACAO,GAwCA,QAAAkP,IAAA3Q,EAAAwB,EAAAC,GAGA,QAAA8D,GAAAS,GACA,MAAAA,GAAAvE,EAAAuE,OACAhG,GAAAiQ,GAGA,QAAAA,GAAAjK,EAAAwK,GACA,MAAAxK,GAAAvE,EAAAuE,GACAwK,MACAhP,GAAA+D,GADA9D,EAAA,MATAA,EAAAmE,EAAAnE,GAAAgB,GAaAzC,EAAAiQ,GAGA,QAAAW,IAAArN,GACA,MAAA,UAAA1E,EAAAsC,EAAAM,GACA,MAAA8B,GAAA1E,EAAA4C,IA+DA,QAAAoP,IAAAhO,EAAAU,EAAA9B,GACAqF,EAAAjE,EAAA+N,GAAArN,GAAA9B,GAwBA,QAAAqP,IAAAjO,EAAAiD,EAAAvC,EAAA9B,GACAoE,EAAAC,GAAAjD,EAAA+N,GAAArN,GAAA9B,GA2DA,QAAAsP,IAAAvP,GACA,MAAAD,GAAA,SAAA5C,EAAA8C,GACA,GAAAuP,IAAA,CACArS,GAAAsG,KAAA,WACA,GAAAgM,GAAA/P,SACA8P,GACA/C,GAAA,WACAxM,EAAAjD,MAAA,KAAAyS,KAGAxP,EAAAjD,MAAA,KAAAyS,KAGAzP,EAAAhD,MAAArB,KAAAwB,GACAqS,GAAA,IAIA,QAAAE,IAAA3J,GACA,OAAAA,EA4EA,QAAA4J,IAAAvP,EAAAuF,EAAA5D,EAAA9B,GACAA,EAAAiB,EAAAjB,GAAAgB,EACA,IAAA2E,KACAxF,GAAAuF,EAAA,SAAAwI,EAAAxO,EAAAM,GACA8B,EAAAoM,EAAA,SAAA3J,EAAAuB,GACAvB,EACAvE,EAAAuE,IAEAuB,GACAH,EAAAnC,MAAA9D,MAAAA,EAAAtC,MAAA8Q,IAEAlO,QAGA,SAAAuE,GACAA,EACAvE,EAAAuE,GAEAvE,EAAA,KAAA+I,EAAApD,EAAAgK,KAAA,SAAAxT,EAAAyT,GACA,MAAAzT,GAAAuD,MAAAkQ,EAAAlQ,QACAe,EAAA,aAuGA,QAAAoP,IAAA9P,EAAA+P,GAIA,QAAAhM,GAAAS,GACA,MAAAA,GAAAR,EAAAQ,OACA0C,GAAAnD,GALA,GAAAC,GAAAI,EAAA2L,GAAA9O,GACAiG,EAAAqI,GAAAvP,EAMA+D,KAoDA,QAAAiM,IAAA9L,EAAAI,EAAAvC,EAAA9B,GACAA,EAAAiB,EAAAjB,GAAAgB,EACA,IAAAgP,KACApL,GAAAX,EAAAI,EAAA,SAAA2D,EAAAtH,EAAAoD,GACAhC,EAAAkG,EAAAtH,EAAA,SAAA6D,EAAAtF,GACA,MAAAsF,GAAAT,EAAAS,IACAyL,EAAAtP,GAAAzB,MACA6E,SAEA,SAAAS,GACAvE,EAAAuE,EAAAyL,KAsEA,QAAAC,IAAAhM,EAAAvD,GACA,MAAAA,KAAAuD,GAwCA,QAAAiM,IAAAnQ,EAAAoQ,GACA,GAAAnC,GAAAxM,OAAA4O,OAAA,MACAC,EAAA7O,OAAA4O,OAAA,KACAD,GAAAA,GAAA7B,EACA,IAAAgC,GAAAxQ,EAAA,SAAA5C,EAAA8C,GACA,GAAAU,GAAAyP,EAAApT,MAAA,KAAAG,EACA+S,IAAAjC,EAAAtN,GACA8L,GAAA,WACAxM,EAAAjD,MAAA,KAAAiR,EAAAtN,MAEAuP,GAAAI,EAAA3P,GACA2P,EAAA3P,GAAA8C,KAAAxD,IAEAqQ,EAAA3P,IAAAV,GACAD,EAAAhD,MAAA,KAAAG,EAAAsD,QAAArB,EAAA,SAAAjC,GACA8Q,EAAAtN,GAAAxD,CACA,IAAAmP,GAAAgE,EAAA3P,SACA2P,GAAA3P,EACA,KAAA,GAAArE,GAAA,EAAAG,EAAA6P,EAAA3P,OAAAL,EAAAG,EAAAH,IACAgQ,EAAAhQ,GAAAU,MAAA,KAAAG,UAOA,OAFAoT,GAAAtC,KAAAA,EACAsC,EAAAC,WAAAxQ,EACAuQ,EA8CA,QAAAE,IAAArQ,EAAA2G,EAAA9G,GACAA,EAAAA,GAAAgB,CACA,IAAA2E,GAAA7E,EAAAgG,QAEA3G,GAAA2G,EAAA,SAAAG,EAAAvG,EAAAV,GACAiH,EAAA9H,EAAA,SAAAoF,EAAArH,GACAA,EAAAR,QAAA,IACAQ,EAAAA,EAAA,IAEAyI,EAAAjF,GAAAxD,EACA8C,EAAAuE,OAEA,SAAAA,GACAvE,EAAAuE,EAAAoB,KAsEA,QAAA8K,IAAA3J,EAAA9G,GACAwQ,GAAAnL,EAAAyB,EAAA9G,GAuBA,QAAA0Q,IAAA5J,EAAAzC,EAAArE,GACAwQ,GAAApM,EAAAC,GAAAyC,EAAA9G,GAuGA,QAAA2Q,IAAA3E,EAAAjF,GACA,MAAAgF,IAAA,SAAA6E,EAAArQ,GACAyL,EAAA4E,EAAA,GAAArQ,IACAwG,EAAA,GA2BA,QAAA8J,IAAA7E,EAAAjF,GAEA,GAAAsF,GAAAsE,GAAA3E,EAAAjF,EA4CA,OAzCAsF,GAAA7I,KAAA,SAAA2I,EAAA2E,EAAA9Q,GAEA,GADA,MAAAA,IAAAA,EAAAgB,GACA,kBAAAhB,GACA,KAAA,IAAA1D,OAAA,mCAMA,IAJA+P,EAAAC,SAAA,EACAhK,GAAA6J,KACAA,GAAAA,IAEA,IAAAA,EAAAzP,OAEA,MAAA8P,IAAA,WACAH,EAAAI,SAIAqE,GAAAA,GAAA,CAEA,KADA,GAAAC,GAAA1E,EAAAK,OAAAhB,KACAqF,GAAAD,GAAAC,EAAAD,UACAC,EAAAA,EAAAjN,IAGAqC,GAAAgG,EAAA,SAAAlF,GACA,GAAApD,IACAsI,KAAAlF,EACA6J,SAAAA,EACA9Q,SAAAA,EAGA+Q,GACA1E,EAAAK,OAAAsE,aAAAD,EAAAlN,GAEAwI,EAAAK,OAAAlJ,KAAAK,KAGA2I,GAAAH,EAAAO,gBAIAP,GAAAM,QAEAN,EAwCA,QAAA4E,IAAAnK,EAAA9G,GAEA,MADAA,GAAAiB,EAAAjB,GAAAgB,GACAsB,GAAAwE,GACAA,EAAApK,WACAyJ,GAAAW,EAAA,SAAAG,GACAA,EAAAjH,KAFAA,IADAA,EAAA,GAAAX,WAAA,yDA+BA,QAAA6R,IAAAvR,EAAAqO,EAAAlM,EAAA9B,GACA,GAAAmR,GAAAzS,GAAAjC,KAAAkD,GAAAyR,SACArD,IAAAoD,EAAAnD,EAAAlM,EAAA9B,GA0CA,QAAAqR,IAAAtR,GACA,MAAAD,GAAA,SAAA5C,EAAAoU,GAmBA,MAlBApU,GAAAsG,KAAArE,EAAA,SAAAoF,EAAAgN,GACA,GAAAhN,EACA+M,EAAA,MACArE,MAAA1I,QAEA,CACA,GAAAnH,GAAA,IACA,KAAAmU,EAAA7U,OACAU,EAAAmU,EAAA,GACAA,EAAA7U,OAAA,IACAU,EAAAmU,GAEAD,EAAA,MACAlU,MAAAA,QAKA2C,EAAAhD,MAAArB,KAAAwB,KAIA,QAAAsU,IAAArR,EAAAuF,EAAA5D,EAAA9B,GACA0P,GAAAvP,EAAAuF,EAAA,SAAAtI,EAAAmD,GACAuB,EAAA1E,EAAA,SAAAmH,EAAAuB,GACAvB,EACAhE,EAAAgE,GAEAhE,EAAA,MAAAuF,MAGA9F,GAiGA,QAAAyR,IAAA3K,GACA,GAAAnB,EASA,OARArD,IAAAwE,GACAnB,EAAAoD,EAAAjC,EAAAuK,KAEA1L,KACAa,EAAAM,EAAA,SAAAG,EAAAvG,GACAiF,EAAAjF,GAAA2Q,GAAA5U,KAAAf,KAAAuL,MAGAtB,EA4DA,QAAA+L,IAAAtU,GACA,MAAA,YACA,MAAAA,IA0EA,QAAAuU,IAAAC,EAAA3K,EAAAjH,GASA,QAAA6R,GAAAC,EAAAjW,GACA,GAAA,gBAAAA,GACAiW,EAAAC,OAAAlW,EAAAkW,OAAAC,EAEAF,EAAAG,aAAA,kBAAApW,GAAAqW,SAAArW,EAAAqW,SAAAR,IAAA7V,EAAAqW,UAAAC,OACA,CAAA,GAAA,gBAAAtW,IAAA,gBAAAA,GAGA,KAAA,IAAAS,OAAA,oCAFAwV,GAAAC,OAAAlW,GAAAmW,GAmBA,QAAAI,KACAnL,EAAA,SAAA1C,GACAA,GAAA8N,IAAAC,EAAAP,MACAzG,WAAA8G,EAAAE,EAAAL,aAAAI,IAEArS,EAAAjD,MAAA,KAAA0C,aAtCA,GAAAuS,GAAA,EACAG,EAAA,EAEAG,GACAP,MAAAC,EACAC,aAAAP,GAAAS,GAuBA,IARA1S,UAAA/C,OAAA,GAAA,kBAAAkV,IACA5R,EAAAiH,GAAAjG,EACAiG,EAAA2K,IAEAC,EAAAS,EAAAV,GACA5R,EAAAA,GAAAgB,GAGA,kBAAAiG,GACA,KAAA,IAAA3K,OAAA,oCAGA,IAAA+V,GAAA,CAWAD,KA2BA,QAAAG,IAAAX,EAAA3K,GAKA,MAJAA,KACAA,EAAA2K,EACAA,EAAA,MAEA9R,EAAA,SAAA5C,EAAA8C,GACA,QAAAkI,GAAA3H,GACA0G,EAAAlK,MAAA,KAAAG,EAAAsD,QAAAD,KAGAqR,EAAAD,GAAAC,EAAA1J,EAAAlI,GAAA2R,GAAAzJ,EAAAlI,KAoEA,QAAAwS,IAAA1L,EAAA9G,GACAwQ,GAAAvC,GAAAnH,EAAA9G,GA8HA,QAAAyS,IAAArR,EAAAU,EAAA9B,GAWA,QAAA0S,GAAAC,EAAAC,GACA,GAAAzW,GAAAwW,EAAAE,SACAjD,EAAAgD,EAAAC,QACA,OAAA1W,GAAAyT,GAAA,EAAAzT,EAAAyT,EAAA,EAAA,EAbAjF,GAAAvJ,EAAA,SAAA8M,EAAAlO,GACA8B,EAAAoM,EAAA,SAAA3J,EAAAsO,GACA,MAAAtO,GAAAvE,EAAAuE,OACAvE,GAAA,MAAA5C,MAAA8Q,EAAA2E,SAAAA,OAEA,SAAAtO,EAAAoB,GACA,MAAApB,GAAAvE,EAAAuE,OACAvE,GAAA,KAAA+I,EAAApD,EAAAgK,KAAA+C,GAAAjS,EAAA,aAiCA,QAAAqS,IAAAC,EAAAC,EAAAC,GAIA,QAAAC,KACAC,IACAC,EAAArW,MAAA,KAAA0C,WACA4T,aAAAC,IAIA,QAAAC,KACA,GAAAnI,GAAA2H,EAAA3H,MAAA,YACA6B,EAAA,GAAA3Q,OAAA,sBAAA8O,EAAA,eACA6B,GAAA1Q,KAAA,YACA0W,IACAhG,EAAAgG,KAAAA,GAEAE,GAAA,EACAC,EAAAnG,GAlBA,GAAAmG,GAAAE,EACAH,GAAA,CAoBA,OAAArT,GAAA,SAAA5C,EAAAsW,GACAJ,EAAAI,EAEAF,EAAAhI,WAAAiI,EAAAP,GACAD,EAAAhW,MAAA,KAAAG,EAAAsD,OAAA0S,MAkBA,QAAAO,IAAArU,EAAAmK,EAAAmK,EAAArN,GAKA,IAJA,GAAA3G,IAAA,EACAhD,EAAAiX,GAAAC,IAAArK,EAAAnK,IAAAsU,GAAA,IAAA,GACAzU,EAAAW,MAAAlD,GAEAA,KACAuC,EAAAoH,EAAA3J,IAAAgD,GAAAN,EACAA,GAAAsU,CAEA,OAAAzU,GAmBA,QAAA4U,IAAAC,EAAAzP,EAAAvC,EAAA9B,GACA+T,GAAAN,GAAA,EAAAK,EAAA,GAAAzP,EAAAvC,EAAA9B,GAkGA,QAAAgU,IAAA5S,EAAA6S,EAAAnS,EAAA9B,GACA,IAAAP,UAAA/C,SACAsD,EAAA8B,EACAA,EAAAmS,EACAA,EAAA3R,GAAAlB,UAEApB,EAAAiB,EAAAjB,GAAAgB,GAEAqE,EAAAjE,EAAA,SAAA0E,EAAAoO,EAAA3T,GACAuB,EAAAmS,EAAAnO,EAAAoO,EAAA3T,IACA,SAAAgE,GACAvE,EAAAuE,EAAA0P,KAiBA,QAAAE,IAAApU,GACA,MAAA,YACA,OAAAA,EAAAwQ,YAAAxQ,GAAAhD,MAAA,KAAA0C,YAuCA,QAAA2U,IAAA7V,EAAAuD,EAAA9B,GAEA,GADAA,EAAAmE,EAAAnE,GAAAgB,IACAzC,IAAA,MAAAyB,GAAA,KACA,IAAA8D,GAAA3E,EAAA,SAAAoF,EAAArH,GACA,MAAAqH,GAAAvE,EAAAuE,GACAhG,IAAAuD,EAAAgC,OACA9D,GAAAjD,MAAA,MAAA,MAAAyD,OAAAtD,KAEA4E,GAAAgC,GA0BA,QAAAuQ,IAAA9V,EAAAwB,EAAAC,GACAoU,GAAA,WACA,OAAA7V,EAAAxB,MAAArB,KAAA+D,YACAM,EAAAC,GA4DA,QAAAsU,IAAAxN,EAAA9G,GAMA,QAAAuU,GAAArX,GACA,GAAAsX,IAAA1N,EAAApK,OACA,MAAAsD,GAAAjD,MAAA,MAAA,MAAAyD,OAAAtD,GAGA,IAAA4K,GAAA3D,EAAAhF,EAAA,SAAAoF,EAAArH,GACA,MAAAqH,GACAvE,EAAAjD,MAAA,MAAAwH,GAAA/D,OAAAtD,QAEAqX,GAAArX,KAGAA,GAAAsG,KAAAsE,EAEA,IAAAb,GAAAH,EAAA0N,IACAvN,GAAAlK,MAAA,KAAAG,GAnBA,GADA8C,EAAAiB,EAAAjB,GAAAgB,IACAsB,GAAAwE,GAAA,MAAA9G,GAAA,GAAA1D,OAAA,6DACA,KAAAwK,EAAApK,OAAA,MAAAsD,IACA,IAAAwU,GAAA,CAoBAD,OAt2JA,GAwgEAE,IAxgEAhX,GAAA,oBACAC,GAAA,6BAEAgX,GAAAlT,OAAA0B,UAOA1F,GAAAkX,GAAAzK,SAyDAnM,GAAA,kBAGA6W,GAAAnT,OAAA0B,UAOArF,GAAA8W,GAAA1K,SA0BAjM,GAAA,IAGAI,GAAA,aAGAO,GAAA,qBAGAL,GAAA,aAGAE,GAAA,cAGAC,GAAAmW,SA8CA/V,GAAA,EAAA,EACAE,GAAA,uBAsEAO,GAAA,sBAGAC,GAAAiO,KAAAqH,IAuGA9T,GAAAN,EAAA,UAGAI,GAAA,iBAwFAQ,GAAA,kBAAAyT,SAAAA,OAAAlR,SAOArC,GAAAC,OAAAuT,eAcAC,GAAAxT,OAAA0B,UAGAxB,GAAAsT,GAAAtT,eAoBAE,GAAAJ,OAAA4B,KA+DAhB,GAAA,qBAGA6S,GAAAzT,OAAA0B,UAGAjB,GAAAgT,GAAAvT,eAOAS,GAAA8S,GAAAhL,SAGA/H,GAAA+S,GAAA/S,qBAmDAI,GAAA1C,MAAA0C,QAGAE,GAAA,kBAGA0S,GAAA1T,OAAA0B,UAOAX,GAAA2S,GAAAjL,SA2CArH,GAAA,iBAGAC,GAAA,mBAkBAM,GAAA3B,OAAA0B,UAwLA8B,GAAA,sBAkFAO,GAAAV,EAAAD,EAAAuQ,EAAAA,GA2GAxK,GAAAnF,EAAAC,GAiCA2P,GAAAlV,EAAAyK,IA2BAoJ,GAAAhO,EAAAN,GAoBA4P,GAAAxQ,EAAAkP,GAAA,GAqBAuB,GAAApV,EAAAmV,IA8CAE,GAAApW,EAAA,SAAAY,EAAA7C,GACA,MAAAiC,GAAA,SAAAqW,GACA,MAAAzV,GAAAhD,MAAA,KAAAG,EAAAsD,OAAAgV,QAwIA/O,GAAAL,IA8VAqP,GAAAvM,GAAA,gBAAA1N,IAAAA,GAGAka,GAAAxM,GAAA,gBAAAzN,OAAAA,MAGAka,GAAAzM,GAAA,gBAAAxN,OAAAA,MAGAka,GAAAH,IAAAC,IAAAC,IAAAE,SAAA,iBAGAC,GAAAF,GAAAd,OAGAzL,GAAA,EAAA,EAGA0M,GAAAD,GAAAA,GAAA5S,UAAA1D,OACA4J,GAAA2M,GAAAA,GAAA9L,SAAAzK,OAoGAwW,GAAA,kBACAC,GAAA,iCACAC,GAAA,kBACAC,GAAA,iBACAC,GAAA,IAAAJ,GAAA,IACAK,GAAA,IAAAJ,GAAAC,GAAA,IACAI,GAAA,2BACAC,GAAA,MAAAF,GAAA,IAAAC,GAAA,IACAE,GAAA,KAAAR,GAAA,IACAS,GAAA,kCACAC,GAAA,qCACAC,GAAA,UACAC,GAAAL,GAAA,IACAM,GAAA,IAAAV,GAAA,KACAW,GAAA,MAAAH,GAAA,OAAAH,GAAAC,GAAAC,IAAA5N,KAAA,KAAA,IAAA+N,GAAAD,GAAA,KACAG,GAAAF,GAAAD,GAAAE,GACAE,GAAA,OAAAR,GAAAH,GAAA,IAAAA,GAAAI,GAAAC,GAAAN,IAAAtN,KAAA,KAAA,IAEAkB,GAAAiN,OAAAX,GAAA,MAAAA,GAAA,KAAAU,GAAAD,GAAA,KAuCA1M,GAAA,aAwCAG,GAAA,wCACAE,GAAA,IACAG,GAAA,eACAN,GAAA,mCAmIA2M,GAAA,kBAAAC,eAAAA,aACAC,GAAA,gBAAAxK,IAAA,kBAAAA,GAAAyK,QAiBA5C,IADAyC,GACAC,aACAC,GACAxK,EAAAyK,SAEAhM,EAGA,IAAAmB,IAAAjB,GAAAkJ,GAgBAhJ,IAAAvI,UAAAoU,WAAA,SAAAxL,GAMA,MALAA,GAAAyL,KAAAzL,EAAAyL,KAAAzT,KAAAgI,EAAAhI,KAAApI,KAAAgQ,KAAAI,EAAAhI,KACAgI,EAAAhI,KAAAgI,EAAAhI,KAAAyT,KAAAzL,EAAAyL,KAAA7b,KAAAiQ,KAAAG,EAAAyL,KAEAzL,EAAAyL,KAAAzL,EAAAhI,KAAA,KACApI,KAAAgB,QAAA,EACAoP,GAGAL,GAAAvI,UAAAmK,MAAA5B,GAEAA,GAAAvI,UAAAsU,YAAA,SAAA1L,EAAA2L,GACAA,EAAAF,KAAAzL,EACA2L,EAAA3T,KAAAgI,EAAAhI,KACAgI,EAAAhI,KAAAgI,EAAAhI,KAAAyT,KAAAE,EAAA/b,KAAAiQ,KAAA8L,EACA3L,EAAAhI,KAAA2T,EACA/b,KAAAgB,QAAA,GAGA+O,GAAAvI,UAAA8N,aAAA,SAAAlF,EAAA2L,GACAA,EAAAF,KAAAzL,EAAAyL,KACAE,EAAA3T,KAAAgI,EACAA,EAAAyL,KAAAzL,EAAAyL,KAAAzT,KAAA2T,EAAA/b,KAAAgQ,KAAA+L,EACA3L,EAAAyL,KAAAE,EACA/b,KAAAgB,QAAA,GAGA+O,GAAAvI,UAAAyJ,QAAA,SAAAb,GACApQ,KAAAgQ,KAAAhQ,KAAAsV,aAAAtV,KAAAgQ,KAAAI,GAAAF,GAAAlQ,KAAAoQ,IAGAL,GAAAvI,UAAAM,KAAA,SAAAsI,GACApQ,KAAAiQ,KAAAjQ,KAAA8b,YAAA9b,KAAAiQ,KAAAG,GAAAF,GAAAlQ,KAAAoQ,IAGAL,GAAAvI,UAAAqE,MAAA,WACA,MAAA7L,MAAAgQ,MAAAhQ,KAAA4b,WAAA5b,KAAAgQ,OAGAD,GAAAvI,UAAAjD,IAAA,WACA,MAAAvE,MAAAiQ,MAAAjQ,KAAA4b,WAAA5b,KAAAiQ,MA2PA,IAusCA+L,IAvsCAzJ,GAAApJ,EAAAD,EAAA,GA4FA+S,GAAAxY,EAAA,SAAAyY,GACA,MAAAzY,GAAA,SAAAjC,GACA,GAAAoD,GAAA5E,KAEA6E,EAAArD,EAAAA,EAAAR,OAAA,EACA,mBAAA6D,GACArD,EAAA+C,MAEAM,EAAAS,EAGA+M,GAAA6J,EAAA1a,EAAA,SAAA2a,EAAA9X,EAAAQ,GACAR,EAAAhD,MAAAuD,EAAAuX,EAAArX,QAAArB,EAAA,SAAAoF,EAAAuT,GACAvX,EAAAgE,EAAAuT,SAEA,SAAAvT,EAAAoB,GACApF,EAAAxD,MAAAuD,GAAAiE,GAAA/D,OAAAmF,UAwCAoS,GAAA5Y,EAAA,SAAAjC,GACA,MAAAya,IAAA5a,MAAA,KAAAG,EAAAkU,aA0CA5Q,GAAAgF,EAAA2I,IA2BA6J,GAAA3J,GAAAF,IA4CA8J,GAAA9Y,EAAA,SAAA+Y,GACA,GAAAhb,IAAA,MAAAsD,OAAA0X,EACA,OAAApY,GAAA,SAAAqY,EAAAnY,GACA,MAAAA,GAAAjD,MAAArB,KAAAwB,OAqGAkb,GAAA7J,GAAAlJ,EAAAiJ,GAAAK,IAwBA0J,GAAA9J,GAAA3J,EAAA0J,GAAAK,IAsBA2J,GAAA/J,GAAAN,GAAAK,GAAAK,IAgDA4J,GAAA3J,GAAA,OA4QA4J,GAAA3T,EAAAwK,GAAA,GAsFAoJ,GAAAlK,GAAAlJ,EAAAoK,GAAAA,IAsBAiJ,GAAAnK,GAAA3J,EAAA6K,GAAAA,IAqBAkJ,GAAA9T,EAAA6T,GAAA,GAsDAE,GAAApT,EAAAkK,IAqBAmJ,GAAA9S,EAAA2J,IAmBAoJ,GAAAjU,EAAAgU,GAAA,GAqEAE,GAAAnK,GAAA,OAgFAoK,GAAAnU,EAAAkL,GAAAoF,EAAAA,GAoBA8D,GAAApU,EAAAkL,GAAA,EA0GA2H,IADAN,GACAxK,EAAAyK,SACAH,GACAC,aAEA9L,EAGA,IAAAgM,IAAA9L,GAAAmM,IAkVAhZ,GAAAkB,MAAAsD,UAAAxE,MAkIAwa,GAAA1T,EAAAgM,IAmGA2H,GAAApT,EAAAyL,IAkBA4H,GAAAvU,EAAAsU,GAAA,GAwRAE,GAAA9K,GAAAlJ,EAAAiU,QAAAhL,IAuBAiL,GAAAhL,GAAA3J,EAAA0U,QAAAhL,IAsBAkL,GAAA3U,EAAA0U,GAAA,GAwHA3F,GAAApG,KAAAiM,KACA9F,GAAAnG,KAAAqH,IA4EA9C,GAAAlN,EAAAgP,GAAAsB,EAAAA,GAgBAuE,GAAA7U,EAAAgP,GAAA,GAgPAnU,IACA0V,UAAAA,GACAE,gBAAAA,GACAvY,MAAAwY,GACAvP,SAAAA,EACAa,KAAAA,EACAiE,WAAAA,GACAgD,MAAAA,GACAiK,QAAAA,GACAvX,OAAAA,GACAwX,aAAAA,GACAC,SAAAA,GACAG,OAAAA,GACAC,YAAAA,GACAC,aAAAA,GACAC,IAAAA,GACAzJ,SAAAA,GACAG,QAAAA,GACAD,SAAAA,GACAE,OAAAA,GACAyK,KAAAvK,GACAA,UAAAC,GACAhK,OAAAA,EACAT,YAAAA,EACAqJ,aAAAA,GACAuK,WAAAA,GACAlJ,YAAAA,GACAmJ,MAAAA,GACAC,WAAAA,GACAC,YAAAA,GACAC,OAAAA,GACAC,YAAAA,GACAC,aAAAA,GACAjJ,QAAAA,GACAkJ,IAAAA,GACApO,IAAAA,GACAoJ,SAAAA,GACAsB,UAAAA,GACA2D,UAAAA,GACAjJ,eAAAA,GACAkJ,gBAAAA,GACA/I,QAAAA,GACAmH,SAAAA,GACAuC,SAAAnJ,GACAA,cAAAC,GACAG,cAAAA,GACA9E,MAAA4E,GACAM,KAAAA,GACAlD,OAAAA,GACAmD,YAAAA,GACAG,QAAAA,GACAI,WAAAA,GACAyH,OAAAA,GACAC,YAAAA,GACAC,aAAAA,GACAzH,MAAAA,GACAY,UAAAA,GACAoF,IAAAA,GACAnF,OAAAA,GACA2E,aAAA3K,GACA6M,KAAAA,GACAE,UAAAA,GACAC,WAAAA,GACA/G,OAAAA,GACAK,QAAAA,GACAf,MAAAA,GACA8H,WAAAhG,GACA6F,YAAAA,GACA1F,UAAAA,GACAG,UAAAA,GACAE,MAAAA,GACAC,UAAAA,GACAF,OAAAA,GAGA0F,IAAArB,GACAsB,IAAAV,GACAW,QAAA5K,GACA6K,cAAAzB,GACA0B,aAAA7K,GACA8K,UAAA9U,EACA+U,gBAAAnM,GACAoM,eAAAzV,EACA0V,OAAAvM,GACAwM,MAAAxM,GACAyM,MAAAtJ,GACAuJ,OAAA7B,GACA8B,YAAA7B,GACA8B,aAAA7B,GACA8B,SAAA5U,EAGA9K,GAAA,QAAAwE,GACAxE,EAAAka,UAAAA,GACAla,EAAAoa,gBAAAA,GACApa,EAAA6B,MAAAwY,GACAra,EAAA8K,SAAAA,EACA9K,EAAA2L,KAAAA,EACA3L,EAAA4P,WAAAA,GACA5P,EAAA4S,MAAAA,GACA5S,EAAA6c,QAAAA,GACA7c,EAAAsF,OAAAA,GACAtF,EAAA8c,aAAAA,GACA9c,EAAA+c,SAAAA,GACA/c,EAAAkd,OAAAA,GACAld,EAAAmd,YAAAA,GACAnd,EAAAod,aAAAA,GACApd,EAAAqd,IAAAA,GACArd,EAAA4T,SAAAA,GACA5T,EAAA+T,QAAAA,GACA/T,EAAA8T,SAAAA,GACA9T,EAAAgU,OAAAA,GACAhU,EAAAye,KAAAvK,GACAlU,EAAAkU,UAAAC,GACAnU,EAAAmK,OAAAA,EACAnK,EAAA0J,YAAAA,EACA1J,EAAA+S,aAAAA,GACA/S,EAAAsd,WAAAA,GACAtd,EAAAoU,YAAAA,GACApU,EAAAud,MAAAA,GACAvd,EAAAwd,WAAAA,GACAxd,EAAAyd,YAAAA,GACAzd,EAAA0d,OAAAA,GACA1d,EAAA2d,YAAAA,GACA3d,EAAA4d,aAAAA,GACA5d,EAAA2U,QAAAA,GACA3U,EAAA6d,IAAAA,GACA7d,EAAAyP,IAAAA,GACAzP,EAAA6Y,SAAAA,GACA7Y,EAAAma,UAAAA,GACAna,EAAA8d,UAAAA,GACA9d,EAAA6U,eAAAA,GACA7U,EAAA+d,gBAAAA,GACA/d,EAAAgV,QAAAA,GACAhV,EAAAmc,SAAAA,GACAnc,EAAA0e,SAAAnJ,GACAvV,EAAAuV,cAAAC,GACAxV,EAAA2V,cAAAA,GACA3V,EAAA6Q,MAAA4E,GACAzV,EAAA+V,KAAAA,GACA/V,EAAA6S,OAAAA,GACA7S,EAAAgW,YAAAA,GACAhW,EAAAmW,QAAAA,GACAnW,EAAAuW,WAAAA,GACAvW,EAAAge,OAAAA,GACAhe,EAAAie,YAAAA,GACAje,EAAAke,aAAAA,GACAle,EAAAyW,MAAAA,GACAzW,EAAAqX,UAAAA,GACArX,EAAAyc,IAAAA,GACAzc,EAAAsX,OAAAA,GACAtX,EAAAic,aAAA3K,GACAtR,EAAAme,KAAAA,GACAne,EAAAqe,UAAAA,GACAre,EAAAse,WAAAA,GACAte,EAAAuX,OAAAA,GACAvX,EAAA4X,QAAAA,GACA5X,EAAA6W,MAAAA,GACA7W,EAAA2e,WAAAhG,GACA3Y,EAAAwe,YAAAA,GACAxe,EAAA8Y,UAAAA,GACA9Y,EAAAiZ,UAAAA,GACAjZ,EAAAmZ,MAAAA,GACAnZ,EAAAoZ,UAAAA,GACApZ,EAAAkZ,OAAAA,GACAlZ,EAAA4e,IAAArB,GACAvd,EAAA2f,SAAAnC,GACAxd,EAAA4f,UAAAnC,GACAzd,EAAA6e,IAAAV,GACAne,EAAA6f,SAAAxB,GACAre,EAAA8f,UAAAxB,GACAte,EAAA+f,KAAA7C,GACAld,EAAAggB,UAAA7C,GACAnd,EAAAigB,WAAA7C,GACApd,EAAA8e,QAAA5K,GACAlU,EAAA+e,cAAAzB,GACAtd,EAAAgf,aAAA7K,GACAnU,EAAAif,UAAA9U,EACAnK,EAAAkf,gBAAAnM,GACA/S,EAAAmf,eAAAzV,EACA1J,EAAAof,OAAAvM,GACA7S,EAAAqf,MAAAxM,GACA7S,EAAAsf,MAAAtJ,GACAhW,EAAAuf,OAAA7B,GACA1d,EAAAwf,YAAA7B,GACA3d,EAAAyf,aAAA7B,GACA5d,EAAA0f,SAAA5U,2LC7jKA,SAAAoV,GAAkBlO,EAAoB9P,EAAeie,EAAgBC,EAAazG,EAAapH,GAC7F,GAAIrQ,EAAQyX,GAAOzX,EAAQqQ,EACzB,KAAM,IAAIpO,WAAU,yBACf,IAAIgc,EAASC,EAAMpO,EAAOxQ,OAC/B,KAAM,IAAI6e,YAAW,sBAOzB,QAAAC,GAAoBtO,EAAoB9P,EAAeie,EAAgBC,GACrE,GAAID,EAASC,EAAMpO,EAAOxQ,OACxB,KAAM,IAAI6e,YAAW,sBAOzB,QAAAE,GAAqBJ,EAAgBC,EAAa5e,GAChD,GAAI2e,EAASC,EAAM5e,EACjB,KAAM,IAAI6e,YAAW,uNAjDlBG,EAAW9e,EAAW,iBACtB+e,EAAe/e,EAAW,uBAC1Bgf,EAAqBhf,EAAW,6BAChCif,EAAmBjf,EAAW,2BACrCkf,EAAAlf,EAAmC,iBACnCmf,EAAAnf,EAA+C,UAG3Cof,GACFJ,EACAC,EACAF,GAGEM,EAA4D,WAC9D,GAAI5f,GAAW6f,CACf,KAAK7f,EAAI,EAAGA,EAAI2f,EAAsBtf,OAAQL,IAE5C,GADA6f,EAAMF,EAAsB3f,GACxB6f,EAAIC,cAAe,MAAOD,EAGhC,MAAM,IAAI5f,OAAM,8EAuEd8f,IACJA,GAAY,GAAK,EACjBA,EAAY,GAAK,IACjBA,EAAY,GAAK,MACjBA,EAAY,GAAK,QACjBA,EAAY,GAAK,WACjBA,EAAY,GAAK,aACjBA,EAAY,GAAK,cACjB,IAAIC,KACJA,GAAY,GAAK,EACjBA,EAAY,IAAK,IACjBA,EAAY,IAAK,MACjBA,EAAY,IAAK,QACjBA,EAAY,IAAK,WACjBA,EAAY,IAAK,aACjBA,EAAY,IAAK,cACjB,IAAIC,KACJA,GAAa,GAAK,EAClBA,EAAa,GAAK,IAClBA,EAAa,GAAK,MAClBA,EAAa,GAAK,SAClBA,EAAa,GAAK,WAClBA,EAAa,GAAK,aAClBA,EAAa,GAAK,cA8ClB,IAAAC,GAAA,WAwBE,QAAAA,GAAaC,EAAWC,EAAoBC,GAApB,SAAAD,IAAAA,EAAA,OACtB,IAAIpgB,EAEJ,MAAMX,eAAgB6gB,IACpB,MAAO,IAAIA,GAAOC,EAAMC,EAI1B,IAFA/gB,KAAK2f,OAAS,EAEVmB,YAAgBd,GAAYiB,iBAAkB,CAEhDjhB,KAAKyQ,KAAgCqQ,CACrC,IAAIpd,GAAwB,gBAATqd,GAAkCA,EAAO,EACxDlT,EAAsB,gBAATmT,GAA6BA,EAAOhhB,KAAKyQ,KAAKpL,WAC/DrF,MAAK2f,OAASjc,EACd1D,KAAKgB,OAAS6M,EAAMnK,MACf,IAAoB,gBAATod,GAAmB,CAEnC,GAAIA,IAAUA,IAAS,EACrB,KAAM,IAAIjB,YAAW,gCAEvB7f,MAAKgB,OAAS8f,EACd9gB,KAAKyQ,KAAO,GAAI8P,GAAoBO,OAC/B,IAAIT,EAAAa,kBAAkBJ,GAE3B9gB,KAAKyQ,KAAO,GAAIyP,GAAsBY,GACtC9gB,KAAKgB,OAAS8f,EAAKK,eACd,IAAId,EAAAe,cAAcN,GAGvB9gB,KAAKyQ,KAAO,GAAIyP,GAAoCY,GACpD9gB,KAAKgB,OAAS8f,EAAKK,eACd,IAAIL,YAAgBD,GAAQ,CAEjC,GAAIQ,GAAmBP,CACvB9gB,MAAKyQ,KAAO,GAAI8P,GAAoBO,EAAK9f,QACzChB,KAAKgB,OAAS8f,EAAK9f,OACnBqgB,EAAQC,KAAKthB,UACR,IAAIkE,MAAM0C,QAAQka,IAAkB,MAARA,GAAgC,gBAATA,IAAwC,gBAAZA,GAAK,GAAkB,CAG3G,IADA9gB,KAAKyQ,KAAO,GAAI8P,GAAoBO,EAAK9f,QACpCL,EAAI,EAAGA,EAAImgB,EAAK9f,OAAQL,IAC3BX,KAAKyQ,KAAK8Q,WAAW5gB,EAAGmgB,EAAKngB,GAE/BX,MAAKgB,OAAS8f,EAAK9f,WACd,IAAoB,gBAAT8f,GAEhB9gB,KAAKgB,OAAS6f,EAAOM,WAAWL,EAAMC,GACtC/gB,KAAKyQ,KAAO,GAAI8P,GAAoBvgB,KAAKgB,QACzChB,KAAKwhB,MAAMV,EAAM,EAAG9gB,KAAKgB,OAAQ+f,OAC5B,CAEL,GAAqB,WAAjBD,EAAW,OAAkB5c,MAAM0C,QAAQka,EAAW,MAOxD,KAAM,IAAIlgB,OAAM,2CAA6CkgB,EAL7D,KADA9gB,KAAKyQ,KAAO,GAAI8P,GAAoBO,EAAKrQ,KAAKzP,QACzCL,EAAI,EAAGA,EAAImgB,EAAKrQ,KAAKzP,OAAQL,IAChCX,KAAKyQ,KAAK8Q,WAAW5gB,EAAGmgB,EAAKrQ,KAAK9P,GAEpCX,MAAKgB,OAAS8f,EAAKrQ,KAAKzP,QA6jChC,MApjCgB6f,GAAAY,wBAAd,WACE,MAAOnB,GAAsBpD,OAAO,SAACsD,GAAQ,MAAAA,GAAIC,iBAGrCI,EAAAa,uBAAd,WACE,MAAOnB,IAGKM,EAAAc,uBAAd,SAAqCnB,GACnCD,EAAsBC,GAKjBK,EAAArZ,UAAAoa,cAAP,WACE,MAAO5hB,MAAKyQ,MAGPoQ,EAAArZ,UAAAqa,UAAP,WACE,MAAO7hB,MAAK2f,QASPkB,EAAArZ,UAAAsa,IAAP,SAAW9d,EAAetC,GAIxB,MAAIA,GAAQ,EACH1B,KAAK+hB,UAAUrgB,EAAOsC,GAEtBhE,KAAKuhB,WAAW7f,EAAOsC,IAS3B6c,EAAArZ,UAAAwa,IAAP,SAAWhe,GACT,MAAOhE,MAAKiiB,UAAUje,IAajB6c,EAAArZ,UAAAga,MAAP,SAAaU,EAAavC,EAAY3e,EAAsBmhB,GAa1D,GAbwB,SAAAxC,IAAAA,EAAA,GAAY,SAAA3e,IAAAA,EAAShB,KAAKgB,QAAQ,SAAAmhB,IAAAA,EAAA,QAEpC,gBAAXxC,IAETwC,EAAW,GAAKxC,EAChBA,EAAS,EACT3e,EAAShB,KAAKgB,QACa,gBAAXA,KAEhBmhB,EAAW,GAAKnhB,EAChBA,EAAShB,KAAKgB,QAGZ2e,EAAS3f,KAAKgB,QAAU2e,EAAS,EACnC,KAAM,IAAIE,YAAW,kBAEvB,IAAIuC,GAAUhC,EAAAiC,SAASF,EAIvB,OAFAnhB,GAASA,EAAS2e,EAAS3f,KAAKgB,OAAShB,KAAKgB,OAAS2e,EAAS3e,EAChE2e,GAAU3f,KAAK2f,OACRyC,EAAQE,SAASJ,EAEX,IAAXvC,GAAgB3e,IAAWhB,KAAKgB,OAAShB,KAAO,GAAI6gB,GAAO7gB,KAAKyQ,KAAMkP,EAAQ3e,EAAS2e,KAWpFkB,EAAArZ,UAAA+G,SAAP,SAAgB4T,EAAmBze,EAAWmK,GAC5C,GADc,SAAAsU,IAAAA,EAAA,QAAmB,SAAAze,IAAAA,EAAA,GAAW,SAAAmK,IAAAA,EAAM7N,KAAKgB,UACjD0C,GAASmK,GACb,KAAM,IAAIjN,OAAM,gCAAkC8C,EAAQ,MAAQmK,EAEpE,IAAInK,IAAUmK,EACZ,MAAO,EAELA,GAAM7N,KAAKgB,SACb6M,EAAM7N,KAAKgB,OAEb,IAAIohB,GAAUhC,EAAAiC,SAASF,EAGvB,OAAOC,GAAQG,SAAmB,IAAV7e,GAAemK,IAAQ7N,KAAKgB,OAAShB,KAAO,GAAI6gB,GAAO7gB,KAAKyQ,KAAM/M,EAAQ1D,KAAK2f,OAAQ9R,EAAM7N,KAAK2f,UASrHkB,EAAArZ,UAAAgb,OAAP,WAIE,IAAK,GAFDxa,GAAMhI,KAAKgB,OACXyhB,EAAU,GAAIve,OAAM8D,GACfrH,EAAI,EAAGA,EAAIqH,EAAKrH,IACvB8hB,EAAQ9hB,GAAKX,KAAKiiB,UAAUthB,EAE9B,QACEgB,KAAM,SACN8O,KAAMgS,IAOH5B,EAAArZ,UAAAkb,QAAP,WACE,GAA2B/hB,GAAvBgiB,KAAkC3a,EAAMhI,KAAKgB,OAASxB,EAAAojB,kBAAoB5iB,KAAKgB,OAASxB,EAAAojB,iBAC5F,KAAKjiB,EAAI,EAAGA,EAAIqH,EAAKrH,IACnBgiB,EAAO7a,KAAK9H,KAAKiiB,UAAUthB,GAAG4N,SAAS,IAEzC,OAAO,WAAWoU,EAAOvV,KAAK,MAAOpN,KAAKgB,OAASgH,EAAM,QAAU,IAAE,KAQhE6Y,EAAArZ,UAAAqb,cAAP,WACE,GAAIC,GAAW9iB,KAAK4hB,eACpB,IAAIkB,YAAoB5C,GAAuB,CAC7C,GAAI6C,GAAKD,EAASE,cAChBC,EAAKF,EAAGvR,MAEV,OAAoB,KAAhBxR,KAAK2f,QAAkC,IAAlBoD,EAAGG,YAAoBH,EAAG5B,aAAe8B,EAAG9B,YAAcnhB,KAAKgB,SAAW+hB,EAAG5B,WAC7F8B,EAEAA,EAAGjgB,MAAMhD,KAAK2f,OAASoD,EAAGG,WAAYljB,KAAKgB,QAGpD,GAAIiiB,GAAK,GAAIE,aAAYnjB,KAAKgB,QAC5BoiB,EAAU,GAAIvC,GAAOoC,EAEvB,OADAjjB,MAAKshB,KAAK8B,EAAS,EAAG,EAAGpjB,KAAKgB,QACvBiiB,GASJpC,EAAArZ,UAAA6b,aAAP,WACE,GAAIP,GAAW9iB,KAAK4hB,eACpB,IAAIkB,YAAoB5C,GAAuB,CAC7C,GAAI6C,GAAKD,EAASE,cAChBC,EAAKF,EAAGvR,OACRmO,EAAS3f,KAAK2f,OAASoD,EAAGG,WAC1BliB,EAAShB,KAAKgB,MAEhB,OAAO,IAAIsiB,YAAWL,GAAIM,SAAS5D,EAAQA,EAAS3e,GAEpD,GAAIiiB,GAAK,GAAIE,aAAYnjB,KAAKgB,QAC5BoiB,EAAU,GAAIvC,GAAOoC,EAEvB,OADAjjB,MAAKshB,KAAK8B,EAAS,EAAG,EAAGpjB,KAAKgB,QACvB,GAAIsiB,YAAWL,IASnBpC,EAAArZ,UAAAgc,QAAP,SAAe9hB,EAAqCwhB,GAAA,SAAAA,IAAAA,EAAA,EAClD,IAAIO,EACJ,IAAsB,gBAAZ,GACRA,EAAkB,GAAI5C,GAAgBnf,EAAO,YACxC,IAAImf,EAAO6C,SAAShiB,GACzB+hB,EAAkB/hB,MACb,CAAA,GAAsB,gBAAZ,GAGf,KAAM,IAAIiC,WAAU,0DAFpB8f,GAAkB,GAAI5C,IAAiBnf,IAMrCwhB,EAAa,WACfA,EAAa,WACJA,GAAa,aACtBA,GAAa,YAEfA,IAAe,EAGXA,EAAa,IACfA,EAAaljB,KAAKgB,OAASkiB,EACvBA,EAAa,IAEfA,EAAa,GAIjB,IAAIS,GAAY,EAAuBC,EAASH,EAAgBziB,OAC9D6iB,EAAS7jB,KAAKgB,MAEhB,IAAe,IAAX4iB,EACF,OAAO,CAGT,MAAOD,EAAYC,GAAUV,EAAaW,GACpCJ,EAAgBxB,UAAU0B,IAAc3jB,KAAKiiB,UAAUiB,GACzDS,IAGAA,EAAY,EAEdT,GAGF,OAAIS,IAAaC,EACRV,EAAaU,GAEb,GAcJ/C,EAAArZ,UAAA8Z,KAAP,SAAYwC,EAAoBC,EAAiBC,EAAiBC,GAChE,GAD8B,SAAAF,IAAAA,EAAA,GAAiB,SAAAC,IAAAA,EAAA,GAAiB,SAAAC,IAAAA,EAAYjkB,KAAKgB,QAC7EgjB,EAAc,EAChB,KAAM,IAAInE,YAAW,4BAEvB,IAAIoE,EAAY,EACd,KAAM,IAAIpE,YAAW,0BAEvB,IAAIkE,EAAc,EAChB,KAAM,IAAIlE,YAAW,4BAGvB,IAAIoE,GAAaD,GAAeA,GAAehkB,KAAKgB,QAAU+iB,EAAcD,EAAO9iB,OACjF,MAAO,EAGT,IAAIkjB,GAAcpS,KAAKC,IAAIkS,EAAYD,EAAaF,EAAO9iB,OAAS+iB,EAAa/jB,KAAKgB,OAASgjB,EAG/F,IAAIF,YAAkBjD,IAAU7gB,KAAKyQ,eAAgByP,GAAuB,CAC1E,GAAIiE,GAAaL,EAAOlC,eACxB,IAAIuC,YAAsBjE,GACxB,MAAgClgB,MAAKyQ,KAAM2T,OAAOD,EAAYJ,EAAcD,EAAOnE,OAAQqE,EAAchkB,KAAK2f,OAAQqE,EAAcE,EAAclkB,KAAK2f,QAM3J,IAAK,GAAIhf,GAAI,EAAGA,EAAIujB,EAAc,EAAGvjB,GAAK,EACxCmjB,EAAOO,aAAarkB,KAAKskB,YAAYN,EAAcrjB,GAAIojB,EAAcpjB,EAGvE,KAAK,GAAIA,GAAkB,WAAdujB,EAA0BvjB,EAAIujB,EAAavjB,IACtDmjB,EAAOvC,WAAWvhB,KAAKiiB,UAAU+B,EAAcrjB,GAAIojB,EAAcpjB,EAEnE,OAAOujB,IAYFrD,EAAArZ,UAAAxE,MAAP,SAAaU,EAAWmK,GAwBtB,GAxBW,SAAAnK,IAAAA,EAAA,GAAW,SAAAmK,IAAAA,EAAM7N,KAAKgB,QACjC0C,IAAiB,EACjBmK,IAAa,EAETnK,EAAQ,IACVA,GAAS1D,KAAKgB,OACV0C,EAAQ,IACVA,EAAQ,IAGRmK,EAAM,IACRA,GAAO7N,KAAKgB,OACR6M,EAAM,IACRA,EAAM,IAGNA,EAAM7N,KAAKgB,SACb6M,EAAM7N,KAAKgB,QAET0C,EAAQmK,IACVnK,EAAQmK,GAINnK,EAAQ,GAAKmK,EAAM,GAAKnK,EAAQ1D,KAAKgB,QAAU6M,EAAM7N,KAAKgB,OAC5D,KAAM,IAAIJ,OAAM,yBAGlB,OAAO,IAAIigB,GAAO7gB,KAAKyQ,KAAM/M,EAAQ1D,KAAK2f,OAAQ9R,EAAM7N,KAAK2f,SAMxDkB,EAAArZ,UAAA+c,UAAP,SAAiB7gB,EAAmBmK,GAsBlC,GAtBe,SAAAnK,IAAAA,EAAA,GAAmB,SAAAmK,IAAAA,EAAc7N,KAAKgB,QAEjD0C,EAAQ,IACVA,GAAS1D,KAAKgB,OACV0C,EAAQ,IACVA,EAAQ,IAGRmK,EAAM,IACRA,GAAO7N,KAAKgB,OACR6M,EAAM,IACRA,EAAM,IAGNA,EAAM7N,KAAKgB,SACb6M,EAAM7N,KAAKgB,QAET0C,EAAQmK,IACVnK,EAAQmK,GAINnK,EAAQ,GAAKmK,EAAM,GAAKnK,GAAS1D,KAAKgB,QAAU6M,EAAM7N,KAAKgB,OAC7D,KAAM,IAAIJ,OAAM,yBAIlB,OAAO,IAAIigB,GAAO7gB,KAAKyQ,KAAK6Q,KAAK5d,EAAQ1D,KAAK2f,OAAQ9R,EAAM7N,KAAK2f,UAU5DkB,EAAArZ,UAAAgd,KAAP,SAAY9iB,EAAYie,EAAY9R,GAAZ,SAAA8R,IAAAA,EAAA,GAAY,SAAA9R,IAAAA,EAAM7N,KAAKgB,OAK7C,IAHA2e,IAAmB,EACnB9R,IAAa,EAET8R,EAAS,GAAK9R,EAAM7N,KAAKgB,OAC3B,KAAM,IAAI6e,YAAW,qBAChB,IAAIhS,GAAO8R,EAChB,MAAO3f,KAGT,IAAqB,gBAAV0B,GAETA,KAAkB,MACb,IAAqB,IAAjBA,EAAMV,OAAc,CAC7B,GAAIH,GAAOa,EAAM+iB,WAAW,EACxB5jB,GAAO,MACTa,EAAQb,GAIZ,GAAqB,gBAAVa,GACTie,GAAU3f,KAAK2f,OACf9R,GAAO7N,KAAK2f,OACZ3f,KAAKyQ,KAAK+T,KAAK9iB,EAAOie,EAAQ9R,OACzB,IAAInM,EAAMV,OAAS,EAAG,CAG3B,IAFA,GAAI0jB,GAAU7D,EAAOM,WAAWzf,EAAO,QACrCijB,EAAgB9W,EAAM6W,EACjB/E,EAASgF,GACd3kB,KAAKwhB,MAAM9f,EAAOie,EAAQ+E,EAAS,QACnC/E,GAAU+E,CAER/E,GAAS9R,GACX7N,KAAKwhB,MAAM9f,EAAOie,EAAQ9R,EAAM8R,EAAQ,QAG5C,MAAO3f,OAGF6gB,EAAArZ,UAAAod,WAAP,SAAkBjF,EAAgBwB,EAAoB0D,GAAA,SAAAA,IAAAA,GAAA,GACpDlF,KAAoB,EACpBwB,KAA4B,EACvB0D,GACH9E,EAAYJ,EAAQwB,EAAYnhB,KAAKgB,QAEvC2e,GAAU3f,KAAK2f,MACf,IAAIje,GAAgB,CACpB,QAAQyf,GACN,IAAK,GACH,MAAOnhB,MAAKyQ,KAAKwR,UAAUtC,EAC7B,KAAK,GACH,MAAO3f,MAAKyQ,KAAKqU,aAAanF,EAChC,KAAK,GACH,MAAO3f,MAAKyQ,KAAKwR,UAAUtC,GAAW3f,KAAKyQ,KAAKqU,aAAanF,EAAS,IAAM,CAC9E,KAAK,GACH,MAAO3f,MAAKyQ,KAAKsU,aAAapF,EAChC,KAAK,GAGHje,GAAmD,QAAzC1B,KAAKyQ,KAAKwR,UAAUtC,EAAS,IAAM,GAE/C,KAAK,GAGH,MADAje,IAAmD,KAAzC1B,KAAKyQ,KAAKwR,UAAUtC,EAAS,IAAM,IACtCje,EAAQ1B,KAAKyQ,KAAKsU,aAAapF,EACxC,SACE,KAAM,IAAI/e,OAAM,uBAAuBugB,KAItCN,EAAArZ,UAAAwd,WAAP,SAAkBrF,EAAgBwB,EAAoB0D,GAAA,SAAAA,IAAAA,GAAA,GACpDlF,KAAoB,EACpBwB,KAA4B,EACvB0D,GACH9E,EAAYJ,EAAQwB,EAAYnhB,KAAKgB,QAEvC2e,GAAU3f,KAAK2f,MACf,IAAIje,GAAgB,CACpB,QAAQyf,GACN,IAAK,GACH,MAAOnhB,MAAKyQ,KAAKwR,UAAUtC,EAC7B,KAAK,GACH,MAAO3f,MAAKyQ,KAAKwU,aAAatF,EAChC,KAAK,GACH,MAAO3f,MAAKyQ,KAAKwR,UAAUtC,EAAS,GAAM3f,KAAKyQ,KAAKwU,aAAatF,IAAW,CAC9E,KAAK,GACH,MAAO3f,MAAKyQ,KAAKyU,aAAavF,EAChC,KAAK,GAGHje,GAA+C,QAArC1B,KAAKyQ,KAAKwR,UAAUtC,IAAW,IACzCA,GAEF,KAAK,GAGH,MADAje,IAA+C,KAArC1B,KAAKyQ,KAAKwR,UAAUtC,IAAW,IAClCje,EAAQ1B,KAAKyQ,KAAKyU,aAAavF,EAAS,EACjD,SACE,KAAM,IAAI/e,OAAM,uBAAuBugB,KAItCN,EAAArZ,UAAA2d,UAAP,SAAiBxF,EAAgBwB,EAAoB0D,GAOnD,OAPmD,SAAAA,IAAAA,GAAA,GACnDlF,KAAoB,EACpBwB,KAA4B,EACvB0D,GACH9E,EAAYJ,EAAQwB,EAAYnhB,KAAKgB,QAEvC2e,GAAU3f,KAAK2f,OACPwB,GACN,IAAK,GACH,MAAOnhB,MAAKyQ,KAAK2U,SAASzF,EAC5B,KAAK,GACH,MAAO3f,MAAKyQ,KAAK4U,YAAY1F,EAC/B,KAAK,GACH,MAAO3f,MAAKyQ,KAAKwR,UAAUtC,GAAW3f,KAAKyQ,KAAK4U,YAAY1F,EAAS,IAAM,CAC7E,KAAK,GACH,MAAO3f,MAAKyQ,KAAK6T,YAAY3E,EAC/B,KAAK,GAGH,MAAiD,SAAxC3f,KAAKyQ,KAAK2U,SAASzF,EAAS,IAAM,IAAiB3f,KAAK4kB,WAAWjF,EAAS3f,KAAK2f,OAAQ,EAAGkF,EACvG,KAAK,GAEH,MAAiD,MAAxC7kB,KAAKyQ,KAAK2U,SAASzF,EAAS,IAAM,IAAe3f,KAAKyQ,KAAKsU,aAAapF,EACnF,SACE,KAAM,IAAI/e,OAAM,uBAAuBugB,KAItCN,EAAArZ,UAAA8d,UAAP,SAAiB3F,EAAgBwB,EAAoB0D,GAOnD,OAPmD,SAAAA,IAAAA,GAAA,GACnDlF,KAAoB,EACpBwB,KAA4B,EACvB0D,GACH9E,EAAYJ,EAAQwB,EAAYnhB,KAAKgB,QAEvC2e,GAAU3f,KAAK2f,OACPwB,GACN,IAAK,GACH,MAAOnhB,MAAKyQ,KAAK2U,SAASzF,EAC5B,KAAK,GACH,MAAO3f,MAAKyQ,KAAK8U,YAAY5F,EAC/B,KAAK,GACH,MAAO3f,MAAKyQ,KAAKwR,UAAUtC,EAAS,GAAM3f,KAAKyQ,KAAK8U,YAAY5F,IAAW,CAC7E,KAAK,GACH,MAAO3f,MAAKyQ,KAAK+U,YAAY7F,EAC/B,KAAK,GAGH,MAA6C,SAApC3f,KAAKyQ,KAAK2U,SAASzF,IAAW,IAAiB3f,KAAKglB,WAAWrF,EAAS3f,KAAK2f,OAAS,EAAG,EAAGkF,EACvG,KAAK,GAEH,MAA6C,MAApC7kB,KAAKyQ,KAAK2U,SAASzF,IAAW,IAAe3f,KAAKyQ,KAAKyU,aAAavF,EAAS,EACxF,SACE,KAAM,IAAI/e,OAAM,uBAAuBugB,KAItCN,EAAArZ,UAAAya,UAAP,SAAiBtC,EAAgBkF,GAM/B,MAN+B,UAAAA,IAAAA,GAAA,GAC/BlF,KAAoB,EACfkF,GACH9E,EAAYJ,EAAQ,EAAG3f,KAAKgB,QAE9B2e,GAAU3f,KAAK2f,OACR3f,KAAKyQ,KAAKwR,UAAUtC,IAGtBkB,EAAArZ,UAAAsd,aAAP,SAAoBnF,EAAgBkF,GAMlC,MANkC,UAAAA,IAAAA,GAAA,GAClClF,KAAoB,EACfkF,GACH9E,EAAYJ,EAAQ,EAAG3f,KAAKgB,QAE9B2e,GAAU3f,KAAK2f,OACR3f,KAAKyQ,KAAKqU,aAAanF,IAGzBkB,EAAArZ,UAAAyd,aAAP,SAAoBtF,EAAgBkF,GAMlC,MANkC,UAAAA,IAAAA,GAAA,GAClClF,KAAoB,EACfkF,GACH9E,EAAYJ,EAAQ,EAAG3f,KAAKgB,QAE9B2e,GAAU3f,KAAK2f,OACR3f,KAAKyQ,KAAKwU,aAAatF,IAGzBkB,EAAArZ,UAAAud,aAAP,SAAoBpF,EAAgBkF,GAMlC,MANkC,UAAAA,IAAAA,GAAA,GAClClF,KAAoB,EACfkF,GACH9E,EAAYJ,EAAQ,EAAG3f,KAAKgB,QAE9B2e,GAAU3f,KAAK2f,OACR3f,KAAKyQ,KAAKsU,aAAapF,IAGzBkB,EAAArZ,UAAA0d,aAAP,SAAoBvF,EAAgBkF,GAMlC,MANkC,UAAAA,IAAAA,GAAA,GAClClF,KAAoB,EACfkF,GACH9E,EAAYJ,EAAQ,EAAG3f,KAAKgB,QAE9B2e,GAAU3f,KAAK2f,OACR3f,KAAKyQ,KAAKyU,aAAavF,IAGzBkB,EAAArZ,UAAA4d,SAAP,SAAgBzF,EAAgBkF,GAM9B,MAN8B,UAAAA,IAAAA,GAAA,GAC9BlF,KAAoB,EACfkF,GACH9E,EAAYJ,EAAQ,EAAG3f,KAAKgB,QAE9B2e,GAAU3f,KAAK2f,OACR3f,KAAKyQ,KAAK2U,SAASzF,IAGrBkB,EAAArZ,UAAA6d,YAAP,SAAmB1F,EAAgBkF,GAMjC,MANiC,UAAAA,IAAAA,GAAA,GACjClF,KAAoB,EACfkF,GACH9E,EAAYJ,EAAQ,EAAG3f,KAAKgB,QAE9B2e,GAAU3f,KAAK2f,OACR3f,KAAKyQ,KAAK4U,YAAY1F,IAGxBkB,EAAArZ,UAAA+d,YAAP,SAAmB5F,EAAgBkF,GAMjC,MANiC,UAAAA,IAAAA,GAAA,GACjClF,KAAoB,EACfkF,GACH9E,EAAYJ,EAAQ,EAAG3f,KAAKgB,QAE9B2e,GAAU3f,KAAK2f,OACR3f,KAAKyQ,KAAK8U,YAAY5F,IAGxBkB,EAAArZ,UAAA8c,YAAP,SAAmB3E,EAAgBkF,GAMjC,MANiC,UAAAA,IAAAA,GAAA,GACjClF,KAAoB,EACfkF,GACH9E,EAAYJ,EAAQ,EAAG3f,KAAKgB,QAE9B2e,GAAU3f,KAAK2f,OACR3f,KAAKyQ,KAAK6T,YAAY3E,IAGxBkB,EAAArZ,UAAAge,YAAP,SAAmB7F,EAAgBkF,GAMjC,MANiC,UAAAA,IAAAA,GAAA,GACjClF,KAAoB,EACfkF,GACH9E,EAAYJ,EAAQ,EAAG3f,KAAKgB,QAE9B2e,GAAU3f,KAAK2f,OACR3f,KAAKyQ,KAAK+U,YAAY7F,IAGxBkB,EAAArZ,UAAAie,YAAP,SAAmB9F,EAAgBkF,GAMjC,MANiC,UAAAA,IAAAA,GAAA,GACjClF,KAAoB;AACfkF,GACH9E,EAAYJ,EAAQ,EAAG3f,KAAKgB,QAE9B2e,GAAU3f,KAAK2f,OACR3f,KAAKyQ,KAAKgV,YAAY9F,IAGxBkB,EAAArZ,UAAAke,YAAP,SAAmB/F,EAAgBkF,GAMjC,MANiC,UAAAA,IAAAA,GAAA,GACjClF,KAAoB,EACfkF,GACH9E,EAAYJ,EAAQ,EAAG3f,KAAKgB,QAE9B2e,GAAU3f,KAAK2f,OACR3f,KAAKyQ,KAAKiV,YAAY/F,IAGxBkB,EAAArZ,UAAAme,aAAP,SAAoBhG,EAAgBkF,GAMlC,MANkC,UAAAA,IAAAA,GAAA,GAClClF,KAAoB,EACfkF,GACH9E,EAAYJ,EAAQ,EAAG3f,KAAKgB,QAE9B2e,GAAU3f,KAAK2f,OACR3f,KAAKyQ,KAAKkV,aAAahG,IAGzBkB,EAAArZ,UAAAoe,aAAP,SAAoBjG,EAAgBkF,GAMlC,MANkC,UAAAA,IAAAA,GAAA,GAClClF,KAAoB,EACfkF,GACH9E,EAAYJ,EAAQ,EAAG3f,KAAKgB,QAE9B2e,GAAU3f,KAAK2f,OACR3f,KAAKyQ,KAAKmV,aAAajG,IAGzBkB,EAAArZ,UAAAqe,YAAP,SAAmBnkB,EAAeie,EAAgBwB,EAAoB0D,GAAA,SAAAA,IAAAA,GAAA,GACpElF,KAAoB,EACfkF,GACHnF,EAAS1f,KAAM0B,EAAOie,EAAQwB,EAAYP,EAAaO,GAAa,EAEtE,IAAI2E,GAAKnG,EAASwB,CAElB,QADAxB,GAAU3f,KAAK2f,OACPwB,GACN,IAAK,GACHnhB,KAAKyQ,KAAK8Q,WAAW5B,EAAQje,EAC7B,MACF,KAAK,GACH1B,KAAKyQ,KAAKsV,cAAcpG,EAAQje,EAChC,MACF,KAAK,GACH1B,KAAKyQ,KAAK8Q,WAAW5B,EAAgB,IAARje,GAC7B1B,KAAKyQ,KAAKsV,cAAcpG,EAAS,EAAGje,GAAS,EAC7C,MACF,KAAK,GACH1B,KAAKyQ,KAAKuV,cAAcrG,EAAQje,EAChC,MACF,KAAK,GACH1B,KAAKyQ,KAAK8Q,WAAW5B,EAAgB,IAARje,GAE7BA,EAAQoQ,KAAKmU,MAAMvkB,EAAQ,KAC3Bie,GAEF,KAAK,GACH3f,KAAKyQ,KAAK8Q,WAAW5B,EAAgB,IAARje,GAE7BA,EAAQoQ,KAAKmU,MAAMvkB,EAAQ,KAC3B1B,KAAKyQ,KAAKuV,cAAcrG,EAAS,EAAGje,EACpC,MACF,SACE,KAAM,IAAId,OAAM,uBAAuBugB,GAE3C,MAAO2E,IAGFjF,EAAArZ,UAAA0e,YAAP,SAAmBxkB,EAAeie,EAAgBwB,EAAoB0D,GAAA,SAAAA,IAAAA,GAAA,GACpElF,KAAoB,EACfkF,GACHnF,EAAS1f,KAAM0B,EAAOie,EAAQwB,EAAYP,EAAaO,GAAa,EAEtE,IAAI2E,GAAKnG,EAASwB,CAElB,QADAxB,GAAU3f,KAAK2f,OACPwB,GACN,IAAK,GACHnhB,KAAKyQ,KAAK8Q,WAAW5B,EAAQje,EAC7B,MACF,KAAK,GACH1B,KAAKyQ,KAAK0V,cAAcxG,EAAQje,EAChC,MACF,KAAK,GACH1B,KAAKyQ,KAAK8Q,WAAW5B,EAAS,EAAW,IAARje,GACjC1B,KAAKyQ,KAAK0V,cAAcxG,EAAQje,GAAS,EACzC,MACF,KAAK,GACH1B,KAAKyQ,KAAK2V,cAAczG,EAAQje,EAChC,MACF,KAAK,GACH1B,KAAKyQ,KAAK8Q,WAAW5B,EAAS,EAAW,IAARje,GAEjCA,EAAQoQ,KAAKmU,MAAMvkB,EAAQ,IAE7B,KAAK,GACH1B,KAAKyQ,KAAK8Q,WAAW5B,EAAS,EAAW,IAARje,GAEjCA,EAAQoQ,KAAKmU,MAAMvkB,EAAQ,KAC3B1B,KAAKyQ,KAAK2V,cAAczG,EAAQje,EAChC,MACF,SACE,KAAM,IAAId,OAAM,uBAAuBugB,GAE3C,MAAO2E,IAGFjF,EAAArZ,UAAA6e,WAAP,SAAkB3kB,EAAeie,EAAgBwB,EAAoB0D,GAAA,SAAAA,IAAAA,GAAA,GACnElF,KAAoB,EACfkF,GACHnF,EAAS1f,KAAM0B,EAAOie,EAAQwB,EAAYT,EAAYS,GAAaR,EAAYQ,GAEjF,IAAI2E,GAAKnG,EAASwB,CAElB,QADAxB,GAAU3f,KAAK2f,OACPwB,GACN,IAAK,GACHnhB,KAAKyQ,KAAKsR,UAAUpC,EAAQje,EAC5B,MACF,KAAK,GACH1B,KAAKyQ,KAAK6V,aAAa3G,EAAQje,EAC/B,MACF,KAAK,GACH1B,KAAKyQ,KAAK8Q,WAAW5B,EAAgB,IAARje,GAC7B1B,KAAKyQ,KAAK6V,aAAa3G,EAAS,EAAGje,GAAS,EAC5C,MACF,KAAK,GACH1B,KAAKyQ,KAAK4T,aAAa1E,EAAQje,EAC/B,MACF,KAAK,GACH1B,KAAKyQ,KAAK8Q,WAAW5B,EAAgB,IAARje,GAE7BA,EAAQoQ,KAAKmU,MAAMvkB,EAAQ,KAC3Bie,GAEF,KAAK,GACH3f,KAAKyQ,KAAK8Q,WAAW5B,EAAgB,IAARje,GAE7BA,EAAQoQ,KAAKmU,MAAMvkB,EAAQ,KAC3B1B,KAAKyQ,KAAK4T,aAAa1E,EAAS,EAAGje,EACnC,MACF,SACE,KAAM,IAAId,OAAM,uBAAuBugB,GAE3C,MAAO2E,IAGFjF,EAAArZ,UAAA+e,WAAP,SAAkB7kB,EAAeie,EAAgBwB,EAAoB0D,GAAA,SAAAA,IAAAA,GAAA,GACnElF,KAAoB,EACfkF,GACHnF,EAAS1f,KAAM0B,EAAOie,EAAQwB,EAAYT,EAAYS,GAAaR,EAAYQ,GAEjF,IAAI2E,GAAKnG,EAASwB,CAElB,QADAxB,GAAU3f,KAAK2f,OACPwB,GACN,IAAK,GACHnhB,KAAKyQ,KAAKsR,UAAUpC,EAAQje,EAC5B,MACF,KAAK,GACH1B,KAAKyQ,KAAK+V,aAAa7G,EAAQje,EAC/B,MACF,KAAK,GACH1B,KAAKyQ,KAAK8Q,WAAW5B,EAAS,EAAW,IAARje,GACjC1B,KAAKyQ,KAAK+V,aAAa7G,EAAQje,GAAS,EACxC,MACF,KAAK,GACH1B,KAAKyQ,KAAKgW,aAAa9G,EAAQje,EAC/B,MACF,KAAK,GACH1B,KAAKyQ,KAAK8Q,WAAW5B,EAAS,EAAW,IAARje,GAEjCA,EAAQoQ,KAAKmU,MAAMvkB,EAAQ,IAE7B,KAAK,GACH1B,KAAKyQ,KAAK8Q,WAAW5B,EAAS,EAAW,IAARje,GAEjCA,EAAQoQ,KAAKmU,MAAMvkB,EAAQ,KAC3B1B,KAAKyQ,KAAKgW,aAAa9G,EAAQje,EAC/B,MACF,SACE,KAAM,IAAId,OAAM,uBAAuBugB,GAE3C,MAAO2E,IAGFjF,EAAArZ,UAAA+Z,WAAP,SAAkB7f,EAAeie,EAAgBkF,GAM/C,MAN+C,UAAAA,IAAAA,GAAA,GAC/ClF,KAAoB,EACfkF,GACHnF,EAAS1f,KAAM0B,EAAOie,EAAQ,EAAG,IAAc,GAEjD3f,KAAKyQ,KAAK8Q,WAAW5B,EAAS3f,KAAK2f,OAAQje,GACpCie,EAAS,GAGXkB,EAAArZ,UAAAue,cAAP,SAAqBrkB,EAAeie,EAAgBkF,GAMlD,MANkD,UAAAA,IAAAA,GAAA,GAClDlF,KAAoB,EACfkF,GACHnF,EAAS1f,KAAM0B,EAAOie,EAAQ,EAAG,MAAe,GAElD3f,KAAKyQ,KAAKsV,cAAcpG,EAAS3f,KAAK2f,OAAQje,GACvCie,EAAS,GAGXkB,EAAArZ,UAAA2e,cAAP,SAAqBzkB,EAAeie,EAAgBkF,GAMlD,MANkD,UAAAA,IAAAA,GAAA,GAClDlF,KAAoB,EACfkF,GACHnF,EAAS1f,KAAM0B,EAAOie,EAAQ,EAAG,MAAe,GAElD3f,KAAKyQ,KAAK0V,cAAcxG,EAAS3f,KAAK2f,OAAQje,GACvCie,EAAS,GAGXkB,EAAArZ,UAAAwe,cAAP,SAAqBtkB,EAAeie,EAAgBkF,GAMlD,MANkD,UAAAA,IAAAA,GAAA,GAClDlF,KAAoB,EACfkF,GACHnF,EAAS1f,KAAM0B,EAAOie,EAAQ,EAAG,WAAe,GAElD3f,KAAKyQ,KAAKuV,cAAcrG,EAAS3f,KAAK2f,OAAQje,GACvCie,EAAS,GAGXkB,EAAArZ,UAAA4e,cAAP,SAAqB1kB,EAAeie,EAAgBkF,GAMlD,MANkD,UAAAA,IAAAA,GAAA,GAClDlF,KAAoB,EACfkF,GACHnF,EAAS1f,KAAM0B,EAAOie,EAAQ,EAAG,WAAe,GAElD3f,KAAKyQ,KAAK2V,cAAczG,EAAS3f,KAAK2f,OAAQje,GACvCie,EAAS,GAGXkB,EAAArZ,UAAAua,UAAP,SAAiBrgB,EAAeie,EAAgBkF,GAM9C,MAN8C,UAAAA,IAAAA,GAAA,GAC9ClF,KAAoB,EACfkF,GACHnF,EAAS1f,KAAM0B,EAAOie,EAAQ,EAAG,KAAa,KAEhD3f,KAAKyQ,KAAKsR,UAAUpC,EAAS3f,KAAK2f,OAAQje,GACnCie,EAAS,GAGXkB,EAAArZ,UAAA8e,aAAP,SAAoB5kB,EAAeie,EAAgBkF,GAMjD,MANiD,UAAAA,IAAAA,GAAA,GACjDlF,KAAoB,EACfkF,GACHnF,EAAS1f,KAAM0B,EAAOie,EAAQ,EAAG,OAAc,OAEjD3f,KAAKyQ,KAAK6V,aAAa3G,EAAS3f,KAAK2f,OAAQje,GACtCie,EAAS,GAGXkB,EAAArZ,UAAAgf,aAAP,SAAoB9kB,EAAeie,EAAgBkF,GAMjD,MANiD,UAAAA,IAAAA,GAAA,GACjDlF,KAAoB,EACfkF,GACHnF,EAAS1f,KAAM0B,EAAOie,EAAQ,EAAG,OAAc,OAEjD3f,KAAKyQ,KAAK+V,aAAa7G,EAAS3f,KAAK2f,OAAQje,GACtCie,EAAS,GAGXkB,EAAArZ,UAAA6c,aAAP,SAAoB3iB,EAAeie,EAAgBkF,GAMjD,MANiD,UAAAA,IAAAA,GAAA,GACjDlF,KAAoB,EACfkF,GACHnF,EAAS1f,KAAM0B,EAAOie,EAAQ,EAAG,YAAc,YAEjD3f,KAAKyQ,KAAK4T,aAAa1E,EAAS3f,KAAK2f,OAAQje,GACtCie,EAAS,GAGXkB,EAAArZ,UAAAif,aAAP,SAAoB/kB,EAAeie,EAAgBkF,GAMjD,MANiD,UAAAA,IAAAA,GAAA,GACjDlF,KAAoB,EACfkF,GACHnF,EAAS1f,KAAM0B,EAAOie,EAAQ,EAAG,YAAc,YAEjD3f,KAAKyQ,KAAKgW,aAAa9G,EAAS3f,KAAK2f,OAAQje,GACtCie,EAAS,GAGXkB,EAAArZ,UAAAkf,aAAP,SAAoBhlB,EAAeie,EAAgBkF,GAMjD,MANiD,UAAAA,IAAAA,GAAA,GACjDlF,KAAoB,EACfkF,GACH/E,EAAW9f,KAAM0B,EAAOie,EAAQ,GAElC3f,KAAKyQ,KAAKiW,aAAa/G,EAAS3f,KAAK2f,OAAQje,GACtCie,EAAS,GAGXkB,EAAArZ,UAAAmf,aAAP,SAAoBjlB,EAAeie,EAAgBkF,GAMjD,MANiD,UAAAA,IAAAA,GAAA,GACjDlF,KAAoB,EACfkF,GACH/E,EAAW9f,KAAM0B,EAAOie,EAAQ,GAElC3f,KAAKyQ,KAAKkW,aAAahH,EAAS3f,KAAK2f,OAAQje,GACtCie,EAAS,GAGXkB,EAAArZ,UAAAof,cAAP,SAAqBllB,EAAeie,EAAgBkF,GAMlD,MANkD,UAAAA,IAAAA,GAAA,GAClDlF,KAAoB,EACfkF,GACH/E,EAAW9f,KAAM0B,EAAOie,EAAQ,GAElC3f,KAAKyQ,KAAKmW,cAAcjH,EAAS3f,KAAK2f,OAAQje,GACvCie,EAAS,GAGXkB,EAAArZ,UAAAqf,cAAP,SAAqBnlB,EAAeie,EAAgBkF,GAMlD,MANkD,UAAAA,IAAAA,GAAA,GAClDlF,KAAoB,EACfkF,GACH/E,EAAW9f,KAAM0B,EAAOie,EAAQ,GAElC3f,KAAKyQ,KAAKoW,cAAclH,EAAS3f,KAAK2f,OAAQje,GACvCie,EAAS,GAUJkB,EAAAiG,WAAd,SAAyBC,GACvB,IACE3G,EAAAiC,SAAS0E,GACT,MAAO7mB,GACP,OAAO,EAET,OAAO,GAGK2gB,EAAAmG,QAAd,SAAsBvmB,EAAeyT,GACnC,GAAIzT,IAAMyT,EACR,MAAO,EAEP,IAAIvT,GAIFsmB,EAAYC,EAHZC,EAAO1mB,EAAEO,OACTomB,EAAOlT,EAAElT,OACTqmB,EAAYvV,KAAKC,IAAIoV,EAAMC,EAE7B,KAAKzmB,EAAI,EAAGA,EAAI0mB,EAAW1mB,IAGzB,GAFAsmB,EAAKxmB,EAAEwhB,UAAUthB,GACjBumB,EAAKhT,EAAE+N,UAAUthB,GACbsmB,IAAOC,EACT,MAAOD,GAAKC,EAAK,GAAI,CAGzB,OAAIC,KAASC,EACJ,EAEAD,EAAOC,EAAO,GAAI,GAUjBvG,EAAA6C,SAAd,SAAuBnb,GACrB,MAAOA,aAAesY,IAWVA,EAAAM,WAAd,SAAyBe,EAAaC,GAAA,SAAAA,IAAAA,EAAA,OACpC,IAAIC,EACJ,KACEA,EAAUhC,EAAAiC,SAASF,GACnB,MAAOjiB,GAEPkiB,EAAUhC,EAAAiC,SAAS,QAKrB,MAHoB,gBAAV,KACRH,EAAM,GAAKA,GAENE,EAAQjB,WAAWe,IAkBdrB,EAAA/b,OAAd,SAAqBwiB,EAAoBC,GACvC,GAAIpf,EACJ,IAAoB,IAAhBmf,EAAKtmB,QAAgC,IAAhBumB,EACvB,MAAO,IAAI1G,GAAO,EAElB,IAAoB/c,SAAhByjB,EAA2B,CAE7BA,EAAc,CACd,KAAK,GAAI5mB,GAAI,EAAGA,EAAI2mB,EAAKtmB,OAAQL,IAAK,CAEpC,GADAwH,EAAOmf,EAAK3mB,IACPkgB,EAAO6C,SAASvb,GACnB,KAAM,IAAIxE,WAAU,0CAEtB4jB,IAAepf,EAAKnH,QAKxB,IAAK,GAFDwmB,GAAM,GAAI3G,GAAO0G,GACjBE,EAAS,EACJC,EAAI,EAAGA,EAAIJ,EAAKtmB,OAAQ0mB,IAAK,CAEpC,GADAvf,EAAOmf,EAAKI,IACP7G,EAAO6C,SAASvb,GACnB,KAAM,IAAIxE,WAAU,0CAEtB8jB,IAAUtf,EAAKmZ,KAAKkG,EAAKC,GAE3B,MAAOD,IAOJ3G,EAAArZ,UAAAmgB,OAAP,SAAcnW,GACZ,GAAIqP,EAAO6C,SAASlS,GAAS,CAC3B,GAAI7Q,EACJ,IAAI6Q,EAAOxQ,SAAWhB,KAAKgB,OACzB,OAAO,CAGP,KAAKL,EAAI,EAAGA,EAAIX,KAAKgB,OAAQL,IAC3B,GAAIX,KAAKiiB,UAAUthB,KAAO6Q,EAAOyQ,UAAUthB,GACzC,OAAO,CAGX,QAAO,EAGT,KAAM,IAAIgD,WAAU,+BAQjBkd,EAAArZ,UAAAwf,QAAP,SAAexV,GACb,MAAOqP,GAAOmG,QAAQhnB,KAAMwR,IAEhCqP,IA7oCarhB,GAAAqhB,OAAMA,CAgpCnB,IAAI1W,GAA6B0W,EAKjC+G,EAAA,SAAAC,GACE,QAAAD,GAAa5mB,EAAa+f,EAAYC,GAIpC,GAFA6G,EAAA9mB,KAAAf,MAAOgB,GAAUA,EAAS,GAAKA,KAEzBhB,eAAgB4nB,IACpB,MAAO,IAAIA,GAAW5mB,EAAQ+f,EAAMC,GAe1C,MArBgC8G,GAAAF,EAAAC,GAUhBD,EAAAlE,SAAd,SAAuBnb,GACrB,MAAOsY,GAAO6C,SAASnb,IAGXqf,EAAAzG,WAAd,SAAyBe,EAAaC,GACpC,MAAOtB,GAAOM,WAAWe,EAAKC,IAGlByF,EAAA9iB,OAAd,SAAqBwiB,EAAoBC,GACvC,MAAO1G,GAAO/b,OAAOwiB,EAAMC,IAE/BK,GArBgC/G,EAAnBrhB,GAAAooB,WAAUA,EAuBvBzd,EAAIyd,EAKOpoB,EAAAojB,kBAA4B,uKCh1CvC,IAAImF,GAAqBjW,KAAKkW,IAAI,EAAG,KACjCC,GAAqB,EAAKF,EAC1BG,EAA4B,WAC5BC,GAA4B,QAC5BC,EAAmB,WAqKvBnH,EAAA,WAAA,QAAAA,MAuRA,MAtRSA,GAAAzZ,UAAAnC,UAAP,WACE,KAAM,IAAIzE,OAAM,2DAEXqgB,EAAAzZ,UAAAua,UAAP,SAAiBphB,EAAW8P,GAI1BzQ,KAAKuhB,WAAW5gB,EAAW,IAAP8P,GAAwB,WAAPA,KAAuB,KAEvDwQ,EAAAzZ,UAAA8e,aAAP,SAAoB3lB,EAAW8P,GAC7BzQ,KAAKuhB,WAAW5gB,EAAU,IAAP8P,GAInBzQ,KAAKuhB,WAAW5gB,EAAE,EAAK8P,IAAS,EAAK,KAAiB,WAAPA,KAAuB,KAEjEwQ,EAAAzZ,UAAAgf,aAAP,SAAoB7lB,EAAW8P,GAC7BzQ,KAAKuhB,WAAW5gB,EAAE,EAAU,IAAP8P,GAIrBzQ,KAAKuhB,WAAW5gB,EAAK8P,IAAS,EAAK,KAAiB,WAAPA,KAAuB,KAE/DwQ,EAAAzZ,UAAA6c,aAAP,SAAoB1jB,EAAW8P,GAC7BzQ,KAAKuhB,WAAW5gB,EAAU,IAAP8P,GACnBzQ,KAAKuhB,WAAW5gB,EAAE,EAAI8P,IAAS,EAAK,KACpCzQ,KAAKuhB,WAAW5gB,EAAE,EAAI8P,IAAS,GAAM,KACrCzQ,KAAKuhB,WAAW5gB,EAAE,EAAI8P,IAAS,GAAM,MAEhCwQ,EAAAzZ,UAAAif,aAAP,SAAoB9lB,EAAW8P,GAC7BzQ,KAAKuhB,WAAW5gB,EAAE,EAAU,IAAP8P,GACrBzQ,KAAKuhB,WAAW5gB,EAAE,EAAI8P,IAAS,EAAK,KACpCzQ,KAAKuhB,WAAW5gB,EAAE,EAAI8P,IAAS,GAAM,KACrCzQ,KAAKuhB,WAAW5gB,EAAI8P,IAAS,GAAM,MAE9BwQ,EAAAzZ,UAAA+Z,WAAP,SAAkB5gB,EAAW8P,GAC3B,KAAM,IAAI7P,OAAM,4DAEXqgB,EAAAzZ,UAAAue,cAAP,SAAqBplB,EAAW8P,GAC9BzQ,KAAKuhB,WAAW5gB,EAAU,IAAP8P,GACnBzQ,KAAKuhB,WAAW5gB,EAAE,EAAI8P,GAAQ,EAAK,MAE9BwQ,EAAAzZ,UAAA2e,cAAP,SAAqBxlB,EAAW8P,GAC9BzQ,KAAKuhB,WAAW5gB,EAAE,EAAU,IAAP8P,GACrBzQ,KAAKuhB,WAAW5gB,EAAI8P,GAAQ,EAAK,MAE5BwQ,EAAAzZ,UAAAwe,cAAP,SAAqBrlB,EAAW8P,GAC9BzQ,KAAKqkB,aAAa1jB,EAAQ,EAAL8P,IAEhBwQ,EAAAzZ,UAAA4e,cAAP,SAAqBzlB,EAAW8P,GAC9BzQ,KAAKymB,aAAa9lB,EAAQ,EAAL8P,IAEhBwQ,EAAAzZ,UAAAkf,aAAP,SAAoB/lB,EAAW8P,GAC7BzQ,KAAKqkB,aAAa1jB,EAAGX,KAAKqoB,cAAc5X,KAEnCwQ,EAAAzZ,UAAAmf,aAAP,SAAoBhmB,EAAW8P,GAC7BzQ,KAAKymB,aAAa9lB,EAAGX,KAAKqoB,cAAc5X,KAEnCwQ,EAAAzZ,UAAAof,cAAP,SAAqBjmB,EAAW8P,GAC9B,GAAI6X,GAAatoB,KAAKuoB,gBAAgB9X,EACtCzQ,MAAKqkB,aAAa1jB,EAAG2nB,EAAW,IAChCtoB,KAAKqkB,aAAa1jB,EAAE,EAAG2nB,EAAW,KAE7BrH,EAAAzZ,UAAAqf,cAAP,SAAqBlmB,EAAW8P,GAC9B,GAAI6X,GAAatoB,KAAKuoB,gBAAgB9X,EACtCzQ,MAAKymB,aAAa9lB,EAAE,EAAG2nB,EAAW,IAClCtoB,KAAKymB,aAAa9lB,EAAG2nB,EAAW,KAE3BrH,EAAAzZ,UAAA4d,SAAP,SAAgBzkB,GACd,GAAI2L,GAAMtM,KAAKiiB,UAAUthB,EACzB,OAAU,KAAN2L,EAEW,WAANA,EAEAA,GAGJ2U,EAAAzZ,UAAA6d,YAAP,SAAmB1kB,GACjB,GAAI2L,GAAMtM,KAAK8kB,aAAankB,EAC5B,OAAU,OAAN2L,EAEW,WAANA,EAEAA,GAGJ2U,EAAAzZ,UAAA+d,YAAP,SAAmB5kB,GACjB,GAAI2L,GAAMtM,KAAKilB,aAAatkB,EAC5B,OAAU,OAAN2L,EAEW,WAANA,EAEAA,GAGJ2U,EAAAzZ,UAAA8c,YAAP,SAAmB3jB,GACjB,MAA8B,GAAvBX,KAAK+kB,aAAapkB,IAEpBsgB,EAAAzZ,UAAAge,YAAP,SAAmB7kB,GACjB,MAA8B,GAAvBX,KAAKklB,aAAavkB,IAEpBsgB,EAAAzZ,UAAAya,UAAP,SAAiBthB,GACf,KAAM,IAAIC,OAAM,2DAEXqgB,EAAAzZ,UAAAsd,aAAP,SAAoBnkB,GAClB,MAAQX,MAAKiiB,UAAUthB,EAAE,IAAM,EAAKX,KAAKiiB,UAAUthB,IAE9CsgB,EAAAzZ,UAAAyd,aAAP,SAAoBtkB,GAClB,MAAQX,MAAKiiB,UAAUthB,IAAM,EAAKX,KAAKiiB,UAAUthB,EAAE,IAE9CsgB,EAAAzZ,UAAAud,aAAP,SAAoBpkB,GAClB,OAASX,KAAKiiB,UAAUthB,EAAE,IAAM,GAAOX,KAAKiiB,UAAUthB,EAAE,IAAM,GAAOX,KAAKiiB,UAAUthB,EAAE,IAAM,EAAKX,KAAKiiB,UAAUthB,MAAQ,GAEnHsgB,EAAAzZ,UAAA0d,aAAP,SAAoBvkB,GAClB,OAASX,KAAKiiB,UAAUthB,IAAM,GAAOX,KAAKiiB,UAAUthB,EAAE,IAAM,GAAOX,KAAKiiB,UAAUthB,EAAE,IAAM,EAAKX,KAAKiiB,UAAUthB,EAAE,MAAQ,GAEnHsgB,EAAAzZ,UAAAie,YAAP,SAAmB9kB,GACjB,MAAOX,MAAKwoB,cAAcxoB,KAAKskB,YAAY3jB,KAEtCsgB,EAAAzZ,UAAAke,YAAP,SAAmB/kB,GACjB,MAAOX,MAAKwoB,cAAcxoB,KAAKwlB,YAAY7kB,KAEtCsgB,EAAAzZ,UAAAme,aAAP,SAAoBhlB,GAClB,MAAOX,MAAKyoB,gBAAgBzoB,KAAKskB,YAAY3jB,EAAE,GAAIX,KAAKskB,YAAY3jB,KAE/DsgB,EAAAzZ,UAAAoe,aAAP,SAAoBjlB,GAClB,MAAOX,MAAKyoB,gBAAgBzoB,KAAKwlB,YAAY7kB,GAAIX,KAAKwlB,YAAY7kB,EAAE,KAE/DsgB,EAAAzZ,UAAA8Z,KAAP,SAAY5d,EAAemK,GACzB,KAAM,IAAIjN,OAAM,sDAEXqgB,EAAAzZ,UAAAgd,KAAP,SAAY9iB,EAAegC,EAAemK,GAExC,IAAK,GAAIlN,GAAI+C,EAAO/C,EAAIkN,EAAKlN,IAC3BX,KAAKuhB,WAAW5gB,EAAGe,IAIfuf,EAAAzZ,UAAA6gB,cAAR,SAAsBK,GACpB,GAAIC,GAA6CC,EAAaxlB,CAG9D,OAAc,KAAVslB,EACK,EAGLA,IAAUG,OAAOC,kBACZZ,EAELQ,IAAUG,OAAOE,kBACZZ,EAGLa,MAAMN,GACDN,GAOThlB,EAAOslB,EAAQ,EAAI,EAAI,EACvBA,EAAQ5W,KAAKmX,IAAIP,GAObA,GAAS,wBAA0BA,GAAS,uBAC9CC,EAAM,EACNC,EAAM9W,KAAKoX,MAAOR,EAAQ5W,KAAKkW,IAAI,GAAG,KAASlW,KAAKkW,IAAI,EAAG,KACnD5kB,GAAQ,GAAOulB,GAAO,GAAMC,IAGpCD,EAAM7W,KAAKmU,MAAMnU,KAAKuL,IAAIqL,GAAS5W,KAAKqX,KACxCP,EAAM9W,KAAKoX,OAAOR,EAAQ5W,KAAKkW,IAAI,EAAGW,GAAO,GAAK7W,KAAKkW,IAAI,EAAG,KACtD5kB,GAAQ,GAAQulB,EAAM,KAAQ,GAAMC,KAIxC3H,EAAAzZ,UAAA+gB,gBAAR,SAAwBa,GACtB,GAAoBT,GAAaU,EAAmCT,EAAaxlB,CAGjF,OAAc,KAAVgmB,GACM,EAAG,GAETA,IAAUP,OAAOC,mBAGX,EAAG,YACFM,IAAUP,OAAOE,mBAGlB,GAAG,SACFC,MAAMI,IAGP,EAAG,aAEbhmB,EAAOgmB,EAAQ,EAAI,GAAK,GAAK,EAC7BA,EAAQtX,KAAKmX,IAAIG,GAUbA,GAAS,wBAA2BA,GAAS,QAC/CT,EAAM,EACNC,EAAOQ,EAAQtX,KAAKkW,IAAI,GAAG,MAAUlW,KAAKkW,IAAI,EAAG,MAEjDW,EAAM7W,KAAKmU,MAAMnU,KAAKuL,IAAI+L,GAAStX,KAAKqX,KAIpCC,EAAQtX,KAAKkW,IAAI,EAAGW,KACtBA,GAAY,GAEdC,GAAOQ,EAAQtX,KAAKkW,IAAI,EAAGW,GAAO,GAAK7W,KAAKkW,IAAI,EAAG,IACnDW,EAAOA,EAAM,MAAS,IAIxBU,EAAcT,EAAM9W,KAAKkW,IAAI,GAAG,IAAQ,EAAK5kB,EAAOulB,GACtC,MAANC,EAAcS,KAGhBpI,EAAAzZ,UAAAghB,cAAR,SAAsBc,GAEpB,GAAIA,IAAUpB,EACZ,MAAOW,QAAOC,iBACT,IAAIQ,IAAUnB,EACnB,MAAOU,QAAOE,iBAEhB,IAGIrnB,GAHA0B,GAAgB,WAARkmB,KAAwB,GAChCC,GAAoB,WAARD,KAAwB,GACpCE,EAAsB,QAARF,CAWlB,OARE5nB,GADe,IAAb6nB,EACMzX,KAAKkW,KAAI,EAAI5kB,GAAQomB,EAAc1X,KAAKkW,IAAI,GAAG,KAE/ClW,KAAKkW,KAAI,EAAI5kB,IAAS,EAAIomB,EAAc1X,KAAKkW,IAAI,GAAG,KAAQlW,KAAKkW,IAAI,EAAGuB,EAAW,MAGzF7nB,EAAQumB,GAAsBvmB,EAAQqmB,KACxCrmB,EAAQ+nB,KAEH/nB,GAGDuf,EAAAzZ,UAAAihB,gBAAR,SAAwBiB,EAAkBC,GACxC,GAAIvmB,IAAmB,WAAXsmB,KAA2B,GACnCH,GAAuB,WAAXG,KAA2B,GACvCF,GAA2B,QAAXE,GAAyB5X,KAAKkW,IAAI,EAAG,IAAO2B,CAGhE,OAAiB,KAAbJ,GAAkC,IAAhBC,EACb,EAEQ,OAAbD,EACkB,IAAhBC,EACW,IAATpmB,EACKylB,OAAOE,kBAETF,OAAOC,kBAEPW,IAGM,IAAbF,EACKzX,KAAKkW,KAAI,EAAI5kB,GAAQomB,EAAc1X,KAAKkW,IAAI,GAAG,MACjDlW,KAAKkW,KAAI,EAAI5kB,IAAS,EAAIomB,EAAc1X,KAAKkW,IAAI,GAAG,KAAQlW,KAAKkW,IAAI,EAAGuB,EAAW,OAE9FtI,IAvRazhB,GAAAyhB,iBAAgBA,wOC/K7B2I,EAAA1oB,EAAqE,iBAGjE2oB,GAAwB,WAAY,WAAY,WAAY,UAShE5J,EAAA,SAAA4H,GASE,QAAA5H,GAAYjf,GACV6mB,EAAA9mB,KAAAf,MACAA,KAAKgB,OAASA,EACdhB,KAAK8pB,KAAO,GAAI5lB,OAAM4N,KAAKiM,KAAK/c,EAAO,GAGvC,KAAK,GADD+oB,GAAU/pB,KAAK8pB,KAAK9oB,OACfL,EAAI,EAAGA,EAAIopB,EAASppB,IAC3BX,KAAK8pB,KAAKnpB,GAAK,EA+BrB,MA/C8BmnB,GAAA7H,EAAA4H,GACd5H,EAAAQ,YAAd,WACE,OAAO,GAiBFR,EAAAzY,UAAAnC,UAAP,WACE,MAAOrF,MAAKgB,QAEPif,EAAAzY,UAAA+Z,WAAP,SAAkB5gB,EAAW8P,GAC3BA,GAAQ,GAER,IAAIuZ,GAASrpB,GAAK,EAEdspB,EAAa,EAAJtpB,CACbX,MAAK8pB,KAAKE,GAAUhqB,KAAK8pB,KAAKE,GAAUH,EAAWI,GACnDjqB,KAAK8pB,KAAKE,GAAUhqB,KAAK8pB,KAAKE,GAAWvZ,IAASwZ,GAAU,IAEvDhK,EAAAzY,UAAAya,UAAP,SAAiBthB,GAEf,GAAIqpB,GAASrpB,GAAK,EAEdspB,EAAa,EAAJtpB,CAEb,OAAQX,MAAK8pB,KAAKE,KAAYC,GAAU,GAAM,KAEzChK,EAAAzY,UAAA8Z,KAAP,SAAY5d,EAAemK,GAGzB,IAAK,GADDqc,GAAQ,GAAIjK,GAAgBpS,EAAMnK,GAC7B/C,EAAI+C,EAAO/C,EAAIkN,EAAKlN,IAC3BupB,EAAM3I,WAAW5gB,EAAI+C,EAAO1D,KAAKiiB,UAAUthB,GAE7C,OAAOupB,IAxCKjK,EAAAkK,WAAa,QA0C7BlK,GA/C8B2J,EAAA3I,iBAoD9BxhB,GAAAD,QAASygB,yPChET2J,EAAA1oB,EAAqE,iBACrEmf,EAAAnf,EAA+C,UAK/Cgf,EAAA,SAAA2H,GAYE,QAAA3H,GAAYY,GAEV,GADA+G,EAAA9mB,KAAAf,MACoB,gBAAT8gB,GACT9gB,KAAK8pB,KAAO,GAAIM,UAAS,GAAIjH,aAAYrC,QACpC,IAAIA,YAAgBsJ,UACzBpqB,KAAK8pB,KAAOhJ,MACP,IAAIT,EAAAa,kBAAkBJ,GAC3B9gB,KAAK8pB,KAAO,GAAIM,UAAStJ,EAAKtP,OAAQsP,EAAKoC,WAAYpC,EAAKK,gBACvD,CAAA,IAAId,EAAAe,cAAcN,GAGvB,KAAM,IAAInd,WAAU,oBAFpB3D,MAAK8pB,KAAO,GAAIM,UAAuBtJ,GAIzC9gB,KAAKgB,OAAShB,KAAK8pB,KAAK3I,WA4I5B,MArKoC2G,GAAA5H,EAAA2H,GACpB3H,EAAAO,YAAd,WACE,MAA2B,mBAAb2J,WAyBTlK,EAAA1Y,UAAAnC,UAAP,WACE,MAAOrF,MAAKgB,QAEPkf,EAAA1Y,UAAAua,UAAP,SAAiBphB,EAAW8P,GAC1BzQ,KAAK8pB,KAAKO,QAAQ1pB,EAAG8P,IAEhByP,EAAA1Y,UAAA8e,aAAP,SAAoB3lB,EAAW8P,GAC7BzQ,KAAK8pB,KAAKQ,SAAS3pB,EAAG8P,GAAM,IAEvByP,EAAA1Y,UAAAgf,aAAP,SAAoB7lB,EAAW8P,GAC7BzQ,KAAK8pB,KAAKQ,SAAS3pB,EAAG8P,GAAM,IAEvByP,EAAA1Y,UAAA6c,aAAP,SAAoB1jB,EAAW8P,GAC7BzQ,KAAK8pB,KAAKS,SAAS5pB,EAAG8P,GAAM,IAEvByP,EAAA1Y,UAAAif,aAAP,SAAoB9lB,EAAW8P,GAC7BzQ,KAAK8pB,KAAKS,SAAS5pB,EAAG8P,GAAM,IAEvByP,EAAA1Y,UAAA+Z,WAAP,SAAkB5gB,EAAW8P,GAC3BzQ,KAAK8pB,KAAKU,SAAS7pB,EAAG8P,IAEjByP,EAAA1Y,UAAAue,cAAP,SAAqBplB,EAAW8P,GAC9BzQ,KAAK8pB,KAAKW,UAAU9pB,EAAG8P,GAAM,IAExByP,EAAA1Y,UAAA2e,cAAP,SAAqBxlB,EAAW8P,GAC9BzQ,KAAK8pB,KAAKW,UAAU9pB,EAAG8P,GAAM,IAExByP,EAAA1Y,UAAAwe,cAAP,SAAqBrlB,EAAW8P,GAC9BzQ,KAAK8pB,KAAKY,UAAU/pB,EAAG8P,GAAM,IAExByP,EAAA1Y,UAAA4e,cAAP,SAAqBzlB,EAAW8P,GAC9BzQ,KAAK8pB,KAAKY,UAAU/pB,EAAG8P,GAAM,IAExByP,EAAA1Y,UAAAkf,aAAP,SAAoB/lB,EAAW8P,GAC7BzQ,KAAK8pB,KAAKa,WAAWhqB,EAAG8P,GAAM,IAEzByP,EAAA1Y,UAAAmf,aAAP,SAAoBhmB,EAAW8P,GAC7BzQ,KAAK8pB,KAAKa,WAAWhqB,EAAG8P,GAAM,IAEzByP,EAAA1Y,UAAAof,cAAP,SAAqBjmB,EAAW8P,GAC9BzQ,KAAK8pB,KAAKc,WAAWjqB,EAAG8P,GAAM,IAEzByP,EAAA1Y,UAAAqf,cAAP,SAAqBlmB,EAAW8P,GAC9BzQ,KAAK8pB,KAAKc,WAAWjqB,EAAG8P,GAAM,IAEzByP,EAAA1Y,UAAA4d,SAAP,SAAgBzkB,GACd,MAAOX,MAAK8pB,KAAKe,QAAQlqB,IAEpBuf,EAAA1Y,UAAA6d,YAAP,SAAmB1kB,GACjB,MAAOX,MAAK8pB,KAAKgB,SAASnqB,GAAG,IAExBuf,EAAA1Y,UAAA+d,YAAP,SAAmB5kB,GACjB,MAAOX,MAAK8pB,KAAKgB,SAASnqB,GAAG,IAExBuf,EAAA1Y,UAAA8c,YAAP,SAAmB3jB,GACjB,MAAOX,MAAK8pB,KAAKiB,SAASpqB,GAAG,IAExBuf,EAAA1Y,UAAAge,YAAP,SAAmB7kB,GACjB,MAAOX,MAAK8pB,KAAKiB,SAASpqB,GAAG,IAExBuf,EAAA1Y,UAAAya,UAAP,SAAiBthB,GACf,MAAOX,MAAK8pB,KAAKkB,SAASrqB,IAErBuf,EAAA1Y,UAAAsd,aAAP,SAAoBnkB,GAClB,MAAOX,MAAK8pB,KAAKmB,UAAUtqB,GAAG,IAEzBuf,EAAA1Y,UAAAyd,aAAP,SAAoBtkB,GAClB,MAAOX,MAAK8pB,KAAKmB,UAAUtqB,GAAG,IAEzBuf,EAAA1Y,UAAAud,aAAP,SAAoBpkB,GAClB,MAAOX,MAAK8pB,KAAKoB,UAAUvqB,GAAG,IAEzBuf,EAAA1Y,UAAA0d,aAAP,SAAoBvkB,GAClB,MAAOX,MAAK8pB,KAAKoB,UAAUvqB,GAAG,IAEzBuf,EAAA1Y,UAAAie,YAAP,SAAmB9kB,GACjB,MAAOX,MAAK8pB,KAAKqB,WAAWxqB,GAAG,IAE1Buf,EAAA1Y,UAAAke,YAAP,SAAmB/kB,GACjB,MAAOX,MAAK8pB,KAAKqB,WAAWxqB,GAAG,IAE1Buf,EAAA1Y,UAAAme,aAAP,SAAoBhlB,GAClB,MAAOX,MAAK8pB,KAAKsB,WAAWzqB,GAAG,IAE1Buf,EAAA1Y,UAAAoe,aAAP,SAAoBjlB,GAClB,MAAOX,MAAK8pB,KAAKsB,WAAWzqB,GAAG,IAE1Buf,EAAA1Y,UAAA8Z,KAAP,SAAY5d,EAAemK,GACzB,GAEIuV,GAFAiI,EAAQrrB,KAAK8pB,KAAKtY,OAClB8Z,EAAWtrB,KAAK8pB,KAAK5G,UAGzB,IAAIC,YAAY3b,UAAUxE,MAExBogB,EAAUiI,EAAMroB,MAAMsoB,EAAW5nB,EAAO4nB,EAAWzd,OAC9C,CACL,GAAI7F,GAAM6F,EAAMnK,CAChB0f,GAAU,GAAID,aAAYnb,EAE1B,IAAIujB,GAAe,GAAIjI,YAAWF,GAC9BoI,EAAe,GAAIlI,YAAW+H,EAAOC,EACzCC,GAAazJ,IAAI0J,EAAajI,SAAS7f,EAAOmK,IAEhD,MAAO,IAAIqS,GAAsBkD,IAK5BlD,EAAA1Y,UAAA4c,OAAP,SAAcN,EAA+BnE,EAAgBjc,EAAemK,GAC1E,GAAI4d,GAAW,GAAInI,YAAWQ,EAAOgG,KAAKtY,OAAQsS,EAAOgG,KAAK5G,YAC1DwI,EAAW,GAAIpI,YAAWtjB,KAAK8pB,KAAKtY,OAAQxR,KAAK8pB,KAAK5G,WAAaxf,EAAOmK,EAAMnK,EAEpF,OADA+nB,GAAS3J,IAAI4J,EAAU/L,GAChB9R,EAAMnK,GAERwc,EAAA1Y,UAAAgd,KAAP,SAAY9iB,EAAegC,EAAemK,GAExCnM,EAAgB,IAARA,CACR,IAAIf,GACAqH,EAAM6F,EAAMnK,EACZioB,EAAyB,GAAZ,EAAM,EAAG,GAItBC,EAAUlqB,GAAS,GAAOA,GAAS,GAAOA,GAAS,EAAKA,CAC5D,KAAKf,EAAI,EAAGA,EAAIgrB,EAAUhrB,GAAK,EAC7BX,KAAKqkB,aAAa1jB,EAAI+C,EAAOkoB,EAE/B,KAAKjrB,EAAIgrB,EAAUhrB,EAAIqH,EAAKrH,IAC1BX,KAAKuhB,WAAW5gB,EAAI+C,EAAOhC,IAOxBwe,EAAA1Y,UAAAwb,YAAP,WACE,MAAOhjB,MAAK8pB,MA9JA5J,EAAAiK,WAAa,cAgK7BjK,GArKoC0J,EAAA3I,iBA0KpCxhB,GAAAD,QAAS0gB,oQChLT0J,EAAA1oB,EAAqE,iBAiBrEif,EAAA,SAAA0H,GA0BE,QAAA1H,GAAYnf,GACV6mB,EAAA9mB,KAAAf,MACAA,KAAKgB,OAASA,EACdhB,KAAK8pB,KAAO3J,EAAoB0L,oBAAoB7qB,GAmBxD,MAhDkC8mB,GAAA3H,EAAA0H,GAKjB1H,EAAA0L,oBAAf,SAAmCC,GACjC,GAAIC,GAAgC5L,EAAoB6L,gBAQxD,OALYloB,UAARioB,IACF5L,EAAoB6L,iBAAmBD,EAAME,SAASC,cAAc,UAAUC,WAAW,OAG7E,IAAVL,IAAaA,EAAQ,GAClBC,EAAIK,gBAAgBta,KAAKiM,KAAK+N,EAAQ,GAAI,GAAGrb,MAExC0P,EAAAM,YAAd,WAIE,MAAoC,mBAAvB,mBAAyF3c,SAAnDmoB,SAASC,cAAc,UAAsB,YAW3F/L,EAAA3Y,UAAAnC,UAAP,WACE,MAAOrF,MAAKgB,QAEPmf,EAAA3Y,UAAA+Z,WAAP,SAAkB5gB,EAAW8P,GAC3BzQ,KAAK8pB,KAAKnpB,GAAK8P,GAEV0P,EAAA3Y,UAAAya,UAAP,SAAiBthB,GACf,MAAOX,MAAK8pB,KAAKnpB,IAEZwf,EAAA3Y,UAAA8Z,KAAP,SAAY5d,EAAemK,GAGzB,IAAK,GADDqc,GAAQ,GAAI/J,GAAoBtS,EAAMnK,GACjC/C,EAAI+C,EAAO/C,EAAIkN,EAAKlN,IAC3BupB,EAAM3I,WAAW5gB,EAAI+C,EAAO1D,KAAK8pB,KAAKnpB,GAExC,OAAOupB,IAxBK/J,EAAAgK,WAAa,YA0B7BhK,GAhDkCyJ,EAAA3I,iBAqDlCxhB,GAAAD,QAAS2gB,uDC/DT,IAAAkM,GAAA,WAAA,QAAAA,MAkDA,MA/BgBA,GAAA/J,SAAd,SAAuBJ,EAAasF,GAElC,IAAK,GADDxmB,GAASkhB,EAAIlhB,OAASwmB,EAAIxmB,OAASwmB,EAAIxmB,OAASkhB,EAAIlhB,OAC/CL,EAAI,EAAGA,EAAIK,EAAQL,IAAK,CAC/B,GAAI2rB,GAAWpK,EAAIuC,WAAW9jB,EAC9B,IAAI2rB,EAAW,IAAM,CAEnB,GAAIC,GAAUF,EAAcG,cAAchJ,QAAQtB,EAAIuK,OAAO9rB,GACzD4rB,IAAU,IACZD,EAAWC,EAAU,KAIzB/E,EAAIjG,WAAW+K,EAAU3rB,GAE3B,MAAOK,IAGKqrB,EAAA9J,SAAd,SAAuBuH,GAErB,IAAK,GADDrb,GAAQ,GAAIvK,OAAM4lB,EAAK9oB,QAClBL,EAAI,EAAGA,EAAImpB,EAAK9oB,OAAQL,IAAK,CACpC,GAAI2rB,GAAWxC,EAAK7H,UAAUthB,EAC1B2rB,GAAW,IACb7d,EAAM9N,GAAK0rB,EAAcG,cAAcF,EAAW,KAElD7d,EAAM9N,GAAKqG,OAAO0lB,aAAaJ,GAGnC,MAAO7d,GAAMrB,KAAK,KAGNif,EAAAlL,WAAd,SAAyBe,GAAuB,MAAOA,GAAIlhB,QAhD5CqrB,EAAAG,eAAkB,IAAU,IAAU,IAAU,IAAU,IACvE,IAAU,IAAU,IAAU,IAAU,IAAU,IAAU,IAC5D,IAAU,IAAU,IAAU,IAAU,IAAU,IAAU,IAC5D,IAAU,IAAU,IAAU,IAAU,IAAU,IAAU,IAC5D,IAAU,IAAU,IAAU,IAAU,IAAU,IAAU,IAC5D,IAAU,IAAU,IAAU,IAAU,IAAU,IAAU,IAC5D,IAAU,IAAU,IAAU,IAAU,IAAU,IAAU,IAC5D,IAAU,IAAK,IAAK,IAAK,IAAU,IAAU,IAAU,IAAU,IACjE,IAAU,IAAU,IAAU,IAAK,IAAK,IAAU,IAAU,IAAK,IAAK,IACtE,IAAK,IAAK,IAAK,IAAK,IAAU,IAAU,IAAK,IAAK,IAAK,IAAK,IAAU,IACtE,IAAK,IAAU,IAAU,IAAU,IAAU,IAAU,IAAU,IACjE,IAAU,IAAU,IAAU,IAAK,IAAK,IAAK,IAAK,IAAU,IAAU,IACtE,IAAU,IAAU,IAAU,IAAU,IAAU,IAAU,IAC5D,IAAU,IAAU,IAAU,IAAU,IAAU,IAAU,IAC5D,IAAU,IAAU,IAAU,IAAU,IAAK,IAAU,IAAU,IACjE,IAAU,IAAU,IAAU,IAAU,IAAU,IAAU,IAC5D,IAAU,IAAK,KAiCnBH,IAlDA7sB,GAAAmtB,YAAA,kDCEA,SAAAC,GAA8BC,GAE5B,GAEmDlsB,GAF/CmsB,EAAWD,EAAU7rB,OACvB+rB,GAAcD,EAAW,GAAM,IAAM,EACrCE,EAAmB,GAAI9oB,OAAc6oB,EACvC,KAAKpsB,EAAI,EAAGA,EAAIosB,EAAWpsB,IACzBqsB,EAAOrsB,GAAK+rB,EAAarrB,MAAM2F,OAAQ6lB,EAAU7pB,MAAU,KAAJrC,EAAsB,MAATA,EAAI,IAE1E,OAAOqsB,GAAO5f,KAAK,IAgDrB,QAAAiV,GAAyBF,GAavB,OAZAA,EAAW,WACT,aAAeA,IACb,IAAK,SACH,MAAO,GAAKA,CACd,KAAK,SACH,MAAOA,EACT,SACE,KAAM,IAAIxe,WAAU,2CAG1Bwe,EAAWA,EAAS8K,eAGlB,IAAK,OACL,IAAK,QACH,MAAOC,EACT,KAAK,QACH,MAAOC,EACT,KAAK,SACH,MAAOC,EACT,KAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,MAAOC,EACT,KAAK,MACH,MAAOC,EACT,KAAK,SACH,MAAOC,EAGT,KAAK,gBACH,MAAOC,EACT,KAAK,mBACH,MAAOC,EACT,KAAK,iBACH,MAAOC,GAAA,OACT,SACE,KAAM,IAAI/pB,WAAU,qBAAqBwe,IAvG/C,GAAAuL,GAAAxsB,EAA0B,oBAEtBwrB,EAAe1lB,OAAO0lB,YAMVltB,GAAAotB,cAAaA,EAwDbptB,EAAA6iB,SAAQA,CAgDxB,IAAA6K,GAAA,WAAA,QAAAA,MA8GA,MA7GgBA,GAAA5K,SAAd,SAAuBJ,EAAasF,GAKlC,IAJA,GAAImG,GAAOnG,EAAIxmB,OACbL,EAAI,EACJ+mB,EAAI,EACJkG,EAAS1L,EAAIlhB,OACRL,EAAIitB,GAAUlG,EAAIiG,GAAM,CAC7B,GAAI9sB,GAAOqhB,EAAIuC,WAAW9jB,IAC1B,IAAI,OAAUE,GAAQA,GAAQ,MAAQ,CAEpC,GAAI6mB,EAAI,GAAKiG,GAAQhtB,GAAKitB,EACxB,KAIF,IAAIxlB,GAAO8Z,EAAIuC,WAAW9jB,EAC1B,IAAI,OAAUyH,GAAQA,GAAQ,MAAQ,CAGpC,GAAIylB,IAAsB,KAAPhtB,EAAgB,OAAU,GAAc,KAAPuH,CAEpDof,GAAIjG,WAAYsM,GAAa,GAAM,IAAMnG,KAEzCF,EAAIjG,WAAasM,GAAa,GAAM,GAAQ,IAAMnG,KAClDF,EAAIjG,WAAasM,GAAa,EAAK,GAAQ,IAAMnG,KACjDF,EAAIjG,WAAwB,GAAZsM,EAAoB,IAAMnG,KAC1C/mB,QAIA6mB,GAAIjG,WAAW,IAAMmG,KACrBF,EAAIjG,WAAW,IAAMmG,KACrBF,EAAIjG,WAAW,IAAMmG,SAElB,IAAI,OAAU7mB,GAAQA,GAAQ,MAGnC2mB,EAAIjG,WAAW,IAAMmG,KACrBF,EAAIjG,WAAW,IAAMmG,KACrBF,EAAIjG,WAAW,IAAMmG,SAChB,IAAI7mB,EAAO,IAEhB2mB,EAAIjG,WAAW1gB,EAAM6mB,SAChB,IAAI7mB,EAAO,KAAO,CAEvB,GAAI6mB,EAAI,GAAKiG,EACX,KAGFnG,GAAIjG,WAAY1gB,GAAQ,EAAK,IAAM6mB,KAEnCF,EAAIjG,WAAmB,GAAP1gB,EAAe,IAAM6mB,SAChC,IAAI7mB,EAAO,MAAS,CAEzB,GAAI6mB,EAAI,GAAKiG,EACX,KAGFnG,GAAIjG,WAAY1gB,GAAQ,GAAM,IAAM6mB,KAEpCF,EAAIjG,WAAa1gB,GAAQ,EAAK,GAAQ,IAAM6mB,KAE5CF,EAAIjG,WAAmB,GAAP1gB,EAAe,IAAM6mB,MAGzC,MAAOA,IAGKwF,EAAA3K,SAAd,SAAuBuH,GAGrB,IAFA,GAAIrb,MACA9N,EAAI,EACDA,EAAImpB,EAAK9oB,QAAQ,CACtB,GAAIH,GAAOipB,EAAK7H,UAAUthB,IAC1B,IAAIE,EAAO,IACT4N,EAAM3G,KAAKjH,OACN,CAAA,GAAIA,EAAO,IAGhB,KAAM,IAAID,OAAM,gDACX,IAAIC,EAAO,IAEhB4N,EAAM3G,MAAc,GAAPjH,IAAgB,EAA4B,GAAtBipB,EAAK7H,UAAUthB,UAC7C,IAAIE,EAAO,IAEhB4N,EAAM3G,MAAc,GAAPjH,IAAe,IAA8B,GAAtBipB,EAAK7H,UAAUthB,OAAgB,EAA4B,GAAtBmpB,EAAK7H,UAAUthB,UACnF,CAAA,KAAIE,EAAO,KAQhB,KAAM,IAAID,OAAM,gEALhB,IAAIktB,GAAQhE,EAAK7H,UAAUthB,EAAI,EAC/B8N,GAAM3G,KAA0G,OAA1F,EAAPjH,IAAe,GAA6B,GAAtBipB,EAAK7H,UAAUthB,OAAgB,GAA6B,GAAtBmpB,EAAK7H,UAAUthB,OAAgB,GAAe,OAEzH8N,EAAM3G,MAAgB,GAARgmB,IAAgB,EAA4B,GAAtBhE,EAAK7H,UAAUthB,KAAgB,SAKvE,MAAOisB,GAAcne,IAITye,EAAA/L,WAAd,SAAyBe,GAEvB,IAAK,GADD5hB,GAAI4hB,EAAIlhB,OACHL,EAAEuhB,EAAIlhB,OAAO,EAAGL,GAAG,EAAGA,IAAK,CAClC,GAAIE,GAAOqhB,EAAIuC,WAAW9jB,EACtBE,GAAO,KAAQA,GAAQ,KAAOP,IACzBO,EAAO,MAASA,GAAQ,QAAQP,GAAG,GACxCO,GAAQ,OAAUA,GAAQ,OAAQF,IAExC,MAAOL,IAEX4sB,IA9Ga1tB,GAAA0tB,KAAIA,CAqHjB,IAAAC,GAAA,WAAA,QAAAA,MAkBA,MAjBgBA,GAAA7K,SAAd,SAAuBJ,EAAasF,GAElC,IAAK,GADDxmB,GAASkhB,EAAIlhB,OAASwmB,EAAIxmB,OAASwmB,EAAIxmB,OAASkhB,EAAIlhB,OAC/CL,EAAI,EAAGA,EAAIK,EAAQL,IAC1B6mB,EAAIjG,WAAWW,EAAIuC,WAAW9jB,GAAK,IAAKA,EAE1C,OAAOK,IAGKmsB,EAAA5K,SAAd,SAAuBuH,GAErB,IAAK,GADDrb,GAAQ,GAAIvK,OAAc4lB,EAAK9oB,QAC1BL,EAAI,EAAGA,EAAImpB,EAAK9oB,OAAQL,IAC/B8N,EAAM9N,GAAyB,IAApBmpB,EAAK7H,UAAUthB,EAE5B,OAAOisB,GAAcne,IAGT0e,EAAAhM,WAAd,SAAyBe,GAAuB,MAAOA,GAAIlhB,QAC7DmsB,IAlBa3tB,GAAA2tB,MAAKA,CAwBlB,IAAAC,GAAA,WAAA,QAAAA,MAkBA,MAjBgBA,GAAA9K,SAAd,SAAuBJ,EAAasF,GAElC,IAAK,GADDxmB,GAASkhB,EAAIlhB,OAASwmB,EAAIxmB,OAASwmB,EAAIxmB,OAASkhB,EAAIlhB,OAC/CL,EAAI,EAAGA,EAAIK,EAAQL,IAC1B6mB,EAAIjG,WAA+B,IAApBW,EAAIuC,WAAW9jB,GAAWA,EAE3C,OAAOK,IAGKosB,EAAA7K,SAAd,SAAuBuH,GAErB,IAAK,GADDrb,GAAQ,GAAIvK,OAAc4lB,EAAK9oB,QAC1BL,EAAI,EAAGA,EAAImpB,EAAK9oB,OAAQL,IAC/B8N,EAAM9N,GAAyB,IAApBmpB,EAAK7H,UAAUthB,EAE5B,OAAOisB,GAAcne,IAGT2e,EAAAjM,WAAd,SAAyBe,GAAuB,MAAOA,GAAIlhB,QAC7DosB,IAlBa5tB,GAAA4tB,OAAMA,CA4BnB,IAAAG,GAAA,WAAA,QAAAA,MAgFA,MA1DgBA,GAAAhL,SAAd,SAAuBuH,GAGrB,IAFA,GAAIiE,GAAS,GACTptB,EAAI,EACDA,EAAImpB,EAAK9oB,QAAQ,CACtB,GAAIgtB,GAAOlE,EAAK7H,UAAUthB,KACtBstB,EAAOttB,EAAImpB,EAAK9oB,OAAS8oB,EAAK7H,UAAUthB,KAAO8oB,IAC/CyE,EAAOvtB,EAAImpB,EAAK9oB,OAAS8oB,EAAK7H,UAAUthB,KAAO8oB,IAC/C0E,EAAOH,GAAQ,EACfI,GAAgB,EAAPJ,IAAa,EAAMC,GAAQ,EACpCI,GAAgB,GAAPJ,IAAc,EAAMC,GAAQ,EACrCI,EAAc,GAAPJ,CACPlF,OAAMiF,GACRI,EAAOC,EAAO,GACLtF,MAAMkF,KACfI,EAAO,IAETP,EAASA,EAASR,EAAOgB,QAAQJ,GAAQZ,EAAOgB,QAAQH,GAAQb,EAAOgB,QAAQF,GAAQd,EAAOgB,QAAQD,GAExG,MAAOP,IAGKR,EAAAjL,SAAd,SAAuBJ,EAAasF,GAClC,GAAIxmB,GAASwmB,EAAIxmB,OACb+sB,EAAS,GACTptB,EAAI,CACRuhB,GAAMA,EAAIzf,QAAQ,0BAA2B,GAE7C,KADA,GAAIilB,GAAI,EACD/mB,EAAIuhB,EAAIlhB,QAAU0mB,EAAIF,EAAIxmB,QAAQ,CACvC,GAAImtB,GAAOZ,EAAOiB,QAAQtM,EAAIuK,OAAO9rB,MACjCytB,EAAOb,EAAOiB,QAAQtM,EAAIuK,OAAO9rB,MACjC0tB,EAAOd,EAAOiB,QAAQtM,EAAIuK,OAAO9rB,MACjC2tB,EAAOf,EAAOiB,QAAQtM,EAAIuK,OAAO9rB,MACjCqtB,EAAQG,GAAQ,EAAMC,GAAQ,EAC9BH,GAAgB,GAAPG,IAAc,EAAMC,GAAQ,EACrCH,GAAgB,EAAPG,IAAa,EAAKC,CAE/B,IADA9G,EAAIjG,WAAWyM,EAAMtG,KACjBA,IAAM1mB,EACR,KAKF,IAHa,KAATqtB,IACFN,GAAUvG,EAAIjG,WAAW0M,EAAMvG,MAE7BA,IAAM1mB,EACR,KAKF,IAHa,KAATstB,IACFP,GAAUvG,EAAIjG,WAAW2M,EAAMxG,MAE7BA,IAAM1mB,EACR,MAGJ,MAAO0mB,IAGK6F,EAAApM,WAAd,SAAyBe,GACvB,MAAOpQ,MAAKmU,MAA2D,EAAnD/D,EAAIzf,QAAQ,wBAAyB,IAAKzB,OAAc,IA7E/DusB,EAAAkB,UAAY,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC5UlB,EAAAgB,QAAoB,WAEjC,IAAK,GADDhmB,GAAM,GAAIrE,OAAMqpB,EAAOkB,SAASztB,QAC3B0tB,EAAM,EAAGA,EAAMnB,EAAOkB,SAASztB,OAAQ0tB,IAAO,CACrD,GAAI/tB,GAAI4sB,EAAOkB,SAASC,EACxBnmB,GAAImmB,GAAO/tB,EAEb,MAAO4H,MAGMglB,EAAAiB,QAAmC,WAEhD,IAAK,GADDjmB,MACKmmB,EAAM,EAAGA,EAAMnB,EAAOkB,SAASztB,OAAQ0tB,IAAO,CACrD,GAAI/tB,GAAI4sB,EAAOkB,SAASC,EACxBnmB,GAAI5H,GAAK+tB,EAIX,MAFAnmB,GAAI,KAAO,GACXA,EAAO,EAAI,GACJA,KA6DXglB,IAhFa/tB,GAAA+tB,OAAMA,CAyFnB,IAAAF,GAAA,WAAA,QAAAA,MA4BA,MA3BgBA,GAAA/K,SAAd,SAAuBJ,EAAasF,GAClC,GAAIxf,GAAMka,EAAIlhB,MAGJ,GAANgH,EAAUwf,EAAIxmB,SAChBgH,EAAMwf,EAAIxmB,OAAS,IAAM,GAAKwmB,EAAIxmB,OAAS,GAAK,EAAIwmB,EAAIxmB,OAAS,EAEnE,KAAK,GAAIL,GAAI,EAAGA,EAAIqH,EAAKrH,IACvB6mB,EAAIzB,cAAc7D,EAAIuC,WAAW9jB,GAAQ,EAAJA,EAEvC,OAAa,GAANqH,GAGKqlB,EAAA9K,SAAd,SAAuBuH,GACrB,GAAIA,EAAK9oB,OAAS,IAAM,EACtB,KAAM,IAAIJ,OAAM,2BAGlB,KAAK,GADD6N,GAAQ,GAAIvK,OAAM4lB,EAAK9oB,OAAS,GAC3BL,EAAI,EAAGA,EAAImpB,EAAK9oB,OAAQL,GAAK,EACpC8N,EAAM9N,EAAI,GAAKqG,OAAO0lB,aAAa5C,EAAK7H,UAAUthB,GAAMmpB,EAAK7H,UAAUthB,EAAI,IAAM,EAEnF,OAAO8N,GAAMrB,KAAK,KAGNigB,EAAAlM,WAAd,SAAyBe,GACvB,MAAoB,GAAbA,EAAIlhB,QAEfqsB,IA5Ba7tB,GAAA6tB,KAAIA,CAkCjB,IAAAC,GAAA,WAAA,QAAAA,MA8DA,MAnCgBA,GAAAhL,SAAd,SAAuBJ,EAAasF,GAClC,GAAItF,EAAIlhB,OAAS,IAAM,EACrB,KAAM,IAAIJ,OAAM,qBAIlB,IAAI+tB,GAAWzM,EAAIlhB,QAAU,CACzB2tB,GAAWnH,EAAIxmB,SACjB2tB,EAAWnH,EAAIxmB,OAEjB,KAAK,GAAIL,GAAI,EAAGA,EAAIguB,EAAUhuB,IAAK,CACjC,GAAIiuB,GAAQ5uB,KAAK6uB,QAAQ3M,EAAIuK,OAAO9rB,GAAK,IACrCmuB,EAAQ9uB,KAAK6uB,QAAQ3M,EAAIuK,QAAQ9rB,GAAK,GAAK,GAC/C6mB,GAAIjG,WAAYqN,GAAS,EAAKE,EAAOnuB,GAEvC,MAAOguB,IAGKrB,EAAA/K,SAAd,SAAuBuH,GAIrB,IAAK,GAHD9hB,GAAM8hB,EAAK9oB,OACXyN,EAAQ,GAAIvK,OAAM8D,GAAO,GACzB0f,EAAI,EACC/mB,EAAI,EAAGA,EAAIqH,EAAKrH,IAAK,CAC5B,GAAIouB,GAA2B,GAApBjF,EAAK7H,UAAUthB,GACtBquB,EAAOlF,EAAK7H,UAAUthB,IAAM,CAChC8N,GAAMiZ,KAAO1nB,KAAKivB,QAAQD,GAC1BvgB,EAAMiZ,KAAO1nB,KAAKivB,QAAQF,GAE5B,MAAOtgB,GAAMrB,KAAK,KAGNkgB,EAAAnM,WAAd,SAAyBe,GAEvB,MAAOA,GAAIlhB,QAAU,GA3DRssB,EAAA4B,SAAW,mBAEX5B,EAAA2B,QAAoB,WAEjC,IAAK,GADD1mB,GAAM,GAAIrE,OAAMopB,EAAI4B,SAASluB,QACxB0tB,EAAM,EAAGA,EAAMpB,EAAI4B,SAASluB,OAAQ0tB,IAAO,CAClD,GAAI/tB,GAAI2sB,EAAI4B,SAASR,EACrBnmB,GAAImmB,GAAO/tB,EAEb,MAAO4H,MAGM+kB,EAAAuB,QAAmC,WAChD,GAAIH,GAAa/tB,EACb4H,IACJ,KAAKmmB,EAAM,EAAGA,EAAMpB,EAAI4B,SAASluB,OAAQ0tB,IACvC/tB,EAAI2sB,EAAI4B,SAASR,GACjBnmB,EAAI5H,GAAK+tB,CAEX,IAAIS,GAAW,QACf,KAAKT,EAAM,EAAGA,EAAMS,EAASnuB,OAAQ0tB,IACnC/tB,EAAIwuB,EAAST,GACbnmB,EAAI5H,GAAK+tB,EAAM,EAEjB,OAAOnmB,MAsCX+kB,IA9Da9tB,GAAA8tB,IAAGA,CA2EhB,IAAAE,GAAA,WAAA,QAAAA,MAqEA,MApEgBA,GAAAlL,SAAd,SAAuBJ,EAAasF,GAElC,GAAmB,IAAftF,EAAIlhB,OACN,MAAO,EAET,IAAI2tB,GAAWnB,EAAOrM,WAAWe,EAC7ByM,GAAWnH,EAAIxmB,SACjB2tB,EAAWnH,EAAIxmB,OAEjB,IAAI0mB,GAAI,EACJ0H,EAAY,EACZC,EAAUD,EAAYT,EAEtBW,EAAYpN,EAAIuC,WAAWiD,IACb,KAAd4H,IACF9H,EAAIjG,WAAuB,IAAZ+N,EAAkB,GACjCF,EAAY,EAEd,KAAK,GAAIzuB,GAAIyuB,EAAWzuB,EAAI0uB,EAAS1uB,GAAK,EAAG,CAC3C,GAAI4uB,GAAMrN,EAAIuC,WAAWiD,IACrB2H,GAAU1uB,IAAM,GAElB6mB,EAAIjG,WAAWgO,GAAO,EAAG5uB,GAEvB0uB,EAAU1uB,GAAK,GAEjB6mB,EAAIrB,cAAcoJ,EAAK5uB,GAG3B,MAAOguB,IAGKnB,EAAAjL,SAAd,SAAuBuH,GACrB,GAAI9hB,GAAM8hB,EAAK9oB,MAEf,IAAY,IAARgH,EACF,MAAO,EAET,IAESrH,GAFL6uB,GAAWxnB,GAAO,GAAK,EACzByG,EAAQ,GAAIvK,OAAcsrB,GAC1B9H,EAAI,CASN,KANkB,KAAP,EAAN1f,GACHyG,EAAM,GAAK,IAAQqb,EAAK7H,UAAUyF,KAElCjZ,EAAM,GAAK,EAGR9N,EAAI,EAAGA,EAAI6uB,EAAS7uB,IACvB8N,EAAM9N,GAAKmpB,EAAK7E,aAAayC,GAC7BA,GAAK,CAEP,OAAOkF,GAAcne,IAGT+e,EAAArM,WAAd,SAAyBe,GACvB,GAAmB,IAAfA,EAAIlhB,OAEN,MAAO,EAET,IAAIsuB,GAAYpN,EAAIuC,WAAW,GAC3BgL,EAAWvN,EAAIlhB,OAAS,GAAM,CAIlC,OAHkB,KAAdsuB,GACFG,IAEKA,GAEXjC,IArEahuB,GAAAguB,OAAMA,CA0EnB,IAAAC,GAAA,WAAA,QAAAA,MAoBA,MAnBgBA,GAAAnL,SAAd,SAAuBJ,EAAasF,GAElC,IAAK,GADDxmB,GAASkhB,EAAIlhB,OAASwmB,EAAIxmB,OAASwmB,EAAIxmB,OAASkhB,EAAIlhB,OAC/CL,EAAI,EAAGA,EAAIK,EAAQL,IAC1B6mB,EAAIjG,WAAWW,EAAIuC,WAAW9jB,GAAK,GAAMA,EAE3C,OAAOK,IAGKysB,EAAAlL,SAAd,SAAuBuH,GAErB,IAAK,GADDrb,GAAQ,GAAIvK,OAAM4lB,EAAK9oB,QAClBL,EAAI,EAAGA,EAAImpB,EAAK9oB,OAAQL,IAC/B8N,EAAM9N,GAAKqG,OAAO0lB,aAAa5C,EAAK7H,UAAUthB,GAAK,GAErD,OAAO8N,GAAMrB,KAAK,KAGNqgB,EAAAtM,WAAd,SAAyBe,GACvB,MAAOA,GAAIlhB,QAEfysB,IApBajuB,GAAAiuB,SAAQA,0DChiBO,oBAAlB,cACRjuB,EAAA0hB,kBAAoB,SAAC+B,GAAmC,OAAA,GACxDzjB,EAAA4hB,cAAgB,SAAC6B,GAA+B,OAAA,KAEhDzjB,EAAA4hB,cAAgB,SAAS6B,GACvB,MAAgC,gBAAlBA,GAAG9B,YAEfgC,YAAoB,OACtB3jB,EAAA0hB,kBAAoB,SAAS+B,GAC3B,MAAOE,aAAYuM,OAAOzM,IAG5BzjB,EAAA0hB,kBAAoB,SAAS+B,GAC3B,MAAOzjB,GAAA4hB,cAAc6B,EAAW,4DCjBtC,SAAA0M,GAAwBC,GACtB,GAAIC,GAAMC,EAAYC,KAAKH,EAE3B,OADAC,GAAIhkB,QACGgkB,EAJT,GAAIC,GAAc,gEAelBE,EAAA,WAAA,QAAAA,MAqaA,MAzZgBA,GAAAC,UAAd,SAAwBC,GAEZ,KAANA,IACFA,EAAI,IAIN,IAAIC,GAAWD,EAAEzD,OAAO,KAAOuD,EAAKI,GAEpCF,GAAIF,EAAKK,qBAAqBH,EAI9B,KAAK,GAFDI,GAAaJ,EAAEnhB,MAAMihB,EAAKI,KAC1BG,KACK7B,EAAM,EAAGA,EAAM4B,EAAWtvB,OAAQ0tB,IAAO,CAChD,GAAI8B,GAAIF,EAAW5B,EACT,OAAN8B,IAEa,OAANA,IAAeL,IAAcA,GAAYI,EAAevvB,OAAS,GAA2B,OAAtBuvB,EAAe,IAK9FA,EAAehsB,MAEfgsB,EAAezoB,KAAK0oB,IAOxB,IAAKL,GAAYI,EAAevvB,OAAS,EACvC,OAAQuvB,EAAevvB,QACrB,IAAK,GACuB,KAAtBuvB,EAAe,IACjBA,EAAetf,QAAQ,IAEzB,MACF,SACEsf,EAAezoB,KAAK,KAO1B,MAJAooB,GAAIK,EAAenjB,KAAK4iB,EAAKI,KACzBD,GAAYD,EAAEzD,OAAO,KAAOuD,EAAKI,MACnCF,EAAIF,EAAKI,IAAMF,GAEVA,GAkBKF,EAAA5iB,KAAd,eAAmB,GAAAqjB,MAAAC,EAAA,EAAAA,EAAA3sB,UAAA/C,OAAA0vB,IAAAD,EAAAC,EAAA,GAAA3sB,UAAA2sB,EAIjB,KAAK,GADDC,MACKhwB,EAAI,EAAGA,EAAI8vB,EAAMzvB,OAAQL,IAAK,CACrC,GAAIiwB,GAAUH,EAAM9vB,EACpB,IAAuB,gBAAZiwB,GACT,KAAM,IAAIjtB,WAAU,6CAAiDitB,GAChD,MAAZA,GACTD,EAAU7oB,KAAK8oB,GAGnB,MAAOZ,GAAKC,UAAUU,EAAUvjB,KAAK4iB,EAAKI,OA0C9BJ,EAAAa,QAAd,eAAsB,GAAAJ,MAAAC,EAAA,EAAAA,EAAA3sB,UAAA/C,OAAA0vB,IAAAD,EAAAC,EAAA,GAAA3sB,UAAA2sB,EAIpB,KAAK,GADDC,MACKhwB,EAAI,EAAGA,EAAI8vB,EAAMzvB,OAAQL,IAAK,CACrC,GAAIuvB,GAAIO,EAAM9vB,EACd,IAAiB,gBAANuvB,GACT,KAAM,IAAIvsB,WAAU,6CAAiDusB,GACtD,MAANA,IAGLA,EAAEzD,OAAO,KAAOuD,EAAKI,MACvBO,MAEFA,EAAU7oB,KAAKooB,IAInB,GAAIY,GAAWd,EAAKC,UAAUU,EAAUvjB,KAAK4iB,EAAKI,KAClD,IAAIU,EAAS9vB,OAAS,GAAK8vB,EAASrE,OAAOqE,EAAS9vB,OAAS,KAAOgvB,EAAKI,IACvE,MAAOU,GAASC,OAAO,EAAGD,EAAS9vB,OAAS,EAI9C,IAAI8vB,EAASrE,OAAO,KAAOuD,EAAKI,IAAK,CAER,MAAvBU,EAASrE,OAAO,IAAmC,IAApBqE,EAAS9vB,QAAgB8vB,EAASrE,OAAO,KAAOuD,EAAKI,MACtFU,EAA+B,IAApBA,EAAS9vB,OAAe,GAAK8vB,EAASC,OAAO,GAG1D,IAAIC,GAAM9f,EAAQ8f,KAGhBF,GAFe,KAAbA,EAES9wB,KAAKiwB,UAAUe,GAAe,MAARA,EAAchB,EAAKI,IAAM,IAAMU,GAErDE,EAGf,MAAOF,IAwBKd,EAAAiB,SAAd,SAAuBC,EAAcC,GACnC,GAAIxwB,EAGJuwB,GAAOlB,EAAKa,QAAQK,GACpBC,EAAKnB,EAAKa,QAAQM,EAClB,IAAIC,GAAWF,EAAKniB,MAAMihB,EAAKI,KAC3BiB,EAASF,EAAGpiB,MAAMihB,EAAKI,IAE3BiB,GAAOxlB,QACPulB,EAASvlB,OAIT,IAAIylB,GAAU,EACVC,IAEJ,KAAK5wB,EAAI,EAAGA,EAAIywB,EAASpwB,OAAQL,IAAK,CACpC,GAAI6wB,GAAMJ,EAASzwB,EACnB,IAAI6wB,IAAQH,EAAO1wB,GAAnB,CAKA2wB,EAAUF,EAASpwB,OAASL,CAC5B,QAIF4wB,EAAWF,EAAOruB,MAAMrC,GAEA,IAApBywB,EAASpwB,QAAgC,KAAhBowB,EAAS,KACpCE,EAAU,GAIRA,EAAUF,EAASpwB,SACrBswB,EAAUF,EAASpwB,OAGrB,IAAI8kB,GAAK,EACT,KAAKnlB,EAAI,EAAGA,EAAI2wB,EAAS3wB,IACvBmlB,GAAM,KAOR,OALAA,IAAMyL,EAASnkB,KAAK4iB,EAAKI,KAErBtK,EAAG9kB,OAAS,GAAK8kB,EAAG2G,OAAO3G,EAAG9kB,OAAS,KAAOgvB,EAAKI,MACrDtK,EAAKA,EAAGiL,OAAO,EAAGjL,EAAG9kB,OAAS,IAEzB8kB,GAeKkK,EAAAyB,QAAd,SAAsBvB,GAGpBA,EAAIF,EAAKK,qBAAqBH,EAC9B,IAAIC,GAAWD,EAAEzD,OAAO,KAAOuD,EAAKI,IAChCsB,EAAWxB,EAAEnhB,MAAMihB,EAAKI,IAQ5B,OANuB,KAAnBsB,EAASntB,OAAgBmtB,EAAS1wB,OAAS,GAC7C0wB,EAASntB,MAKPmtB,EAAS1wB,OAAS,GAA0B,IAApB0wB,EAAS1wB,SAAiBmvB,EAC7CuB,EAAStkB,KAAK4iB,EAAKI,KACjBD,EACFH,EAAKI,IAEL,KAkBGJ,EAAA2B,SAAd,SAAuBzB,EAAWtQ,GAEhC,GAFgC,SAAAA,IAAAA,EAAA,IAEtB,KAANsQ,EACF,MAAOA,EAGTA,GAAIF,EAAKC,UAAUC,EAEnB,IAAIwB,GAAWxB,EAAEnhB,MAAMihB,EAAKI,KACxBwB,EAAWF,EAASA,EAAS1wB,OAAS,EAG1C,IAAiB,KAAb4wB,GAAmBF,EAAS1wB,OAAS,EACvC,MAAO0wB,GAASA,EAAS1wB,OAAS,EAGpC,IAAI4e,EAAI5e,OAAS,EAAG,CAClB,GAAI6wB,GAAcD,EAASb,OAAOa,EAAS5wB,OAAS4e,EAAI5e,OACxD,IAAI6wB,IAAgBjS,EAClB,MAAOgS,GAASb,OAAO,EAAGa,EAAS5wB,OAAS4e,EAAI5e,QAGpD,MAAO4wB,IAsBK5B,EAAA8B,QAAd,SAAsB5B,GACpBA,EAAIF,EAAKC,UAAUC,EACnB,IAAIwB,GAAWxB,EAAEnhB,MAAMihB,EAAKI,IAM5B,IALAF,EAAIwB,EAASntB,MAEH,KAAN2rB,GAAYwB,EAAS1wB,OAAS,IAChCkvB,EAAIwB,EAASntB,OAEL,OAAN2rB,EACF,MAAO,EAET,IAAIvvB,GAAIuvB,EAAE6B,YAAY,IACtB,OAAIpxB,MAAM,GAAY,IAANA,EACP,GAEFuvB,EAAEa,OAAOpwB,IAUJqvB,EAAAgC,WAAd,SAAyB9B,GACvB,MAAOA,GAAElvB,OAAS,GAAKkvB,EAAEzD,OAAO,KAAOuD,EAAKI,KAMhCJ,EAAAiC,UAAd,SAAwB/B,GACtB,MAAOA,IAMKF,EAAAkC,MAAd,SAAoBhC,GAClB,GAAIiC,GAAWxC,EAAeO,EAC9B,QACEhW,KAAMiY,EAAS,GACftV,IAAKsV,EAAS,GAAKA,EAAS,GAAGnvB,MAAM,GAAG,GACxCovB,KAAMD,EAAS,GACfvS,IAAKuS,EAAS,GACdziB,KAAMyiB,EAAS,GAAGnvB,MAAM,EAAGmvB,EAAS,GAAGnxB,OAASmxB,EAAS,GAAGnxB,UAIlDgvB,EAAAqC,OAAd,SAAqBC,GACnB,GAAmB,OAAfA,GAA6C,gBAAfA,GAChC,KAAM,IAAI3uB,WAAU,uDAAwD2uB,GAG9E,IAAIpY,GAAOoY,EAAWpY,MAAQ,EAE9B,IAAoB,gBAATA,GACT,KAAM,IAAIvW,WACN,8DACO2uB,GAAWpY,KAIxB,IAAI2C,GAAMyV,EAAWzV,IAAMyV,EAAWzV,IAAMmT,EAAKI,IAAM,GACnDgC,EAAOE,EAAWF,MAAQ,EAC9B,OAAOvV,GAAMuV,GAQApC,EAAAK,qBAAf,SAAoCH,GAElC,MADAA,GAAIA,EAAEztB,QAAQzC,KAAKuyB,cAAevyB,KAAKowB,MAL3BJ,EAAAI,IAAc,IAEbJ,EAAAuC,cAAgB,GAAIhX,QAAO,MAAO,KAQnCyU,EAAAwC,UAAY,IAEZxC,EAAAyC,MAAQzC,EAERA,EAAA0C,MAAQ1C,EACxBA,IAIAvwB,GAAAD,QAASwwB,qFCvbT,SAAA2C,GAAmB3tB,GACN4tB,EAAc5tB,KAIW,kBAAlBkM,GAASlM,GAClB4tB,EAAc5tB,GAAO,WAC1B,MAA0BkM,GAASlM,GAAM3D,MAAM6P,EAASnN,YAGnD6uB,EAAc5tB,GAAckM,EAASlM,IAhBhD,GAAO6tB,GAAO3xB,EAAW,aAGrBgQ,EAAU,GAAI2hB,GAChBD,IAgBF,KAAK,GAAI5tB,KAAOkM,GAGdyhB,EAAU3tB,EAIZ4tB,GAAaE,eAAiB,WACN,OAAlB5hB,EAAQ6hB,QACV7hB,EAAQ4hB,iBACRF,EAAaG,MAAQ7hB,EAAQ6hB,MAC7BH,EAAaI,OAAS9hB,EAAQ8hB,OAC9BJ,EAAaK,OAAS/hB,EAAQ+hB,SAIlC/hB,EAAQyK,SAAS,WACfiX,EAAaE,mBAGfrzB,EAAAD,QAASozB,oQClCFM,EAAMhyB,EAAW,UAGpB8uB,EAAqB,KAEzBmD,EAAA,WAGE,QAAAA,GAAYC,EAAenvB,GACzBjE,KAAKozB,IAAMA,EACXpzB,KAAKiE,MAAQA,EAMjB,MAHSkvB,GAAA3rB,UAAAoE,IAAP,WACE5L,KAAKozB,IAAI/xB,MAAM,KAAMrB,KAAKiE,QAE9BkvB,KAMAE,EAAA,WAAA,QAAAA,KACUrzB,KAAAszB,UACAtzB,KAAAuzB,WAAY,EAEZvzB,KAAAwzB,cAAwB,KACxBxzB,KAAAyzB,aAAc,EA4CxB,MA1CSJ,GAAA7rB,UAAAM,KAAP,SAAYK,GAAZ,GAAAurB,GAAA1zB,IACiC,KAA3BA,KAAKszB,OAAOxrB,KAAKK,IAAgBnI,KAAKuzB,WACxC3jB,WAAW,WAAM,MAAA8jB,GAAKC,eAAe,IAIjCN,EAAA7rB,UAAAosB,iBAAR,WACE5zB,KAAKuzB,WAAY,EACbvzB,KAAKwzB,eAAiBxzB,KAAKwzB,cAAcxyB,OAC3ChB,KAAKszB,OAAStzB,KAAKwzB,cAAc1uB,OAAO9E,KAAKszB,QAE7CtzB,KAAKyzB,aAAc,EAEjBzzB,KAAKszB,OAAOtyB,QACdhB,KAAK2zB,eAIDN,EAAA7rB,UAAAmsB,YAAR,WAAA,GAAAD,GAAA1zB,IACE,KAAIA,KAAKuzB,UAAT,CAIA,GAAInc,GAAUxH,WAAW,WAAM,MAAA8jB,GAAKE,oBACpC5zB,MAAKuzB,WAAY,CAGjB,KADA,GAAIvrB,GAAMhI,KAAKszB,OAAOtyB,OAChBgH,GAAK,CAGT,IAFAhI,KAAKwzB,cAAgBxzB,KAAKszB,OAC1BtzB,KAAKszB,YACItzB,KAAKyzB,YAAczrB,GACtBhI,KAAKwzB,eACPxzB,KAAKwzB,cAAcxzB,KAAKyzB,aAAa7nB,KAGzC5L,MAAKyzB,aAAc,EACnBzrB,EAAMhI,KAAKszB,OAAOtyB,OAEpBhB,KAAKwzB,cAAgB,KACrBxzB,KAAKuzB,WAAY,EACjB5b,aAAaP,KAEjBic,KAQAR,EAAA,SAAAhL,GAAA,QAAAgL,KAAsBhL,EAAAxmB,MAAArB,KAAA+D,WACZ/D,KAAA6zB,UAAYC,KAAKC,MAEjB/zB,KAAAg0B,KAAe,IAgChBh0B,KAAAi0B,SAAmB,UASnBj0B,KAAAk0B,QACAl0B,KAAAm0B,YACAn0B,KAAAgzB,OAAe,KACfhzB,KAAAizB,OAAe,KACfjzB,KAAA+yB,MAAc,KACd/yB,KAAAo0B,OAAwB,KAEvBp0B,KAAAszB,OAAwB,GAAID,GAM7BrzB,KAAAq0B,SAAWC,EAMXt0B,KAAAu0B,OACAv0B,KAAAw0B,SAAmB,EAMlBx0B,KAAAy0B,KAAe,EAYfz0B,KAAA00B,KAAe,EAYhB10B,KAAA20B,QAAkB,OAElB30B,KAAA40B,UACLC,YAAa,MACbzkB,KAAM,MACN0kB,GAAI,MACJC,GAAI,MACJC,KAAM,MACNC,KAAM,MACNC,IAAK,MACLC,QAAS,IACTC,QAAS,OAGJp1B,KAAAq1B,QACLC,iBACEC,UACAC,sBAAuB,UACvBC,WACAC,gBACAC,cACFC,WACEC,MAAO,EACPC,UAAW,MACXC,kBAAkB,EAClBC,kBAAkB,EAClBC,YAAa,GACbC,mBAAmB,EACnBC,yBAAyB,EACzBC,mBAAmB,EACnBC,kBAAkB,EAClBC,gBAAgB,EAChBC,iBAAiB,EACjBC,cAAc,EACdC,kBAAkB,EAClBC,qBAAqB,EACrBC,iBAAiB,EACjBC,YAAa,MACbC,iBAAiB,EACjBC,sBAAuB,EACvBC,WAAY,KAMT/2B,KAAAg3B,IAAqB,IAAdllB,KAAKmlB,SAAe,EAE3Bj3B,KAAAk3B,MAAQ,OACRl3B,KAAAm3B,KAAO,MAKNn3B,KAAAo3B,MAAQ,GA2CTp3B,KAAAq3B,UAAqBvzB,OAC9B,MAhMsBgkB,GAAA+K,EAAAhL,GAebgL,EAAArrB,UAAA8vB,MAAP,SAAaza,GAEE,OAATmT,IACFA,EAAO9uB,EAAQ,SAEjBlB,KAAKg0B,KAAOhE,EAAKa,QAAQhU,IAQpBgW,EAAArrB,UAAAwpB,IAAP,WACE,MAAOhxB,MAAKg0B,MAWPnB,EAAArrB,UAAA+vB,OAAP,WACE,OAASzD,KAAKC,MAAQ/zB,KAAK6zB,WAAa,IAAQ,GAY3ChB,EAAArrB,UAAAmU,SAAP,SAAgByX,OAAU,GAAA5xB,MAAAkvB,EAAA,EAAAA,EAAA3sB,UAAA/C,OAAA0vB,IAAAlvB,EAAAkvB,EAAA,GAAA3sB,UAAA2sB,EACxB1wB,MAAKszB,OAAOxrB,KAAK,GAAIqrB,GAAKC,EAAK5xB,KAK1BqxB,EAAArrB,UAAAgwB,MAAP,WACEx3B,KAAKy3B,KAAK,UAKL5E,EAAArrB,UAAAkwB,KAAP,SAAY72B,GACVb,KAAKw0B,SAAW3zB,EAChBb,KAAKy3B,KAAK,QAAS52B,KAIdgyB,EAAArrB,UAAAmwB,OAAP,WACE,MAAO33B,MAAKy0B,MAEP5B,EAAArrB,UAAAowB,OAAP,SAAcC,GACO,gBAARA,GACT73B,KAAKy0B,KAAOoD,EAEZ73B,KAAKy0B,KAAO,GAKT5B,EAAArrB,UAAAswB,OAAP,WACE,MAAO93B,MAAK00B,MAEP7B,EAAArrB,UAAAuwB,OAAP,SAAcC,GACO,gBAARA,GACTh4B,KAAK00B,KAAOsD,EAEZh4B,KAAK00B,KAAO,GA8CT7B,EAAArrB,UAAAqK,KAAP,SAAYmlB,EAAaiB,GACvBj4B,KAAKy3B,KAAK,QAAST,EAAKiB,KAOnBpF,EAAArrB,UAAA0wB,YAAP,WACE,OAASC,IAAK,EAAGC,UAAW,EAAGC,SAAU,IAIpCxF,EAAArrB,UAAA8wB,MAAP,SAAaC,GAAA,SAAAA,IAAAA,EAAev4B,KAAKo3B,MAC/B,IAAIoB,GAAUx4B,KAAKo3B,KAGnB,OAFAp3B,MAAKo3B,MAAQmB,EACbv4B,KAAKy3B,KAAK,SAAUc,IACbC,GAGF3F,EAAArrB,UAAAixB,OAAP,WACE,GAAIC,EAEFA,GADyB,mBAAhBC,aACEA,YAAY5E,MACdD,KAAU,IACRA,KAAKC,OAEL,GAAKD,OAAQ8E,SAE1B,IAAIC,GAAQH,EAAW,IAAM,CAG7B,OAFAA,IAAmB,IAAPG,EACZH,EAAuB,IAAXA,EAAoB,GACxBG,EAAMH,IAMT7F,EAAArrB,UAAAsrB,eAAP,WAEE,GAAoB,OAAhB9yB,KAAKgzB,OAAiB,CACxB,GAAI8F,GAAmB53B,EAAQ,QAC/BlB,MAAKgzB,OAAS,GAAI8F,GAClB94B,KAAKizB,OAAS,GAAI6F,GAClB94B,KAAK+yB,MAAQ,GAAI+F,KAOdjG,EAAArrB,UAAAuxB,WAAP,aAKFlG,GAhMsBK,EAAO8F,aAkM7Bv5B,GAAAD,QAASqzB;QCvRFoG,EAAM/3B,EAAW,UAExB43B,EAAA,SAAAjR,GAQE,QAAAiR,KACEjR,EAAA9mB,KAAAf,MARKA,KAAAk5B,OAAiB,EACjBl5B,KAAAm5B,QAAkB,GAClBn5B,KAAAo5B,KAAe,IACfp5B,KAAAq5B,OAAiB,EAChBr5B,KAAAs5B,mBACAt5B,KAAAu5B,mBAA6B,EAgFvC,MAtFkBzR,GAAAgR,EAAAjR,GAeTiR,EAAAtxB,UAAAgyB,WAAP,SAAkBC,GACZz5B,KAAKk5B,QAAUO,IACjBz5B,KAAKk5B,MAAQO,EAGbz5B,KAAKy3B,KAAK,gBAOPqB,EAAAtxB,UAAAkyB,cAAP,SAAqBP,GACfA,IAAYn5B,KAAKm5B,UACnBn5B,KAAKm5B,QAAUA,EAEfn5B,KAAKy3B,KAAK,YAOPqB,EAAAtxB,UAAAmyB,WAAP,SAAkBP,GACZA,IAASp5B,KAAKo5B,OAChBp5B,KAAKo5B,KAAOA,EAEZp5B,KAAKy3B,KAAK,YAOAqB,EAAAc,OAAd,SAAqBC,GACnB,MAAOA,IAAMA,YAAcf,IAGtBA,EAAAtxB,UAAAsyB,OAAP,SAAcC,EAAY5X,EAAkBtd,GAC1C,GAAI0M,EACJ,KACE,GAAId,EAEFA,GADoB,gBAAZ,GACD,GAAIoQ,GAAOkZ,EAAO5X,GAElB4X,EAET/5B,KAAKs5B,gBAAgBxxB,KAAK2I,GACtBzQ,KAAKu5B,mBACPv5B,KAAKg6B,MAAM,MAEb,MAAO95B,GACPqR,EAAQrR,UAER2E,EAAG0M,KAIAunB,EAAAtxB,UAAAwyB,MAAP,SAAaC,GAEX,GAAoC,IAAhCj6B,KAAKs5B,gBAAgBt4B,OACvBhB,KAAKu5B,mBAAoB,MAEzB,MAAOv5B,KAAKs5B,gBAAgBt4B,OAAS,IACnChB,KAAKu5B,kBAAoBv5B,KAAK8H,KAAK9H,KAAKs5B,gBAAgBztB,SACnD7L,KAAKu5B,uBAMlBT,GAtFkBG,EAAOiB,OAwFzBz6B,GAAAD,QAASs5B,8HC1FT,YAEA,IAAAtnB,GAAAtQ,EAAA,UACA2f,EAAArP,EAAAqP,OACA+G,EAAApW,EAAAoW,WACAuS,EAAA3oB,EAAA4oB,YAAA,UACA56B,GAAA66B,MAAA,SAAAJ,EAAAzV,EAAArC,GACA,GAAA,kBAAAtB,GAAAwZ,MACA,MAAAxZ,GAAAwZ,MAAAJ,EAAAzV,EAAArC,EAEA,IAAA,gBAAAA,GACA,KAAA,IAAAxe,WAAA,8BAEA,IAAA,gBAAAs2B,GACA,KAAA,IAAAt2B,WAAA,wBAEA,IAAAs2B,EAAAE,EACA,KAAA,IAAAta,YAAA,oBAEA,IAAAkH,GAAA5E,EACAmY,EAAA9V,CACA1gB,UAAAw2B,IACAvT,EAAAjjB,OACAw2B,EAAA,EAEA,IAAA9S,GAAA,GAAA3G,GAAAoZ,EACA,IAAA,gBAAAK,GAIA,IAHA,GAAAC,GAAA,GAAA1Z,GAAAyZ,EAAAvT,GACAyT,EAAAD,EAAAv5B,OACAL,GAAA,IACAA,EAAAs5B,GACAzS,EAAA7mB,GAAA45B,EAAA55B,EAAA65B,OAGAhT,GAAAhD,KAAA8V,EAEA,OAAA9S,IAEAhoB,EAAAi7B,YAAA,SAAAR,GACA,GAAA,kBAAApZ,GAAA4Z,YACA,MAAA5Z,GAAA4Z,YAAAR,EAEA,IAAA,gBAAAA,GACA,KAAA,IAAAt2B,WAAA,wBAEA,IAAAs2B,EAAAE,EACA,KAAA,IAAAta,YAAA,oBAEA,OAAA,IAAAgB,GAAAoZ,IAEAz6B,EAAA0xB,KAAA,SAAAxvB,EAAAg5B,EAAA15B,GACA,GAAA,kBAAA6f,GAAAqQ,QAAApxB,EAAAwjB,YAAAA,WAAA4N,OAAArQ,EAAAqQ,MACA,MAAArQ,GAAAqQ,KAAAxvB,EAAAg5B,EAAA15B,EAEA,IAAA,gBAAAU,GACA,KAAA,IAAAiC,WAAA,wCAEA,IAAA,gBAAAjC,GACA,MAAA,IAAAmf,GAAAnf,EAAAg5B,EAEA,IAAA,mBAAAvX,cAAAzhB,YAAAyhB,aAAA,CACA,GAAAxD,GAAA+a,CACA,IAAA,IAAA32B,UAAA/C,OACA,MAAA,IAAA6f,GAAAnf,EAEA,oBAAAie,KACAA,EAAA,EAEA,IAAA3X,GAAAhH,CAIA,IAHA,mBAAAgH,KACAA,EAAAtG,EAAAyf,WAAAxB,GAEAA,GAAAje,EAAAyf,WACA,KAAA,IAAAtB,YAAA,4BAEA,IAAA7X,EAAAtG,EAAAyf,WAAAxB,EACA,KAAA,IAAAE,YAAA,4BAEA,OAAA,IAAAgB,GAAAnf,EAAAsB,MAAA2c,EAAAA,EAAA3X,IAEA,GAAA6Y,EAAA6C,SAAAhiB,GAAA,CACA,GAAAmuB,GAAA,GAAAhP,GAAAnf,EAAAV,OAEA,OADAU,GAAA4f,KAAAuO,EAAA,EAAA,EAAAnuB,EAAAV,QACA6uB,EAEA,GAAAnuB,EAAA,CACA,GAAAwC,MAAA0C,QAAAlF,IAAA,mBAAAyhB,cAAAzhB,EAAA8P,iBAAA2R,cAAA,UAAAzhB,GACA,MAAA,IAAAmf,GAAAnf,EAEA,IAAA,WAAAA,EAAAC,MAAAuC,MAAA0C,QAAAlF,EAAA+O,MACA,MAAA,IAAAoQ,GAAAnf,EAAA+O,MAIA,KAAA,IAAA9M,WAAA,uFAEAnE,EAAAm7B,gBAAA,SAAAV,GACA,GAAA,kBAAApZ,GAAA8Z,gBACA,MAAA9Z,GAAA8Z,gBAAAV,EAEA,IAAA,gBAAAA,GACA,KAAA,IAAAt2B,WAAA,wBAEA,IAAAs2B,GAAAE,EACA,KAAA,IAAAta,YAAA,oBAEA,OAAA,IAAA+H,GAAAqS,oKClFA,QAAArzB,GAAAsI,GACA,MAAAhL,OAAA0C,QACA1C,MAAA0C,QAAAsI,GAEA,mBAAApN,EAAAoN,GAIA,QAAA0rB,GAAA1rB,GACA,MAAA,iBAAAA,GAIA,QAAA2rB,GAAA3rB,GACA,MAAA,QAAAA,EAIA,QAAA4rB,GAAA5rB,GACA,MAAA,OAAAA,EAIA,QAAA6rB,GAAA7rB,GACA,MAAA,gBAAAA,GAIA,QAAAvI,GAAAuI,GACA,MAAA,gBAAAA,GAIA,QAAAhN,GAAAgN,GACA,MAAA,gBAAAA,GAIA,QAAA8rB,GAAA9rB,GACA,MAAA,UAAAA,EAIA,QAAA+rB,GAAAC,GACA,MAAA,oBAAAp5B,EAAAo5B,GAIA,QAAAz5B,GAAAyN,GACA,MAAA,gBAAAA,IAAA,OAAAA,EAIA,QAAAisB,GAAAC,GACA,MAAA,kBAAAt5B,EAAAs5B,GAIA,QAAAC,GAAAn7B,GACA,MAAA,mBAAA4B,EAAA5B,IAAAA,YAAAU,OAIA,QAAAgB,GAAAsN,GACA,MAAA,kBAAAA,GAIA,QAAAosB,GAAApsB,GACA,MAAA,QAAAA,GACA,iBAAAA,IACA,gBAAAA,IACA,gBAAAA,IACA,gBAAAA,IACA,mBAAAA,GAMA,QAAApN,GAAAvB,GACA,MAAAuF,QAAA0B,UAAA+G,SAAAxN,KAAAR,GA3EAf,EAAAoH,QAAAA,EAKApH,EAAAo7B,UAAAA,EAKAp7B,EAAAq7B,OAAAA,EAKAr7B,EAAAs7B,kBAAAA,EAKAt7B,EAAAu7B,SAAAA,EAKAv7B,EAAAmH,SAAAA,EAKAnH,EAAA0C,SAAAA,EAKA1C,EAAAw7B,YAAAA,EAKAx7B,EAAAy7B,SAAAA,EAKAz7B,EAAAiC,SAAAA,EAKAjC,EAAA27B,OAAAA,EAKA37B,EAAA67B,QAAAA,EAKA77B,EAAAoC,WAAAA,EAUApC,EAAA87B,YAAAA,EAEA97B,EAAAkkB,SAAA7C,EAAA6C,qHCjFA,QAAAsV,KACAh5B,KAAAu7B,QAAAv7B,KAAAu7B,YACAv7B,KAAAw7B,cAAAx7B,KAAAw7B,eAAA13B,OAwQA,QAAAlC,GAAAsN,GACA,MAAA,kBAAAA,GAGA,QAAA6rB,GAAA7rB,GACA,MAAA,gBAAAA,GAGA,QAAAzN,GAAAyN,GACA,MAAA,gBAAAA,IAAA,OAAAA,EAGA,QAAA8rB,GAAA9rB,GACA,MAAA,UAAAA,EAnRAzP,EAAAD,QAAAw5B,EAGAA,EAAAA,aAAAA,EAEAA,EAAAxxB,UAAA+zB,QAAAz3B,OACAk1B,EAAAxxB,UAAAg0B,cAAA13B,OAIAk1B,EAAAyC,oBAAA,GAIAzC,EAAAxxB,UAAAk0B,gBAAA,SAAAt7B,GACA,IAAA26B,EAAA36B,IAAAA,EAAA,GAAA4oB,MAAA5oB,GACA,KAAAuD,WAAA,8BAEA,OADA3D,MAAAw7B,cAAAp7B,EACAJ,MAGAg5B,EAAAxxB,UAAAiwB,KAAA,SAAA91B,GACA,GAAAg6B,GAAAC,EAAA5zB,EAAAxG,EAAAb,EAAAsL,CAMA,IAJAjM,KAAAu7B,UACAv7B,KAAAu7B,YAGA,UAAA55B,KACA3B,KAAAu7B,QAAAhqB,OACA9P,EAAAzB,KAAAu7B,QAAAhqB,SAAAvR,KAAAu7B,QAAAhqB,MAAAvQ,QAAA,CAEA,GADA26B,EAAA53B,UAAA,GACA43B,YAAA/6B,OACA,KAAA+6B,EAGA,IAAA9yB,GAAA,GAAAjI,OAAA,yCAAA+6B,EAAA,IAEA,MADA9yB,GAAAgzB,QAAAF,EACA9yB,EAOA,GAFA+yB,EAAA57B,KAAAu7B,QAAA55B,GAEAq5B,EAAAY,GACA,OAAA,CAEA,IAAAh6B,EAAAg6B,GACA,OAAA73B,UAAA/C,QAEA,IAAA,GACA46B,EAAA76B,KAAAf,KACA,MACA,KAAA,GACA47B,EAAA76B,KAAAf,KAAA+D,UAAA,GACA,MACA,KAAA,GACA63B,EAAA76B,KAAAf,KAAA+D,UAAA,GAAAA,UAAA,GACA,MAEA,SACAvC,EAAA0C,MAAAsD,UAAAxE,MAAAjC,KAAAgD,UAAA,GACA63B,EAAAv6B,MAAArB,KAAAwB,OAEA,IAAAC,EAAAm6B,GAIA,IAHAp6B,EAAA0C,MAAAsD,UAAAxE,MAAAjC,KAAAgD,UAAA,GACAkI,EAAA2vB,EAAA54B,QACAgF,EAAAiE,EAAAjL,OACAL,EAAA,EAAAA,EAAAqH,EAAArH,IACAsL,EAAAtL,GAAAU,MAAArB,KAAAwB,EAGA,QAAA,GAGAw3B,EAAAxxB,UAAAsE,YAAA,SAAAnK,EAAAm6B,GACA,GAAAC,EAEA,KAAAn6B,EAAAk6B,GACA,KAAAn4B,WAAA,8BA2CA,OAzCA3D,MAAAu7B,UACAv7B,KAAAu7B,YAIAv7B,KAAAu7B,QAAAS,aACAh8B,KAAAy3B,KAAA,cAAA91B,EACAC,EAAAk6B,EAAAA,UACAA,EAAAA,SAAAA,GAEA97B,KAAAu7B,QAAA55B,GAGAF,EAAAzB,KAAAu7B,QAAA55B,IAEA3B,KAAAu7B,QAAA55B,GAAAmG,KAAAg0B,GAGA97B,KAAAu7B,QAAA55B,IAAA3B,KAAAu7B,QAAA55B,GAAAm6B,GANA97B,KAAAu7B,QAAA55B,GAAAm6B,EASAr6B,EAAAzB,KAAAu7B,QAAA55B,MAAA3B,KAAAu7B,QAAA55B,GAAAs6B,SAIAF,EAHAf,EAAAh7B,KAAAw7B,eAGAxC,EAAAyC,oBAFAz7B,KAAAw7B,cAKAO,GAAAA,EAAA,GAAA/7B,KAAAu7B,QAAA55B,GAAAX,OAAA+6B,IACA/7B,KAAAu7B,QAAA55B,GAAAs6B,QAAA,EACA9oB,QAAA5B,MAAA,mIAGAvR,KAAAu7B,QAAA55B,GAAAX,QACA,kBAAAmS,SAAA+oB,OAEA/oB,QAAA+oB,UAKAl8B,MAGAg5B,EAAAxxB,UAAA20B,GAAAnD,EAAAxxB,UAAAsE,YAEAktB,EAAAxxB,UAAAjC,KAAA,SAAA5D,EAAAm6B,GAMA,QAAAl8B,KACAI,KAAAo8B,eAAAz6B,EAAA/B,GAEAy8B,IACAA,GAAA,EACAP,EAAAz6B,MAAArB,KAAA+D,YAVA,IAAAnC,EAAAk6B,GACA,KAAAn4B,WAAA,8BAEA,IAAA04B,IAAA,CAcA,OAHAz8B,GAAAk8B,SAAAA,EACA97B,KAAAm8B,GAAAx6B,EAAA/B,GAEAI,MAIAg5B,EAAAxxB,UAAA40B,eAAA,SAAAz6B,EAAAm6B,GACA,GAAAxU,GAAAgV,EAAAt7B,EAAAL,CAEA,KAAAiB,EAAAk6B,GACA,KAAAn4B,WAAA,8BAEA,KAAA3D,KAAAu7B,UAAAv7B,KAAAu7B,QAAA55B,GACA,MAAA3B,KAMA,IAJAsnB,EAAAtnB,KAAAu7B,QAAA55B,GACAX,EAAAsmB,EAAAtmB,OACAs7B,GAAA,EAEAhV,IAAAwU,GACAl6B,EAAA0lB,EAAAwU,WAAAxU,EAAAwU,WAAAA,QACA97B,MAAAu7B,QAAA55B,GACA3B,KAAAu7B,QAAAa,gBACAp8B,KAAAy3B,KAAA,iBAAA91B,EAAAm6B,OAEA,IAAAr6B,EAAA6lB,GAAA,CACA,IAAA3mB,EAAAK,EAAAL,KAAA,GACA,GAAA2mB,EAAA3mB,KAAAm7B,GACAxU,EAAA3mB,GAAAm7B,UAAAxU,EAAA3mB,GAAAm7B,WAAAA,EAAA,CACAQ,EAAA37B,CACA,OAIA,GAAA27B,EAAA,EACA,MAAAt8B,KAEA,KAAAsnB,EAAAtmB,QACAsmB,EAAAtmB,OAAA,QACAhB,MAAAu7B,QAAA55B,IAEA2lB,EAAAhW,OAAAgrB,EAAA,GAGAt8B,KAAAu7B,QAAAa,gBACAp8B,KAAAy3B,KAAA,iBAAA91B,EAAAm6B,GAGA,MAAA97B,OAGAg5B,EAAAxxB,UAAA+0B,mBAAA,SAAA56B,GACA,GAAAqD,GAAAiH,CAEA,KAAAjM,KAAAu7B,QACA,MAAAv7B,KAGA,KAAAA,KAAAu7B,QAAAa,eAKA,MAJA,KAAAr4B,UAAA/C,OACAhB,KAAAu7B,WACAv7B,KAAAu7B,QAAA55B,UACA3B,MAAAu7B,QAAA55B,GACA3B,IAIA,IAAA,IAAA+D,UAAA/C,OAAA,CACA,IAAAgE,IAAAhF,MAAAu7B,QACA,mBAAAv2B,GACAhF,KAAAu8B,mBAAAv3B,EAIA,OAFAhF,MAAAu8B,mBAAA,kBACAv8B,KAAAu7B,WACAv7B,KAKA,GAFAiM,EAAAjM,KAAAu7B,QAAA55B,GAEAC,EAAAqK,GACAjM,KAAAo8B,eAAAz6B,EAAAsK,OACA,IAAAA,EAEA,KAAAA,EAAAjL,QACAhB,KAAAo8B,eAAAz6B,EAAAsK,EAAAA,EAAAjL,OAAA,GAIA,cAFAhB,MAAAu7B,QAAA55B,GAEA3B,MAGAg5B,EAAAxxB,UAAAyE,UAAA,SAAAtK,GACA,GAAA66B,EAOA,OAHAA,GAHAx8B,KAAAu7B,SAAAv7B,KAAAu7B,QAAA55B,GAEAC,EAAA5B,KAAAu7B,QAAA55B,KACA3B,KAAAu7B,QAAA55B,IAEA3B,KAAAu7B,QAAA55B,GAAAqB,YAIAg2B,EAAAxxB,UAAAi1B,cAAA,SAAA96B,GACA,GAAA3B,KAAAu7B,QAAA,CACA,GAAAmB,GAAA18B,KAAAu7B,QAAA55B,EAEA,IAAAC,EAAA86B,GACA,MAAA,EACA,IAAAA,EACA,MAAAA,GAAA17B,OAEA,MAAA,IAGAg4B,EAAAyD,cAAA,SAAAE,EAAAh7B,GACA,MAAAg7B,GAAAF,cAAA96B,6BC5RA,kBAAAmE,QAAA4O,OAEAjV,EAAAD,QAAA,SAAAo9B,EAAAC,GACAD,EAAAE,OAAAD,EACAD,EAAAp1B,UAAA1B,OAAA4O,OAAAmoB,EAAAr1B,WACAF,aACA5F,MAAAk7B,EACAG,YAAA,EACAC,UAAA,EACAC,cAAA,MAMAx9B,EAAAD,QAAA,SAAAo9B,EAAAC,GACAD,EAAAE,OAAAD,CACA,IAAAK,GAAA,YACAA,GAAA11B,UAAAq1B,EAAAr1B,UACAo1B,EAAAp1B,UAAA,GAAA01B,GACAN,EAAAp1B,UAAAF,YAAAs1B,4BCPA,QAAAlZ,GAAAnb,GACA,QAAAA,EAAAjB,aAAA,kBAAAiB,GAAAjB,YAAAoc,UAAAnb,EAAAjB,YAAAoc,SAAAnb,GAIA,QAAA40B,GAAA50B,GACA,MAAA,kBAAAA,GAAAkd,aAAA,kBAAAld,GAAAvF,OAAA0gB,EAAAnb,EAAAvF,MAAA,EAAA,IAVAvD,EAAAD,QAAA,SAAA+I,GACA,MAAA,OAAAA,IAAAmb,EAAAnb,IAAA40B,EAAA50B,MAAAA,EAAA60B,mDCTA,SAAAl9B,GAAA,GAAA,gBAAAV,IAAA,mBAAAC,GAAAA,EAAAD,QAAAU,QAAA,IAAA,kBAAAR,IAAAA,EAAAC,IAAAD,KAAAQ,OAAA,CAAA,GAAAC,EAAAA,GAAA,mBAAAN,QAAAA,OAAA,mBAAAC,GAAAA,EAAA,mBAAAC,MAAAA,KAAAC,KAAAG,EAAAk9B,KAAAn9B,MAAA,WAAA,MAAA,SAAAA,GAAAC,EAAAQ,EAAAP,GAAA,QAAAK,GAAAF,EAAAD,GAAA,IAAAK,EAAAJ,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAhB,GAAA,kBAAA2B,IAAAA,CAAA,KAAAZ,GAAAf,EAAA,MAAAA,GAAAgB,GAAA,EAAA,IAAAF,EAAA,MAAAA,GAAAE,GAAA,EAAA,IAAAO,GAAA,GAAAF,OAAA,uBAAAL,EAAA,IAAA,MAAAO,GAAAD,KAAA,mBAAAC,EAAA,GAAAs6B,GAAAz6B,EAAAJ,IAAAf,WAAAW,GAAAI,GAAA,GAAAQ,KAAAq6B,EAAA57B,QAAA,SAAAU,GAAA,GAAAS,GAAAR,EAAAI,GAAA,GAAAL,EAAA,OAAAO,GAAAE,EAAAA,EAAAT,IAAAk7B,EAAAA,EAAA57B,QAAAU,EAAAC,EAAAQ,EAAAP,GAAA,MAAAO,GAAAJ,GAAAf,QAAA,IAAA,GAAAa,GAAA,kBAAAa,IAAAA,EAAAX,EAAA,EAAAA,EAAAH,EAAAY,OAAAT,IAAAE,EAAAL,EAAAG,GAAA,OAAAE,KAAAQ,GAAA,SAAAf,EAAAC,EAAAQ,GAAA,YAAA,IAAAP,GAAA,mBAAAkjB,aAAA,mBAAAga,cAAA,mBAAAC,WAAA58B,GAAA68B,OAAA,SAAAt9B,GAAA,IAAA,GAAAC,GAAA+D,MAAAsD,UAAAxE,MAAAjC,KAAAgD,UAAA,GAAA5D,EAAAa,QAAA,CAAA,GAAAL,GAAAR,EAAA0L,OAAA,IAAAlL,EAAA,CAAA,GAAA,gBAAAA,GAAA,KAAA,IAAAgD,WAAAhD,EAAA,qBAAA,KAAA,GAAAP,KAAAO,GAAAA,EAAAqF,eAAA5F,KAAAF,EAAAE,GAAAO,EAAAP,KAAA,MAAAF,IAAAS,EAAA88B,UAAA,SAAAv9B,EAAAC,GAAA,MAAAD,GAAAc,SAAAb,EAAAD,EAAAA,EAAAqjB,SAAArjB,EAAAqjB,SAAA,EAAApjB,IAAAD,EAAAc,OAAAb,EAAAD,GAAA,IAAAO,IAAAi9B,SAAA,SAAAx9B,EAAAC,EAAAQ,EAAAP,EAAAK,GAAA,GAAAN,EAAAojB,UAAArjB,EAAAqjB,SAAA,WAAArjB,GAAA4hB,IAAA3hB,EAAAojB,SAAA5iB,EAAAA,EAAAP,GAAAK,EAAA,KAAA,GAAAJ,GAAA,EAAAA,EAAAD,EAAAC,IAAAH,EAAAO,EAAAJ,GAAAF,EAAAQ,EAAAN,IAAAs9B,cAAA,SAAAz9B,GAAA,GAAAC,GAAAQ,EAAAP,EAAAK,EAAAJ,EAAAE,CAAA,KAAAH,EAAA,EAAAD,EAAA,EAAAQ,EAAAT,EAAAc,OAAAb,EAAAQ,EAAAR,IAAAC,GAAAF,EAAAC,GAAAa,MAAA,KAAAT,EAAA,GAAA+iB,YAAAljB,GAAAK,EAAA,EAAAN,EAAA,EAAAQ,EAAAT,EAAAc,OAAAb,EAAAQ,EAAAR,IAAAE,EAAAH,EAAAC,GAAAI,EAAAuhB,IAAAzhB,EAAAI,GAAAA,GAAAJ,EAAAW,MAAA,OAAAT,KAAAF,GAAAq9B,SAAA,SAAAx9B,EAAAC,EAAAQ,EAAAP,EAAAK,GAAA,IAAA,GAAAJ,GAAA,EAAAA,EAAAD,EAAAC,IAAAH,EAAAO,EAAAJ,GAAAF,EAAAQ,EAAAN,IAAAs9B,cAAA,SAAAz9B,GAAA,SAAA4E,OAAAzD,SAAAnB,IAAAS,GAAAi9B,SAAA,SAAA19B,GAAAA,GAAAS,EAAAk9B,KAAAva,WAAA3iB,EAAAm9B,MAAAR,YAAA38B,EAAAo9B,MAAAR,WAAA58B,EAAA68B,OAAA78B,EAAAF,KAAAE,EAAAk9B,KAAA35B,MAAAvD,EAAAm9B,MAAA55B,MAAAvD,EAAAo9B,MAAA75B,MAAAvD,EAAA68B,OAAA78B,EAAAN,KAAAM,EAAAi9B,SAAAx9B,QAAA49B,GAAA,SAAA99B,EAAAC,EAAAQ,GAAA,YAAA,SAAAP,GAAAF,EAAAC,GAAA,GAAAA,EAAA,QAAAD,EAAAqjB,UAAAhjB,IAAAL,EAAAqjB,UAAAljB,GAAA,MAAA2G,QAAA0lB,aAAArrB,MAAA,KAAAZ,EAAAg9B,UAAAv9B,EAAAC,GAAA,KAAA,GAAAQ,GAAA,GAAAP,EAAA,EAAAA,EAAAD,EAAAC,IAAAO,GAAAqG,OAAA0lB,aAAAxsB,EAAAE,GAAA,OAAAO,GAAA,GAAAF,GAAAP,EAAA,YAAAG,GAAA,EAAAE,GAAA,CAAA,KAAAyG,OAAA0lB,aAAArrB,MAAA,MAAA,IAAA,MAAAnB,GAAAG,GAAA,EAAA,IAAA2G,OAAA0lB,aAAArrB,MAAA,KAAA,GAAAiiB,YAAA,IAAA,MAAApjB,GAAAK,GAAA,EAAA,IAAA,GAAAD,GAAA,GAAAG,GAAAo9B,KAAA,KAAAt+B,EAAA,EAAAA,EAAA,IAAAA,IAAAe,EAAAf,GAAAA,GAAA,IAAA,EAAAA,GAAA,IAAA,EAAAA,GAAA,IAAA,EAAAA,GAAA,IAAA,EAAAA,GAAA,IAAA,EAAA,CAAAe,GAAA,KAAAA,EAAA,KAAA,EAAAK,EAAAs9B,WAAA,SAAA/9B,GAAA,GAAAC,GAAAQ,EAAAP,EAAAC,EAAAE,EAAAD,EAAAJ,EAAAc,OAAAzB,EAAA,CAAA,KAAAc,EAAA,EAAAA,EAAAC,EAAAD,IAAAM,EAAAT,EAAAukB,WAAApkB,GAAA,SAAA,MAAAM,IAAAN,EAAA,EAAAC,IAAAF,EAAAF,EAAAukB,WAAApkB,EAAA,GAAA,SAAA,MAAAD,KAAAO,EAAA,OAAAA,EAAA,OAAA,KAAAP,EAAA,OAAAC,MAAAd,GAAAoB,EAAA,IAAA,EAAAA,EAAA,KAAA,EAAAA,EAAA,MAAA,EAAA,CAAA,KAAAR,EAAA,GAAAM,GAAAo9B,KAAAt+B,GAAAgB,EAAA,EAAAF,EAAA,EAAAE,EAAAhB,EAAAc,IAAAM,EAAAT,EAAAukB,WAAApkB,GAAA,SAAA,MAAAM,IAAAN,EAAA,EAAAC,IAAAF,EAAAF,EAAAukB,WAAApkB,EAAA,GAAA,SAAA,MAAAD,KAAAO,EAAA,OAAAA,EAAA,OAAA,KAAAP,EAAA,OAAAC,MAAAM,EAAA,IAAAR,EAAAI,KAAAI,EAAAA,EAAA,MAAAR,EAAAI,KAAA,IAAAI,IAAA,EAAAR,EAAAI,KAAA,IAAA,GAAAI,GAAAA,EAAA,OAAAR,EAAAI,KAAA,IAAAI,IAAA,GAAAR,EAAAI,KAAA,IAAAI,IAAA,EAAA,GAAAR,EAAAI,KAAA,IAAA,GAAAI,IAAAR,EAAAI,KAAA,IAAAI,IAAA,GAAAR,EAAAI,KAAA,IAAAI,IAAA,GAAA,GAAAR,EAAAI,KAAA,IAAAI,IAAA,EAAA,GAAAR,EAAAI,KAAA,IAAA,GAAAI,EAAA,OAAAR,IAAAQ,EAAAu9B,cAAA,SAAAh+B,GAAA,MAAAE,GAAAF,EAAAA,EAAAc,SAAAL,EAAAw9B,cAAA,SAAAj+B,GAAA,IAAA,GAAAC,GAAA,GAAAM,GAAAo9B,KAAA39B,EAAAc,QAAAL,EAAA,EAAAP,EAAAD,EAAAa,OAAAL,EAAAP,EAAAO,IAAAR,EAAAQ,GAAAT,EAAAukB,WAAA9jB,EAAA,OAAAR,IAAAQ,EAAAy9B,WAAA,SAAAl+B,EAAAC,GAAA,GAAAQ,GAAAF,EAAAJ,EAAAE,EAAAhB,EAAAY,GAAAD,EAAAc,OAAAF,EAAA,GAAAoD,OAAA,EAAA3E,EAAA,KAAAkB,EAAA,EAAAE,EAAA,EAAAA,EAAApB,GAAA,GAAAc,EAAAH,EAAAS,KAAAN,EAAA,IAAAS,EAAAL,KAAAJ,MAAA,IAAAE,EAAAD,EAAAD,GAAAE,EAAA,EAAAO,EAAAL,KAAA,MAAAE,GAAAJ,EAAA,MAAA,CAAA,IAAAF,GAAA,IAAAE,EAAA,GAAA,IAAAA,EAAA,GAAA,EAAAA,EAAA,GAAAI,EAAApB,GAAAc,EAAAA,GAAA,EAAA,GAAAH,EAAAS,KAAAJ,GAAAA,GAAA,EAAAO,EAAAL,KAAA,MAAAJ,EAAA,MAAAS,EAAAL,KAAAJ,GAAAA,GAAA,MAAAS,EAAAL,KAAA,MAAAJ,GAAA,GAAA,KAAAS,EAAAL,KAAA,MAAA,KAAAJ,GAAA,MAAAD,GAAAU,EAAAL,IAAAE,EAAA09B,WAAA,SAAAn+B,EAAAC,GAAA,GAAAQ,EAAA,KAAAR,EAAAA,GAAAD,EAAAc,OAAAb,EAAAD,EAAAc,SAAAb,EAAAD,EAAAc,QAAAL,EAAAR,EAAA,EAAAQ,GAAA,GAAA,OAAA,IAAAT,EAAAS,KAAAA,GAAA,OAAAA,GAAA,EAAAR,EAAA,IAAAQ,EAAAR,EAAAQ,EAAAL,EAAAJ,EAAAS,IAAAR,EAAAQ,EAAAR,KAAAm+B,WAAA,IAAAC,GAAA,SAAAr+B,EAAAC,EAAAQ,GAAA,YAAA,SAAAP,GAAAF,EAAAC,EAAAQ,EAAAP,GAAA,IAAA,GAAAK,GAAA,MAAAP,EAAA,EAAAG,EAAAH,IAAA,GAAA,MAAA,EAAAK,EAAA,EAAA,IAAAI,GAAA,CAAAJ,EAAAI,EAAA,IAAA,IAAAA,EAAAA,GAAAJ,CAAA,GAAAE,GAAAA,EAAAN,EAAAC,KAAA,EAAAC,EAAAA,EAAAI,EAAA,UAAAF,EAAAE,IAAA,MAAAJ,GAAA,MAAA,MAAAI,GAAAJ,GAAA,GAAA,EAAAF,EAAAX,QAAAY,OAAAo+B,GAAA,SAAAt+B,EAAAC,EAAAQ,GAAA,YAAAR,GAAAX,SAAAi/B,WAAA,EAAAC,gBAAA,EAAAC,aAAA,EAAAC,aAAA,EAAAC,SAAA,EAAAC,QAAA,EAAAC,QAAA,EAAAC,KAAA,EAAAC,aAAA,EAAAC,YAAA,EAAAC,SAAA,EAAAC,gBAAA,EAAAC,cAAA,EAAAC,aAAA,EAAAC,iBAAA,EAAAC,aAAA,EAAAC,mBAAA,EAAAC,uBAAA,EAAAC,WAAA,EAAAC,eAAA,EAAAC,MAAA,EAAAC,QAAA,EAAAC,mBAAA,EAAAC,SAAA,EAAAC,OAAA,EAAAC,UAAA,EAAAC,WAAA,QAAAC,GAAA,SAAAlgC,EAAAC,EAAAQ,GAAA,YAAA,SAAAP,KAAA,IAAA,GAAAF,GAAAC,KAAAQ,EAAA,EAAAA,EAAA,IAAAA,IAAA,CAAAT,EAAAS,CAAA,KAAA,GAAAP,GAAA,EAAAA,EAAA,EAAAA,IAAAF,EAAA,EAAAA,EAAA,WAAAA,IAAA,EAAAA,IAAA,CAAAC,GAAAQ,GAAAT,EAAA,MAAAC,GAAA,QAAAM,GAAAP,EAAAC,EAAAQ,EAAAP,GAAA,GAAAK,GAAAJ,EAAAE,EAAAH,EAAAO,CAAAT,KAAA,CAAA,KAAA,GAAAI,GAAAF,EAAAE,EAAAC,EAAAD,IAAAJ,EAAAA,IAAA,EAAAO,EAAA,KAAAP,EAAAC,EAAAG,IAAA,OAAAJ,IAAA,EAAA,GAAAG,GAAAD,GAAAD,GAAAX,QAAAiB,OAAA4/B,GAAA,SAAAngC,EAAAC,EAAAQ,GAAA,YAAA,SAAAP,KAAAJ,KAAAsgC,KAAA,EAAAtgC,KAAAugC,KAAA,EAAAvgC,KAAAwgC,OAAA,EAAAxgC,KAAAygC,GAAA,EAAAzgC,KAAA0gC,MAAA,KAAA1gC,KAAA2gC,UAAA,EAAA3gC,KAAA0P,KAAA,GAAA1P,KAAA4gC,QAAA,GAAA5gC,KAAA6gC,KAAA,EAAA7gC,KAAAqI,MAAA,EAAAlI,EAAAX,QAAAY,OAAA0gC,GAAA,SAAA5gC,EAAAC,EAAAQ,GAAA,YAAA,IAAAP,GAAA,GAAAK,EAAA,EAAAN,GAAAX,QAAA,SAAAU,EAAAC,GAAA,GAAAQ,GAAAN,EAAAE,EAAAD,EAAAf,EAAAuB,EAAAs6B,EAAA56B,EAAAgwB,EAAAuQ,EAAA7sB,EAAA/B,EAAA4pB,EAAAvjB,EAAArO,EAAAvK,EAAAwK,EAAA8lB,EAAA1d,EAAAE,EAAAsuB,EAAAC,EAAAC,EAAAC,EAAAC,CAAAzgC,GAAAT,EAAAmhC,MAAAhhC,EAAAH,EAAAohC,QAAAH,EAAAjhC,EAAAqhC,MAAAhhC,EAAAF,GAAAH,EAAAshC,SAAA,GAAAlhC,EAAAJ,EAAAuhC,SAAAL,EAAAlhC,EAAA6tB,OAAAxuB,EAAAe,GAAAH,EAAAD,EAAAwhC,WAAA5gC,EAAAR,GAAAJ,EAAAwhC,UAAA,KAAAtG,EAAAz6B,EAAAghC,KAAAnhC,EAAAG,EAAAihC,MAAApR,EAAA7vB,EAAAkhC,MAAAd,EAAApgC,EAAAmhC,MAAA5tB,EAAAvT,EAAAd,OAAAsS,EAAAxR,EAAAohC,KAAAhG,EAAAp7B,EAAAqhC,KAAAxpB,EAAA7X,EAAAshC,QAAA93B,EAAAxJ,EAAAuhC,SAAAtiC,GAAA,GAAAe,EAAAwhC,SAAA,EAAA/3B,GAAA,GAAAzJ,EAAAyhC,UAAA,CAAAliC,GAAA,EAAA,CAAA67B,EAAA,KAAA5pB,GAAAgvB,EAAA9gC,MAAA07B,EAAAA,GAAA,EAAA5pB,GAAAgvB,EAAA9gC,MAAA07B,EAAAA,GAAA,GAAA7L,EAAA1X,EAAArG,EAAAvS,EAAAO,GAAA,OAAA,CAAA,GAAAqS,EAAA0d,IAAA,GAAA/d,KAAAK,EAAAupB,GAAAvpB,EAAAA,EAAA0d,IAAA,GAAA,IAAA,IAAA1d,EAAA4uB,EAAA9gC,KAAA,MAAA4vB,MAAA,CAAA,KAAA,GAAA1d,GAAA,CAAA,GAAA,KAAA,GAAAA,GAAA,CAAA0d,EAAA1X,GAAA,MAAA0X,IAAA/d,GAAA,GAAAK,GAAA,GAAA,SAAArS,GAAA,GAAA,GAAAqS,EAAA,CAAA7R,EAAA84B,KAAAh5B,CAAA,MAAAP,GAAAA,EAAAmiC,IAAA,8BAAA1hC,EAAA84B,KAAAr5B,CAAA,MAAAF,GAAAwS,EAAA,MAAAwd,EAAA1d,GAAA,GAAAA,IAAAupB,EAAAvpB,IAAAL,GAAAgvB,EAAA9gC,MAAA07B,EAAAA,GAAA,GAAArpB,GAAAP,GAAA,GAAAK,GAAA,EAAAL,KAAAK,EAAAupB,GAAAvpB,GAAAupB,EAAA,KAAA5pB,GAAAgvB,EAAA9gC,MAAA07B,EAAAA,GAAA,EAAA5pB,GAAAgvB,EAAA9gC,MAAA07B,EAAAA,GAAA,GAAA7L,EAAA/lB,EAAAgI,EAAA/H,EAAAzJ,GAAA,OAAA,CAAA,GAAA6R,EAAA0d,IAAA,GAAA/d,KAAAK,EAAAupB,GAAAvpB,EAAAA,EAAA0d,IAAA,GAAA,MAAA,GAAA1d,GAAA,CAAA,GAAA,KAAA,GAAAA,GAAA,CAAA0d,EAAA/lB,GAAA,MAAA+lB,IAAA/d,GAAA,GAAAK,GAAA,GAAA,SAAA7R,GAAAT,EAAAmiC,IAAA,wBAAA1hC,EAAA84B,KAAAr5B,CAAA,MAAAF,GAAA,GAAA8gC,EAAA,MAAA9Q,EAAA1d,GAAA,GAAAupB,EAAAvpB,IAAAL,GAAAgvB,EAAA9gC,MAAA07B,EAAAA,GAAA,EAAAA,EAAAvpB,IAAAL,GAAAgvB,EAAA9gC,MAAA07B,EAAAA,GAAA,IAAAiF,GAAA7uB,GAAA,GAAAK,GAAA,EAAAwuB,EAAA5F,EAAA,CAAAl7B,EAAAmiC,IAAA,gCAAA1hC,EAAA84B,KAAAr5B,CAAA,MAAAF,GAAA,GAAAiS,KAAAK,EAAAupB,GAAAvpB,EAAAA,EAAAlS,EAAAf,EAAAyhC,EAAAxuB,EAAA,CAAA,GAAAA,EAAAwuB,EAAAxuB,EAAAA,EAAAge,GAAA7vB,EAAA2hC,KAAA,CAAApiC,EAAAmiC,IAAA,gCAAA1hC,EAAA84B,KAAAr5B,CAAA,MAAAF,GAAA,GAAA+gC,EAAA,EAAAC,EAAAhtB,EAAA,IAAA6sB,GAAA,GAAAE,GAAAzgC,EAAAgS,EAAAA,EAAAE,EAAA,CAAAA,GAAAF,CAAA,GAAA4uB,GAAA9gC,KAAA4T,EAAA+sB,aAAAzuB,EAAAyuB,GAAA3gC,EAAA0gC,EAAAE,EAAAE,OAAA,IAAAL,EAAAvuB,GAAA,GAAAyuB,GAAAzgC,EAAAugC,EAAAvuB,EAAAA,GAAAuuB,EAAAvuB,EAAAE,EAAA,CAAAA,GAAAF,CAAA,GAAA4uB,GAAA9gC,KAAA4T,EAAA+sB,aAAAzuB,EAAA,IAAAyuB,EAAA,EAAAF,EAAAruB,EAAA,CAAAF,EAAAuuB,EAAAruB,GAAAF,CAAA,GAAA4uB,GAAA9gC,KAAA4T,EAAA+sB,aAAAzuB,EAAAyuB,GAAA3gC,EAAA0gC,EAAAE,EAAAE,QAAA,IAAAH,GAAAF,EAAAvuB,EAAAA,EAAAE,EAAA,CAAAA,GAAAF,CAAA,GAAA4uB,GAAA9gC,KAAA4T,EAAA+sB,aAAAzuB,EAAAyuB,GAAA3gC,EAAA0gC,EAAAE,EAAAE,EAAA,KAAA1uB,EAAA,GAAA0uB,EAAA9gC,KAAA4gC,EAAAD,KAAAG,EAAA9gC,KAAA4gC,EAAAD,KAAAG,EAAA9gC,KAAA4gC,EAAAD,KAAAvuB,GAAA,CAAAA,KAAA0uB,EAAA9gC,KAAA4gC,EAAAD,KAAAvuB,EAAA,IAAA0uB,EAAA9gC,KAAA4gC,EAAAD,WAAA,CAAAA,EAAA3gC,EAAA0gC,CAAA,GAAAI,GAAA9gC,KAAA8gC,EAAAH,KAAAG,EAAA9gC,KAAA8gC,EAAAH,KAAAG,EAAA9gC,KAAA8gC,EAAAH,KAAAvuB,GAAA,QAAAA,EAAA,EAAAA,KAAA0uB,EAAA9gC,KAAA8gC,EAAAH,KAAAvuB,EAAA,IAAA0uB,EAAA9gC,KAAA8gC,EAAAH,OAAA,OAAA,aAAA5gC,EAAAE,GAAAD,EAAAQ,EAAA4R,GAAAqpB,GAAA,EAAA17B,GAAAqS,EAAAqpB,GAAArpB,GAAA,EAAAP,IAAA,GAAA4pB,GAAA,EAAA77B,EAAAohC,QAAAjhC,EAAAH,EAAAuhC,SAAAnhC,EAAAJ,EAAAshC,SAAAnhC,EAAAE,EAAA,GAAAA,EAAAF,GAAA,GAAAA,EAAAE,GAAAL,EAAAwhC,UAAAphC,EAAAQ,EAAA,KAAAA,EAAAR,GAAA,KAAAA,EAAAQ,GAAAH,EAAAohC,KAAA5vB,EAAAxR,EAAAqhC,KAAAjG,QAAAwG,GAAA,SAAAriC,EAAAC,EAAAQ,GAAA,YAAA,SAAAP,GAAAF,GAAA,OAAAA,IAAA,GAAA,MAAAA,IAAA,EAAA,SAAA,MAAAA,IAAA,KAAA,IAAAA,IAAA,IAAA,QAAAO,KAAAT,KAAAy5B,KAAA,EAAAz5B,KAAAwiC,MAAA,EAAAxiC,KAAA6P,KAAA,EAAA7P,KAAAyiC,UAAA,EAAAziC,KAAA0iC,MAAA,EAAA1iC,KAAA2hC,KAAA,EAAA3hC,KAAA8S,MAAA,EAAA9S,KAAA2iC,MAAA,EAAA3iC,KAAAgQ,KAAA,KAAAhQ,KAAA4iC,MAAA,EAAA5iC,KAAA4hC,MAAA,EAAA5hC,KAAA6hC,MAAA,EAAA7hC,KAAA8hC,MAAA,EAAA9hC,KAAAH,OAAA,KAAAG,KAAA+hC,KAAA,EAAA/hC,KAAAgiC,KAAA,EAAAhiC,KAAAgB,OAAA,EAAAhB,KAAA2f,OAAA,EAAA3f,KAAA0gC,MAAA,EAAA1gC,KAAAiiC,QAAA,KAAAjiC,KAAAkiC,SAAA,KAAAliC,KAAAmiC,QAAA,EAAAniC,KAAAoiC,SAAA,EAAApiC,KAAA6iC,MAAA,EAAA7iC,KAAA8iC,KAAA,EAAA9iC,KAAA+iC,MAAA,EAAA/iC,KAAAgjC,KAAA,EAAAhjC,KAAAoI,KAAA,KAAApI,KAAAijC,KAAA,GAAA94B,GAAA2zB,MAAA,KAAA99B,KAAAkjC,KAAA,GAAA/4B,GAAA2zB,MAAA,KAAA99B,KAAAmjC,OAAA,KAAAnjC,KAAAojC,QAAA,KAAApjC,KAAAsiC,KAAA,EAAAtiC,KAAAqjC,KAAA,EAAArjC,KAAAsjC,IAAA,EAAA,QAAAjjC,GAAAH,GAAA,GAAAC,EAAA,OAAAD,IAAAA,EAAAmhC,OAAAlhC,EAAAD,EAAAmhC,MAAAnhC,EAAAqjC,SAAArjC,EAAAsjC,UAAArjC,EAAAwiC,MAAA,EAAAziC,EAAAmiC,IAAA,GAAAliC,EAAA0P,OAAA3P,EAAAujC,MAAA,EAAAtjC,EAAA0P,MAAA1P,EAAAs5B,KAAAiK,EAAAvjC,EAAAqiC,KAAA,EAAAriC,EAAAsiC,SAAA,EAAAtiC,EAAAwhC,KAAA,MAAAxhC,EAAA6P,KAAA,KAAA7P,EAAA4hC,KAAA,EAAA5hC,EAAA6hC,KAAA,EAAA7hC,EAAA8hC,QAAA9hC,EAAAgjC,OAAA,GAAAh5B,GAAA4zB,MAAA4F,IAAAxjC,EAAA+hC,SAAA/hC,EAAAijC,QAAA,GAAAj5B,GAAA4zB,MAAA6F,IAAAzjC,EAAAmiC,KAAA,EAAAniC,EAAAkjC,MAAA,EAAAQ,GAAAC,EAAA,QAAAvjC,GAAAL,GAAA,GAAAC,EAAA,OAAAD,IAAAA,EAAAmhC,OAAAlhC,EAAAD,EAAAmhC,MAAAlhC,EAAAyhC,MAAA,EAAAzhC,EAAA0hC,MAAA,EAAA1hC,EAAA2hC,MAAA,EAAAzhC,EAAAH,IAAA4jC,EAAA,QAAAxjC,GAAAJ,EAAAC,GAAA,GAAAQ,GAAAP,CAAA,OAAAF,IAAAA,EAAAmhC,OAAAjhC,EAAAF,EAAAmhC,MAAAlhC,EAAA,GAAAQ,EAAA,EAAAR,GAAAA,IAAAQ,GAAAR,GAAA,GAAA,EAAAA,EAAA,KAAAA,GAAA,KAAAA,IAAAA,EAAA,GAAAA,EAAA,IAAA2jC,GAAA,OAAA1jC,EAAAP,QAAAO,EAAAwiC,QAAAziC,IAAAC,EAAAP,OAAA,MAAAO,EAAAyP,KAAAlP,EAAAP,EAAAwiC,MAAAziC,EAAAI,EAAAL,KAAA4jC,EAAA,QAAAvkC,GAAAW,EAAAC,GAAA,GAAAQ,GAAAP,CAAA,OAAAF,IAAAE,EAAA,GAAAK,GAAAP,EAAAmhC,MAAAjhC,EAAAA,EAAAP,OAAA,KAAAc,EAAAL,EAAAJ,EAAAC,GAAAQ,IAAAkjC,IAAA3jC,EAAAmhC,MAAA,MAAA1gC,GAAAmjC,EAAA,QAAAhjC,GAAAZ,GAAA,MAAAX,GAAAW,EAAA6jC,IAAA,QAAA3I,GAAAl7B,GAAA,GAAA8jC,GAAA,CAAA,GAAA7jC,EAAA,KAAA47B,EAAA,GAAA5xB,GAAA4zB,MAAA,KAAAvlB,EAAA,GAAArO,GAAA4zB,MAAA,IAAA59B,EAAA,EAAAA,EAAA,KAAAD,EAAA+iC,KAAA9iC,KAAA,CAAA,MAAAA,EAAA,KAAAD,EAAA+iC,KAAA9iC,KAAA,CAAA,MAAAA,EAAA,KAAAD,EAAA+iC,KAAA9iC,KAAA,CAAA,MAAAA,EAAA,KAAAD,EAAA+iC,KAAA9iC,KAAA,CAAA,KAAAqS,EAAAwuB,EAAA9gC,EAAA+iC,KAAA,EAAA,IAAAlH,EAAA,EAAA77B,EAAAgjC,MAAAlB,KAAA,IAAA7hC,EAAA,EAAAA,EAAA,IAAAD,EAAA+iC,KAAA9iC,KAAA,CAAAqS,GAAAyuB,EAAA/gC,EAAA+iC,KAAA,EAAA,GAAAzqB,EAAA,EAAAtY,EAAAgjC,MAAAlB,KAAA,IAAAgC,IAAA,EAAA9jC,EAAA+hC,QAAAlG,EAAA77B,EAAAiiC,QAAA,EAAAjiC,EAAAgiC,SAAA1pB,EAAAtY,EAAAkiC,SAAA,EAAA,QAAA5hC,GAAAN,EAAAC,EAAAQ,EAAAP,GAAA,GAAAK,GAAAJ,EAAAH,EAAAmhC,KAAA,OAAA,QAAAhhC,EAAAR,SAAAQ,EAAAuhC,MAAA,GAAAvhC,EAAAuiC,MAAAviC,EAAAyhC,MAAA,EAAAzhC,EAAAwhC,MAAA,EAAAxhC,EAAAR,OAAA,GAAAsK,GAAA0zB,KAAAx9B,EAAAuhC,QAAAxhC,GAAAC,EAAAuhC,OAAAz3B,EAAAuzB,SAAAr9B,EAAAR,OAAAM,EAAAQ,EAAAN,EAAAuhC,MAAAvhC,EAAAuhC,MAAA,GAAAvhC,EAAAyhC,MAAA,EAAAzhC,EAAAwhC,MAAAxhC,EAAAuhC,QAAAnhC,EAAAJ,EAAAuhC,MAAAvhC,EAAAyhC,MAAArhC,EAAAL,IAAAK,EAAAL,GAAA+J,EAAAuzB,SAAAr9B,EAAAR,OAAAM,EAAAQ,EAAAP,EAAAK,EAAAJ,EAAAyhC,OAAA1hC,GAAAK,EAAAL,GAAA+J,EAAAuzB,SAAAr9B,EAAAR,OAAAM,EAAAQ,EAAAP,EAAAA,EAAA,GAAAC,EAAAyhC,MAAA1hC,EAAAC,EAAAwhC,MAAAxhC,EAAAuhC,QAAAvhC,EAAAyhC,OAAArhC,EAAAJ,EAAAyhC,QAAAzhC,EAAAuhC,QAAAvhC,EAAAyhC,MAAA,GAAAzhC,EAAAwhC,MAAAxhC,EAAAuhC,QAAAvhC,EAAAwhC,OAAAphC,KAAA,EAAA,QAAA+vB,GAAAtwB,EAAAC,GAAA,GAAAQ,GAAAF,EAAAJ,EAAAE,EAAAD,EAAAf,EAAAuB,EAAA0vB,EAAAuQ,EAAA7sB,EAAA/B,EAAA4pB,EAAAvjB,EAAAmrB,GAAAC,GAAAK,GAAAF,GAAAC,GAAAE,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAAC,GAAA,EAAAC,GAAA,GAAAt6B,GAAA0zB,KAAA,GAAA6G,IAAA,GAAA,GAAA,GAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,KAAAxkC,IAAAA,EAAAmhC,QAAAnhC,EAAA6tB,SAAA7tB,EAAAqhC,OAAA,IAAArhC,EAAAshC,SAAA,MAAAsC,EAAAnjC,GAAAT,EAAAmhC,MAAA1gC,EAAA84B,OAAAkL,IAAAhkC,EAAA84B,KAAAmL,GAAAtkC,EAAAJ,EAAAuhC,SAAAphC,EAAAH,EAAA6tB,OAAAjtB,EAAAZ,EAAAwhC,UAAAnhC,EAAAL,EAAAohC,QAAA7gC,EAAAP,EAAAqhC,MAAAhiC,EAAAW,EAAAshC,SAAAhR,EAAA7vB,EAAAohC,KAAAhB,EAAApgC,EAAAqhC,KAAA9tB,EAAA3U,EAAA4S,EAAArR,EAAAujC,GAAAR,CAAA3jC,GAAA,OAAA,OAAAS,EAAA84B,MAAA,IAAAiK,GAAA,GAAA,IAAA/iC,EAAAkP,KAAA,CAAAlP,EAAA84B,KAAAmL,CAAA,OAAA,KAAA7D,EAAA,IAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAA,GAAA,EAAApgC,EAAAkP,MAAA,QAAA2gB,EAAA,CAAA7vB,EAAAmS,MAAA,EAAA2xB,GAAA,GAAA,IAAAjU,EAAAiU,GAAA,GAAAjU,IAAA,EAAA,IAAA7vB,EAAAmS,MAAA1I,EAAAzJ,EAAAmS,MAAA2xB,GAAA,EAAA,GAAAjU,EAAA,EAAAuQ,EAAA,EAAApgC,EAAA84B,KAAAoL,CAAA,OAAA,GAAAlkC,EAAA+hC,MAAA,EAAA/hC,EAAAqP,OAAArP,EAAAqP,KAAA3H,MAAA,KAAA,EAAA1H,EAAAkP,UAAA,IAAA2gB,IAAA,IAAAA,GAAA,IAAA,GAAA,CAAAtwB,EAAAmiC,IAAA,yBAAA1hC,EAAA84B,KAAAqL,EAAA,OAAA,IAAA,GAAAtU,KAAAuU,EAAA,CAAA7kC,EAAAmiC,IAAA,6BAAA1hC,EAAA84B,KAAAqL,EAAA,OAAA,GAAAtU,KAAA,EAAAuQ,GAAA,EAAAqD,IAAA,GAAA5T,GAAA,EAAA,IAAA7vB,EAAAiiC,MAAAjiC,EAAAiiC,MAAAwB,OAAA,IAAAA,GAAAzjC,EAAAiiC,MAAA,CAAA1iC,EAAAmiC,IAAA,sBAAA1hC,EAAA84B,KAAAqL,EAAA,OAAAnkC,EAAAghC,KAAA,GAAAyC,GAAAlkC,EAAAujC,MAAA9iC,EAAAmS,MAAA,EAAAnS,EAAA84B,KAAA,IAAAjJ,EAAA7f,EAAAg0B,EAAAnU,EAAA,EAAAuQ,EAAA,CAAA,MAAA,KAAA8D,GAAA,KAAA9D,EAAA,IAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAA,GAAApgC,EAAA+hC,MAAAlS,GAAA,IAAA7vB,EAAA+hC,SAAAqC,EAAA,CAAA7kC,EAAAmiC,IAAA,6BAAA1hC,EAAA84B,KAAAqL,EAAA,OAAA,GAAA,MAAAnkC,EAAA+hC,MAAA,CAAAxiC,EAAAmiC,IAAA,2BAAA1hC,EAAA84B,KAAAqL,EAAA,OAAAnkC,EAAAqP,OAAArP,EAAAqP,KAAAswB,KAAA9P,GAAA,EAAA,GAAA,IAAA7vB,EAAA+hC,QAAA+B,GAAA,GAAA,IAAAjU,EAAAiU,GAAA,GAAAjU,IAAA,EAAA,IAAA7vB,EAAAmS,MAAA1I,EAAAzJ,EAAAmS,MAAA2xB,GAAA,EAAA,IAAAjU,EAAA,EAAAuQ,EAAA,EAAApgC,EAAA84B,KAAAuL,CAAA,KAAAA,GAAA,KAAAjE,EAAA,IAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAApgC,EAAAqP,OAAArP,EAAAqP,KAAAuwB,KAAA/P,GAAA,IAAA7vB,EAAA+hC,QAAA+B,GAAA,GAAA,IAAAjU,EAAAiU,GAAA,GAAAjU,IAAA,EAAA,IAAAiU,GAAA,GAAAjU,IAAA,GAAA,IAAAiU,GAAA,GAAAjU,IAAA,GAAA,IAAA7vB,EAAAmS,MAAA1I,EAAAzJ,EAAAmS,MAAA2xB,GAAA,EAAA,IAAAjU,EAAA,EAAAuQ,EAAA,EAAApgC,EAAA84B,KAAAwL,CAAA,KAAAA,GAAA,KAAAlE,EAAA,IAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAApgC,EAAAqP,OAAArP,EAAAqP,KAAAwwB,OAAA,IAAAhQ,EAAA7vB,EAAAqP,KAAAywB,GAAAjQ,GAAA,GAAA,IAAA7vB,EAAA+hC,QAAA+B,GAAA,GAAA,IAAAjU,EAAAiU,GAAA,GAAAjU,IAAA,EAAA,IAAA7vB,EAAAmS,MAAA1I,EAAAzJ,EAAAmS,MAAA2xB,GAAA,EAAA,IAAAjU,EAAA,EAAAuQ,EAAA,EAAApgC,EAAA84B,KAAAyL,CAAA,KAAAA,GAAA,GAAA,KAAAvkC,EAAA+hC,MAAA,CAAA,KAAA3B,EAAA,IAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAApgC,EAAAK,OAAAwvB,EAAA7vB,EAAAqP,OAAArP,EAAAqP,KAAA2wB,UAAAnQ,GAAA,IAAA7vB,EAAA+hC,QAAA+B,GAAA,GAAA,IAAAjU,EAAAiU,GAAA,GAAAjU,IAAA,EAAA,IAAA7vB,EAAAmS,MAAA1I,EAAAzJ,EAAAmS,MAAA2xB,GAAA,EAAA,IAAAjU,EAAA,EAAAuQ,EAAA,MAAApgC,GAAAqP,OAAArP,EAAAqP,KAAA0wB,MAAA,KAAA//B,GAAA84B,KAAA/R,CAAA,KAAAA,GAAA,GAAA,KAAA/mB,EAAA+hC,QAAA3G,EAAAp7B,EAAAK,OAAA+6B,EAAAx8B,IAAAw8B,EAAAx8B,GAAAw8B,IAAAp7B,EAAAqP,OAAAo0B,GAAAzjC,EAAAqP,KAAA2wB,UAAAhgC,EAAAK,OAAAL,EAAAqP,KAAA0wB,QAAA//B,EAAAqP,KAAA0wB,MAAA,GAAAx8B,OAAAvD,EAAAqP,KAAA2wB,YAAAx2B,EAAAuzB,SAAA/8B,EAAAqP,KAAA0wB,MAAAjgC,EAAAF,EAAAw7B,EAAAqI,KAAA,IAAAzjC,EAAA+hC,QAAA/hC,EAAAmS,MAAA1I,EAAAzJ,EAAAmS,MAAArS,EAAAs7B,EAAAx7B,IAAAhB,GAAAw8B,EAAAx7B,GAAAw7B,EAAAp7B,EAAAK,QAAA+6B,GAAAp7B,EAAAK,QAAA,KAAAd,EAAAS,GAAAK,OAAA,EAAAL,EAAA84B,KAAA0L,CAAA,KAAAA,GAAA,GAAA,KAAAxkC,EAAA+hC,MAAA,CAAA,GAAA,IAAAnjC,EAAA,KAAAW,EAAA67B,GAAA,CAAA,GAAAqI,IAAA3jC,EAAAF,EAAAw7B,KAAAp7B,EAAAqP,MAAAo0B,IAAAzjC,EAAAK,OAAA,QAAAL,EAAAqP,KAAAN,MAAA1I,OAAA0lB,aAAA0X,WAAAA,IAAArI,EAAAx8B,EAAA,IAAA,IAAAoB,EAAA+hC,QAAA/hC,EAAAmS,MAAA1I,EAAAzJ,EAAAmS,MAAArS,EAAAs7B,EAAAx7B,IAAAhB,GAAAw8B,EAAAx7B,GAAAw7B,EAAAqI,GAAA,KAAAlkC,OAAAS,GAAAqP,OAAArP,EAAAqP,KAAAN,KAAA,KAAA/O,GAAAK,OAAA,EAAAL,EAAA84B,KAAA2L,CAAA,KAAAA,GAAA,GAAA,KAAAzkC,EAAA+hC,MAAA,CAAA,GAAA,IAAAnjC,EAAA,KAAAW,EAAA67B,GAAA,CAAA,GAAAqI,IAAA3jC,EAAAF,EAAAw7B,KAAAp7B,EAAAqP,MAAAo0B,IAAAzjC,EAAAK,OAAA,QAAAL,EAAAqP,KAAA4wB,SAAA55B,OAAA0lB,aAAA0X,WAAAA,IAAArI,EAAAx8B,EAAA,IAAA,IAAAoB,EAAA+hC,QAAA/hC,EAAAmS,MAAA1I,EAAAzJ,EAAAmS,MAAArS,EAAAs7B,EAAAx7B,IAAAhB,GAAAw8B,EAAAx7B,GAAAw7B,EAAAqI,GAAA,KAAAlkC,OAAAS,GAAAqP,OAAArP,EAAAqP,KAAA4wB,QAAA,KAAAjgC,GAAA84B,KAAA4L,CAAA,KAAAA,GAAA,GAAA,IAAA1kC,EAAA+hC,MAAA,CAAA,KAAA3B,EAAA,IAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAA,GAAAvQ,KAAA,MAAA7vB,EAAAmS,OAAA,CAAA5S,EAAAmiC,IAAA,sBAAA1hC,EAAA84B,KAAAqL,EAAA,OAAAtU,EAAA,EAAAuQ,EAAA,EAAApgC,EAAAqP,OAAArP,EAAAqP,KAAA6wB,KAAAlgC,EAAA+hC,OAAA,EAAA,EAAA/hC,EAAAqP,KAAA3H,MAAA,GAAAnI,EAAAujC,MAAA9iC,EAAAmS,MAAA,EAAAnS,EAAA84B,KAAAkL,CAAA,MAAA,KAAAh0B,GAAA,KAAAowB,EAAA,IAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAA7gC,EAAAujC,MAAA9iC,EAAAmS,MAAA1S,EAAAowB,GAAAA,EAAA,EAAAuQ,EAAA,EAAApgC,EAAA84B,KAAA6L,CAAA,KAAAA,GAAA,GAAA,IAAA3kC,EAAA8hC,SAAA,MAAAviC,GAAAuhC,SAAAnhC,EAAAJ,EAAAwhC,UAAA5gC,EAAAZ,EAAAohC,QAAA/gC,EAAAL,EAAAshC,SAAAjiC,EAAAoB,EAAAohC,KAAAvR,EAAA7vB,EAAAqhC,KAAAjB,EAAAwE,CAAArlC,GAAAujC,MAAA9iC,EAAAmS,MAAA,EAAAnS,EAAA84B,KAAAkL,CAAA,KAAAA,GAAA,GAAAxkC,IAAAghC,GAAAhhC,IAAAihC,EAAA,KAAAlhC,EAAA,KAAA0kC,GAAA,GAAAjkC,EAAA6hC,KAAA,CAAAhS,KAAA,EAAAuQ,EAAAA,GAAA,EAAAA,EAAApgC,EAAA84B,KAAA+L,EAAA,OAAA,KAAAzE,EAAA,GAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAA,OAAApgC,EAAA6hC,KAAA,EAAAhS,EAAAA,KAAA,EAAAuQ,GAAA,EAAA,EAAAvQ,GAAA,IAAA,GAAA7vB,EAAA84B,KAAAgM,CAAA,MAAA,KAAA,GAAA,GAAArK,EAAAz6B,GAAAA,EAAA84B,KAAAiM,GAAAvlC,IAAAihC,EAAA,CAAA5Q,KAAA,EAAAuQ,GAAA,CAAA,MAAA7gC,GAAA,KAAA,KAAA,GAAAS,EAAA84B,KAAAkM,CAAA,MAAA,KAAA,GAAAzlC,EAAAmiC,IAAA,qBAAA1hC,EAAA84B,KAAAqL,GAAAtU,KAAA,EAAAuQ,GAAA,CAAA,MAAA,KAAA0E,GAAA,IAAAjV,KAAA,EAAAuQ,EAAAA,GAAA,EAAAA,EAAAA,EAAA,IAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAA,IAAA,MAAAvQ,MAAAA,IAAA,GAAA,OAAA,CAAAtwB,EAAAmiC,IAAA,+BAAA1hC,EAAA84B,KAAAqL,EAAA,OAAA,GAAAnkC,EAAAK,OAAA,MAAAwvB,EAAAA,EAAA,EAAAuQ,EAAA,EAAApgC,EAAA84B,KAAAmM,EAAAzlC,IAAAihC,EAAA,KAAAlhC,EAAA,KAAA0lC,GAAAjlC,EAAA84B,KAAAoM,CAAA,KAAAA,GAAA,GAAA9J,EAAAp7B,EAAAK,OAAA,CAAA,GAAA+6B,EAAAx8B,IAAAw8B,EAAAx8B,GAAAw8B,EAAAj7B,IAAAi7B,EAAAj7B,GAAA,IAAAi7B,EAAA,KAAA77B,EAAAiK,GAAAuzB,SAAAr9B,EAAAI,EAAAF,EAAAw7B,EAAAz7B,GAAAf,GAAAw8B,EAAAx7B,GAAAw7B,EAAAj7B,GAAAi7B,EAAAz7B,GAAAy7B,EAAAp7B,EAAAK,QAAA+6B,CAAA,OAAAp7B,EAAA84B,KAAAkL,CAAA,MAAA,KAAAgB,GAAA,KAAA5E,EAAA,IAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAA,GAAApgC,EAAAmiC,MAAA,GAAAtS,GAAA,IAAAA,KAAA,EAAAuQ,GAAA,EAAApgC,EAAAoiC,OAAA,GAAAvS,GAAA,EAAAA,KAAA,EAAAuQ,GAAA,EAAApgC,EAAAkiC,OAAA,GAAArS,GAAA,EAAAA,KAAA,EAAAuQ,GAAA,EAAApgC,EAAAmiC,KAAA,KAAAniC,EAAAoiC,MAAA,GAAA,CAAA7iC,EAAAmiC,IAAA,sCAAA1hC,EAAA84B,KAAAqL,EAAA,OAAAnkC,EAAAqiC,KAAA,EAAAriC,EAAA84B,KAAAqM,EAAA,KAAAA,IAAA,KAAAnlC,EAAAqiC,KAAAriC,EAAAkiC,OAAA,CAAA,KAAA9B,EAAA,GAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAApgC,EAAAsiC,KAAAyB,GAAA/jC,EAAAqiC,SAAA,EAAAxS,EAAAA,KAAA,EAAAuQ,GAAA,EAAA,KAAApgC,EAAAqiC,KAAA,IAAAriC,EAAAsiC,KAAAyB,GAAA/jC,EAAAqiC,SAAA,CAAA,IAAAriC,EAAAshC,QAAAthC,EAAAwiC,OAAAxiC,EAAAwhC,QAAA,EAAAmC,IAAAtC,KAAArhC,EAAAwhC,SAAAkC,GAAA7xB,EAAAE,EAAA/R,EAAAsiC,KAAA,EAAA,GAAAtiC,EAAAshC,QAAA,EAAAthC,EAAAuiC,KAAAoB,IAAA3jC,EAAAwhC,QAAAmC,GAAAtC,KAAAqC,GAAA,CAAAnkC,EAAAmiC,IAAA,2BAAA1hC,EAAA84B,KAAAqL,EAAA,OAAAnkC,EAAAqiC,KAAA,EAAAriC,EAAA84B,KAAAsM,EAAA,KAAAA,IAAA,KAAAplC,EAAAqiC,KAAAriC,EAAAmiC,KAAAniC,EAAAoiC,OAAA,CAAA,KAAAyB,GAAA7jC,EAAAshC,QAAAzR,GAAA,GAAA7vB,EAAAwhC,SAAA,GAAAyB,GAAAY,KAAA,GAAAP,GAAAO,KAAA,GAAA,IAAAT,GAAA,MAAAS,KAAAZ,IAAA7C,IAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAA,GAAAgD,GAAA,GAAAvT,KAAAoT,GAAA7C,GAAA6C,GAAAjjC,EAAAsiC,KAAAtiC,EAAAqiC,QAAAe,OAAA,CAAA,GAAA,KAAAA,GAAA,CAAA,IAAAQ,GAAAX,GAAA,EAAA7C,EAAAwD,IAAA,CAAA,GAAA,IAAAhlC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAA,GAAAvQ,KAAAoT,GAAA7C,GAAA6C,GAAA,IAAAjjC,EAAAqiC,KAAA,CAAA9iC,EAAAmiC,IAAA,4BAAA1hC,EAAA84B,KAAAqL,EAAA,OAAAV,GAAAzjC,EAAAsiC,KAAAtiC,EAAAqiC,KAAA,GAAAjH,EAAA,GAAA,EAAAvL,GAAAA,KAAA,EAAAuQ,GAAA,MAAA,IAAA,KAAAgD,GAAA,CAAA,IAAAQ,GAAAX,GAAA,EAAA7C,EAAAwD,IAAA,CAAA,GAAA,IAAAhlC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAAvQ,KAAAoT,GAAA7C,GAAA6C,GAAAQ,GAAA,EAAArI,EAAA,GAAA,EAAAvL,GAAAA,KAAA,EAAAuQ,GAAA,MAAA,CAAA,IAAAwD,GAAAX,GAAA,EAAA7C,EAAAwD,IAAA,CAAA,GAAA,IAAAhlC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAAvQ,KAAAoT,GAAA7C,GAAA6C,GAAAQ,GAAA,EAAArI,EAAA,IAAA,IAAAvL,GAAAA,KAAA,EAAAuQ,GAAA,EAAA,GAAApgC,EAAAqiC,KAAAjH,EAAAp7B,EAAAmiC,KAAAniC,EAAAoiC,MAAA,CAAA7iC,EAAAmiC,IAAA,4BAAA1hC,EAAA84B,KAAAqL,EAAA,OAAA,KAAA/I,KAAAp7B,EAAAsiC,KAAAtiC,EAAAqiC,QAAAoB,IAAA,GAAAzjC,EAAA84B,OAAAqL,GAAA,KAAA,IAAA,IAAAnkC,EAAAsiC,KAAA,KAAA,CAAA/iC,EAAAmiC,IAAA,uCAAA1hC,EAAA84B,KAAAqL,EAAA,OAAA,GAAAnkC,EAAAwhC,QAAA,EAAAmC,IAAAtC,KAAArhC,EAAAwhC,SAAAkC,GAAA7xB,EAAAwuB,EAAArgC,EAAAsiC,KAAA,EAAAtiC,EAAAmiC,KAAAniC,EAAAshC,QAAA,EAAAthC,EAAAuiC,KAAAoB,IAAA3jC,EAAAwhC,QAAAmC,GAAAtC,KAAAqC,GAAA,CAAAnkC,EAAAmiC,IAAA,8BAAA1hC,EAAA84B,KAAAqL,EAAA,OAAA,GAAAnkC,EAAAyhC,SAAA,EAAAzhC,EAAAuhC,SAAAvhC,EAAAyiC,QAAAkB,IAAAtC,KAAArhC,EAAAyhC,UAAAiC,GAAA7xB,EAAAyuB,EAAAtgC,EAAAsiC,KAAAtiC,EAAAmiC,KAAAniC,EAAAoiC,MAAApiC,EAAAuhC,SAAA,EAAAvhC,EAAAuiC,KAAAoB,IAAA3jC,EAAAyhC,SAAAkC,GAAAtC,KAAAqC,GAAA,CAAAnkC,EAAAmiC,IAAA,wBAAA1hC,EAAA84B,KAAAqL,EAAA,OAAA,GAAAnkC,EAAA84B,KAAAiM,GAAAvlC,IAAAihC,EAAA,KAAAlhC,EAAA,KAAAwlC,IAAA/kC,EAAA84B,KAAAuM,EAAA,KAAAA,IAAA,GAAAzmC,GAAA,GAAAuB,GAAA,IAAA,CAAAZ,EAAAuhC,SAAAnhC,EAAAJ,EAAAwhC,UAAA5gC,EAAAZ,EAAAohC,QAAA/gC,EAAAL,EAAAshC,SAAAjiC,EAAAoB,EAAAohC,KAAAvR,EAAA7vB,EAAAqhC,KAAAjB,EAAA7Q,EAAAhwB,EAAAiS,GAAA7R,EAAAJ,EAAAuhC,SAAAphC,EAAAH,EAAA6tB,OAAAjtB,EAAAZ,EAAAwhC,UAAAnhC,EAAAL,EAAAohC,QAAA7gC,EAAAP,EAAAqhC,MAAAhiC,EAAAW,EAAAshC,SAAAhR,EAAA7vB,EAAAohC,KAAAhB,EAAApgC,EAAAqhC,KAAArhC,EAAA84B,OAAAkL,IAAAhkC,EAAA0iC,MAAA,EAAA,OAAA,IAAA1iC,EAAA0iC,KAAA,EAAAmB,GAAA7jC,EAAAshC,QAAAzR,GAAA,GAAA7vB,EAAAwhC,SAAA,GAAAyB,GAAAY,KAAA,GAAAP,GAAAO,KAAA,GAAA,IAAAT,GAAA,MAAAS,KAAAZ,IAAA7C,IAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAA,GAAAkD,IAAA,KAAA,IAAAA,IAAA,CAAA,IAAAD,GAAAJ,GAAAM,GAAAD,GAAAE,GAAAJ,GAAAS,GAAA7jC,EAAAshC,QAAAkC,KAAA3T,GAAA,GAAAwT,GAAAE,IAAA,IAAAF,KAAAJ,GAAAY,KAAA,GAAAP,GAAAO,KAAA,GAAA,IAAAT,GAAA,MAAAS,KAAAR,GAAAJ,IAAA7C,IAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAAvQ,KAAAwT,GAAAjD,GAAAiD,GAAArjC,EAAA0iC,MAAAW,GAAA,GAAAxT,KAAAoT,GAAA7C,GAAA6C,GAAAjjC,EAAA0iC,MAAAO,GAAAjjC,EAAAK,OAAA+iC,GAAA,IAAAE,GAAA,CAAAtjC,EAAA84B,KAAAwM,EAAA,OAAA,GAAA,GAAAhC,GAAA,CAAAtjC,EAAA0iC,MAAA,EAAA1iC,EAAA84B,KAAAkL,CAAA,OAAA,GAAA,GAAAV,GAAA,CAAA/jC,EAAAmiC,IAAA,8BAAA1hC,EAAA84B,KAAAqL,EAAA,OAAAnkC,EAAA+/B,MAAA,GAAAuD,GAAAtjC,EAAA84B,KAAAyM,EAAA,KAAAA,IAAA,GAAAvlC,EAAA+/B,MAAA,CAAA,IAAA6D,GAAA5jC,EAAA+/B,MAAAK,EAAAwD,IAAA,CAAA,GAAA,IAAAhlC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAApgC,EAAAK,QAAAwvB,GAAA,GAAA7vB,EAAA+/B,OAAA,EAAAlQ,KAAA7vB,EAAA+/B,MAAAK,GAAApgC,EAAA+/B,MAAA//B,EAAA0iC,MAAA1iC,EAAA+/B,MAAA//B,EAAA2iC,IAAA3iC,EAAAK,OAAAL,EAAA84B,KAAAyB,EAAA,KAAAA,IAAA,KAAAsJ,GAAA7jC,EAAAuhC,SAAA1R,GAAA,GAAA7vB,EAAAyhC,UAAA,GAAAwB,GAAAY,KAAA,GAAAP,GAAAO,KAAA,GAAA,IAAAT,GAAA,MAAAS,KAAAZ,IAAA7C,IAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAA,GAAA,KAAA,IAAAkD,IAAA,CAAA,IAAAD,GAAAJ,GAAAM,GAAAD,GAAAE,GAAAJ,GAAAS,GAAA7jC,EAAAuhC,SAAAiC,KAAA3T,GAAA,GAAAwT,GAAAE,IAAA,IAAAF,KAAAJ,GAAAY,KAAA,GAAAP,GAAAO,KAAA,GAAA,IAAAT,GAAA,MAAAS,KAAAR,GAAAJ,IAAA7C,IAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAAvQ,KAAAwT,GAAAjD,GAAAiD,GAAArjC,EAAA0iC,MAAAW,GAAA,GAAAxT,KAAAoT,GAAA7C,GAAA6C,GAAAjjC,EAAA0iC,MAAAO,GAAA,GAAAK,GAAA,CAAA/jC,EAAAmiC,IAAA,wBAAA1hC,EAAA84B,KAAAqL,EAAA,OAAAnkC,EAAAgf,OAAAokB,GAAApjC,EAAA+/B,MAAA,GAAAuD,GAAAtjC,EAAA84B,KAAA0M,EAAA,KAAAA,IAAA,GAAAxlC,EAAA+/B,MAAA,CAAA,IAAA6D,GAAA5jC,EAAA+/B,MAAAK,EAAAwD,IAAA,CAAA,GAAA,IAAAhlC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAApgC,EAAAgf,QAAA6Q,GAAA,GAAA7vB,EAAA+/B,OAAA,EAAAlQ,KAAA7vB,EAAA+/B,MAAAK,GAAApgC,EAAA+/B,MAAA//B,EAAA0iC,MAAA1iC,EAAA+/B,MAAA,GAAA//B,EAAAgf,OAAAhf,EAAAghC,KAAA,CAAAzhC,EAAAmiC,IAAA,gCAAA1hC,EAAA84B,KAAAqL,EAAA,OAAAnkC,EAAA84B,KAAA2M,EAAA,KAAAA,IAAA,GAAA,IAAAtlC,EAAA,KAAAZ,EAAA,IAAA67B,EAAA5pB,EAAArR,EAAAH,EAAAgf,OAAAoc,EAAA,CAAA,GAAAA,EAAAp7B,EAAAgf,OAAAoc,EAAAA,EAAAp7B,EAAAkhC,OAAAlhC,EAAA2hC,KAAA,CAAApiC,EAAAmiC,IAAA,gCAAA1hC,EAAA84B,KAAAqL,EAAA,OAAA/I,EAAAp7B,EAAAmhC,OAAA/F,GAAAp7B,EAAAmhC,MAAAtpB,EAAA7X,EAAAihC,MAAA7F,GAAAvjB,EAAA7X,EAAAmhC,MAAA/F,EAAAA,EAAAp7B,EAAAK,SAAA+6B,EAAAp7B,EAAAK,QAAA2iC,GAAAhjC,EAAAd,WAAA8jC,IAAAtjC,EAAAmY,EAAAlY,EAAAK,EAAAgf,OAAAoc,EAAAp7B,EAAAK,MAAA+6B,GAAAj7B,IAAAi7B,EAAAj7B,GAAAA,GAAAi7B,EAAAp7B,EAAAK,QAAA+6B,CAAA,GAAA17B,GAAAC,KAAAqjC,GAAAnrB,aAAAujB,EAAA,KAAAp7B,EAAAK,SAAAL,EAAA84B,KAAAuM,GAAA,MAAA,KAAAC,IAAA,GAAA,IAAAnlC,EAAA,KAAAZ,EAAAG,GAAAC,KAAAK,EAAAK,OAAAF,IAAAH,EAAA84B,KAAAuM,EAAA,MAAA,KAAAR,IAAA,GAAA7kC,EAAAkP,KAAA,CAAA,KAAAkxB,EAAA,IAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAA,GAAA5uB,GAAArR,EAAAZ,EAAAsjC,WAAArxB,EAAAxR,EAAAgiC,OAAAxwB,EAAAA,IAAAjS,EAAAujC,MAAA9iC,EAAAmS,MAAAnS,EAAA+hC,MAAAt4B,EAAAzJ,EAAAmS,MAAAzS,EAAA8R,EAAA7R,EAAA6R,GAAAvS,EAAAe,EAAAmS,MAAAzS,EAAA8R,EAAA7R,EAAA6R,IAAAA,EAAArR,GAAAH,EAAA+hC,MAAAlS,EAAApwB,EAAAowB,MAAA7vB,EAAAmS,MAAA,CAAA5S,EAAAmiC,IAAA,uBAAA1hC,EAAA84B,KAAAqL,EAAA,OAAAtU,EAAA,EAAAuQ,EAAA,EAAApgC,EAAA84B,KAAA4M,EAAA,KAAAA,IAAA,GAAA1lC,EAAAkP,MAAAlP,EAAA+hC,MAAA,CAAA,KAAA3B,EAAA,IAAA,CAAA,GAAA,IAAAxhC,EAAA,KAAAW,EAAAX,KAAAixB,GAAA/vB,EAAAF,MAAAwgC,EAAAA,GAAA,EAAA,GAAAvQ,KAAA,WAAA7vB,EAAAgiC,OAAA,CAAAziC,EAAAmiC,IAAA,yBAAA1hC,EAAA84B,KAAAqL,EAAA,OAAAtU,EAAA,EAAAuQ,EAAA,EAAApgC,EAAA84B,KAAA6M,EAAA,KAAAA,IAAAjC,GAAAkC,CAAA,MAAArmC,EAAA,KAAA4kC,IAAAT,GAAAmC,CAAA,MAAAtmC,EAAA,KAAAumC,IAAA,MAAAC,EAAA,KAAAC,IAAA,QAAA,MAAA7C,GAAA,MAAA5jC,GAAAuhC,SAAAnhC,EAAAJ,EAAAwhC,UAAA5gC,EAAAZ,EAAAohC,QAAA/gC,EAAAL,EAAAshC,SAAAjiC,EAAAoB,EAAAohC,KAAAvR,EAAA7vB,EAAAqhC,KAAAjB,GAAApgC,EAAAihC,OAAAzvB,IAAAjS,EAAAwhC,WAAA/gC,EAAA84B,KAAAqL,KAAAnkC,EAAA84B,KAAA+L,IAAArlC,IAAA+gC,KAAA1gC,EAAAN,EAAAA,EAAA6tB,OAAA7tB,EAAAuhC,SAAAtvB,EAAAjS,EAAAwhC,YAAA/gC,EAAA84B,KAAAgN,GAAAC,IAAAxyB,GAAAhU,EAAAshC,SAAArvB,GAAAjS,EAAAwhC,UAAAxhC,EAAAqjC,UAAArvB,EAAAhU,EAAAsjC,WAAArxB,EAAAxR,EAAAgiC,OAAAxwB,EAAAxR,EAAAkP,MAAAsC,IAAAjS,EAAAujC,MAAA9iC,EAAAmS,MAAAnS,EAAA+hC,MAAAt4B,EAAAzJ,EAAAmS,MAAAzS,EAAA8R,EAAAjS,EAAAuhC,SAAAtvB,GAAAvS,EAAAe,EAAAmS,MAAAzS,EAAA8R,EAAAjS,EAAAuhC,SAAAtvB,IAAAjS,EAAA0mC,UAAAjmC,EAAAqhC,MAAArhC,EAAA6hC,KAAA,GAAA,IAAA7hC,EAAA84B,OAAAkL,EAAA,IAAA,IAAAhkC,EAAA84B,OAAAiM,IAAA/kC,EAAA84B,OAAAmM,EAAA,IAAA,IAAA,IAAA1xB,GAAA,IAAA/B,GAAAhS,IAAA+gC,IAAAmD,KAAAR,IAAAQ,GAAAwC,GAAAxC,IAAA,QAAAtD,GAAA7gC,GAAA,IAAAA,IAAAA,EAAAmhC,MAAA,MAAAyC,EAAA,IAAA3jC,GAAAD,EAAAmhC,KAAA,OAAAlhC,GAAAN,SAAAM,EAAAN,OAAA,MAAAK,EAAAmhC,MAAA,KAAAwC,EAAA,QAAA3vB,GAAAhU,EAAAC,GAAA,GAAAQ,EAAA,OAAAT,IAAAA,EAAAmhC,OAAA1gC,EAAAT,EAAAmhC,MAAA,KAAA,EAAA1gC,EAAAkP,MAAAi0B,GAAAnjC,EAAAqP,KAAA7P,EAAAA,EAAAkI,MAAA,EAAAw7B,IAAAC,EAAA,QAAA3xB,GAAAjS,EAAAC,GAAA,GAAAQ,GAAAP,EAAAK,EAAAJ,EAAAF,EAAAa,MAAA,OAAAd,IAAAA,EAAAmhC,OAAA1gC,EAAAT,EAAAmhC,MAAA,IAAA1gC,EAAAkP,MAAAlP,EAAA84B,OAAA6L,EAAAxB,EAAAnjC,EAAA84B,OAAA6L,IAAAllC,EAAA,EAAAA,EAAAR,EAAAQ,EAAAD,EAAAE,EAAA,GAAAD,IAAAO,EAAAmS,OAAA0zB,GAAA/lC,EAAAD,EAAAN,EAAAC,EAAAE,EAAAA,KAAAM,EAAA84B,KAAAgN,GAAAC,IAAA/lC,EAAA8hC,SAAA,EAAAoB,IAAAC,EAAA,GAAA/H,GAAAvjB,EAAArO,EAAAjK,EAAA,mBAAAN,EAAAM,EAAA,aAAAkK,EAAAlK,EAAA,WAAAgwB,EAAAhwB,EAAA,aAAAsS,EAAAtS,EAAA,cAAAwS,EAAA,EAAAsuB,EAAA,EAAAC,EAAA,EAAAC,EAAA,EAAAC,EAAA,EAAAC,EAAA,EAAAyC,EAAA,EAAA0C,EAAA,EAAAhB,EAAA,EAAAzB,GAAA,EAAA0C,GAAA,EAAAE,GAAA,EAAAG,GAAA,EAAA9B,EAAA,EAAArB,EAAA,EAAAmB,EAAA,EAAAG,EAAA,EAAAC,EAAA,EAAAC,EAAA,EAAAxd,EAAA,EAAAyd,EAAA,EAAAC,EAAA,EAAAC,EAAA,EAAA10B,EAAA,GAAA20B,EAAA,GAAAX,EAAA,GAAAC,EAAA,GAAAa,EAAA,GAAAG,EAAA,GAAAC,EAAA,GAAAF,EAAA,GAAAG,GAAA,GAAAC,GAAA,GAAAL,GAAA,GAAAM,GAAA,GAAAE,GAAA,GAAAhL,GAAA,GAAAiL,GAAA,GAAAC,GAAA,GAAAH,GAAA,GAAAT,GAAA,GAAAa,GAAA,GAAAC,GAAA,GAAAxB,GAAA,GAAA2B,GAAA,GAAAE,GAAA,GAAAhD,GAAA,IAAAC,GAAA,IAAAK,GAAA,GAAAF,GAAAE,GAAAD,IAAA,CAAArjC,GAAAmmC,aAAAvmC,EAAAI,EAAAomC,cAAAzmC,EAAAK,EAAAqmC,iBAAA3mC,EAAAM,EAAAsmC,YAAAnmC,EAAAH,EAAAumC,aAAA3nC,EAAAoB,EAAAwmC,QAAA3W,EAAA7vB,EAAAymC,WAAArG,EAAApgC,EAAA0mC,iBAAAnzB,EAAAvT,EAAA2mC,qBAAAn1B,EAAAxR,EAAA4mC,YAAA,uCAAAC,kBAAA,EAAAC,YAAA,EAAAC,UAAA,EAAAC,YAAA,EAAAC,aAAA,IAAAC,GAAA,SAAA3nC,EAAAC,EAAAQ,GAAA,YAAA,IAAAP,GAAAF,EAAA,mBAAAO,EAAA,GAAAJ,EAAA,IAAAE,EAAA,IAAAD,EAAA,EAAAf,EAAA,EAAAuB,EAAA,EAAAs6B,GAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,EAAA,GAAA56B,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,IAAAgwB,GAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA,KAAA,KAAA,KAAA,KAAA,KAAA,KAAA,KAAA,MAAA,MAAA,MAAA,EAAA,GAAAuQ,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA,GAAA5gC,GAAAX,QAAA,SAAAU,EAAAC,EAAAQ,EAAAuT,EAAA/B,EAAA4pB,EAAAvjB,EAAArO,GAAA,GAAAvK,GAAAwK,EAAA8lB,EAAA1d,EAAAE,EAAAsuB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAj3B,EAAA63B,KAAA6B,EAAA,EAAA0C,EAAA,EAAAhB,EAAA,EAAAzB,EAAA,EAAA0C,EAAA,EAAAE,EAAA,EAAAG,EAAA,EAAA9B,EAAA,EAAArB,EAAA,EAAAmB,EAAA,EAAAG,EAAA,KAAAC,EAAA,EAAAC,EAAA,GAAA9kC,GAAA09B,MAAAr9B,EAAA,GAAAinB,EAAA,GAAAtnB,GAAA09B,MAAAr9B,EAAA,GAAA0kC,EAAA,KAAAC,EAAA,CAAA,KAAAvB,EAAA,EAAAA,GAAApjC,EAAAojC,IAAAqB,EAAArB,GAAA,CAAA,KAAA0C,EAAA,EAAAA,EAAAryB,EAAAqyB,IAAArB,EAAA/kC,EAAAQ,EAAA4lC,KAAA,KAAAC,EAAApF,EAAA0C,EAAArjC,EAAAqjC,GAAA,GAAA,IAAAoB,EAAApB,GAAAA,KAAA,GAAA0C,EAAA1C,IAAA0C,EAAA1C,GAAA,IAAAA,EAAA,MAAA3xB,GAAA4pB,KAAA,SAAA5pB,EAAA4pB,KAAA,SAAA5xB,EAAA63B,KAAA,EAAA,CAAA,KAAAuD,EAAA,EAAAA,EAAAzB,GAAA,IAAAoB,EAAAK,GAAAA,KAAA,IAAAiB,EAAAjB,IAAAiB,EAAAjB,GAAAR,EAAA,EAAAlB,EAAA,EAAAA,GAAApjC,EAAAojC,IAAA,GAAAkB,IAAA,EAAAA,GAAAG,EAAArB,GAAAkB,EAAA,EAAA,OAAA,CAAA,IAAAA,EAAA,IAAA7kC,IAAAI,GAAA,IAAAwjC,GAAA,OAAA,CAAA,KAAApc,EAAA,GAAA,EAAAmc,EAAA,EAAAA,EAAApjC,EAAAojC,IAAAnc,EAAAmc,EAAA,GAAAnc,EAAAmc,GAAAqB,EAAArB,EAAA,KAAA0C,EAAA,EAAAA,EAAAryB,EAAAqyB,IAAA,IAAApmC,EAAAQ,EAAA4lC,KAAA/tB,EAAAkP,EAAAvnB,EAAAQ,EAAA4lC,OAAAA,EAAA,IAAArmC,IAAAI,GAAA0kC,EAAAG,EAAA3sB,EAAAwoB,EAAA,IAAA9gC,IAAAX,GAAAylC,EAAA5J,EAAA6J,GAAA,IAAAE,EAAA3kC,EAAA4kC,GAAA,IAAApE,EAAA,MAAAgE,EAAAxU,EAAA2U,EAAApE,EAAAC,GAAA,GAAA6D,EAAA,EAAA0B,EAAA,EAAA1C,EAAA0B,EAAA7yB,EAAAqpB,EAAA2K,EAAAF,EAAAK,EAAA,EAAA3W,GAAA,EAAAwT,EAAA,GAAA8C,EAAAh0B,EAAAkxB,EAAA,EAAAxjC,IAAAX,GAAAmkC,EAAArjC,GAAAH,IAAAY,GAAA4iC,EAAAnjC,EAAA,MAAA,EAAA,KAAA,GAAA8kC,GAAA,IAAA,CAAAA,IAAApE,EAAA4C,EAAAgD,EAAAruB,EAAA+tB,GAAAvF,GAAAE,EAAA,EAAAC,EAAA3oB,EAAA+tB,IAAA/tB,EAAA+tB,GAAAvF,GAAAE,EAAAiE,EAAAC,EAAA5sB,EAAA+tB,IAAApF,EAAA6D,EAAAC,EAAAzsB,EAAA+tB,MAAArF,EAAA,GAAAC,EAAA,GAAAvhC,EAAA,GAAAikC,EAAAgD,EAAAz8B,EAAA,GAAAs8B,EAAAnB,EAAAn7B,CAAA,GAAAA,IAAAxK,EAAAuS,EAAAO,GAAAmyB,GAAAgC,GAAAz8B,GAAA62B,GAAA,GAAAC,GAAA,GAAAC,EAAA,QAAA,IAAA/2B,EAAA,KAAAxK,EAAA,GAAAikC,EAAA,EAAAgB,EAAAjlC,GAAAA,IAAA,CAAA,IAAA,IAAAA,GAAAilC,GAAAjlC,EAAA,EAAAilC,GAAAjlC,GAAAilC,EAAA,EAAA0B,IAAA,MAAArB,EAAArB,GAAA,CAAA,GAAAA,IAAAC,EAAA,KAAAD,GAAA1jC,EAAAQ,EAAA6X,EAAA+tB,IAAA,GAAA1C,EAAA2C,IAAA3B,EAAAryB,KAAA0d,EAAA,CAAA,IAAA,IAAA2W,IAAAA,EAAAL,GAAA9zB,GAAA6yB,EAAAmB,EAAA7C,EAAAgD,EAAA9B,EAAA,GAAA2B,EAAAA,EAAAG,EAAA/C,IAAAiB,GAAAG,EAAAwB,EAAAG,KAAA9B,GAAA,KAAA2B,IAAA3B,IAAA,CAAA,IAAArB,GAAA,GAAAgD,EAAAxmC,IAAAX,GAAAmkC,EAAArjC,GAAAH,IAAAY,GAAA4iC,EAAAnjC,EAAA,MAAA,EAAA2vB,GAAA2U,EAAAryB,EAAAL,EAAA+d,GAAAsW,GAAA,GAAAE,GAAA,GAAAh0B,EAAAqpB,EAAA,GAAA,MAAA,KAAA8I,IAAA1yB,EAAAO,EAAAmyB,GAAAhB,EAAAgD,GAAA,GAAA,IAAA,GAAA,GAAA18B,EAAA63B,KAAAwE,EAAA,KAAAgB,kBAAA,IAAAM,IAAA,SAAA5nC,EAAAC,EAAAQ,GAAA,YAAAR,GAAAX,SAAAw+B,EAAA,kBAAA/8B,EAAA,aAAA8mC,EAAA,GAAAC,KAAA,aAAAC,KAAA,eAAAC,KAAA,aAAAC,KAAA,sBAAAC,KAAA,eAAAC,KAAA,6BAAAC,IAAA,SAAApoC,EAAAC,EAAAQ,GAAA,YAAA,SAAAP,KAAAJ,KAAAuhC,MAAA,KAAAvhC,KAAAshC,QAAA,EAAAthC,KAAAwhC,SAAA,EAAAxhC,KAAAujC,SAAA,EAAAvjC,KAAA+tB,OAAA,KAAA/tB,KAAAyhC,SAAA,EAAAzhC,KAAA0hC,UAAA,EAAA1hC,KAAAwjC,UAAA,EAAAxjC,KAAAqiC,IAAA,GAAAriC,KAAAqhC,MAAA,KAAArhC,KAAA4mC,UAAA,EAAA5mC,KAAAyjC,MAAA,EAAAtjC,EAAAX,QAAAY,OAAAmoC,mBAAA,SAAAroC,EAAAC,EAAAQ,GAAA,YAAA,SAAAP,GAAAF,GAAA,KAAAF,eAAAI,IAAA,MAAA,IAAAA,GAAAF,EAAAF,MAAA4W,QAAAtW,EAAAk9B,QAAAgL,UAAA,MAAAC,WAAA,EAAAtX,GAAA,IAAAjxB,MAAA,IAAAC,GAAAH,KAAA4W,OAAAzW,GAAAuoC,KAAAvoC,EAAAsoC,YAAA,GAAAtoC,EAAAsoC,WAAA,KAAAtoC,EAAAsoC,YAAAtoC,EAAAsoC,WAAA,IAAAtoC,EAAAsoC,aAAAtoC,EAAAsoC,YAAA,OAAAtoC,EAAAsoC,YAAA,GAAAtoC,EAAAsoC,WAAA,KAAAvoC,GAAAA,EAAAuoC,aAAAtoC,EAAAsoC,YAAA,IAAAtoC,EAAAsoC,WAAA,IAAAtoC,EAAAsoC,WAAA,IAAA,KAAA,GAAAtoC,EAAAsoC,cAAAtoC,EAAAsoC,YAAA,IAAAzoC,KAAA6I,IAAA,EAAA7I,KAAAqiC,IAAA,GAAAriC,KAAA2oC,OAAA,EAAA3oC,KAAAgtB,UAAAhtB,KAAA4oC,KAAA,GAAApoC,GAAAR,KAAA4oC,KAAAlH,UAAA,CAAA,IAAA/gC,GAAAJ,EAAA2mC,aAAAlnC,KAAA4oC,KAAAzoC,EAAAsoC,WAAA,IAAA9nC,IAAAG,EAAAk+B,KAAA,KAAA,IAAAp+B,OAAAw6B,EAAAz6B,GAAAX,MAAA6oC,OAAA,GAAArY,GAAAjwB,EAAA8mC,iBAAArnC,KAAA4oC,KAAA5oC,KAAA6oC,QAAA,QAAApoC,GAAAP,EAAAC,GAAA,GAAAQ,GAAA,GAAAP,GAAAD,EAAA,IAAAQ,EAAAmH,KAAA5H,GAAA,GAAAS,EAAAkI,IAAA,KAAAlI,GAAA0hC,GAAA,OAAA1hC,GAAA4C,OAAA,QAAAlD,GAAAH,EAAAC,GAAA,MAAAA,GAAAA,MAAAA,EAAAuoC,KAAA,EAAAjoC,EAAAP,EAAAC,GAAA,GAAAI,GAAAL,EAAA,kBAAAI,EAAAJ,EAAA,kBAAAX,EAAAW,EAAA,mBAAAY,EAAAZ,EAAA,oBAAAk7B,EAAAl7B,EAAA,mBAAAM,EAAAN,EAAA,kBAAAswB,EAAAtwB,EAAA,mBAAA6gC,EAAAj7B,OAAA0B,UAAA+G,QAAAnO,GAAAoH,UAAAM,KAAA,SAAA5H,EAAAC,GAAA,GAAAQ,GAAAP,EAAAK,EAAAJ,EAAA+6B,EAAA56B,EAAAgwB,EAAAxwB,KAAA4oC,KAAA10B,EAAAlU,KAAA4W,QAAA4xB,UAAAr2B,EAAAnS,KAAA4W,QAAAkyB,WAAA/M,GAAA,CAAA,IAAA/7B,KAAA2oC,MAAA,OAAA,CAAAvoC,GAAAD,MAAAA,EAAAA,EAAAA,KAAA,EAAAW,EAAA+9B,SAAA/9B,EAAA29B,WAAA,gBAAAv+B,GAAAswB,EAAA+Q,MAAAhiC,EAAA4+B,cAAAj+B,GAAA,yBAAA6gC,EAAAhgC,KAAAb,GAAAswB,EAAA+Q,MAAA,GAAAje,YAAApjB,GAAAswB,EAAA+Q,MAAArhC,EAAAswB,EAAA8Q,QAAA,EAAA9Q,EAAAgR,SAAAhR,EAAA+Q,MAAAvgC,MAAA,GAAA,CAAA,GAAA,IAAAwvB,EAAAkR,YAAAlR,EAAAzC,OAAA,GAAAztB,GAAAu9B,KAAA3pB,GAAAsc,EAAAiR,SAAA,EAAAjR,EAAAkR,UAAAxtB,GAAAvT,EAAAJ,EAAA4mC,QAAA3W,EAAA1vB,EAAA29B,YAAA99B,IAAAG,EAAAo+B,aAAA/sB,IAAA3R,EAAA,gBAAA2R,GAAA5S,EAAA0+B,WAAA9rB,GAAA,yBAAA4uB,EAAAhgC,KAAAoR,GAAA,GAAAmR,YAAAnR,GAAAA,EAAAxR,EAAAJ,EAAA+mC,qBAAAtnC,KAAA4oC,KAAApoC,IAAAG,IAAAG,EAAAw+B,aAAAvD,KAAA,IAAAp7B,EAAAG,EAAAk+B,KAAAjD,GAAA,GAAAp7B,IAAAG,EAAAm+B,cAAAt+B,IAAAG,EAAAk+B,KAAA,MAAAh/B,MAAA+oC,MAAApoC,GAAAX,KAAA2oC,OAAA,GAAA,CAAAnY,GAAAiR,WAAA,IAAAjR,EAAAkR,WAAA/gC,IAAAG,EAAAm+B,eAAA,IAAAzO,EAAAgR,UAAAphC,IAAAU,EAAA+9B,UAAAz+B,IAAAU,EAAA69B,gBAAA,WAAA3+B,KAAA4W,QAAAua,IAAA1wB,EAAAlB,EAAA8+B,WAAA7N,EAAAzC,OAAAyC,EAAAiR,UAAAphC,EAAAmwB,EAAAiR,SAAAhhC,EAAA26B,EAAA77B,EAAA6+B,WAAA5N,EAAAzC,OAAAttB,GAAA+vB,EAAAiR,SAAAphC,EAAAmwB,EAAAkR,UAAAxtB,EAAA7T,EAAAA,GAAAC,EAAAo9B,SAAAlN,EAAAzC,OAAAyC,EAAAzC,OAAAttB,EAAAJ,EAAA,GAAAL,KAAAgpC,OAAA5N,IAAAp7B,KAAAgpC,OAAA1oC,EAAAm9B,UAAAjN,EAAAzC,OAAAyC,EAAAiR,aAAA,IAAAjR,EAAAgR,UAAA,IAAAhR,EAAAkR,YAAA3F,GAAA,UAAAvL,EAAAgR,SAAA,GAAA,IAAAhR,EAAAkR,YAAA/gC,IAAAG,EAAAm+B,aAAA,OAAAt+B,KAAAG,EAAAm+B,eAAA7+B,EAAAU,EAAA+9B,UAAAz+B,IAAAU,EAAA+9B,UAAAl+B,EAAAJ,EAAA6mC,WAAApnC,KAAA4oC,MAAA5oC,KAAA+oC,MAAApoC,GAAAX,KAAA2oC,OAAA,EAAAhoC,IAAAG,EAAAk+B,MAAA5+B,IAAAU,EAAA69B,eAAA3+B,KAAA+oC,MAAAjoC,EAAAk+B,MAAAxO,EAAAkR,UAAA,GAAA,IAAAthC,EAAAoH,UAAAwhC,OAAA,SAAA9oC,GAAAF,KAAAgtB,OAAAllB,KAAA5H,IAAAE,EAAAoH,UAAAuhC,MAAA,SAAA7oC,GAAAA,IAAAY,EAAAk+B,OAAA,WAAAh/B,KAAA4W,QAAAua,GAAAnxB,KAAAuD,OAAAvD,KAAAgtB,OAAA5f,KAAA,IAAApN,KAAAuD,OAAAjD,EAAAq9B,cAAA39B,KAAAgtB,SAAAhtB,KAAAgtB,UAAAhtB,KAAA6I,IAAA3I,EAAAF,KAAAqiC,IAAAriC,KAAA4oC,KAAAvG,KAAA1hC,EAAAsoC,QAAA7oC,EAAAO,EAAAwmC,QAAA1mC,EAAAE,EAAAuoC,WAAA7oC,EAAAM,EAAAwoC,OAAA1oC,IAAA2oC,iBAAA,EAAAC,kBAAA,EAAAC,mBAAA,EAAAC,kBAAA,EAAAC,iBAAA,EAAAC,kBAAA,GAAAC,iBAAA,aAAA,6KCDA,YAUA,SAAA/tB,GAAAtX,EAAAyc,EAAAC,EAAAC,GACA,GAAA,kBAAA3c,GACA,KAAA,IAAAV,WAAA,yCAEA,IACAnC,GAAAb,EADAqH,EAAAjE,UAAA/C,MAEA,QAAAgH,GACA,IAAA,GACA,IAAA,GACA,MAAAkJ,GAAAyK,SAAAtX,EACA,KAAA,GACA,MAAA6M,GAAAyK,SAAA,WACAtX,EAAAtD,KAAA,KAAA+f,IAEA,KAAA,GACA,MAAA5P,GAAAyK,SAAA,WACAtX,EAAAtD,KAAA,KAAA+f,EAAAC,IAEA,KAAA,GACA,MAAA7P,GAAAyK,SAAA,WACAtX,EAAAtD,KAAA,KAAA+f,EAAAC,EAAAC,IAEA;AAGA,IAFAxf,EAAA,GAAA0C,OAAA8D,EAAA,GACArH,EAAA,EACAA,EAAAa,EAAAR,QACAQ,EAAAb,KAAAoD,UAAApD,EAEA,OAAAuQ,GAAAyK,SAAA,WACAtX,EAAAhD,MAAA,KAAAG,OArCA0P,EAAAyjB,SACA,IAAAzjB,EAAAyjB,QAAAnR,QAAA,QACA,IAAAtS,EAAAyjB,QAAAnR,QAAA,QAAA,IAAAtS,EAAAyjB,QAAAnR,QAAA,SACA/jB,EAAAD,QAAAmc,EAEAlc,EAAAD,QAAA0R,EAAAyK,gFCPAlc,EAAAD,QAAA0B,EAAA,gFCKA,YAkCA,SAAAg5B,GAAAtjB,GACA,MAAA5W,gBAAAk6B,IAEAyP,EAAA5oC,KAAAf,KAAA4W,GACAgzB,EAAA7oC,KAAAf,KAAA4W,GAEAA,GAAAA,EAAAizB,YAAA,IAAA7pC,KAAA6pC,UAAA,GAEAjzB,GAAAA,EAAAomB,YAAA,IAAAh9B,KAAAg9B,UAAA,GAEAh9B,KAAA8pC,eAAA,EACAlzB,GAAAA,EAAAkzB,iBAAA,IAAA9pC,KAAA8pC,eAAA,OAEA9pC,MAAAuF,KAAA,MAAAwkC,IAZA,GAAA7P,GAAAtjB,GAgBA,QAAAmzB,KAGA/pC,KAAA8pC,eAAA9pC,KAAAgqC,eAAArB,OAIAsB,EAAAC,EAAAlqC,MAGA,QAAAkqC,GAAAnqC,GACAA,EAAA8N,MA1DA,GAAAs8B,GAAArkC,OAAA4B,MAAA,SAAAa,GACA,GAAAb,KACA,KAAA,GAAA1C,KAAAuD,GACAb,EAAAI,KAAA9C,EACA,OAAA0C,GAIAjI,GAAAD,QAAA06B,CAGA,IAAA+P,GAAA/oC,EAAA,wBAIAkpC,EAAAlpC,EAAA,eACAkpC,GAAAC,SAAAnpC,EAAA,WAGA,IAAAyoC,GAAAzoC,EAAA,sBACA0oC,EAAA1oC,EAAA,qBAEAkpC,GAAAC,SAAAnQ,EAAAyP,EAGA,KAAA,GADAjiC,GAAAyiC,EAAAP,EAAApiC,WACA4C,EAAA,EAAAA,EAAA1C,EAAA1G,OAAAoJ,IAAA,CACA,GAAAkgC,GAAA5iC,EAAA0C,EACA8vB,GAAA1yB,UAAA8iC,KAAApQ,EAAA1yB,UAAA8iC,GAAAV,EAAApiC,UAAA8iC,qIChCA,YAaA,SAAAC,GAAA3zB,GACA,MAAA5W,gBAAAuqC,OAEAC,GAAAzpC,KAAAf,KAAA4W,GAFA,GAAA2zB,GAAA3zB,GAZAnX,EAAAD,QAAA+qC,CAEA,IAAAC,GAAAtpC,EAAA,uBAGAkpC,EAAAlpC,EAAA,eACAkpC,GAAAC,SAAAnpC,EAAA,YAGAkpC,EAAAC,SAAAE,EAAAC,GAQAD,EAAA/iC,UAAAijC,WAAA,SAAA1Q,EAAA5X,EAAAtd,GACAA,EAAA,KAAAk1B,gGCxBA,YA0DA,SAAA2Q,GAAA/N,EAAAgO,EAAAtmC,GACA,MAAA,kBAAAs4B,GAAA+N,gBACA/N,EAAA+N,gBAAAC,EAAAtmC,QAMAs4B,EAAApB,SAAAoB,EAAApB,QAAAoP,GAAA/jC,EAAA+1B,EAAApB,QAAAoP,IAAAhO,EAAApB,QAAAoP,GAAA15B,QAAA5M,GAAAs4B,EAAApB,QAAAoP,IAAAtmC,EAAAs4B,EAAApB,QAAAoP,IAAAhO,EAAAR,GAAAwO,EAAAtmC,IAKA,QAAAumC,GAAAh0B,EAAAqiB,GACAiB,EAAAA,GAAAh5B,EAAA,oBAEA0V,EAAAA,MAIA5W,KAAA6qC,aAAAj0B,EAAAi0B,WAEA5R,YAAAiB,KAAAl6B,KAAA6qC,WAAA7qC,KAAA6qC,cAAAj0B,EAAAk0B,mBAIA,IAAAC,GAAAn0B,EAAAo0B,cACAC,EAAAjrC,KAAA6qC,WAAA,GAAA,KACA7qC,MAAAgrC,cAAAD,GAAA,IAAAA,EAAAA,EAAAE,EAGAjrC,KAAAgrC,gBAAAhrC,KAAAgrC,cAKAhrC,KAAAwR,OAAA,GAAA05B,GACAlrC,KAAAgB,OAAA,EACAhB,KAAAmrC,MAAA,KACAnrC,KAAAorC,WAAA,EACAprC,KAAAqrC,QAAA,KACArrC,KAAA2oC,OAAA,EACA3oC,KAAAsrC,YAAA,EACAtrC,KAAAurC,SAAA,EAMAvrC,KAAA6T,MAAA,EAIA7T,KAAAwrC,cAAA,EACAxrC,KAAAyrC,iBAAA,EACAzrC,KAAA0rC,mBAAA,EACA1rC,KAAA2rC,iBAAA,EAKA3rC,KAAA4rC,gBAAAh1B,EAAAg1B,iBAAA,OAIA5rC,KAAA6rC,QAAA,EAGA7rC,KAAA8rC,WAAA,EAGA9rC,KAAA+rC,aAAA,EAEA/rC,KAAAgsC,QAAA,KACAhsC,KAAAmiB,SAAA,KACAvL,EAAAuL,WACA8pB,IAAAA,EAAA/qC,EAAA,mBAAA+qC,eACAjsC,KAAAgsC,QAAA,GAAAC,GAAAr1B,EAAAuL,UACAniB,KAAAmiB,SAAAvL,EAAAuL,UAKA,QAAAwnB,GAAA/yB,GAGA,MAFAsjB,GAAAA,GAAAh5B,EAAA,oBAEAlB,eAAA2pC,IAEA3pC,KAAAksC,eAAA,GAAAtB,GAAAh0B,EAAA5W,MAGAA,KAAA6pC,UAAA,EAEAjzB,GAAA,kBAAAA,GAAAu1B,OAAAnsC,KAAAg6B,MAAApjB,EAAAu1B,UAEAC,GAAArrC,KAAAf,OATA,GAAA2pC,GAAA/yB,GAwCA,QAAAy1B,GAAApT,EAAAoI,EAAAtH,EAAA5X,EAAAmqB,GACA,GAAA3Q,GAAA4Q,EAAAlL,EAAAtH,EACA,IAAA4B,EACA1C,EAAAxB,KAAA,QAAAkE,OACA,IAAA,OAAA5B,EACAsH,EAAAkK,SAAA,EACAiB,EAAAvT,EAAAoI,OACA,IAAAA,EAAAwJ,YAAA9Q,GAAAA,EAAA/4B,OAAA,EACA,GAAAqgC,EAAAsH,QAAA2D,EAAA,CACA,GAAApsC,GAAA,GAAAU,OAAA,0BACAq4B,GAAAxB,KAAA,QAAAv3B,OACA,IAAAmhC,EAAAiK,YAAAgB,EAAA,CACA,GAAAvI,GAAA,GAAAnjC,OAAA,mCACAq4B,GAAAxB,KAAA,QAAAsM,OACA,CACA,GAAA0I,IACApL,EAAA2K,SAAAM,GAAAnqB,IACA4X,EAAAsH,EAAA2K,QAAAxqB,MAAAuY,GACA0S,GAAApL,EAAAwJ,YAAA,IAAA9Q,EAAA/4B,QAGAsrC,IAAAjL,EAAAkK,SAAA,GAIAkB,IAEApL,EAAAgK,SAAA,IAAAhK,EAAArgC,SAAAqgC,EAAAxtB,MACAolB,EAAAxB,KAAA,OAAAsC,GACAd,EAAAkT,KAAA,KAGA9K,EAAArgC,QAAAqgC,EAAAwJ,WAAA,EAAA9Q,EAAA/4B,OACAsrC,EAAAjL,EAAA7vB,OAAAP,QAAA8oB,GAAAsH,EAAA7vB,OAAA1J,KAAAiyB,GAEAsH,EAAAmK,cAAAkB,EAAAzT,KAIA0T,EAAA1T,EAAAoI,OAEAiL,KACAjL,EAAAkK,SAAA,EAGA,OAAAqB,GAAAvL,GAUA,QAAAuL,GAAAvL,GACA,OAAAA,EAAAsH,QAAAtH,EAAAmK,cAAAnK,EAAArgC,OAAAqgC,EAAA2J,eAAA,IAAA3J,EAAArgC,QAaA,QAAA6rC,GAAAzsC,GAcA,MAbAA,IAAA0sC,EACA1sC,EAAA0sC,GAIA1sC,IACAA,GAAAA,IAAA,EACAA,GAAAA,IAAA,EACAA,GAAAA,IAAA,EACAA,GAAAA,IAAA,EACAA,GAAAA,IAAA,GACAA,KAEAA,EAKA,QAAA2sC,GAAA3sC,EAAAihC,GACA,MAAAjhC,IAAA,GAAA,IAAAihC,EAAArgC,QAAAqgC,EAAAsH,MAAA,EACAtH,EAAAwJ,WAAA,EACAzqC,IAAAA,EAEAihC,EAAAgK,SAAAhK,EAAArgC,OAAAqgC,EAAA7vB,OAAAxB,KAAAS,KAAAzP,OAAAqgC,EAAArgC,QAGAZ,EAAAihC,EAAA2J,gBAAA3J,EAAA2J,cAAA6B,EAAAzsC,IACAA,GAAAihC,EAAArgC,OAAAZ,EAEAihC,EAAAsH,MAIAtH,EAAArgC,QAHAqgC,EAAAmK,cAAA,EACA,IA0GA,QAAAe,GAAAlL,EAAAtH,GACA,GAAA4B,GAAA,IAIA,OAHA9a,GAAA6C,SAAAqW,IAAA,gBAAAA,IAAA,OAAAA,GAAAj2B,SAAAi2B,GAAAsH,EAAAwJ,aACAlP,EAAA,GAAAh4B,WAAA,oCAEAg4B,EAGA,QAAA6Q,GAAAvT,EAAAoI,GACA,IAAAA,EAAAsH,MAAA,CACA,GAAAtH,EAAA2K,QAAA,CACA,GAAAjS,GAAAsH,EAAA2K,QAAAn+B,KACAksB,IAAAA,EAAA/4B,SACAqgC,EAAA7vB,OAAA1J,KAAAiyB,GACAsH,EAAArgC,QAAAqgC,EAAAwJ,WAAA,EAAA9Q,EAAA/4B,QAGAqgC,EAAAsH,OAAA,EAGA+D,EAAAzT,IAMA,QAAAyT,GAAAzT,GACA,GAAAoI,GAAApI,EAAAiT,cACA7K,GAAAmK,cAAA,EACAnK,EAAAoK,kBACAuB,EAAA,eAAA3L,EAAAgK,SACAhK,EAAAoK,iBAAA,EACApK,EAAAxtB,KAAAo2B,EAAAgD,EAAAhU,GAAAgU,EAAAhU,IAIA,QAAAgU,GAAAhU,GACA+T,EAAA,iBACA/T,EAAAxB,KAAA,YACAyV,EAAAjU,GASA,QAAA0T,GAAA1T,EAAAoI,GACAA,EAAA0K,cACA1K,EAAA0K,aAAA,EACA9B,EAAAkD,EAAAlU,EAAAoI,IAIA,QAAA8L,GAAAlU,EAAAoI,GAEA,IADA,GAAAr5B,GAAAq5B,EAAArgC,QACAqgC,EAAAkK,UAAAlK,EAAAgK,UAAAhK,EAAAsH,OAAAtH,EAAArgC,OAAAqgC,EAAA2J,gBACAgC,EAAA,wBACA/T,EAAAkT,KAAA,GACAnkC,IAAAq5B,EAAArgC,SAEAgH,EAAAq5B,EAAArgC,MAEAqgC,GAAA0K,aAAA,EA+IA,QAAAqB,GAAAC,GACA,MAAA,YACA,GAAAhM,GAAAgM,EAAAnB,cACAc,GAAA,cAAA3L,EAAAyK,YACAzK,EAAAyK,YAAAzK,EAAAyK,aACA,IAAAzK,EAAAyK,YAAAwB,EAAAD,EAAA,UACAhM,EAAAgK,SAAA,EACA6B,EAAAG,KA+EA,QAAAE,GAAAxtC,GACAitC,EAAA,4BACAjtC,EAAAosC,KAAA,GAeA,QAAAl6B,GAAAgnB,EAAAoI,GACAA,EAAAsK,kBACAtK,EAAAsK,iBAAA,EACA1B,EAAAuD,EAAAvU,EAAAoI,IAIA,QAAAmM,GAAAvU,EAAAoI,GACAA,EAAAkK,UACAyB,EAAA,iBACA/T,EAAAkT,KAAA,IAGA9K,EAAAsK,iBAAA,EACAtK,EAAAyK,WAAA,EACA7S,EAAAxB,KAAA,UACAyV,EAAAjU,GACAoI,EAAAgK,UAAAhK,EAAAkK,SAAAtS,EAAAkT,KAAA,GAaA,QAAAe,GAAAjU,GACA,GAAAoI,GAAApI,EAAAiT,cAEA,KADAc,EAAA,OAAA3L,EAAAgK,SACAhK,EAAAgK,SAAA,OAAApS,EAAAkT,UAyEA,QAAAsB,GAAArtC,EAAAihC,GAEA,GAAA,IAAAA,EAAArgC,OAAA,MAAA,KAEA,IAAAw7B,EAUA,OATA6E,GAAAwJ,WAAArO,EAAA6E,EAAA7vB,OAAA3F,SAAAzL,GAAAA,GAAAihC,EAAArgC,QAEAw7B,EAAA6E,EAAA2K,QAAA3K,EAAA7vB,OAAApE,KAAA,IAAA,IAAAi0B,EAAA7vB,OAAAxQ,OAAAqgC,EAAA7vB,OAAAxB,KAAAS,KAAA4wB,EAAA7vB,OAAA1M,OAAAu8B,EAAArgC,QACAqgC,EAAA7vB,OAAAk8B,SAGAlR,EAAAmR,EAAAvtC,EAAAihC,EAAA7vB,OAAA6vB,EAAA2K,SAGAxP,EAMA,QAAAmR,GAAAvtC,EAAAknB,EAAAsmB,GACA,GAAApR,EAYA,OAXAp8B,GAAAknB,EAAAtX,KAAAS,KAAAzP,QAEAw7B,EAAAlV,EAAAtX,KAAAS,KAAAzN,MAAA,EAAA5C,GACAknB,EAAAtX,KAAAS,KAAA6W,EAAAtX,KAAAS,KAAAzN,MAAA5C,IAGAo8B,EAFAp8B,IAAAknB,EAAAtX,KAAAS,KAAAzP,OAEAsmB,EAAAzb,QAGA+hC,EAAAC,EAAAztC,EAAAknB,GAAAwmB,EAAA1tC,EAAAknB,GAEAkV,EAOA,QAAAqR,GAAAztC,EAAAknB,GACA,GAAA4I,GAAA5I,EAAAtX,KACAwgB,EAAA,EACAgM,EAAAtM,EAAAzf,IAEA,KADArQ,GAAAo8B,EAAAx7B,OACAkvB,EAAAA,EAAA9nB,MAAA,CACA,GAAA8Z,GAAAgO,EAAAzf,KACAs9B,EAAA3tC,EAAA8hB,EAAAlhB,OAAAkhB,EAAAlhB,OAAAZ,CAGA,IAFAo8B,GAAAuR,IAAA7rB,EAAAlhB,OAAAkhB,EAAAA,EAAAlf,MAAA,EAAA5C,GACAA,GAAA2tC,EACA,IAAA3tC,EAAA,CACA2tC,IAAA7rB,EAAAlhB,UACAwvB,EACAN,EAAA9nB,KAAAkf,EAAAtX,KAAAkgB,EAAA9nB,KAAAkf,EAAAtX,KAAAsX,EAAArX,KAAA,OAEAqX,EAAAtX,KAAAkgB,EACAA,EAAAzf,KAAAyR,EAAAlf,MAAA+qC,GAEA,SAEAvd,EAGA,MADAlJ,GAAAtmB,QAAAwvB,EACAgM,EAMA,QAAAsR,GAAA1tC,EAAAknB,GACA,GAAAkV,GAAAwR,EAAAvT,YAAAr6B,GACA8vB,EAAA5I,EAAAtX,KACAwgB,EAAA,CAGA,KAFAN,EAAAzf,KAAA6Q,KAAAkb,GACAp8B,GAAA8vB,EAAAzf,KAAAzP,OACAkvB,EAAAA,EAAA9nB,MAAA,CACA,GAAAof,GAAA0I,EAAAzf,KACAs9B,EAAA3tC,EAAAonB,EAAAxmB,OAAAwmB,EAAAxmB,OAAAZ,CAGA,IAFAonB,EAAAlG,KAAAkb,EAAAA,EAAAx7B,OAAAZ,EAAA,EAAA2tC,GACA3tC,GAAA2tC,EACA,IAAA3tC,EAAA,CACA2tC,IAAAvmB,EAAAxmB,UACAwvB,EACAN,EAAA9nB,KAAAkf,EAAAtX,KAAAkgB,EAAA9nB,KAAAkf,EAAAtX,KAAAsX,EAAArX,KAAA,OAEAqX,EAAAtX,KAAAkgB,EACAA,EAAAzf,KAAA+W,EAAAxkB,MAAA+qC,GAEA,SAEAvd,EAGA,MADAlJ,GAAAtmB,QAAAwvB,EACAgM,EAGA,QAAAyR,GAAAhV,GACA,GAAAoI,GAAApI,EAAAiT,cAIA,IAAA7K,EAAArgC,OAAA,EAAA,KAAA,IAAAJ,OAAA,6CAEAygC,GAAAiK,aACAjK,EAAAsH,OAAA,EACAsB,EAAAiE,EAAA7M,EAAApI,IAIA,QAAAiV,GAAA7M,EAAApI,GAEAoI,EAAAiK,YAAA,IAAAjK,EAAArgC,SACAqgC,EAAAiK,YAAA,EACArS,EAAA4Q,UAAA,EACA5Q,EAAAxB,KAAA,QAIA,QAAAnZ,GAAA6vB,EAAA5uC,GACA,IAAA,GAAAoB,GAAA,EAAAG,EAAAqtC,EAAAntC,OAAAL,EAAAG,EAAAH,IACApB,EAAA4uC,EAAAxtC,GAAAA,GAIA,QAAA6iB,GAAA2qB,EAAA37B,GACA,IAAA,GAAA7R,GAAA,EAAAG,EAAAqtC,EAAAntC,OAAAL,EAAAG,EAAAH,IACA,GAAAwtC,EAAAxtC,KAAA6R,EAAA,MAAA7R,EAEA,QAAA,EAr6BAlB,EAAAD,QAAAmqC,CAGA,IAAAM,GAAA/oC,EAAA,wBAIA0F,EAAA1F,EAAA,UAGAyoC,GAAAiB,cAAAA,CAGA,IAQAwB,GANAkB,GAFApsC,EAAA,UAAA83B,aAEA,SAAA2D,EAAAh7B,GACA,MAAAg7B,GAAA1wB,UAAAtK,GAAAX,UAMA,WACA,IACAorC,EAAAlrC,EAAA,UACA,MAAAiJ,IAAA,QACAiiC,IAAAA,EAAAlrC,EAAA,UAAA83B,iBAKA,IAAAnY,GAAA3f,EAAA,UAAA2f,OAEAmtB,EAAA9sC,EAAA,gBAIAkpC,EAAAlpC,EAAA,eACAkpC,GAAAC,SAAAnpC,EAAA,WAIA,IAAAktC,GAAAltC,EAAA,QACA8rC,EAAA,MAEAA,GADAoB,GAAAA,EAAAC,SACAD,EAAAC,SAAA,UAEA,YAIA,IACApC,GADAf,EAAAhqC,EAAA,gCAGAkpC,GAAAC,SAAAV,EAAAyC,EAcA,IAAAlS,GAsEAA,CAoBAyP,GAAAniC,UAAAM,KAAA,SAAAiyB,EAAA5X,GACA,GAAAkf,GAAArhC,KAAAksC,cAUA,OARA7K,GAAAwJ,YAAA,gBAAA9Q,KACA5X,EAAAA,GAAAkf,EAAAuK,gBACAzpB,IAAAkf,EAAAlf,WACA4X,EAAAiU,EAAA9c,KAAA6I,EAAA5X,GACAA,EAAA,KAIAkqB,EAAArsC,KAAAqhC,EAAAtH,EAAA5X,GAAA,IAIAwnB,EAAAniC,UAAAyJ,QAAA,SAAA8oB,GACA,GAAAsH,GAAArhC,KAAAksC,cACA,OAAAG,GAAArsC,KAAAqhC,EAAAtH,EAAA,IAAA,IAGA4P,EAAAniC,UAAA8mC,SAAA,WACA,MAAAtuC,MAAAksC,eAAAb,WAAA,GA+DA1B,EAAAniC,UAAA+mC,YAAA,SAAAxnB,GAIA,MAHAklB,KAAAA,EAAA/qC,EAAA,mBAAA+qC,eACAjsC,KAAAksC,eAAAF,QAAA,GAAAC,GAAAllB,GACA/mB,KAAAksC,eAAA/pB,SAAA4E,EACA/mB,KAIA,IAAA8sC,GAAA,OAuCAnD,GAAAniC,UAAA2kC,KAAA,SAAA/rC,GACA4sC,EAAA,OAAA5sC,GACAA,EAAA8Y,SAAA9Y,EAAA,GACA,IAAAihC,GAAArhC,KAAAksC,eACAsC,EAAApuC,CAOA,IALA,IAAAA,IAAAihC,EAAAoK,iBAAA,GAKA,IAAArrC,GAAAihC,EAAAmK,eAAAnK,EAAArgC,QAAAqgC,EAAA2J,eAAA3J,EAAAsH,OAGA,MAFAqE,GAAA,qBAAA3L,EAAArgC,OAAAqgC,EAAAsH,OACA,IAAAtH,EAAArgC,QAAAqgC,EAAAsH,MAAAsF,EAAAjuC,MAAA0sC,EAAA1sC,MACA,IAMA,IAHAI,EAAA2sC,EAAA3sC,EAAAihC,GAGA,IAAAjhC,GAAAihC,EAAAsH,MAEA,MADA,KAAAtH,EAAArgC,QAAAitC,EAAAjuC,MACA,IA0BA,IAAAyuC,GAAApN,EAAAmK,YACAwB,GAAA,gBAAAyB,IAGA,IAAApN,EAAArgC,QAAAqgC,EAAArgC,OAAAZ,EAAAihC,EAAA2J,iBACAyD,GAAA,EACAzB,EAAA,6BAAAyB,IAKApN,EAAAsH,OAAAtH,EAAAkK,SACAkD,GAAA,EACAzB,EAAA,mBAAAyB,IACAA,IACAzB,EAAA,WACA3L,EAAAkK,SAAA,EACAlK,EAAAxtB,MAAA,EAEA,IAAAwtB,EAAArgC,SAAAqgC,EAAAmK,cAAA,GAEAxrC,KAAAg6B,MAAAqH,EAAA2J,eACA3J,EAAAxtB,MAAA,EAGAwtB,EAAAkK,UAAAnrC,EAAA2sC,EAAAyB,EAAAnN,IAGA,IAAA7E,EAqBA,OApBAA,GAAAp8B,EAAA,EAAAqtC,EAAArtC,EAAAihC,GAAA,KAEA,OAAA7E,GACA6E,EAAAmK,cAAA,EACAprC,EAAA,GAEAihC,EAAArgC,QAAAZ,EAGA,IAAAihC,EAAArgC,SAGAqgC,EAAAsH,QAAAtH,EAAAmK,cAAA,GAGAgD,IAAApuC,GAAAihC,EAAAsH,OAAAsF,EAAAjuC,OAGA,OAAAw8B,GAAAx8B,KAAAy3B,KAAA,OAAA+E,GAEAA,GA0EAmN,EAAAniC,UAAAwyB,MAAA,SAAA55B,GACAJ,KAAAy3B,KAAA,QAAA,GAAA72B,OAAA,qBAGA+oC,EAAAniC,UAAAknC,KAAA,SAAAC,EAAAC,GAwBA,QAAAC,GAAAhF,GACAmD,EAAA,YACAnD,IAAAwD,GACAyB,IAIA,QAAA/E,KACAiD,EAAA,SACA2B,EAAA9gC,MAWA,QAAAihC,KACA9B,EAAA,WAEA2B,EAAAvS,eAAA,QAAA2S,GACAJ,EAAAvS,eAAA,SAAA4S,GACAL,EAAAvS,eAAA,QAAA6S,GACAN,EAAAvS,eAAA,QAAA8S,GACAP,EAAAvS,eAAA,SAAAyS,GACAxB,EAAAjR,eAAA,MAAA2N,GACAsD,EAAAjR,eAAA,MAAA0S,GACAzB,EAAAjR,eAAA,OAAA+S,GAEAC,GAAA,GAOA/N,EAAAyK,YAAA6C,EAAA3E,iBAAA2E,EAAA3E,eAAAqF,WAAAJ,IASA,QAAAE,GAAApV,GACAiT,EAAA,UACAsC,GAAA,CACA,IAAA9S,GAAAmS,EAAAntB,MAAAuY,IACA,IAAAyC,GAAA8S,KAKA,IAAAjO,EAAA+J,YAAA/J,EAAA8J,QAAAwD,GAAAtN,EAAA+J,WAAA,GAAA5nB,EAAA6d,EAAA8J,MAAAwD,MAAA,KAAAS,IACApC,EAAA,8BAAAK,EAAAnB,eAAAJ,YACAuB,EAAAnB,eAAAJ,aACAwD,GAAA,GAEAjC,EAAAr7B,SAMA,QAAAk9B,GAAAvT,GACAqR,EAAA,UAAArR,GACA4T,IACAZ,EAAAvS,eAAA,QAAA8S,GACA,IAAA5B,EAAAqB,EAAA,UAAAA,EAAAlX,KAAA,QAAAkE,GAOA,QAAAoT,KACAJ,EAAAvS,eAAA,SAAA4S,GACAO,IAGA,QAAAP,KACAhC,EAAA,YACA2B,EAAAvS,eAAA,QAAA2S,GACAQ,IAIA,QAAAA,KACAvC,EAAA,UACAK,EAAAkC,OAAAZ,GApHA,GAAAtB,GAAArtC,KACAqhC,EAAArhC,KAAAksC,cAEA,QAAA7K,EAAA+J,YACA,IAAA,GACA/J,EAAA8J,MAAAwD,CACA,MACA,KAAA,GACAtN,EAAA8J,OAAA9J,EAAA8J,MAAAwD,EACA,MACA,SACAtN,EAAA8J,MAAArjC,KAAA6mC,GAGAtN,EAAA+J,YAAA,EACA4B,EAAA,wBAAA3L,EAAA+J,WAAAwD,EAEA,IAAAY,KAAAZ,GAAAA,EAAA/gC,OAAA,IAAA8gC,IAAAz9B,EAAA8hB,QAAA2b,IAAAz9B,EAAA+hB,OAEAwc,EAAAD,EAAAzF,EAAA+E,CACAzN,GAAAiK,WAAArB,EAAAwF,GAAApC,EAAA9nC,KAAA,MAAAkqC,GAEAd,EAAAxS,GAAA,SAAA0S,EAiBA,IAAAI,GAAA7B,EAAAC,EACAsB,GAAAxS,GAAA,QAAA8S,EAEA,IAAAG,IAAA,EA2BAE,GAAA,CA2DA,OA1DAjC,GAAAlR,GAAA,OAAAgT,GA6BAzE,EAAAiE,EAAA,QAAAO,GAOAP,EAAAppC,KAAA,QAAAwpC,GAMAJ,EAAAppC,KAAA,SAAAypC,GAQAL,EAAAlX,KAAA,OAAA4V,GAGAhM,EAAAgK,UACA2B,EAAA,eACAK,EAAAp7B,UAGA08B,GAeAhF,EAAAniC,UAAA+nC,OAAA,SAAAZ,GACA,GAAAtN,GAAArhC,KAAAksC,cAGA,IAAA,IAAA7K,EAAA+J,WAAA,MAAAprC,KAGA,IAAA,IAAAqhC,EAAA+J,WAEA,MAAAuD,IAAAA,IAAAtN,EAAA8J,MAAAnrC,MAEA2uC,IAAAA,EAAAtN,EAAA8J,OAGA9J,EAAA8J,MAAA,KACA9J,EAAA+J,WAAA,EACA/J,EAAAgK,SAAA,EACAsD,GAAAA,EAAAlX,KAAA,SAAAz3B,MACAA,KAKA,KAAA2uC,EAAA,CAEA,GAAAe,GAAArO,EAAA8J,MACAnjC,EAAAq5B,EAAA+J,UACA/J,GAAA8J,MAAA,KACA9J,EAAA+J,WAAA,EACA/J,EAAAgK,SAAA,CAEA,KAAA,GAAA3a,GAAA,EAAAA,EAAA1oB,EAAA0oB,IACAgf,EAAAhf,GAAA+G,KAAA,SAAAz3B,KACA,OAAAA,MAIA,GAAAW,GAAA6iB,EAAA6d,EAAA8J,MAAAwD,EACA,OAAAhuC,MAAA,EAAAX,MAEAqhC,EAAA8J,MAAA75B,OAAA3Q,EAAA,GACA0gC,EAAA+J,YAAA,EACA,IAAA/J,EAAA+J,aAAA/J,EAAA8J,MAAA9J,EAAA8J,MAAA,IAEAwD,EAAAlX,KAAA,SAAAz3B,MAEAA,OAKA2pC,EAAAniC,UAAA20B,GAAA,SAAAwT,EAAAtrC,GACA,GAAAurC,GAAAxD,EAAA5kC,UAAA20B,GAAAp7B,KAAAf,KAAA2vC,EAAAtrC,EAEA,IAAA,SAAAsrC,EAEA3vC,KAAAksC,eAAAb,WAAA,GAAArrC,KAAAiS,aACA,IAAA,aAAA09B,EAAA,CACA,GAAAtO,GAAArhC,KAAAksC,cACA7K,GAAAiK,YAAAjK,EAAAqK,oBACArK,EAAAqK,kBAAArK,EAAAmK,cAAA,EACAnK,EAAAoK,iBAAA,EACApK,EAAAkK,QAEAlK,EAAArgC,QACA0rC,EAAA1sC,KAAAqhC,GAFA4I,EAAAsD,EAAAvtC,OAOA,MAAA4vC,IAEAjG,EAAAniC,UAAAsE,YAAA69B,EAAAniC,UAAA20B,GASAwN,EAAAniC,UAAAyK,OAAA,WACA,GAAAovB,GAAArhC,KAAAksC,cAMA,OALA7K,GAAAgK,UACA2B,EAAA,UACA3L,EAAAgK,SAAA,EACAp5B,EAAAjS,KAAAqhC,IAEArhC,MAuBA2pC,EAAAniC,UAAAwK,MAAA,WAOA,MANAg7B,GAAA,wBAAAhtC,KAAAksC,eAAAb,UACA,IAAArrC,KAAAksC,eAAAb,UACA2B,EAAA,SACAhtC,KAAAksC,eAAAb,SAAA,EACArrC,KAAAy3B,KAAA,UAEAz3B,MAYA2pC,EAAAniC,UAAAqI,KAAA,SAAAopB,GACA,GAAAoI,GAAArhC,KAAAksC,eACAt6B,GAAA,EAEA7R,EAAAC,IACAi5B,GAAAkD,GAAA,MAAA,WAEA,GADA6Q,EAAA,eACA3L,EAAA2K,UAAA3K,EAAAsH,MAAA,CACA,GAAA5O,GAAAsH,EAAA2K,QAAAn+B,KACAksB,IAAAA,EAAA/4B,QAAAjB,EAAA+H,KAAAiyB,GAGAh6B,EAAA+H,KAAA,QAGAmxB,EAAAkD,GAAA,OAAA,SAAApC,GAKA,GAJAiT,EAAA,gBACA3L,EAAA2K,UAAAjS,EAAAsH,EAAA2K,QAAAxqB,MAAAuY,MAGAsH,EAAAwJ,YAAA,OAAA9Q,GAAAj2B,SAAAi2B,KAAAsH,EAAAwJ,YAAA9Q,GAAAA,EAAA/4B,QAAA,CAEA,GAAAw7B,GAAAz8B,EAAA+H,KAAAiyB,EACAyC,KACA5qB,GAAA,EACAqnB,EAAAjnB,WAMA,KAAA,GAAArR,KAAAs4B,GACAn1B,SAAA9D,KAAAW,IAAA,kBAAAs4B,GAAAt4B,KACAX,KAAAW,GAAA,SAAA2pC,GACA,MAAA,YACA,MAAArR,GAAAqR,GAAAjpC,MAAA43B,EAAAl1B,aAEApD,GAKA,IAAAuyB,IAAA,QAAA,QAAA,UAAA,QAAA,SAeA,OAdA5U,GAAA4U,EAAA,SAAAyc,GACA1W,EAAAkD,GAAAwT,EAAA5vC,EAAA03B,KAAAoY,KAAA9vC,EAAA4vC,MAKA5vC,EAAAi6B,MAAA,SAAA55B,GACA4sC,EAAA,gBAAA5sC,GACAwR,IACAA,GAAA,EACAqnB,EAAAhnB,WAIAlS,GAIA4pC,EAAAmG,UAAArC,uQCvvBA,YAaA,SAAAsC,GAAA9W,GACAj5B,KAAAgwC,eAAA,SAAArU,EAAAlrB,GACA,MAAAu/B,GAAA/W,EAAA0C,EAAAlrB,IAGAzQ,KAAAiwC,eAAA,EACAjwC,KAAAkwC,cAAA,EACAlwC,KAAAmwC,QAAA,KACAnwC,KAAAowC,WAAA,KACApwC,KAAAqwC,cAAA,KAGA,QAAAL,GAAA/W,EAAA0C,EAAAlrB,GACA,GAAA6/B,GAAArX,EAAAsX,eACAD,GAAAJ,cAAA,CAEA,IAAArrC,GAAAyrC,EAAAH,OAEA,KAAAtrC,EAAA,MAAAo0B,GAAAxB,KAAA,QAAA,GAAA72B,OAAA,iCAEA0vC,GAAAF,WAAA,KACAE,EAAAH,QAAA,KAEA,OAAA1/B,GAAA3M,SAAA2M,GAAAwoB,EAAAnxB,KAAA2I,GAEA5L,EAAA82B,EAEA,IAAA6U,GAAAvX,EAAAiT,cACAsE,GAAAjF,SAAA,GACAiF,EAAAhF,cAAAgF,EAAAxvC,OAAAwvC,EAAAxF,gBACA/R,EAAAe,MAAAwW,EAAAxF,eAIA,QAAAR,GAAA5zB,GACA,KAAA5W,eAAAwqC,IAAA,MAAA,IAAAA,GAAA5zB,EAEAsjB,GAAAn5B,KAAAf,KAAA4W,GAEA5W,KAAAuwC,gBAAA,GAAAR,GAAA/vC,KAGA,IAAAi5B,GAAAj5B,IAGAA,MAAAksC,eAAAV,cAAA,EAKAxrC,KAAAksC,eAAAr4B,MAAA,EAEA+C,IACA,kBAAAA,GAAA0B,YAAAtY,KAAAyqC,WAAA7zB,EAAA0B,WAEA,kBAAA1B,GAAA65B,QAAAzwC,KAAA0wC,OAAA95B,EAAA65B,QAGAzwC,KAAAuF,KAAA,YAAA,WACA,kBAAAvF,MAAA0wC,OAAA1wC,KAAA0wC,OAAA,SAAA/U,GACAtzB,EAAA4wB,EAAA0C,KACAtzB,EAAA4wB,KAkDA,QAAA5wB,GAAA4wB,EAAA0C,GACA,GAAAA,EAAA,MAAA1C,GAAAxB,KAAA,QAAAkE,EAIA,IAAAgV,GAAA1X,EAAA+Q,eACAsG,EAAArX,EAAAsX,eAEA,IAAAI,EAAA3vC,OAAA,KAAA,IAAAJ,OAAA,6CAEA,IAAA0vC,EAAAJ,aAAA,KAAA,IAAAtvC,OAAA,iDAEA,OAAAq4B,GAAAnxB,KAAA,MAtIArI,EAAAD,QAAAgrC,CAEA,IAAAtQ,GAAAh5B,EAAA,oBAGAkpC,EAAAlpC,EAAA,eACAkpC,GAAAC,SAAAnpC,EAAA,YAGAkpC,EAAAC,SAAAG,EAAAtQ,GAmEAsQ,EAAAhjC,UAAAM,KAAA,SAAAiyB,EAAA5X,GAEA,MADAniB,MAAAuwC,gBAAAN,eAAA,EACA/V,EAAA1yB,UAAAM,KAAA/G,KAAAf,KAAA+5B,EAAA5X,IAaAqoB,EAAAhjC,UAAAijC,WAAA,SAAA1Q,EAAA5X,EAAAtd,GACA,KAAA,IAAAjE,OAAA,oBAGA4pC,EAAAhjC,UAAAsyB,OAAA,SAAAC,EAAA5X,EAAAtd,GACA,GAAAyrC,GAAAtwC,KAAAuwC,eAIA,IAHAD,EAAAH,QAAAtrC,EACAyrC,EAAAF,WAAArW,EACAuW,EAAAD,cAAAluB,GACAmuB,EAAAJ,aAAA,CACA,GAAAM,GAAAxwC,KAAAksC,gBACAoE,EAAAL,eAAAO,EAAAhF,cAAAgF,EAAAxvC,OAAAwvC,EAAAxF,gBAAAhrC,KAAAg6B,MAAAwW,EAAAxF,iBAOAR,EAAAhjC,UAAAwyB,MAAA,SAAA55B,GACA,GAAAkwC,GAAAtwC,KAAAuwC,eAEA,QAAAD,EAAAF,YAAAE,EAAAH,UAAAG,EAAAJ,cACAI,EAAAJ,cAAA,EACAlwC,KAAAyqC,WAAA6F,EAAAF,WAAAE,EAAAD,cAAAC,EAAAN,iBAIAM,EAAAL,eAAA,4FC9JA,YA2CA,SAAAW,MAEA,QAAAC,GAAA9W,EAAA5X,EAAAtd,GACA7E,KAAA+5B,MAAAA,EACA/5B,KAAAmiB,SAAAA,EACAniB,KAAAsE,SAAAO,EACA7E,KAAAoI,KAAA,KAIA,QAAA0oC,GAAAl6B,EAAAqiB,GACAiB,EAAAA,GAAAh5B,EAAA,oBAEA0V,EAAAA,MAIA5W,KAAA6qC,aAAAj0B,EAAAi0B,WAEA5R,YAAAiB,KAAAl6B,KAAA6qC,WAAA7qC,KAAA6qC,cAAAj0B,EAAAm6B,mBAKA,IAAAhG,GAAAn0B,EAAAo0B,cACAC,EAAAjrC,KAAA6qC,WAAA,GAAA,KACA7qC,MAAAgrC,cAAAD,GAAA,IAAAA,EAAAA,EAAAE,EAGAjrC,KAAAgrC,gBAAAhrC,KAAAgrC,cAEAhrC,KAAAqvC,WAAA,EAEArvC,KAAAgxC,QAAA,EAEAhxC,KAAA2oC,OAAA,EAEA3oC,KAAAixC,UAAA,CAKA,IAAAC,GAAAt6B,EAAAu6B,iBAAA,CACAnxC,MAAAmxC,eAAAD,EAKAlxC,KAAA4rC,gBAAAh1B,EAAAg1B,iBAAA,OAKA5rC,KAAAgB,OAAA,EAGAhB,KAAAoxC,SAAA,EAGApxC,KAAAqxC,OAAA,EAMArxC,KAAA6T,MAAA,EAKA7T,KAAAsxC,kBAAA,EAGAtxC,KAAAuxC,QAAA,SAAA5V,GACA4V,EAAAtY,EAAA0C,IAIA37B,KAAAmwC,QAAA,KAGAnwC,KAAAwxC,SAAA,EAEAxxC,KAAAyxC,gBAAA,KACAzxC,KAAA0xC,oBAAA,KAIA1xC,KAAA2xC,UAAA,EAIA3xC,KAAA4xC,aAAA,EAGA5xC,KAAA6xC,cAAA,EAGA7xC,KAAA8xC,qBAAA,EAIA9xC,KAAA+xC,mBAAA,GAAAC,GAAAhyC,MAwBA,QAAA4pC,GAAAhzB,GAKA,MAJAsjB,GAAAA,GAAAh5B,EAAA,oBAIAlB,eAAA4pC,IAAA5pC,eAAAk6B,IAEAl6B,KAAAgqC,eAAA,GAAA8G,GAAAl6B,EAAA5W,MAGAA,KAAAg9B,UAAA,EAEApmB,IACA,kBAAAA,GAAA4K,QAAAxhB,KAAA85B,OAAAljB,EAAA4K,OAEA,kBAAA5K,GAAAq7B,SAAAjyC,KAAAkyC,QAAAt7B,EAAAq7B,aAGA7F,GAAArrC,KAAAf,OAbA,GAAA4pC,GAAAhzB,GAqBA,QAAAu7B,GAAAlZ,EAAAp0B,GACA,GAAA82B,GAAA,GAAA/6B,OAAA,kBAEAq4B,GAAAxB,KAAA,QAAAkE,GACAsO,EAAAplC,EAAA82B,GAQA,QAAAyW,GAAAnZ,EAAAoI,EAAAtH,EAAAl1B,GACA,GAAAwtC,IAAA,EACA1W,GAAA,CAcA,OAVA,QAAA5B,EACA4B,EAAA,GAAAh4B,WAAA,uCACAkd,EAAA6C,SAAAqW,IAAA,gBAAAA,IAAAj2B,SAAAi2B,GAAAsH,EAAAwJ,aACAlP,EAAA,GAAAh4B,WAAA,oCAEAg4B,IACA1C,EAAAxB,KAAA,QAAAkE,GACAsO,EAAAplC,EAAA82B,GACA0W,GAAA,GAEAA,EAgDA,QAAAC,GAAAjR,EAAAtH,EAAA5X,GAIA,MAHAkf,GAAAwJ,YAAAxJ,EAAA8P,iBAAA,GAAA,gBAAApX,KACAA,EAAAiU,EAAA9c,KAAA6I,EAAA5X,IAEA4X,EAMA,QAAAwY,GAAAtZ,EAAAoI,EAAAtH,EAAA5X,EAAAtd,GACAk1B,EAAAuY,EAAAjR,EAAAtH,EAAA5X,GAEAtB,EAAA6C,SAAAqW,KAAA5X,EAAA,SACA,IAAAna,GAAAq5B,EAAAwJ,WAAA,EAAA9Q,EAAA/4B,MAEAqgC,GAAArgC,QAAAgH,CAEA,IAAAw0B,GAAA6E,EAAArgC,OAAAqgC,EAAA2J,aAIA,IAFAxO,IAAA6E,EAAAgO,WAAA,GAEAhO,EAAA+P,SAAA/P,EAAAgQ,OAAA,CACA,GAAA7O,GAAAnB,EAAAqQ,mBACArQ,GAAAqQ,oBAAA,GAAAb,GAAA9W,EAAA5X,EAAAtd,GACA29B,EACAA,EAAAp6B,KAAAi5B,EAAAqQ,oBAEArQ,EAAAoQ,gBAAApQ,EAAAqQ,oBAEArQ,EAAAyQ,sBAAA,MAEAU,GAAAvZ,EAAAoI,GAAA,EAAAr5B,EAAA+xB,EAAA5X,EAAAtd,EAGA,OAAA23B,GAGA,QAAAgW,GAAAvZ,EAAAoI,EAAA4Q,EAAAjqC,EAAA+xB,EAAA5X,EAAAtd,GACAw8B,EAAAmQ,SAAAxpC,EACAq5B,EAAA8O,QAAAtrC,EACAw8B,EAAA+P,SAAA,EACA/P,EAAAxtB,MAAA,EACAo+B,EAAAhZ,EAAAiZ,QAAAnY,EAAAsH,EAAAkQ,SAAAtY,EAAAa,OAAAC,EAAA5X,EAAAkf,EAAAkQ,SACAlQ,EAAAxtB,MAAA,EAGA,QAAA4+B,GAAAxZ,EAAAoI,EAAAxtB,EAAA8nB,EAAA92B,KACAw8B,EAAAsQ,UACA99B,EAAAo2B,EAAAplC,EAAA82B,GAAA92B,EAAA82B,GAEA1C,EAAA+Q,eAAA6H,cAAA,EACA5Y,EAAAxB,KAAA,QAAAkE,GAGA,QAAA+W,GAAArR,GACAA,EAAA+P,SAAA,EACA/P,EAAA8O,QAAA,KACA9O,EAAArgC,QAAAqgC,EAAAmQ,SACAnQ,EAAAmQ,SAAA,EAGA,QAAAD,GAAAtY,EAAA0C,GACA,GAAA0F,GAAApI,EAAA+Q,eACAn2B,EAAAwtB,EAAAxtB,KACAhP,EAAAw8B,EAAA8O,OAIA,IAFAuC,EAAArR,GAEA1F,EAAA8W,EAAAxZ,EAAAoI,EAAAxtB,EAAA8nB,EAAA92B,OAAA,CAEA,GAAAosC,GAAA0B,EAAAtR,EAEA4P,IAAA5P,EAAAgQ,QAAAhQ,EAAAiQ,mBAAAjQ,EAAAoQ,iBACAmB,EAAA3Z,EAAAoI,GAGAxtB,EAEAg/B,EAAAC,EAAA7Z,EAAAoI,EAAA4P,EAAApsC,GAGAiuC,EAAA7Z,EAAAoI,EAAA4P,EAAApsC,IAKA,QAAAiuC,GAAA7Z,EAAAoI,EAAA4P,EAAApsC,GACAosC,GAAA8B,EAAA9Z,EAAAoI,GACAA,EAAAsQ,YACA9sC,IACAmuC,EAAA/Z,EAAAoI,GAMA,QAAA0R,GAAA9Z,EAAAoI,GACA,IAAAA,EAAArgC,QAAAqgC,EAAAgO,YACAhO,EAAAgO,WAAA,EACApW,EAAAxB,KAAA,UAKA,QAAAmb,GAAA3Z,EAAAoI,GACAA,EAAAiQ,kBAAA,CACA,IAAA2B,GAAA5R,EAAAoQ,eAEA,IAAAxY,EAAAiZ,SAAAe,GAAAA,EAAA7qC,KAAA,CAEA,GAAAtH,GAAAugC,EAAAyQ,qBACAtgC,EAAA,GAAAtN,OAAApD,GACAoyC,EAAA7R,EAAA0Q,kBACAmB,GAAAD,MAAAA,CAGA,KADA,GAAA76B,GAAA,EACA66B,GACAzhC,EAAA4G,GAAA66B,EACAA,EAAAA,EAAA7qC,KACAgQ,GAAA,CAGAo6B,GAAAvZ,EAAAoI,GAAA,EAAAA,EAAArgC,OAAAwQ,EAAA,GAAA0hC,EAAAC,QAIA9R,EAAAsQ,YACAtQ,EAAAqQ,oBAAA,KACAwB,EAAA9qC,MACAi5B,EAAA0Q,mBAAAmB,EAAA9qC,KACA8qC,EAAA9qC,KAAA,MAEAi5B,EAAA0Q,mBAAA,GAAAC,GAAA3Q,OAEA,CAEA,KAAA4R,GAAA,CACA,GAAAlZ,GAAAkZ,EAAAlZ,MACA5X,EAAA8wB,EAAA9wB,SACAtd,EAAAouC,EAAA3uC,SACA0D,EAAAq5B,EAAAwJ,WAAA,EAAA9Q,EAAA/4B,MAQA,IANAwxC,EAAAvZ,EAAAoI,GAAA,EAAAr5B,EAAA+xB,EAAA5X,EAAAtd,GACAouC,EAAAA,EAAA7qC,KAKAi5B,EAAA+P,QACA,MAIA,OAAA6B,IAAA5R,EAAAqQ,oBAAA,MAGArQ,EAAAyQ,qBAAA,EACAzQ,EAAAoQ,gBAAAwB,EACA5R,EAAAiQ,kBAAA,EAiCA,QAAAqB,GAAAtR,GACA,MAAAA,GAAA2P,QAAA,IAAA3P,EAAArgC,QAAA,OAAAqgC,EAAAoQ,kBAAApQ,EAAA4P,WAAA5P,EAAA+P,QAGA,QAAAgC,GAAAna,EAAAoI,GACAA,EAAAuQ,cACAvQ,EAAAuQ,aAAA,EACA3Y,EAAAxB,KAAA,cAIA,QAAAub,GAAA/Z,EAAAoI,GACA,GAAAgS,GAAAV,EAAAtR,EAUA,OATAgS,KACA,IAAAhS,EAAAsQ,WACAyB,EAAAna,EAAAoI,GACAA,EAAA4P,UAAA,EACAhY,EAAAxB,KAAA,WAEA2b,EAAAna,EAAAoI,IAGAgS,EAGA,QAAAC,GAAAra,EAAAoI,EAAAx8B,GACAw8B,EAAA2P,QAAA,EACAgC,EAAA/Z,EAAAoI,GACAx8B,IACAw8B,EAAA4P,SAAAhH,EAAAplC,GAAAo0B,EAAA1zB,KAAA,SAAAV,IAEAw8B,EAAAsH,OAAA,EACA1P,EAAA+D,UAAA,EAKA,QAAAgV,GAAA3Q,GACA,GAAA3N,GAAA1zB,IAEAA,MAAAoI,KAAA,KACApI,KAAAizC,MAAA,KAEAjzC,KAAAmzC,OAAA,SAAAtqC,GACA,GAAAoqC,GAAAvf,EAAAuf,KAEA,KADAvf,EAAAuf,MAAA,KACAA,GAAA,CACA,GAAApuC,GAAAouC,EAAA3uC,QACA+8B,GAAAsQ,YACA9sC,EAAAgE,GACAoqC,EAAAA,EAAA7qC,KAEAi5B,EAAA0Q,mBACA1Q,EAAA0Q,mBAAA3pC,KAAAsrB,EAEA2N,EAAA0Q,mBAAAre,GApgBAj0B,EAAAD,QAAAoqC,CAGA,IAAAK,GAAA/oC,EAAA,wBAIA2xC,GAAA3hC,EAAAqiC,UAAA,QAAA,SAAA/vB,QAAAtS,EAAAyjB,QAAA3xB,MAAA,EAAA,KAAA,EAAAyY,aAAAwuB,CAGAL,GAAAkH,cAAAA,CAGA,IAAA1G,GAAAlpC,EAAA,eACAkpC,GAAAC,SAAAnpC,EAAA,WAIA,IAMAkrC,GANAoH,GACAC,UAAAvyC,EAAA,oBAMA,WACA,IACAkrC,EAAAlrC,EAAA,UACA,MAAAiJ,IAAA,QACAiiC,IAAAA,EAAAlrC,EAAA,UAAA83B,iBAKA,IAAAnY,GAAA3f,EAAA,UAAA2f,OAEAmtB,EAAA9sC,EAAA,eAGAkpC,GAAAC,SAAAT,EAAAwC,EAWA,IAAAlS,EAgGA4W,GAAAtpC,UAAAksC,UAAA,WAGA,IAFA,GAAAC,GAAA3zC,KAAAyxC,gBACA5hB,KACA8jB,GACA9jB,EAAA/nB,KAAA6rC,GACAA,EAAAA,EAAAvrC,IAEA,OAAAynB,IAGA,WACA,IACA/pB,OAAA8tC,eAAA9C,EAAAtpC,UAAA,UACAwa,IAAAwxB,EAAAC,UAAA,WACA,MAAAzzC,MAAA0zC,aACA,gFAEA,MAAAvpC,OAGA,IAAA+vB,EAuBA0P,GAAApiC,UAAAknC,KAAA,WACA1uC,KAAAy3B,KAAA,QAAA,GAAA72B,OAAA,+BAkCAgpC,EAAApiC,UAAAga,MAAA,SAAAuY,EAAA5X,EAAAtd,GACA,GAAAw8B,GAAArhC,KAAAgqC,eACAxN,GAAA,CAgBA,OAdA,kBAAAra,KACAtd,EAAAsd,EACAA,EAAA,MAGAtB,EAAA6C,SAAAqW,GAAA5X,EAAA,SAAAA,IAAAA,EAAAkf,EAAAuK,iBAEA,kBAAA/mC,KAAAA,EAAA+rC,GAEAvP,EAAAsH,MAAAwJ,EAAAnyC,KAAA6E,GAAAutC,EAAApyC,KAAAqhC,EAAAtH,EAAAl1B,KACAw8B,EAAAsQ,YACAnV,EAAA+V,EAAAvyC,KAAAqhC,EAAAtH,EAAA5X,EAAAtd,IAGA23B,GAGAoN,EAAApiC,UAAAqsC,KAAA,WACA,GAAAxS,GAAArhC,KAAAgqC,cAEA3I,GAAAgQ,UAGAzH,EAAApiC,UAAAssC,OAAA,WACA,GAAAzS,GAAArhC,KAAAgqC,cAEA3I,GAAAgQ,SACAhQ,EAAAgQ,SAEAhQ,EAAA+P,SAAA/P,EAAAgQ,QAAAhQ,EAAA4P,UAAA5P,EAAAiQ,mBAAAjQ,EAAAoQ,iBAAAmB,EAAA5yC,KAAAqhC,KAIAuI,EAAApiC,UAAAusC,mBAAA,SAAA5xB,GAGA,GADA,gBAAAA,KAAAA,EAAAA,EAAA8K,kBACA,MAAA,OAAA,QAAA,QAAA,SAAA,SAAA,OAAA,QAAA,UAAA,WAAA,OAAAzJ,SAAArB,EAAA,IAAA8K,gBAAA,GAAA,KAAA,IAAAtpB,WAAA,qBAAAwe,EAEA,OADAniB,MAAAgqC,eAAA4B,gBAAAzpB,EACAniB,MAqKA4pC,EAAApiC,UAAAsyB,OAAA,SAAAC,EAAA5X,EAAAtd,GACAA,EAAA,GAAAjE,OAAA,qBAGAgpC,EAAApiC,UAAA0qC,QAAA,KAEAtI,EAAApiC,UAAAqG,IAAA,SAAAksB,EAAA5X,EAAAtd,GACA,GAAAw8B,GAAArhC,KAAAgqC,cAEA,mBAAAjQ,IACAl1B,EAAAk1B,EACAA,EAAA,KACA5X,EAAA,MACA,kBAAAA,KACAtd,EAAAsd,EACAA,EAAA,MAGA,OAAA4X,GAAAj2B,SAAAi2B,GAAA/5B,KAAAwhB,MAAAuY,EAAA5X,GAGAkf,EAAAgQ,SACAhQ,EAAAgQ,OAAA,EACArxC,KAAA8zC,UAIAzS,EAAA2P,QAAA3P,EAAA4P,UAAAqC,EAAAtzC,KAAAqhC,EAAAx8B,kNChdA,YASA,SAAAqmC,KACAlrC,KAAAgQ,KAAA,KACAhQ,KAAAiQ,KAAA,KACAjQ,KAAAgB,OAAA,EAVA,GAEAgtC,IAFA9sC,EAAA,UAAA2f,OAEA3f,EAAA,gBAGAzB,GAAAD,QAAA0rC,EAQAA,EAAA1jC,UAAAM,KAAA,SAAAsC,GACA,GAAA6oC,IAAAxiC,KAAArG,EAAAhC,KAAA,KACApI,MAAAgB,OAAA,EAAAhB,KAAAiQ,KAAA7H,KAAA6qC,EAAAjzC,KAAAgQ,KAAAijC,EACAjzC,KAAAiQ,KAAAgjC,IACAjzC,KAAAgB,QAGAkqC,EAAA1jC,UAAAyJ,QAAA,SAAA7G,GACA,GAAA6oC,IAAAxiC,KAAArG,EAAAhC,KAAApI,KAAAgQ,KACA,KAAAhQ,KAAAgB,SAAAhB,KAAAiQ,KAAAgjC,GACAjzC,KAAAgQ,KAAAijC,IACAjzC,KAAAgB,QAGAkqC,EAAA1jC,UAAAqE,MAAA,WACA,GAAA,IAAA7L,KAAAgB,OAAA,CACA,GAAAw7B,GAAAx8B,KAAAgQ,KAAAS,IAGA,OAFA,KAAAzQ,KAAAgB,OAAAhB,KAAAgQ,KAAAhQ,KAAAiQ,KAAA,KAAAjQ,KAAAgQ,KAAAhQ,KAAAgQ,KAAA5H,OACApI,KAAAgB,OACAw7B,IAGA0O,EAAA1jC,UAAAkmC,MAAA,WACA1tC,KAAAgQ,KAAAhQ,KAAAiQ,KAAA,KACAjQ,KAAAgB,OAAA,GAGAkqC,EAAA1jC,UAAA4F,KAAA,SAAA9M,GACA,GAAA,IAAAN,KAAAgB,OAAA,MAAA,EAGA,KAFA,GAAAkvB,GAAAlwB,KAAAgQ,KACAwsB,EAAA,GAAAtM,EAAAzf,KACAyf,EAAAA,EAAA9nB,MACAo0B,GAAAl8B,EAAA4vB,EAAAzf,IACA,OAAA+rB,IAGA0O,EAAA1jC,UAAA1C,OAAA,SAAA1E,GACA,GAAA,IAAAJ,KAAAgB,OAAA,MAAAgtC,GAAA3T,MAAA,EACA,IAAA,IAAAr6B,KAAAgB,OAAA,MAAAhB,MAAAgQ,KAAAS,IAIA,KAHA,GAAA+rB,GAAAwR,EAAAvT,YAAAr6B,IAAA,GACA8vB,EAAAlwB,KAAAgQ,KACArP,EAAA,EACAuvB,GACAA,EAAAzf,KAAA6Q,KAAAkb,EAAA77B,GACAA,GAAAuvB,EAAAzf,KAAAzP,OACAkvB,EAAAA,EAAA9nB,IAEA,OAAAo0B,uDC9DA,GAAAjuB,MAAAA,QAEA9O,GAAAD,QAAA0E,MAAA0C,SAAA,SAAAoD,GACA,MAAA,kBAAAuE,EAAAxN,KAAAiJ,6BCHAvK,EAAAD,QAAA0B,EAAA,uGCAA,GAAAkrC,GAAA,WACA,IACA,MAAAlrC,GAAA,UACA,MAAAiJ,OAEA3K,GAAAC,EAAAD,QAAA0B,EAAA,6BACA1B,EAAA4sC,OAAAA,GAAA5sC,EACAA,EAAAmqC,SAAAnqC,EACAA,EAAAoqC,SAAA1oC,EAAA,6BACA1B,EAAA06B,OAAAh5B,EAAA,2BACA1B,EAAAgrC,UAAAtpC,EAAA,8BACA1B,EAAA+qC,YAAArpC,EAAA,iCAEAgQ,EAAAqiC,SAAA,YAAAriC,EAAAqjB,IAAAyf,iBAAA5H,IACA3sC,EAAAD,QAAA4sC,uOCdA3sC,EAAAD,QAAA0B,EAAA,sFCAAzB,EAAAD,QAAA0B,EAAA,oFCyCA,QAAAkrC,KACA6H,EAAAlzC,KAAAf,MArBAP,EAAAD,QAAA4sC,CAEA,IAAA6H,GAAA/yC,EAAA,UAAA83B,aACAqR,EAAAnpC,EAAA,WAEAmpC,GAAA+B,EAAA6H,GACA7H,EAAAzC,SAAAzoC,EAAA,+BACAkrC,EAAAxC,SAAA1oC,EAAA,+BACAkrC,EAAAlS,OAAAh5B,EAAA,6BACAkrC,EAAA5B,UAAAtpC,EAAA,gCACAkrC,EAAA7B,YAAArpC,EAAA,kCAGAkrC,EAAAA,OAAAA,EAWAA,EAAA5kC,UAAAknC,KAAA,SAAAC,EAAA/3B,GAGA,QAAAu4B,GAAApV,GACA4U,EAAA3R,WACA,IAAA2R,EAAAntB,MAAAuY,IAAAxsB,EAAAyE,OACAzE,EAAAyE,QAOA,QAAAi9B,KACA1hC,EAAAs8B,UAAAt8B,EAAA0E,QACA1E,EAAA0E,SAcA,QAAA83B,KACAmK,IACAA,GAAA,EAEAvF,EAAA9gC,OAIA,QAAAkhC,KACAmF,IACAA,GAAA,EAEA,kBAAAvF,GAAAwF,SAAAxF,EAAAwF,WAIA,QAAAjF,GAAAvT,GAEA,GADAmT,IACA,IAAAmF,EAAAxX,cAAAz8B,KAAA,SACA,KAAA27B,GAQA,QAAAmT,KACAvhC,EAAA6uB,eAAA,OAAA+S,GACAR,EAAAvS,eAAA,QAAA6S,GAEA1hC,EAAA6uB,eAAA,MAAA2N,GACAx8B,EAAA6uB,eAAA,QAAA2S,GAEAxhC,EAAA6uB,eAAA,QAAA8S,GACAP,EAAAvS,eAAA,QAAA8S,GAEA3hC,EAAA6uB,eAAA,MAAA0S,GACAvhC,EAAA6uB,eAAA,QAAA0S,GAEAH,EAAAvS,eAAA,QAAA0S,GApEA,GAAAvhC,GAAAvN,IAUAuN,GAAA4uB,GAAA,OAAAgT,GAQAR,EAAAxS,GAAA,QAAA8S,GAIAN,EAAAyF,UAAAx9B,GAAAA,EAAA/I,OAAA,IACAN,EAAA4uB,GAAA,MAAA4N,GACAx8B,EAAA4uB,GAAA,QAAA4S,GAGA,IAAAmF,IAAA,CAoDA,OA5BA3mC,GAAA4uB,GAAA,QAAA+S,GACAP,EAAAxS,GAAA,QAAA+S,GAmBA3hC,EAAA4uB,GAAA,MAAA2S,GACAvhC,EAAA4uB,GAAA,QAAA2S,GAEAH,EAAAxS,GAAA,QAAA2S,GAEAH,EAAAlX,KAAA,OAAAlqB,GAGAohC,wNC7FA,QAAA0F,GAAAlyB,GACA,GAAAA,IAAAmyB,EAAAnyB,GACA,KAAA,IAAAvhB,OAAA,qBAAAuhB,GA8KA,QAAAoyB,GAAA/iC,GACA,MAAAA,GAAAjD,SAAAvO,KAAAmiB,UAGA,QAAAqyB,GAAAhjC,GACAxR,KAAAy0C,aAAAjjC,EAAAxQ,OAAA,EACAhB,KAAA00C,WAAA10C,KAAAy0C,aAAA,EAAA,EAGA,QAAAE,GAAAnjC,GACAxR,KAAAy0C,aAAAjjC,EAAAxQ,OAAA,EACAhB,KAAA00C,WAAA10C,KAAAy0C,aAAA,EAAA,EAtMA,GAAA5zB,GAAA3f,EAAA,UAAA2f,OAEAyzB,EAAAzzB,EAAAiG,YACA,SAAA3E,GACA,OAAAA,GAAAA,EAAA8K,eACA,IAAA,MAAA,IAAA,OAAA,IAAA,QAAA,IAAA,QAAA,IAAA,SAAA,IAAA,SAAA,IAAA,OAAA,IAAA,QAAA,IAAA,UAAA,IAAA,WAAA,IAAA,MAAA,OAAA,CACA,SAAA,OAAA,IAmBAgf,EAAAzsC,EAAAysC,cAAA,SAAA9pB,GAGA,OAFAniB,KAAAmiB,UAAAA,GAAA,QAAA8K,cAAAxqB,QAAA,OAAA,IACA4xC,EAAAlyB,GACAniB,KAAAmiB,UACA,IAAA,OAEAniB,KAAA40C,cAAA,CACA,MACA,KAAA,OACA,IAAA,UAEA50C,KAAA40C,cAAA,EACA50C,KAAA60C,qBAAAL,CACA,MACA,KAAA,SAEAx0C,KAAA40C,cAAA,EACA50C,KAAA60C,qBAAAF,CACA,MACA,SAEA,YADA30C,KAAAwhB,MAAA+yB,GAMAv0C,KAAA80C,WAAA,GAAAj0B,GAAA,GAEA7gB,KAAAy0C,aAAA,EAEAz0C,KAAA00C,WAAA,EAaAzI,GAAAzkC,UAAAga,MAAA,SAAAhQ,GAGA,IAFA,GAAAujC,GAAA,GAEA/0C,KAAA00C,YAAA,CAEA,GAAAM,GAAAxjC,EAAAxQ,QAAAhB,KAAA00C,WAAA10C,KAAAy0C,aACAz0C,KAAA00C,WAAA10C,KAAAy0C,aACAjjC,EAAAxQ,MAMA,IAHAwQ,EAAA8P,KAAAthB,KAAA80C,WAAA90C,KAAAy0C,aAAA,EAAAO,GACAh1C,KAAAy0C,cAAAO,EAEAh1C,KAAAy0C,aAAAz0C,KAAA00C,WAEA,MAAA,EAIAljC,GAAAA,EAAAxO,MAAAgyC,EAAAxjC,EAAAxQ,QAGA+zC,EAAA/0C,KAAA80C,WAAA9xC,MAAA,EAAAhD,KAAA00C,YAAAnmC,SAAAvO,KAAAmiB,SAGA,IAAAmK,GAAAyoB,EAAAtwB,WAAAswB,EAAA/zC,OAAA,EACA,MAAAsrB,GAAA,OAAAA,GAAA,OAAA,CAQA,GAHAtsB,KAAAy0C,aAAAz0C,KAAA00C,WAAA,EAGA,IAAAljC,EAAAxQ,OACA,MAAA+zC,EAEA,OAVA/0C,KAAA00C,YAAA10C,KAAA40C,cACAG,EAAA,GAaA/0C,KAAA60C,qBAAArjC,EAEA,IAAA3D,GAAA2D,EAAAxQ,MACAhB,MAAA00C,aAEAljC,EAAA8P,KAAAthB,KAAA80C,WAAA,EAAAtjC,EAAAxQ,OAAAhB,KAAAy0C,aAAA5mC,GACAA,GAAA7N,KAAAy0C,cAGAM,GAAAvjC,EAAAjD,SAAAvO,KAAAmiB,SAAA,EAAAtU,EAEA,IAAAA,GAAAknC,EAAA/zC,OAAA,EACAsrB,EAAAyoB,EAAAtwB,WAAA5W,EAEA,IAAAye,GAAA,OAAAA,GAAA,MAAA,CACA,GAAA2N,GAAAj6B,KAAA40C,aAKA,OAJA50C,MAAA00C,YAAAza,EACAj6B,KAAAy0C,cAAAxa,EACAj6B,KAAA80C,WAAAxzB,KAAAthB,KAAA80C,WAAA7a,EAAA,EAAAA,GACAzoB,EAAA8P,KAAAthB,KAAA80C,WAAA,EAAA,EAAA7a,GACA8a,EAAAE,UAAA,EAAApnC,GAIA,MAAAknC,IAOA9I,EAAAzkC,UAAAqtC,qBAAA,SAAArjC,GAMA,IAJA,GAAA7Q,GAAA6Q,EAAAxQ,QAAA,EAAA,EAAAwQ,EAAAxQ,OAIAL,EAAA,EAAAA,IAAA,CACA,GAAA6vB,GAAAhf,EAAAA,EAAAxQ,OAAAL,EAKA,IAAA,GAAAA,GAAA6vB,GAAA,GAAA,EAAA,CACAxwB,KAAA00C,WAAA,CACA,OAIA,GAAA/zC,GAAA,GAAA6vB,GAAA,GAAA,GAAA,CACAxwB,KAAA00C,WAAA,CACA,OAIA,GAAA/zC,GAAA,GAAA6vB,GAAA,GAAA,GAAA,CACAxwB,KAAA00C,WAAA,CACA,QAGA10C,KAAAy0C,aAAA9zC,GAGAsrC,EAAAzkC,UAAAqG,IAAA,SAAA2D,GACA,GAAAo+B,GAAA,EAIA,IAHAp+B,GAAAA,EAAAxQ,SACA4uC,EAAA5vC,KAAAwhB,MAAAhQ,IAEAxR,KAAAy0C,aAAA,CACA,GAAAS,GAAAl1C,KAAAy0C,aACAjtB,EAAAxnB,KAAA80C,WACA/tB,EAAA/mB,KAAAmiB,QACAytB,IAAApoB,EAAAxkB,MAAA,EAAAkyC,GAAA3mC,SAAAwY,GAGA,MAAA6oB,kDCpLA,QAAA6D,GAAApvC,EAAAg+B,GAMA,QAAA8S,KACA,IAAAlZ,EAAA,CACA,GAAA5G,EAAA,oBACA,KAAA,IAAAz0B,OAAAyhC,EACAhN,GAAA,oBACAliB,QAAA+oB,MAAAmG,GAEAlvB,QAAAiiC,KAAA/S,GAEApG,GAAA,EAEA,MAAA53B,GAAAhD,MAAArB,KAAA+D,WAhBA,GAAAsxB,EAAA,iBACA,MAAAhxB,EAGA,IAAA43B,IAAA,CAeA,OAAAkZ,GAWA,QAAA9f,GAAA3lB,GAEA,IACA,IAAA5P,EAAAu1C,aAAA,OAAA,EACA,MAAAlrC,GACA,OAAA,EAEA,GAAAmC,GAAAxM,EAAAu1C,aAAA3lC,EACA,OAAA,OAAApD,GACA,SAAAtF,OAAAsF,GAAA2gB,cA5DAxtB,EAAAD,QAAAi0C,2VCLO6B,EAAWp0C,EAAW,uBAC7Bq0C,EAAAr0C,EAAkC,qBAC3Bs0C,EAASt0C,EAAW,qBAGpBu0C,EAAYv0C,EAAW,2BAClB8uB,EAAI9uB,EAAM,QAUtBw0C,EAAA,SAAA7tB,GACE,QAAA6tB,GAAYC,EAAiB3lB,EAAc4lB,EAA0BC,EAAaplC,GAChFoX,EAAA9mB,KAAAf,KAAM21C,EAAI3lB,EAAM4lB,EAAMC,EAAMplC,GAahC,MAfyBqX,GAAA4tB,EAAA7tB,GAKhB6tB,EAAAluC,UAAAsuC,SAAP,WACM91C,KAAK+1C,YACP/1C,KAAKg2C,IAAIC,UAAUj2C,MACnBA,KAAKk2C,eAIFR,EAAAluC,UAAA2uC,UAAP,WACEn2C,KAAK81C,YAETJ,GAfyBD,EAAaW,aA2BtCC,EAAA,SAAAxuB,GAUE,QAAAwuB,GAAYxiC,EAA8BzS,GAIxC,GAHAymB,EAAA9mB,KAAAf,MAPMA,KAAAszB,UACAtzB,KAAAs2C,eAAyB,EAGzBt2C,KAAAu2C,gBAA0B,EAC1Bv2C,KAAAw2C,wBAGNx2C,KAAKy2C,MAAQ5iC,EACb7T,KAAK02C,OAASt1C,GACTyS,EAAK8iC,gBACR,KAAM,IAAI/1C,OAAM,gCAElB,IAAIQ,EAAMu1C,gBACR,KAAM,IAAI/1C,OAAM,kCAuMtB,MAzNyCknB,GAAAuuB,EAAAxuB,GAsBhCwuB,EAAA7uC,UAAAovC,QAAP,WACC,MAAO,eAGMP,EAAA51B,YAAd,WACE,OAAO,GAGF41B,EAAA7uC,UAAAyuC,UAAP,SAAiBpc,GACf75B,KAAKy2C,MAAMI,cAAchd,EAAGid,UAAWjd,EAAG6Z,YAAa,KAAM8B,EAAUuB,SAASC,YAAY,KAAMnd,EAAGod,WAAWxd,MAChHz5B,KAAKk3C,WACHC,UAAW,YACXpzC,WAAY81B,EAAGid,UAAWjd,EAAG6Z,YAAa,KAAM7Z,EAAGud,UAAWvd,EAAGod,WAAWxd,SAOzE4c,EAAA7uC,UAAA6vC,WAAP,SAAkBC,GAAlB,GAAA5jB,GAAA1zB,KACQu3C,EAAYv3C,KAAKw2C,qBAEjB3oC,EAAM,SAAC3N,GACXwzB,EAAK6iB,gBAAkBr2C,EACvBwzB,EAAK8iB,wBACLe,EAAUj5B,QAAQ,SAACzZ,GAAO,MAAAA,GAAG3E,KAG/B,IAAKF,KAAKu2C,eAwDRe,QAtDA,IAA+B,IAA3BC,EAAUzvC,KAAKwvC,GAAe,CAChC,GAAME,GAAgB,SAACtnB,EAAWuJ,EAAc50B,GACpC,MAANqrB,GACFwD,EAAK+iB,MAAMgB,UAAUvnB,EAAGuJ,GAE1B/F,EAAKgjB,OAAOgB,QAAQxnB,EAAG,SAACrnB,EAAK8uC,GAK3B,QAAAC,GAAsB/uC,GAChBA,EACFhE,EAAGgE,GACMlI,EAAIg3C,EAAM32C,QACnB62C,EAAS7nB,EAAK5iB,KAAK8iB,EAAGynB,EAAMh3C,IAAKi3C,GACjCj3C,KAEAkE,IAXJ,GAAIlE,GAAI,CAcJkI,GACFhE,EAAGgE,GAEH+uC,OAGHE,EAAW,SAAC5nB,EAAWuJ,EAAc50B,GACtC6uB,EAAKgjB,OAAOqB,SAAS7nB,EAAG,KAAMslB,EAAUuB,SAASC,YAAY,KAAM,SAACnuC,EAAK4H,GACvE,GAAI5H,EACFhE,EAAGgE,OAEH,KACE6qB,EAAK+iB,MAAMI,cAAc3mB,EAAGzf,EAAM,KAAM+kC,EAAUuB,SAASC,YAAY,KAAMvd,GAC7E,MAAOv5B,GACP2I,EAAM3I,UAEN2E,EAAGgE,OAIRgvC,EAAW,SAAC3nB,EAAWrrB,GACxB6uB,EAAKgjB,OAAOb,KAAK3lB,GAAG,EAAO,SAACrnB,EAAKmvC,GAC3BnvC,EACFhE,EAAGgE,GACMmvC,EAAMC,cACfT,EAActnB,EAAG8nB,EAAMve,KAAM50B,GAE7BizC,EAAS5nB,EAAG8nB,EAAMve,KAAM50B,KAI9B2yC,GAAc,IAAK,EAAG3pC,KAOpBwoC,EAAA7uC,UAAA0wC,iBAAR,WACE,IAAKl4C,KAAKu2C,eACR,KAAM,IAAIhB,GAAA4C,SAAS5C,EAAA6C,UAAUC,MAAO,qHAIjChC,EAAA7uC,UAAA8wC,WAAP,WAA+B,OAAO,GAC/BjC,EAAA7uC,UAAAmvC,cAAP,WAAkC,OAAO,GAClCN,EAAA7uC,UAAA+wC,cAAP,WAAkC,OAAO,GAClClC,EAAA7uC,UAAAgxC,cAAP,WAAkC,MAAOx4C,MAAKy2C,MAAM+B,iBAAmBx4C,KAAK02C,OAAO8B,iBAE3EnC,EAAA7uC,UAAA0vC,UAAR,SAAkBuB,GAAlB,GAAA/kB,GAAA1zB,IAEE,IADAA,KAAKszB,OAAOxrB,KAAK2wC,IACZz4C,KAAKs2C,cAAe,CACvBt2C,KAAKs2C,eAAgB,CACrB,IAAIoC,GAAW,SAAC7vC,GAId,GAHIA,GACFsK,QAAQ5B,MAAM,sEAAsE1I,EAAG,OAErF6qB,EAAKJ,OAAOtyB,OAAS,EAAG,CAC1B,GAAIy3C,GAAK/kB,EAAKJ,OAAOznB,QACnBrK,EAAOi3C,EAAG10C,SACZvC,GAAKsG,KAAK4wC,GACShlB,EAAKgjB,OAAQ+B,EAAGtB,WAAY91C,MAAMqyB,EAAKgjB,OAAQl1C,OAElEkyB,GAAK4iB,eAAgB,EAGzBoC,OAIGrC,EAAA7uC,UAAAmxC,WAAP,SAAkBC,EAAiBC,GACjC74C,KAAKk4C,mBACLl4C,KAAKy2C,MAAMkC,WAAWC,EAASC,GAC/B74C,KAAKk3C,WACHC,UAAW,SACXpzC,WAAY60C,EAASC,MAGlBxC,EAAA7uC,UAAAsxC,SAAP,SAAgB5oB,EAAW6oB,GAEzB,MADA/4C,MAAKk4C,mBACEl4C,KAAKy2C,MAAMqC,SAAS5oB,EAAG6oB,IAEzB1C,EAAA7uC,UAAAwxC,SAAP,SAAgB9oB,EAAW0lB,EAA0Bnc,GACnDz5B,KAAKk4C,kBAEL,IAAIre,GAAK75B,KAAKy2C,MAAMuC,SAAS9oB,EAAG0lB,EAAMnc,EAEtC,OADAI,GAAGsc,YACI,GAAIT,GAAW11C,KAAMkwB,EAAG0lB,EAAM51C,KAAKy2C,MAAMqC,SAAS5oB,GAAG,GAAQlwB,KAAKy2C,MAAMwC,aAAa/oB,EAAG,KAAMslB,EAAUuB,SAASC,YAAY,QAE/HX,EAAA7uC,UAAA0xC,WAAP,SAAkBhpB,GAChBlwB,KAAKk4C,mBACLl4C,KAAKy2C,MAAMyC,WAAWhpB,GACtBlwB,KAAKk3C,WACHC,UAAW,SACXpzC,WAAYmsB,MAGTmmB,EAAA7uC,UAAA2xC,UAAP,SAAiBjpB,GACflwB,KAAKk4C,mBACLl4C,KAAKy2C,MAAM0C,UAAUjpB,GACrBlwB,KAAKk3C,WACHC,UAAW,QACXpzC,WAAYmsB,MAGTmmB,EAAA7uC,UAAAiwC,UAAP,SAAiBvnB,EAAWuJ,GAC1Bz5B,KAAKk4C,mBACLl4C,KAAKy2C,MAAMgB,UAAUvnB,EAAGuJ,GACxBz5B,KAAKk3C,WACHC,UAAW,QACXpzC,WAAYmsB,EAAGuJ,MAGZ4c,EAAA7uC,UAAA4xC,YAAP,SAAmBlpB,GAEjB,MADAlwB,MAAKk4C,mBACEl4C,KAAKy2C,MAAM2C,YAAYlpB,IAEzBmmB,EAAA7uC,UAAA6xC,WAAP,SAAkBnpB,GAEhB,MADAlwB,MAAKk4C,mBACEl4C,KAAKy2C,MAAM4C,WAAWnpB,IAExBmmB,EAAA7uC,UAAA8xC,UAAP,SAAiBppB,EAAWqpB,EAAmB9f,GAC7Cz5B,KAAKk4C,mBACLl4C,KAAKy2C,MAAM6C,UAAUppB,EAAGqpB,EAAU9f,GAClCz5B,KAAKk3C,WACHC,UAAW,QACXpzC,WAAYmsB,EAAGqpB,EAAU9f,MAGtB4c,EAAA7uC,UAAAgyC,UAAP,SAAiBtpB,EAAWupB,EAAmBzhB,EAAaH,GAC1D73B,KAAKk4C,mBACLl4C,KAAKy2C,MAAM+C,UAAUtpB,EAAGupB,EAAUzhB,EAAKH,GACvC73B,KAAKk3C,WACHC,UAAW,QACXpzC,WAAYmsB,EAAGupB,EAAUzhB,EAAKH,MAG3Bwe,EAAA7uC,UAAAkyC,WAAP,SAAkBxpB,EAAWypB,EAAaC,GACxC55C,KAAKk4C,mBACLl4C,KAAKy2C,MAAMiD,WAAWxpB,EAAGypB,EAAOC,GAChC55C,KAAKk3C,WACHC,UAAW,SACXpzC,WAAYmsB,EAAGypB,EAAOC,MAG5BvD,GAzNyCf,EAAYuE,sBAArDr6C,GAAAmtB,YAAA,2KC/BA,SAAAmtB,KAC0B,OAApBC,IAGJA,KAEAA,EAAgBC,QAAQ7B,SAAS8B,eAAiB1E,EAAA6C,UAAU8B,IAI5DH,EAAgBC,QAAQ7B,SAASgC,eAAiB5E,EAAA6C,UAAUgC,OAE5DL,EAAgBC,QAAQ7B,SAASkC,eAAiB9E,EAAA6C,UAAUC,MAG5D0B,EAAgBC,QAAQ7B,SAASmC,aAAe/E,EAAA6C,UAAUC,MAE1D0B,EAAgBC,QAAQ7B,SAASoC,WAAahF,EAAA6C,UAAUoC,OAExDT,EAAgBC,QAAQ7B,SAASsC,gBAAkBlF,EAAA6C,UAAUgC,OAE7DL,EAAgBC,QAAQ7B,SAASuC,gBAAkBnF,EAAA6C,UAAUgC,OAE7DL,EAAgBC,QAAQ7B,SAASwC,UAAYpF,EAAA6C,UAAUgC,OAEvDL,EAAgBC,QAAQ7B,SAASyC,cAAgBrF,EAAA6C,UAAUyC,MAE3Dd,EAAgBC,QAAQ7B,SAAS2C,cAAgBvF,EAAA6C,UAAUyC,MAE3Dd,EAAgBC,QAAQ7B,SAAS4C,YAAcxF,EAAA6C,UAAU4C,QAW3D,QAAAC,GAAoBC,GAClB,MAAOA,IAASA,EAAMrF,KAAKsF,OAO7B,QAAAC,GAAmBF,GACjB,MAAOA,IAASA,EAAMrF,KAAKwF,SAG7B,QAAAj6B,GAAuB6B,GAErB,MAAc,QAAPA,GAAsBnf,SAAPmf,GAAoC,gBAAT,IAAkD,gBAAtBA,GAAgB,4MAlExFwyB,EAAYv0C,EAAW,2BACvBo0C,EAAWp0C,EAAW,uBAE7Bo6C,EAAAp6C,EAAyC,yBACzCq0C,EAAAr0C,EAAkC,qBAE3BE,EAAKF,EAAW,SAChB8uB,EAAI9uB,EAAW,QACtBmf,EAAAnf,EAAqD,gBAEjD64C,EAA2D,KA8D/DwB,EAAA,WAIE,QAAAA,GAAYC,GAHJx7C,KAAAy7C,UAINz7C,KAAK07C,QAAUF,EAiNnB,MA9MUD,GAAA/zC,UAAAm0C,cAAR,SAAsBzrB,GACpB,MAAOlwB,MAAKy7C,OAAOvrB,EAAEjD,gBAGfsuB,EAAA/zC,UAAAo0C,cAAR,SAAsB1rB,EAAWgrB,GAC/Bl7C,KAAKy7C,OAAOvrB,EAAEjD,eAAiBiuB,GAGzBK,EAAA/zC,UAAAq0C,iBAAR,SAAyB3rB,SAChBlwB,MAAKy7C,OAAOvrB,EAAEjD,gBAGfsuB,EAAA/zC,UAAAs0C,iBAAR,SAAyB5rB,GACvB,GAAI3Y,GAAOvX,KAAK27C,cAAczrB,EAC9B,OAAIkrB,GAAU7jC,GACLA,EAEA,MAIHgkC,EAAA/zC,UAAAu0C,kBAAR,SAA0B7rB,GACxB,GAAI3Y,GAAOvX,KAAK27C,cAAczrB,EAC9B,OAAI+qB,GAAW1jC,GACNA,EAEA,MAIHgkC,EAAA/zC,UAAAw0C,oBAAR,SAA4B9rB,EAAW2lB,EAAyBoG,GAAA,SAAAA,IAAAA,EAAA,KAC9D,IAAIC,GAAal8C,KAAK27C,cAAczrB,EAIX,QAArB2lB,EAAKsG,aAAwCr4C,SAAfo4C,GAA4BA,EAAWrG,KAAKsG,cAAgBtG,EAAKsG,aACjGn8C,KAAK47C,cAAc1rB,GACjB2lB,KAAMA,EACNoG,SAAUA;IAKRV,EAAA/zC,UAAA40C,qBAAR,SAA6BlsB,EAAW2lB,EAAyBoG,GAAA,SAAAA,IAAAA,EAAA,KAC/D,IAAIC,GAAal8C,KAAK27C,cAAczrB,EAGZ,QAApB2lB,EAAKwG,YAAuCv4C,SAAfo4C,GAA4BA,EAAWrG,KAAKwG,aAAexG,EAAKwG,YAC/Fr8C,KAAK47C,cAAc1rB,GACjB2lB,KAAMA,EACNoG,SAAUA,KAKRV,EAAA/zC,UAAA80C,iBAAR,SAAyBpsB,EAAW2lB,EAAyBoG,GAAA,SAAAA,IAAAA,EAAA,MACvDpG,EAAKsF,QAAU/5B,EAAc66B,GAC/Bj8C,KAAKo8C,qBAAqBlsB,EAAG2lB,EAAMoG,GAC1BpG,EAAKwF,UAAYn3C,MAAM0C,QAAQq1C,IACxCj8C,KAAKg8C,oBAAoB9rB,EAAG2lB,EAAMoG,IAI/BV,EAAA/zC,UAAAkwC,QAAP,SAAexnB,EAAWrrB,GAA1B,GAAA6uB,GAAA1zB,KACMu8C,EAAYv8C,KAAK87C,iBAAiB5rB,EAEtClwB,MAAKw8C,MAAM,SAACC,GACQ,OAAdF,GAAsBA,EAAUN,SAClCvoB,EAAKgoB,QAAQhE,QAAQxnB,GACnBisB,YAAaI,EAAU1G,KAAKsG,aAC3BM,GAEH/oB,EAAKgoB,QAAQhE,QAAQxnB,EAAGusB,IAEzB,SAAC5zC,EAAuB6zC,EAAqB7G,EAAyB8G,GACnE9zC,EACEA,EAAI+zC,SAAW5C,QAAQ7B,SAAS0E,YAA4B,OAAdN,EAChD13C,EAAG,KAAM03C,EAAUN,SAASj5C,MAAM,IAElC6B,EAAGgE,IAGL6qB,EAAKsoB,oBAAoB9rB,EAAG2lB,EAAM6G,EAAU15C,MAAM,IAClD25C,EAAcr+B,QAAQ,SAAC20B,GACrBvf,EAAK4oB,iBAAiBtsB,EAAK5iB,KAAK8iB,EAAG+iB,EAAMvjC,MAAOujC,KAElDpuC,EAAG,KAAM63C,OAKRnB,EAAA/zC,UAAAs1C,OAAP,SAAc5sB,EAAWrrB,GAAzB,GAAA6uB,GAAA1zB,IACEA,MAAKw8C,MAAM,SAACC,GACV/oB,EAAKgoB,QAAQoB,OAAO5sB,EAAGusB,IACtB,SAAC5zC,EAAuBgtC,GACpBhtC,GACH6qB,EAAK4oB,iBAAiBpsB,EAAG2lB,GAE3BhxC,EAAGgE,MAIA0yC,EAAA/zC,UAAAu1C,KAAP,SAAY1P,EAAasB,EAAc9pC,GAAvC,GAAA6uB,GAAA1zB,IACEA,MAAKw8C,MAAM,SAACC,GACV/oB,EAAKgoB,QAAQqB,KAAK1P,EAAKsB,EAAM8N,IAC5B,SAAC5zC,EAAuBgtC,GACpBhtC,IACH6qB,EAAKmoB,iBAAiBxO,GACtB3Z,EAAK4oB,iBAAiB3N,EAAMkH,IAE9BhxC,EAAGgE,MAIA0yC,EAAA/zC,UAAAquC,KAAP,SAAY3lB,EAAWrrB,GAAvB,GAAA6uB,GAAA1zB,IACEA,MAAKw8C,MAAM,SAACC,GACV/oB,EAAKgoB,QAAQ7F,KAAK3lB,EAAGusB,IACpB,SAAC5zC,EAAuBgtC,GACpBhtC,GACH6qB,EAAK4oB,iBAAiBpsB,EAAG2lB,GAE3BhxC,EAAGgE,EAAKgtC,MAIL0F,EAAA/zC,UAAAuwC,SAAP,SAAgB7nB,EAAWrrB,GAA3B,GAAA6uB,GAAA1zB,KACMu8C,EAAYv8C,KAAK+7C,kBAAkB7rB,EACrB,QAAdqsB,GAA6C,OAAvBA,EAAUN,SAElCj8C,KAAK61C,KAAK3lB,EAAG,SAAC3e,EAAOskC,GACftkC,EACF1M,EAAG0M,GACMskC,EAAKsG,cAAgBI,EAAU1G,KAAKsG,YAE7Ct3C,EAAG0M,EAAOgrC,EAAUN,SAASj5C,MAAM,GAAIu5C,EAAU1G,MAGjDniB,EAAKqkB,SAAS7nB,EAAGrrB,KAIrB7E,KAAKw8C,MAAM,SAACC,GACV/oB,EAAKgoB,QAAQ3D,SAAS7nB,GAAK8sB,aAAa,GAAQP,IAC/C,SAAC5zC,EAAuBozC,EAAepG,GACnChtC,GACH6qB,EAAK4oB,iBAAiBpsB,EAAG2lB,EAAMoG,EAASj5C,MAAM,IAEhD6B,EAAGgE,EAAKozC,EAAUpG,MAKjB0F,EAAA/zC,UAAAy1C,UAAP,SAAiB/sB,EAAW+rB,EAAuBp3C,GAAnD,GAAA6uB,GAAA1zB,IACEA,MAAKw8C,MAAM,SAACC,GACV/oB,EAAKgoB,QAAQuB,UAAU/sB,EAAG+rB,EAAUQ,IACpC,SAAC5zC,EAAuBgtC,GACnBhtC,GACH6qB,EAAK4oB,iBAAiBpsB,EAAG2lB,EAAMoG,EAASj5C,MAAM,IAEhD6B,EAAGgE,EAAKgtC,MAIL0F,EAAA/zC,UAAA01C,MAAP,SAAahtB,EAAWrrB,GAAxB,GAAA6uB,GAAA1zB,IACEA,MAAKw8C,MAAM,SAACC,GACV/oB,EAAKgoB,QAAQwB,MAAMhtB,EAAGusB,IACrB,SAAC5zC,EAAuBgtC,GACpBhtC,GACH6qB,EAAK4oB,iBAAiBpsB,EAAG2lB,MAE3BhxC,EAAGgE,MAWC0yC,EAAA/zC,UAAAg1C,MAAR,SAAcW,EAAqEt4C,GACjF,GAAIu4C,GAAS,EACXX,EAAc,SAAUlrC,GAEtB,GAAI8rC,GAA0B,CAC9B,IAAI9rC,GAAS,IAAO6rC,EAClB,OAAO7rC,EAAMqrC,QACX,IAAK5C,SAAQ7B,SAAS2C,aACtB,IAAKd,SAAQ7B,SAAS8B,cACtB,IAAKD,SAAQ7B,SAASyC,aACpBhrC,WAAW,WACTutC,EAAUV,IACS,IAAlBY,EACH,MACF,SACEx4C,EAAGxD,MAAM,KAAM0C,eAInBc,GAAGxD,MAAM,KAAM0C,WAIrBo5C,GAAUV,IAEdlB,KAEA+B,EAAA,SAAAz1B,GACE,QAAAy1B,GAAYtH,EAAwBuH,EAAeC,EAA2BC,EAAcxB,GAC1Fp0B,EAAA9mB,KAAAf,KAAMg2C,EAAKuH,EAAOC,EAAOC,EAAOxB,GAqBpC,MAvBiCn0B,GAAAw1B,EAAAz1B,GAKxBy1B,EAAA91C,UAAAqM,KAAP,SAAYhP,GAAZ,GAAA6uB,GAAA1zB,IACE,IAAIA,KAAK+1C,UAAW,CAClB,GAAIvkC,GAASxR,KAAK0zC,YAChBsJ,EAAc38B,EAAAq9B,mBAAmBlsC,EACnCxR,MAAKg2C,IAAI2H,iBAAiB39C,KAAK82C,UAAWkG,EAAa,SAAC98C,GACjDA,GACHwzB,EAAKwiB,aAEPrxC,EAAG3E,SAGL2E,MAIGy4C,EAAA91C,UAAAo2C,MAAP,SAAa/4C,GACX7E,KAAK6T,KAAKhP,IAEdy4C,GAvBiC7H,EAAaW,YAAjC52C,GAAA89C,YAAWA,CAyBxB,IAAAO,GAAA,SAAAh2B,GAOE,QAAAg2B,GAAYrC,GACV3zB,EAAA9mB,KAAAf,MACAA,KAAK07C,QAAU,GAAIH,GAAoBC,GACvC1B,IAiRJ,MA3R+ChyB,GAAA+1B,EAAAh2B,GAatCg2B,EAAAr2C,UAAAovC,QAAP,WACE,MAAO,WAGKiH,EAAAp9B,YAAd,WAEE,MAA0B,mBAAZu5B,UAGT6D,EAAAr2C,UAAA8wC,WAAP,WACE,OAAO,GAKFuF,EAAAr2C,UAAAs2C,iBAAP,WACE,OAAO,GAGFD,EAAAr2C,UAAAgxC,cAAP,WACE,OAAO,GAGFqF,EAAAr2C,UAAAmvC,cAAP,WACE,OAAO,GAGFkH,EAAAr2C,UAAAmK,MAAP,SAAaosC,GAAb,GAAArqB,GAAA1zB,IACEA,MAAK07C,QAAQhE,QAAQ,IAAK,SAACnmC,EAAOomC,GAChC,GAAIpmC,EACFwsC,EAAOrqB,EAAKsqB,QAAQzsC,EAAO,UACtB,CACL,GAAI0sC,GAAa,SAACC,EAAcr5C,GAC9B,GAAIqrB,GAAIF,EAAK5iB,KAAK,IAAK8wC,EACvBxqB,GAAKgoB,QAAQoB,OAAO5sB,EAAG,SAACrnB,GACtBhE,EAAGgE,EAAM6qB,EAAKsqB,QAAQn1C,EAAKqnB,GAAK,SAGhC+gB,EAAW,SAACpoC,GACVA,EACFk1C,EAAOl1C,GAEPk1C,IAIJ38C,GAAM6c,KAAK05B,EAAasG,EAAkBhN,OAK1C4M,EAAAr2C,UAAA22C,OAAP,SAAcvF,EAAiBC,EAAiBh0C,GAAhD,GAAA6uB,GAAA1zB,IACGA,MAAK07C,QAAQqB,KAAKnE,EAASC,EAAS,SAACtnC,GAC/BA,EAGFmiB,EAAKgoB,QAAQ7F,KAAKgD,EAAS,SAACuF,EAAQvI,GAClC,GAAIuI,GAAUvI,EAAKwF,SAAU,CAC3B,GAAIgD,GAAqB9sC,EAAM+sC,SAAU/sC,MAAMiS,QAAQo1B,IAAW,EAAKA,EAAUC,CACjFh0C,GAAG6uB,EAAKsqB,QAAQzsC,EAAO8sC,QAGvB3qB,GAAKgoB,QAAQoB,OAAOjE,EAAS,SAACuF,GACxBA,EACFv5C,EAAG6uB,EAAKsqB,QAAQI,EAAQvF,IAExBnlB,EAAKyqB,OAAOvF,EAASC,EAASh0C,OAMtCA,OAKCg5C,EAAAr2C,UAAAquC,KAAP,SAAY7lB,EAAc+oB,EAAkBl0C,GAA5C,GAAA6uB,GAAA1zB,IAGEA,MAAK07C,QAAQ7F,KAAK7lB,EAAM,SAACze,EAAOskC,GAC9B,GAAItkC,EACF1M,EAAG6uB,EAAKsqB,QAAQzsC,EAAOye,QAClB,CAAA,GAAa,MAAR6lB,IAAiBA,EAAK0I,UAI3B,CACL,GAAIvG,GAAQ,GAAIsD,GAAA,QAAM5nB,EAAK8qB,UAAU3I,GAAOA,EAAK5b,KACjD,OAAOp1B,GAAG,KAAMmzC,GAHhBnzC,EAAG0wC,EAAA4C,SAASsG,UAAUlJ,EAAA6C,UAAUoC,OAAQxqB,QAQvC6tB,EAAAr2C,UAAAk3C,KAAP,SAAY1uB,EAAc0S,EAA2BjJ,EAAc50B,GAAnE,GAAA6uB,GAAA1zB,IAEEA,MAAK07C,QAAQ3D,SAAS/nB,EAAM,SAACze,EAAOotC,EAASC,GAC3C,IAAIrtC,EAuBG,CAEL,GAAIC,EAIFA,GADc,OAAZmtC,EACO,GAAI99B,GAAO,GAEXR,EAAAw+B,mBAAmBF,EAE9B,IAAIT,GAAOxqB,EAAKorB,UAAU9uB,EAAM0S,EAAOkc,EAAQptC,EAC/C,OAAO3M,GAAG,KAAMq5C,GA/BhB,GAAIxb,EAAMqc,aACRl6C,EAAG6uB,EAAKsqB,QAAQzsC,EAAOye,QAEvB,QAAQze,EAAMqrC,QAGZ,IAAK5C,SAAQ7B,SAASoC,UACpB,GAAIt3B,GAAK,GAAIE,aAAY,EACzB,OAAOuQ,GAAKiqB,iBAAiB3tB,EAAM/M,EAAI,SAACm7B,EAAkBvI,GACxD,GAAIuI,EACFv5C,EAAGu5C,OACE,CACL,GAAIF,GAAOxqB,EAAKorB,UAAU9uB,EAAM0S,EAAOmT,EAAMx1B,EAAAw+B,mBAAmB57B,GAChEpe,GAAG,KAAMq5C,KAGf,SACE,MAAOr5C,GAAG6uB,EAAKsqB,QAAQzsC,EAAOye,QAmBnC6tB,EAAAr2C,UAAAm2C,iBAAP,SAAwBztB,EAAWzf,EAAmB5L,GAAtD,GAAA6uB,GAAA1zB,KACMg/C,EAAShvB,EAAKyB,QAAQvB,EAC1BlwB,MAAK61C,KAAKmJ,GAAQ,EAAO,SAACztC,EAAiBskC,GACrCtkC,EACF1M,EAAG0wC,EAAA4C,SAASsG,UAAUlJ,EAAA6C,UAAUoC,OAAQwE,IAExCtrB,EAAKgoB,QAAQuB,UAAU/sB,EAAGzf,EAAM,SAAC2tC,EAAQvI,GACnCuI,EACFv5C,EAAG6uB,EAAKsqB,QAAQI,EAAQluB,IAExBrrB,EAAG,KAAMgxC,QAWZgI,EAAAr2C,UAAAg3C,UAAP,SAAiB3I,GACf,MAAOA,GAAKsF,OAASG,EAAA2D,SAASC,KAAO5D,EAAA2D,SAASE,WAQzCtB,EAAAr2C,UAAAs3C,UAAP,SAAiB9uB,EAAc4lB,EAA0BC,EAAyBrkC,GAChF,GAAI7P,GAAO3B,KAAKw+C,UAAU3I,GACtBmC,EAAQ,GAAIsD,GAAA,QAAM35C,EAAMk0C,EAAK5b,KACjC,OAAO,IAAIqjB,GAAYt9C,KAAMgwB,EAAM4lB,EAAMoC,EAAOxmC,IAU3CqsC,EAAAr2C,UAAA43C,QAAP,SAAepvB,EAAcnrB,EAA4Bs2C,GAAzD,GAAAznB,GAAA1zB,IACEA,MAAK07C,QAAQ7F,KAAK7lB,EAAM,SAACze,EAAOskC,GAC1BtkC,EACF1M,EAAG6uB,EAAKsqB,QAAQzsC,EAAOye,IAEnB6lB,EAAKsF,SAAWA,EAClBt2C,EAAG0wC,EAAA4C,SAASsG,UAAUlJ,EAAA6C,UAAUiH,QAASrvB,KAC/B6lB,EAAKsF,QAAUA,EACzBt2C,EAAG0wC,EAAA4C,SAASsG,UAAUlJ,EAAA6C,UAAUkH,OAAQtvB,IAExC0D,EAAKgoB,QAAQoB,OAAO9sB,EAAM,SAACze,GAEvB1M,EADE0M,EACCmiB,EAAKsqB,QAAQzsC,EAAOye,GAEpB,WAWR6tB,EAAAr2C,UAAA+3C,OAAP,SAAcvvB,EAAcnrB,GAC1B7E,KAAKo/C,QAAQpvB,EAAMnrB,GAAI,IAMlBg5C,EAAAr2C,UAAAg4C,MAAP,SAAaxvB,EAAcnrB,GACzB7E,KAAKo/C,QAAQpvB,EAAMnrB,GAAI,IAMlBg5C,EAAAr2C,UAAA01C,MAAP,SAAahtB,EAAWuJ,EAAc50B,GAAtC,GAAA6uB,GAAA1zB,KAQMg/C,EAAShvB,EAAKyB,QAAQvB,EAC1BlwB,MAAK07C,QAAQ7F,KAAKmJ,EAAQ,SAACztC,EAAOskC,GAC5BtkC,EACF1M,EAAG6uB,EAAKsqB,QAAQzsC,EAAOytC,IAEvBtrB,EAAKgoB,QAAQwB,MAAMhtB,EAAG,SAAC3e,GAEnB1M,EADE0M,EACCgkC,EAAA4C,SAASsG,UAAUlJ,EAAA6C,UAAUqH,OAAQvvB,GAErC,WAUN2tB,EAAAr2C,UAAAkwC,QAAP,SAAe1nB,EAAcnrB,GAA7B,GAAA6uB,GAAA1zB,IACEA,MAAK07C,QAAQhE,QAAQ1nB,EAAM,SAACze,EAAOomC,GACjC,MAAIpmC,GACK1M,EAAG6uB,EAAKsqB,QAAQzsC,IAEhB1M,EAAG,KAAM8yC,MAQfkG,EAAAr2C,UAAAw2C,QAAP,SAAen1C,EAAuBmnB,GAAA,SAAAA,IAAAA,EAAA,KACpC,IAAI0vB,GAAY3F,EAAgBlxC,EAAI+zC,OAKpC,OAJkB94C,UAAd47C,IACFA,EAAYnK,EAAA6C,UAAU8B,KAGZ,MAARlqB,EACK,GAAIulB,GAAA4C,SAASuH,GAEbnK,EAAA4C,SAASsG,UAAUiB,EAAW1vB,IAG3C6tB,GA3R+CvI,EAAYqK,eAA3DngD,GAAAmtB,YAAA,+OC9QA,SAAAizB,GAAwBC,EAAgB3/C,GACtC,GAAU,OAANA,GAA2B,gBAANA,GAAgB,CACvC,GAAI2I,GAAiB3I,EACjBgwB,EAAIrnB,EAAImnB,IACRE,KACFA,EAAI,IAAMF,EAAKiB,SAAS4uB,EAAQ3vB,GAChCrnB,EAAI2B,QAAU3B,EAAI2B,QAAQ/H,QAAQoG,EAAImnB,KAAME,GAC5CrnB,EAAImnB,KAAOE,GAGf,MAAOhwB,GAGT,QAAA4/C,GAAsBD,EAAgBh7C,GACpC,MAAkB,kBAAPA,GACF,SAASgE,GACV9E,UAAU/C,OAAS,IACrB+C,UAAU,GAAK67C,EAAeC,EAAQh3C,IAE5BhE,EAAIxD,MAAM,KAAM0C,YAGvBc,EAIX,QAAAk7C,GAAsBrwC,EAAcswC,EAAoBC,GACtD,MAAoC,SAAhCvwC,EAAK1M,MAAM0M,EAAK1O,OAAS,GAEpB,WAUL,MATI+C,WAAU/C,OAAS,IACjBg/C,IACFj8C,UAAU,GAAKisB,EAAK5iB,KAAKpN,KAAKkgD,QAASn8C,UAAU,KAE/Ck8C,IACFl8C,UAAU,GAAKisB,EAAK5iB,KAAKpN,KAAKkgD,QAASn8C,UAAU,KAEnDA,UAAUA,UAAU/C,OAAS,GAAK8+C,EAAa9/C,KAAKkgD,QAASn8C,UAAUA,UAAU/C,OAAS,KAErFhB,KAAKmgD,SAASzwC,GAAMrO,MAAMrB,KAAKmgD,SAAUp8C,YAI3C,WACL,IAOE,MANIi8C,KACFj8C,UAAU,GAAKisB,EAAK5iB,KAAKpN,KAAKkgD,QAASn8C,UAAU,KAE/Ck8C,IACFl8C,UAAU,GAAKisB,EAAK5iB,KAAKpN,KAAKkgD,QAASn8C,UAAU,KAE5C/D,KAAKmgD,SAASzwC,GAAMrO,MAAMrB,KAAKmgD,SAAUp8C,WAChD,MAAO7D,GACP,KAAM0/C,GAAe5/C,KAAKkgD,QAAShgD,sMAhG3CkgD,EAAAl/C,EAAyC,uBAClC8uB,EAAI9uB,EAAW,QACtBq0C,EAAAr0C,EAAuB,qBAKvBm/C,EAAA,SAAAx4B,GAGE,QAAAw4B,GAAYR,EAAgBS,GAC1Bz4B,EAAA9mB,KAAAf,MACAA,KAAKkgD,QAAUL,EACf7/C,KAAKmgD,SAAWG,EA4BpB,MAlC2Cx4B,GAAAu4B,EAAAx4B,GAalCw4B,EAAA74C,UAAA6vC,WAAP,SAAkBxyC,GAAlB,GAAA6uB,GAAA1zB,IACEA,MAAKmgD,SAASI,OAAOvgD,KAAKkgD,QAAS,SAACK,GAC9BA,EACF17C,IACS6uB,EAAKysB,SAAS7H,aACvBzzC,EAAG0wC,EAAA4C,SAASqC,OAAO9mB,EAAKwsB,UAExBxsB,EAAKysB,SAASjD,MAAMxpB,EAAKwsB,QAAS,IAAOr7C,MAKxCw7C,EAAA74C,UAAAovC,QAAP,WAA2B,MAAO52C,MAAKmgD,SAASvJ,WACzCyJ,EAAA74C,UAAA8wC,WAAP,WAA+B,MAAOt4C,MAAKmgD,SAAS7H,cAC7C+H,EAAA74C,UAAAgxC,cAAP,WAAkC,MAAOx4C,MAAKmgD,SAAS3H,iBAChD6H,EAAA74C,UAAAmvC,cAAP,WAAkC,MAAO32C,MAAKmgD,SAASxJ,iBAChD0J,EAAA74C,UAAA+wC,cAAP,WAAkC,OAAO,GAE3B8H,EAAA5/B,YAAd,WACE,OAAO,GAEX4/B,GAlC2CD,EAAAT,eAA3CngD,GAAAmtB,YAAA,eAgGC,YAAa,OAAQ,WAAY,OAAQ,WAAY,SAAU,aAC/D,QAAS,YAAa,QAAS,YAAa,UAAW,cAAe,SACtE,aAAc,WAAY,eAAgB,WAAY,eAAgB,WACtE,eAAgB,YAAa,gBAAiB,aAAc,iBAC5D,QAAS,YAAa,QAAS,YAAa,SAAU,YAAa,WACnE,gBAAgBrO,QAAQ,SAAC5O,GACxB2wC,EAAc74C,UAAUkI,GAAQqwC,EAAarwC,GAAM,GAAM,MAI1D,SAAU,aAAc,OAAQ,WAAY,UAAW,eAAe4O,QAAQ,SAAC5O,GAC9E2wC,EAAc74C,UAAUkI,GAAQqwC,EAAarwC,GAAM,GAAM,iGCvG3D,SAAA8wC,GAA0BvN,GACxB,MAAOA,GAAMgF,YAKf,QAAAwI,GAAuB9+C,EAAcs4B,EAAcymB,EAAiCC,GAMlF,GAA4D,mBAA1CC,WAAoC,wBACpD,OAAOj/C,GACL,IAAK7B,GAAO+gD,WACHD,UAAWE,wBAAwBC,aAAa9mB,EAAMymB,EAASC,EACtE,MACF,KAAK7gD,GAAOkhD,UACHJ,UAAWK,uBAAuBF,aAAa9mB,EAAMymB,EAASC,EACrE,MACF,SACEA,EAAc,GAAIh9C,WAAU,yBAAyBhC,QAIlD7B,GAAQohD,kBAAkBH,aAAap/C,EAAMs4B,EAAMymB,EAASC,GAIvE,QAAAQ,GAAkB75B,GAChB,MAAOpjB,OAAMsD,UAAUxE,MAAMjC,KAAKumB,MAAY,oMAzCzCmuB,EAAYv0C,EAAW,2BACvBo0C,EAAWp0C,EAAW,uBAC7Bq0C,EAAAr0C,EAAkC,qBAClCkgD,EAAAlgD,EAAmC,qBACnCo6C,EAAAp6C,EAAyC,yBAElC8uB,EAAI9uB,EAAW,QACfpB,EAAMoB,EAAW,kBACjBE,EAAKF,EAAW,SACvBmf,EAAAnf,EAAqD,gBAMjDmgD,EAAiHvhD,EAAOwhD,yBAA2BxhD,EAAOyhD,mBAAqB,KAqCnLC,EAAA,SAAA35B,GACE,QAAA25B,GAAYxL,EAAcuH,EAAeC,EAAiBC,EAAcxB,GACtEp0B,EAAA9mB,KAAAf,KAAMg2C,EAAKuH,EAAOC,EAAOC,EAAOxB,GAuCpC,MAzCiCn0B,GAAA05B,EAAA35B,GAKxB25B,EAAAh6C,UAAAqM,KAAP,SAAYhP,GAAZ,GAAA6uB,GAAA1zB,IACE,IAAIA,KAAK+1C,UAAW,CAElB,GAAI7/B,IACFxB,QAAQ,GAENshC,EAAMh2C,KAAKg2C,IACX0K,EAA6B,SAACzN,GAChCA,EAAMwO,aAAa,SAACC,GAClB,GAAIlwC,GAASkiB,EAAKggB,YACdiO,EAAO,GAAIC,OAAMvhC,EAAAq9B,mBAAmBlsC,KACpCxQ,EAAS2gD,EAAK1nB,IAClBynB,GAAOG,WAAa,WAClBH,EAAOG,WAAa,KACpBH,EAAOI,SAAS9gD,GAChB0yB,EAAKwiB,aACLrxC,KAEF68C,EAAOxS,QAAU,SAACrmC,GAChBhE,EAAGmxC,EAAIgI,QAAQn1C,EAAK6qB,EAAKojB,WAAW,KAEtC4K,EAAOlgC,MAAMmgC,MAGbpwC,EAAQ,SAAC1I,GACXhE,EAAGmxC,EAAIgI,QAAQn1C,EAAK6qB,EAAKojB,WAAW,IAEtCd,GAAIL,GAAGz7B,KAAK6nC,QAAQ/hD,KAAK82C,UAAW5gC,EAAMwqC,EAASnvC,OAEnD1M,MAIG28C,EAAAh6C,UAAAo2C,MAAP,SAAa/4C,GACX7E,KAAK6T,KAAKhP,IAEd28C,GAzCiC/L,EAAaW,YAAjC52C,GAAAgiD,YAAWA,CA2CxB,IAAAQ,GAAA,SAAAn6B,GAUE,QAAAm6B,GAAY/nB,EAAkBt4B,GAAlB,SAAAs4B,IAAAA,EAAA,GAAkB,SAAAt4B,IAAAA,EAAe7B,EAAO+gD,YAClDh5B,EAAA9mB,KAAAf,MAEAA,KAAKi6B,KAAO,QAAcA,EAC1Bj6B,KAAK2B,KAAOA,EAwXhB,MAtYqCmmB,GAAAk6B,EAAAn6B,GAiB5Bm6B,EAAAx6C,UAAAovC,QAAP,WACE,MAAO,oBAGKoL,EAAAvhC,YAAd,WACE,MAAiB,OAAV4gC,GAGFW,EAAAx6C,UAAA8wC,WAAP,WACE,OAAO,GAGF0J,EAAAx6C,UAAAs2C,iBAAP,WACE,OAAO,GAGFkE,EAAAx6C,UAAAgxC,cAAP,WACE,OAAO,GAGFwJ,EAAAx6C,UAAAmvC,cAAP,WACE,OAAO,GAQFqL,EAAAx6C,UAAAw2C,QAAP,SAAen1C,EAAeqnB,EAAW+xB,GACvC,OAAQp5C,EAAI6G,MAGV,IAAK,kBACH,MAAO6lC,GAAA4C,SAASsH,OAAOvvB,EAEzB,KAAK,qBACH,MAAOqlB,GAAA4C,SAASsG,UAAUlJ,EAAA6C,UAAU4C,OAAQ9qB,EAE9C,KAAK,gBACH,MAAOqlB,GAAA4C,SAASqC,OAAOtqB,EAIzB,KAAK,gBACH,MAAOqlB,GAAA4C,SAASsG,UAAUlJ,EAAA6C,UAAU8J,OAAQhyB,EAI9C,KAAK,2BACH,MAAOqlB,GAAA4C,SAASsG,UAAUlJ,EAAA6C,UAAUC,MAAOnoB,EAG7C,KAAK,oBACH,MAAOqlB,GAAA4C,SAASsG,UAAUwD,EAAc1M,EAAA6C,UAAUiH,QAAU9J,EAAA6C,UAAUkH,OAAQpvB,EAEhF,KAAK,gBAGL,IAAK,oBAGL,IAAK,6BACL,QACE,MAAOqlB,GAAA4C,SAASsG,UAAUlJ,EAAA6C,UAAUgC,OAAQlqB,KAQ3C8xB,EAAAx6C,UAAA26C,SAAP,SAAgBt9C,GAAhB,GAAA6uB,GAAA1zB,IAAgB,UAAA6E,IAAAA,EAA6B,aAC3C,IAAI67C,GAAU,SAAC/K,GACbjiB,EAAKiiB,GAAKA,EACV9wC,KAEE0M,EAAQ,SAAC1I,GACXhE,EAAG6uB,EAAKsqB,QAAQn1C,EAAK,KAAK,IAExB7I,MAAK2B,OAAS7B,EAAO+gD,WACvBJ,EAAczgD,KAAK2B,KAAM3B,KAAKi6B,KAAM,SAACmoB,GACnCf,EAAO3tB,EAAK/xB,KAAMygD,EAAS1B,EAASnvC,IACnCA,GAEH8vC,EAAOrhD,KAAK2B,KAAM3B,KAAKi6B,KAAMymB,EAASnvC,IAUnCywC,EAAAx6C,UAAAmK,MAAP,SAAaosC,GAAb,GAAArqB,GAAA1zB,IAEEA,MAAKqiD,SAAS,IAAK,SAACx5C,EAAey5C,GACjC,GAAIz5C,EACFsK,QAAQ5B,MAAM,sBACdwsC,EAAOl1C,OACF,CAEL,GAAIooC,GAAW,SAACtV,GACV9yB,GACFsK,QAAQ5B,MAAM,sBACdwsC,EAAOl1C,IAEPk1C,KAIAwE,EAAc,SAACtP,EAAcpuC,GAC/B,GAAI29C,GAAO,WACT39C,KAEE0M,EAAQ,SAAC1I,GACXhE,EAAG6uB,EAAKsqB,QAAQn1C,EAAKoqC,EAAMwP,UAAWxP,EAAMgF,cAE1CuI,GAAiBvN,GACnBA,EAAMyP,kBAAkBF,EAAMjxC,GAE9B0hC,EAAM6J,OAAO0F,EAAMjxC,GAKvBnQ,GAAM6c,KAAKqkC,EAASC,EAAatR,OAKhC+Q,EAAAx6C,UAAA22C,OAAP,SAAcvF,EAAiBC,EAAiBh0C,GAAhD,GAAA6uB,GAAA1zB,KACM2iD,EAAoB,EACtBC,EAAuB,EACvB1oC,EAAuBla,KAAK21C,GAAGz7B,KAC/B2oC,EAAsBjK,EACtBrnC,EAAQ,SAAC1I,KACD85C,GAAa,GACf99C,EAAG6uB,EAAKsqB,QAAQn1C,EAAKg6C,GAAa,KAGxCnC,EAAU,SAACxC,GACT,MAAuB,OAAjB0E,EACG/9C,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,uFAKvCxB,IAAYC,EACPh0C,KAITg+C,EAAc7yB,EAAKyB,QAAQonB,OAC3B3+B,GAAK4oC,aAAaD,KAAiB,SAACE,GAClCF,EAAc7yB,EAAK2B,SAASknB,GAC5BqF,EAAK8E,OAAOD,EAAWF,EAAa,SAAC5P,GAAyBpuC,KAAS,SAACgE,GAGlEq1C,EAAKjG,aACP4K,EAAchK,EAEdnlB,EAAK6rB,OAAO1G,EAAS,SAAC34C,GAChBA,EAEFqR,EAAM1I,GAGN6qB,EAAKyqB,OAAOvF,EAASC,EAASh0C,MAIlC0M,EAAM1I,MAGT0I,IAKP2I,GAAK6nC,QAAQnJ,KAAa8H,EAASnvC,GACnC2I,EAAK4oC,aAAalK,KAAa8H,EAASnvC,IAGnCywC,EAAAx6C,UAAAquC,KAAP,SAAY7lB,EAAc+oB,EAAkBl0C,GAA5C,GAAA6uB,GAAA1zB,KAGMkW,GACFxB,QAAQ,GAGNuuC,EAAa,SAAChQ,GAChB,GAAIiQ,GAAgB,SAAChF,GACnB,GAAIrI,GAAO,GAAIyF,GAAA,QAAMA,EAAA2D,SAASC,KAAMhB,EAAKjkB,KACzCp1B,GAAG,KAAMgxC,GAEX5C,GAAMiL,KAAKgF,EAAeC,IAGxBC,EAAY,SAACvmC,GAGf,GAAIod,GAAO,KACP4b,EAAO,GAAIyF,GAAA,QAAMA,EAAA2D,SAASE,UAAWllB,EACzCp1B,GAAG,KAAMgxC,IAGPsN,EAAe,SAACt6C,GAClBhE,EAAG6uB,EAAKsqB,QAAQn1C,EAAKmnB,GAAM,KAIzBqzB,EAAqB,WACvB3vB,EAAKiiB,GAAGz7B,KAAK4oC,aAAa9yB,EAAM9Z,EAAMktC,EAAWD,GAKnDnjD,MAAK21C,GAAGz7B,KAAK6nC,QAAQ/xB,EAAM9Z,EAAM+sC,EAAYI,IAGxCrB,EAAAx6C,UAAAk3C,KAAP,SAAYxuB,EAAWwS,EAAiBjJ,EAAc50B,GAAtD,GAAA6uB,GAAA1zB,KACMuR,EAAQ,SAAC1I,GAEThE,EADe,6BAAbgE,EAAI6G,MAAuCgzB,EAAM4gB,cAChD/N,EAAA4C,SAASsH,OAAOvvB,GAEhBwD,EAAKsqB,QAAQn1C,EAAKqnB,GAAG,IAI5BlwB,MAAK21C,GAAGz7B,KAAK6nC,QAAQ7xB,GACnBxb,OAAQguB,EAAM6gB,wBAA0BnC,EAAAoC,WAAWC,YACnDC,UAAWhhB,EAAM4gB,eAChB,SAACrQ,GAEFA,EAAMiL,KAAK,SAACA,GACV,GAAIyF,GAAS,GAAIC,WACjBD,GAAOE,UAAY,SAAClZ,GAClB,GAAImZ,GAAWpwB,EAAKorB,UAAU5uB,EAAGwS,EAAOwb,EAAoByF,EAAOpgD,OACnEsB,GAAG,KAAMi/C,IAEXH,EAAOzU,QAAU,SAACS,GAChBp+B,EAAMoyC,EAAOpyC,QAEfoyC,EAAOI,kBAAkB7F,IACxB3sC,IACFA,IAMGywC,EAAAx6C,UAAAg3C,UAAR,SAAkB3I,GAChB,MAAOA,GAAKsF,OAASG,EAAA2D,SAASC,KAAO5D,EAAA2D,SAASE,WAOxC6C,EAAAx6C,UAAAs3C,UAAR,SAAkB9uB,EAAc4lB,EAAgBC,EAAYplC,GAAA,SAAAA,IAAAA,EAAA,GAAwB0S,aAAY,GAC9F,IAAI60B,GAAQ,GAAIsD,GAAA,QAAMA,EAAA2D,SAASC,KAAMrJ,EAAK5b,MACtCzoB,EAAS6O,EAAAw+B,mBAAmBpuC,EAChC,OAAO,IAAI+wC,GAAYxhD,KAAMgwB,EAAM4lB,EAAMoC,EAAOxmC,IAS1CwwC,EAAAx6C,UAAA43C,QAAR,SAAgBpvB,EAAcnrB,EAA4Bs2C,GAA1D,GAAAznB,GAAA1zB,KACM0gD,EAAU,SAACzN,GACb,GAAIuP,GAAO,WACT39C,KAEEgE,EAAM,SAACA,GACThE,EAAG6uB,EAAKsqB,QAAQn1C,EAAKmnB,GAAOmrB,IAE9BlI,GAAM6J,OAAO0F,EAAM35C,IAEjB0I,EAAQ,SAAC1I,GACXhE,EAAG6uB,EAAKsqB,QAAQn1C,EAAKmnB,GAAOmrB,KAG1BjlC,GACFxB,QAAQ,EAGNymC,GACFn7C,KAAK21C,GAAGz7B,KAAK6nC,QAAQ/xB,EAAM9Z,EAAMwqC,EAASnvC,GAE1CvR,KAAK21C,GAAGz7B,KAAK4oC,aAAa9yB,EAAM9Z,EAAMwqC,EAASnvC,IAI5CywC,EAAAx6C,UAAA+3C,OAAP,SAAcvvB,EAAcnrB,GAC1B7E,KAAKo/C,QAAQpvB,EAAMnrB,GAAI,IAGlBm9C,EAAAx6C,UAAAg4C,MAAP,SAAaxvB,EAAcnrB,GAA3B,GAAA6uB,GAAA1zB,IAEEA,MAAK03C,QAAQ1nB,EAAM,SAAC9vB,EAAGy3C,GACjBz3C,EACF2E,EAAG3E,GACMy3C,EAAM32C,OAAS,EACxB6D,EAAG0wC,EAAA4C,SAAS6L,UAAUh0B,IAEtB0D,EAAK0rB,QAAQpvB,EAAMnrB,GAAI,MAKtBm9C,EAAAx6C,UAAA01C,MAAP,SAAaltB,EAAcyJ,EAAc50B,GAAzC,GAAA6uB,GAAA1zB,KAGMkW,GACFxB,QAAQ,EACRgvC,WAAW,GAEThD,EAAU,SAAC7jC,GACbhY,KAEE0M,EAAQ,SAAC1I,GACXhE,EAAG6uB,EAAKsqB,QAAQn1C,EAAKmnB,GAAM,IAE7BhwB,MAAK21C,GAAGz7B,KAAK4oC,aAAa9yB,EAAM9Z,EAAMwqC,EAASnvC,IAMzCywC,EAAAx6C,UAAA66C,SAAR,SAAiBryB,EAAcnrB,GAA/B,GAAA6uB,GAAA1zB,KACMuR,EAAQ,SAAC1I,GACXhE,EAAG6uB,EAAKsqB,QAAQn1C,EAAKmnB,GAAM,IAG7BhwB,MAAK21C,GAAGz7B,KAAK4oC,aAAa9yB,GAAQtb,QAAQ,GAAS,SAACuvC,GAClD,GAAIN,GAASM,EAASC,eAClB5B,KAGA6B,EAAc,WAChBR,EAAOQ,YAAY,SAAEl6C,GACfA,EAAQjJ,QACVshD,EAAUA,EAAQx9C,OAAOq8C,EAASl3C,IAClCk6C,KAEAt/C,EAAG,KAAMy9C,IAET/wC,GAEN4yC,MACC5yC,IAMEywC,EAAAx6C,UAAAkwC,QAAP,SAAe1nB,EAAcnrB,GAC3B7E,KAAKqiD,SAASryB,EAAM,SAAC9vB,EAAaoiD,GAChC,GAAIpiD,EACF,MAAO2E,GAAG3E,EAGZ,KAAK,GADD4lB,MACKnlB,EAAI,EAAGA,EAAI2hD,EAAQthD,OAAQL,IAClCmlB,EAAGhe,KAAKw6C,EAAQ3hD,GAAG+O,KAErB7K,GAAG,KAAMihB,MAGfk8B,GAtYqC1M,EAAYqK,eAAjDngD,GAAAmtB,YAAA,yaC/FOy3B,EAAIljD,EAAW,mCAKtBmjD,EAAA,WAAA,QAAAA,KACUrkD,KAAAskD,SAwBV,MAtBSD,GAAA78C,UAAAkI,KAAP,WAAgB,MAAO,aAChB20C,EAAA78C,UAAAkmC,MAAP,WAAiB1tC,KAAKskD,UAEfD,EAAA78C,UAAA+8C,iBAAP,SAAwB5iD,GACtB,MAAO,IAAIyiD,GAAKI,wBAAwBxkD,OAGnCqkD,EAAA78C,UAAAwa,IAAP,SAAWhd,GACT,MAAOhF,MAAKskD,MAAMt/C,IAGbq/C,EAAA78C,UAAAi9C,IAAP,SAAWz/C,EAAayL,EAAkBi0C,GACxC,SAAKA,GAAa1kD,KAAKskD,MAAMt+C,eAAehB,MAG5ChF,KAAKskD,MAAMt/C,GAAOyL,GACX,IAGF4zC,EAAA78C,UAAAm9C,IAAP,SAAW3/C,SACFhF,MAAKskD,MAAMt/C,IAEtBq/C,IAzBa7kD,GAAA6kD,cAAaA,CA8B1B,IAAAO,GAAA,SAAA/8B,GACE,QAAA+8B,KACE/8B,EAAA9mB,KAAAf,MAAQskD,MAAO,GAAID,KAEvB,MAJgDv8B,GAAA88B,EAAA/8B,GAIhD+8B,GAJgDR,EAAKS,uBAArDrlD,GAAAmtB,YAAA,uFCnBA,SAAAm4B,GAAsB5kD,EAAmBsK,GACvC,OADuC,SAAAA,IAAAA,EAAkBtK,EAAEqO,YACpDrO,EAAEwP,MACP,IAAK,gBACH,MAAO,IAAI6lC,GAAA4C,SAAS5C,EAAA6C,UAAUoC,OAAQhwC,EACxC,KAAK,qBACH,MAAO,IAAI+qC,GAAA4C,SAAS5C,EAAA6C,UAAU4C,OAAQxwC,EACxC,SAEE,MAAO,IAAI+qC,GAAA4C,SAAS5C,EAAA6C,UAAU8B,IAAK1vC,IASzC,QAAAu6C,GAAwBlgD,EACtBhE,EAAiC2J,GACjC,MADA,UAAA3J,IAAAA,EAAkB00C,EAAA6C,UAAU8B,KAAK,SAAA1vC,IAAAA,EAAA,MAC1B,SAAUtK,GAEfA,EAAE8kD,iBACFngD,EAAG,GAAI0wC,GAAA4C,SAASt3C,EAAM2J,sMAtCnB45C,EAAIljD,EAAW,mCACtBq0C,EAAAr0C,EAAkC,qBAC3BpB,EAAMoB,EAAW,kBACxBmf,EAAAnf,EAAqD,gBAIjD+jD,EAAwBnlD,EAAOmlD,WACHnlD,EAAQolD,cACRplD,EAAQqlD,iBACdrlD,EAAOslD,YAgCjCC,EAAA,WACE,QAAAA,GAAmBC,EAA2BhB,GAA3BtkD,KAAAslD,GAAAA,EAA2BtlD,KAAAskD,MAAAA,EAqBhD,MAnBEe,GAAA79C,UAAAwa,IAAA,SAAIhd,EAAaH,GACf,IACE,GAAIxE,GAAgBL,KAAKskD,MAAMtiC,IAAIhd,EACnC3E,GAAE6uC,QAAU6V,EAAelgD,GAC3BxE,EAAEklD,UAAY,SAAC5a,GAGb,GAAIpnC,GAAoBonC,EAAM7mB,OAAQvgB,MACvBO,UAAXP,EACFsB,EAAG,KAAMtB,GAGTsB,EAAG,KAAMwb,EAAAw+B,mBAAmBt7C,KAGhC,MAAOrD,GACP2E,EAAGigD,EAAa5kD,MAGtBmlD,IAtBa7lD,GAAA6lD,uBAAsBA,CAwBnC,IAAAG,GAAA,SAAA39B,GACE,QAAA29B,GAAYF,EAAoBhB,GAC9Bz8B,EAAA9mB,KAAAf,KAAMslD,EAAIhB,GAqDd,MAvD4Cx8B,GAAA09B,EAAA39B,GAKnC29B,EAAAh+C,UAAAi9C,IAAP,SAAWz/C,EAAayL,EAAkBi0C,EAAoB7/C,GAC5D,IACE,GACExE,GADEolD,EAAcplC,EAAAq9B,mBAAmBjtC,EAGnCpQ,GADEqkD,EACE1kD,KAAKskD,MAAMG,IAAIgB,EAAazgD,GAG5BhF,KAAKskD,MAAMoB,IAAID,EAAazgD,GAGlC3E,EAAE6uC,QAAU6V,EAAelgD,GAC3BxE,EAAEklD,UAAY,SAAC5a,GACb9lC,EAAG,MAAM,IAEX,MAAO3E,GACP2E,EAAGigD,EAAa5kD,MAIbslD,EAAAh+C,UAAAm9C,IAAP,SAAW3/C,EAAaH,GACtB,IAIE,GAAIxE,GAAgBL,KAAKskD,MAAc,OAAEt/C,EACzC3E,GAAE6uC,QAAU6V,EAAelgD,GAC3BxE,EAAEklD,UAAY,SAAC5a,GACb9lC,KAEF,MAAO3E,GACP2E,EAAGigD,EAAa5kD,MAIbslD,EAAAh+C,UAAAm+C,OAAP,SAAc9gD,GAEZ+K,WAAW/K,EAAI,IAGV2gD,EAAAh+C,UAAAgwB,MAAP,SAAa3yB,GACX,GAAIk/B,EACJ,KACE/jC,KAAKslD,GAAG9tB,QACR,MAAOt3B,GACP6jC,EAAK+gB,EAAa5kD,WAElB2E,EAAGk/B,KAGTyhB,GAvD4CH,EAA/B7lD,GAAAgmD,uBAAsBA,CAyDnC,IAAAI,GAAA,WAWE,QAAAA,GAAY/gD,EAA2DghD,GAXzE,GAAAnyB,GAAA1zB,IAWiE,UAAA6lD,IAAAA,EAAA,aAAQ7lD,KAAA6lD,UAAAA,CACrE,IAAIC,GAA4Bb,EAAUvG,KAAK1+C,KAAK6lD,UAAW,EAE/DC,GAAQC,gBAAkB,SAACpb,GACzB,GAAIqb,GAAwBrb,EAAM7mB,OAAQvgB,MAGtCyiD,GAAGC,iBAAiBC,SAASxyB,EAAKmyB,YACpCG,EAAGG,kBAAkBzyB,EAAKmyB,WAE5BG,EAAGI,kBAAkB1yB,EAAKmyB,YAG5BC,EAAQP,UAAY,SAAC5a,GACnBjX,EAAKsyB,GAAWrb,EAAM7mB,OAAQvgB,OAC9BsB,EAAG,KAAM6uB,IAGXoyB,EAAQ5W,QAAU6V,EAAelgD,EAAI0wC,EAAA6C,UAAU8J,QAiCnD,MA9BS0D,GAAAp+C,UAAAkI,KAAP,WACE,MAAO,eAAiB1P,KAAK6lD,WAGxBD,EAAAp+C,UAAAkmC,MAAP,SAAa7oC,GACX,IACE,GAAIygD,GAAKtlD,KAAKgmD,GAAGK,YAAYrmD,KAAK6lD,UAAW,aAC3CS,EAAchB,EAAGgB,YAAYtmD,KAAK6lD,WAClCxlD,EAAgBimD,EAAY5Y,OAC9BrtC,GAAEklD,UAAY,SAAC5a,GAEb/6B,WAAW/K,EAAI,IAEjBxE,EAAE6uC,QAAU6V,EAAelgD,GAC3B,MAAO3E,GACP2E,EAAGigD,EAAa5kD,MAIb0lD,EAAAp+C,UAAA+8C,iBAAP,SAAwB5iD,GAAA,SAAAA,IAAAA,EAAA,WACtB,IAAI2jD,GAAKtlD,KAAKgmD,GAAGK,YAAYrmD,KAAK6lD,UAAWlkD,GAC3C2kD,EAAchB,EAAGgB,YAAYtmD,KAAK6lD,UACpC,IAAa,cAATlkD,EACF,MAAO,IAAI6jD,GAAuBF,EAAIgB,EACjC,IAAa,aAAT3kD,EACT,MAAO,IAAI0jD,GAAuBC,EAAIgB,EAEtC,MAAM,IAAI/Q,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,8BAG3CwL,IA9DapmD,GAAAomD,eAAcA,CAmE3B,IAAAW,GAAA,SAAA1+B,GACE,QAAA0+B,GAAY1hD,EAAqDghD,GADnE,GAAAnyB,GAAA1zB,IAEI6nB,GAAA9mB,KAAAf,MACA,GAAI4lD,GAAe,SAAC1lD,EAAGokD,GACjBpkD,EACF2E,EAAG3E,GAEHwzB,EAAK8yB,KAAKlC,EAAO,SAACpkD,GAChB2E,EAAG3E,EAAGwzB,MAGTmyB,GAcP,MAzBiD/9B,GAAAy+B,EAAA1+B,GAcjC0+B,EAAA9lC,YAAd,WAKE,IACE,MAA4B,mBAAdwkC,IAA6B,OAASA,EAAUvG,KAAK,sBACnE,MAAOx+C,GACP,OAAO,IAGbqmD,GAzBiDnC,EAAKqC,wBAAtDjnD,GAAAmtB,YAAA,qKCtLE+5B,gMARKtC,EAAIljD,EAAW,mCACtBq0C,EAAAr0C,EAAkC,qBAC3BpB,EAAMoB,EAAW,kBAKpBylD,GAAgC,CAEpC,KACE7mD,EAAOu1C,aAAauR,QAAQ,WAAY5/C,OAAO0lB,aAAa,QAC5Di6B,EAAuB7mD,EAAOu1C,aAAawR,QAAQ,cAAgB7/C,OAAO0lB,aAAa,OACvF,MAAOxsB,GAEPymD,GAAuB,EAEzBD,EAAiBC,EAAuB,gBAAkB,mBACrD9lC,EAAOiG,WAAW4/B,KAGrBA,EAAiB,SAMnB,IAAAI,GAAA,WACE,QAAAA,MAgDF,MA9CSA,GAAAt/C,UAAAkI,KAAP,WACE,MAAO,gBAGFo3C,EAAAt/C,UAAAkmC,MAAP,WACE5tC,EAAOu1C,aAAa3H,SAGfoZ,EAAAt/C,UAAA+8C,iBAAP,SAAwB5iD,GAEtB,MAAO,IAAIyiD,GAAKI,wBAAwBxkD,OAGnC8mD,EAAAt/C,UAAAwa,IAAP,SAAWhd,GACT,IACE,GAAIyL,GAAO3Q,EAAOu1C,aAAawR,QAAQ7hD,EACvC,IAAa,OAATyL,EACF,MAAO,IAAIoQ,GAAOpQ,EAAMi2C,GAE1B,MAAOxmD,MAOJ4mD,EAAAt/C,UAAAi9C,IAAP,SAAWz/C,EAAayL,EAAkBi0C,GACxC,IACE,SAAKA,GAAkD,OAArC5kD,EAAOu1C,aAAawR,QAAQ7hD,MAI9ClF,EAAOu1C,aAAauR,QAAQ5hD,EAAKyL,EAAKlC,SAASm4C,KACxC,GACP,MAAOxmD,GACP,KAAM,IAAIq1C,GAAA4C,SAAS5C,EAAA6C,UAAU4C,OAAQ,2BAIlC8L,EAAAt/C,UAAAm9C,IAAP,SAAW3/C,GACT,IACElF,EAAOu1C,aAAa0R,WAAW/hD,GAC/B,MAAO9E,GACP,KAAM,IAAIq1C,GAAA4C,SAAS5C,EAAA6C,UAAU8B,IAAK,wBAA0Bl1C,EAAM,KAAO9E,KAG/E4mD,IAjDatnD,GAAAsnD,kBAAiBA,CAuD9B,IAAAE,GAAA,SAAAn/B,GACE,QAAAm/B,KAAgBn/B,EAAA9mB,KAAAf,MAAQskD,MAAO,GAAIwC,KAIrC,MALoDh/B,GAAAk/B,EAAAn/B,GAEpCm/B,EAAAvmC,YAAd,WACE,MAAsC,mBAAxB3gB,GAAOu1C,cAEzB2R,GALoD5C,EAAKS,uBAAzDrlD,GAAAmtB,YAAA,qLCkNA,SAAAs6B,GAAmBv3C,EAAcw3C,EAAiBC,GAChD,MAAID,GACK,eAAS,GAAA1lD,MAAAkvB,EAAA,EAAAA,EAAA3sB,UAAA/C,OAAA0vB,IAAAlvB,EAAAkvB,EAAA,GAAA3sB,UAAA2sB,EACd,IAAI3wB,GAA4BC,KAC5BgwB,EAAOxuB,EAAK,GACZskB,EAAK/lB,EAAKqnD,OAAOp3B,EACrBxuB,GAAK,GAAKskB,EAAGkK,IACb,KACE,MAAOlK,GAAG6vB,GAAGjmC,GAAMrO,MAAMykB,EAAG6vB,GAAIn0C,GAChC,MAAOtB,GAEP,KADOH,GAAMsnD,iBAAiBnnD,EAAG4lB,EAAGkK,KAAMA,GACpC9vB,IAIH,eAAS,GAAAsB,MAAAkvB,EAAA,EAAAA,EAAA3sB,UAAA/C,OAAA0vB,IAAAlvB,EAAAkvB,EAAA,GAAA3sB,UAAA2sB,EACd,IAAI3wB,GAA4BC,KAC5BgwB,EAAOxuB,EAAK,GACZskB,EAAK/lB,EAAKqnD,OAAOp3B,EAErB,IADAxuB,EAAK,GAAKskB,EAAGkK,KACsB,kBAAxBxuB,GAAKA,EAAKR,OAAO,GAAmB,CAC7C,GAAI6D,GAAKrD,EAAKA,EAAKR,OAAS,EAC5BQ,GAAKA,EAAKR,OAAS,GAAK,eAAS,GAAAQ,MAAAkvB,EAAA,EAAAA,EAAA3sB,UAAA/C,OAAA0vB,IAAAlvB,EAAAkvB,EAAA,GAAA3sB,UAAA2sB,EAC3BlvB,GAAKR,OAAS,GAAKQ,EAAK,YAAc+zC,GAAA4C,UACjCp4C,EAAMsnD,iBAAiB7lD,EAAK,GAAIskB,EAAGkK,KAAMA,GAElDnrB,EAAGxD,MAAM,KAAMG,IAGnB,MAAOskB,GAAG6vB,GAAGjmC,GAAMrO,MAAMykB,EAAG6vB,GAAIn0C,qMAhU/B8zC,EAAWp0C,EAAW,uBAC7BomD,EAAApmD,EAA+B,cAC/Bq0C,EAAAr0C,EAAkC,qBAC3By0C,EAAEz0C,EAAW,mBACb8uB,EAAI9uB,EAAW,QACtBmf,EAAAnf,EAAyB,gBAWzBqmD,EAAA,SAAA1/B,GAOE,QAAA0/B,KACE1/B,EAAA9mB,KAAAf,MAHMA,KAAAwnD,aAINxnD,KAAKynD,UAGLznD,KAAK0nD,OAAS,GAAIJ,GAAA,QA8PtB,MA1QiDx/B,GAAAy/B,EAAA1/B,GAkBxC0/B,EAAA//C,UAAAmgD,MAAP,SAAaC,EAAoBjS,GAK/B,GAJsB,MAAlBiS,EAAW,KACbA,EAAa,IAAIA,GAEnBA,EAAa53B,EAAKa,QAAQ+2B,GACtB5nD,KAAKynD,OAAOG,GACd,KAAM,IAAIrS,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,eAAiBwN,EAAa,qBAErEvnC,GAAAwnC,WAAWD,EAAY,IAAO5nD,KAAK0nD,QACnC1nD,KAAKynD,OAAOG,GAAcjS,EAC1B31C,KAAKwnD,UAAU1/C,KAAK8/C,GACpB5nD,KAAKwnD,UAAYxnD,KAAKwnD,UAAUvzC,KAAK,SAACxT,EAAGyT,GAAM,MAAAA,GAAElT,OAASP,EAAEO,UAGvDumD,EAAA//C,UAAAsgD,OAAP,SAAcF,GAKZ,GAJsB,MAAlBA,EAAW,KACbA,EAAa,IAAIA,GAEnBA,EAAa53B,EAAKa,QAAQ+2B,IACrB5nD,KAAKynD,OAAOG,GACf,KAAM,IAAIrS,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,eAAiBwN,EAAa,yBAKrE,WAHO5nD,MAAKynD,OAAOG,GACnB5nD,KAAKwnD,UAAUl2C,OAAOtR,KAAKwnD,UAAUhkC,QAAQokC,GAAa,GAEpC,MAAfA,GAC8C,IAA/C5nD,KAAK0nD,OAAOtO,YAAYwO,GAAY5mD,QACtChB,KAAK0nD,OAAOvO,UAAUyO,GACtBA,EAAa53B,EAAKyB,QAAQm2B,IAUzBL,EAAA//C,UAAA4/C,OAAP,SAAcp3B,GAEZ,IAAK,GADDw3B,GAAYxnD,KAAKwnD,UAAWx/C,EAAMw/C,EAAUxmD,OACvC+mD,EAAI,EAAGA,EAAI//C,EAAK+/C,IAAK,CAC5B,GAAIH,GAAaJ,EAAUO,EAE3B,IAAIH,EAAW5mD,QAAUgvB,EAAKhvB,QAAuC,IAA7BgvB,EAAKxM,QAAQokC,GAKnD,MAJA53B,GAAOA,EAAKe,OAAO62B,EAAW5mD,OAAS,EAAI4mD,EAAW5mD,OAAS,GAClD,KAATgvB,IACFA,EAAO,MAED2lB,GAAI31C,KAAKynD,OAAOG,GAAa53B,KAAMA,GAI/C,OAAQ2lB,GAAI31C,KAAK0nD,OAAQ13B,KAAMA,IAK1Bu3B,EAAA//C,UAAAovC,QAAP,WACE,MAAO,uBAGK2Q,EAAA9mC,YAAd,WACE,OAAO,GAGF8mC,EAAA//C,UAAAwgD,UAAP,SAAiBh4B,EAAcnrB,GAC7BA,EAAG,EAAG,IAGD0iD,EAAA//C,UAAA8wC,WAAP,WACE,OAAO,GAGFiP,EAAA//C,UAAA+wC,cAAP,WAEE,OAAO,GAGFgP,EAAA//C,UAAAgxC,cAAP,WACE,OAAO,GAGF+O,EAAA//C,UAAAmvC,cAAP,WACE,OAAO,GAQD4Q,EAAA//C,UAAA6/C,iBAAR,SAAyBx+C,EAAemnB,EAAci4B,GACpD,GAAIjkD,EAKJ,QAJI,KAAQA,EAAQ6E,EAAI2B,QAAQgZ,QAAQwM,MACtCnnB,EAAI2B,QAAU3B,EAAI2B,QAAQumB,OAAO,EAAG/sB,GAASikD,EAAWp/C,EAAI2B,QAAQumB,OAAO/sB,EAAQgsB,EAAKhvB,QACxF6H,EAAImnB,KAAOi4B,GAENp/C,GAQF0+C,EAAA//C,UAAA22C,OAAP,SAAcvF,EAAiBC,EAAiBh0C,GAE9C,GAAIqjD,GAASloD,KAAKonD,OAAOxO,GACrBuP,EAASnoD,KAAKonD,OAAOvO,EACzB,IAAIqP,EAAOvS,KAAOwS,EAAOxS,GAAI,CAC3B,GAAIjiB,GAAQ1zB,IACZ,OAAOkoD,GAAOvS,GAAGwI,OAAO+J,EAAOl4B,KAAMm4B,EAAOn4B,KAAM,SAAS9vB,GACrDA,GAAGwzB,EAAM2zB,iBAAiB3zB,EAAM2zB,iBAAiBnnD,EAAGgoD,EAAOl4B,KAAM4oB,GAAUuP,EAAOn4B,KAAM6oB,GAC5Fh0C,EAAG3E,KAMP,MAAOy1C,GAAGoC,SAASa,EAAS,SAAS/vC,EAAe4H,GAClD,MAAI5H,GACKhE,EAAGgE,OAEZ8sC,GAAGsH,UAAUpE,EAASpoC,EAAM,SAAS5H,GACnC,MAAIA,GACKhE,EAAGgE,OAEZ8sC,GAAG4J,OAAO3G,EAAS/zC,QAKlB0iD,EAAA//C,UAAAmxC,WAAP,SAAkBC,EAAiBC,GAEjC,GAAIqP,GAASloD,KAAKonD,OAAOxO,GACrBuP,EAASnoD,KAAKonD,OAAOvO,EACzB,IAAIqP,EAAOvS,KAAOwS,EAAOxS,GACvB,IACE,MAAOuS,GAAOvS,GAAGgD,WAAWuP,EAAOl4B,KAAMm4B,EAAOn4B,MAChD,MAAM9vB,GAEN,KADAF,MAAKqnD,iBAAiBrnD,KAAKqnD,iBAAiBnnD,EAAGgoD,EAAOl4B,KAAM4oB,GAAUuP,EAAOn4B,KAAM6oB,GAC7E34C,EAIV,GAAIuQ,GAAOklC,EAAGsD,aAAaL,EAE3B,OADAjD,GAAGkB,cAAcgC,EAASpoC,GACnBklC,EAAGuD,WAAWN,IAGhB2O,EAAA//C,UAAA4xC,YAAP,SAAmBlpB,GACjB,GAAIk4B,GAASpoD,KAAKonD,OAAOl3B,GAIrBpK,EAAK,IAGT,IAAIsiC,EAAOzS,KAAO31C,KAAK0nD,OACrB,IACE5hC,EAAK9lB,KAAK0nD,OAAOtO,YAAYlpB,GAC7B,MAAOhwB,IAKX,IACE,GAAImoD,GAAMD,EAAOzS,GAAGyD,YAAYgP,EAAOp4B,KACvC,OAAW,QAAPlK,EACKuiC,EAGAA,EAAIvjD,OAAOghB,EAAG5I,OAAO,SAAC5Q,GAAQ,MAAA+7C,GAAI7kC,QAAQlX,MAAS,KAE5D,MAAMpM,GACN,GAAW,OAAP4lB,EACF,KAAM9lB,MAAKqnD,iBAAiBnnD,EAAGkoD,EAAOp4B,KAAME,EAG5C,OAAOpK,KAKNyhC,EAAA//C,UAAAkwC,QAAP,SAAexnB,EAAWrrB,GAA1B,GAAA6uB,GAAA1zB,KACMooD,EAASpoD,KAAKonD,OAAOl3B,EACzBk4B,GAAOzS,GAAG+B,QAAQ0Q,EAAOp4B,KAAM,SAACnnB,EAAK8uC,GACnC,GAAIyQ,EAAOzS,KAAOjiB,EAAKg0B,OACrB,IACE,GAAI5hC,GAAK4N,EAAKg0B,OAAOtO,YAAYlpB,EAG/BynB,GAFEA,EAEMA,EAAM7yC,OAAOghB,EAAG5I,OAAO,SAAC5Q,GAAQ,MAAAqrC,GAAMn0B,QAAQlX,MAAS,KAEvDwZ,EAEV,MAAO5lB,GAEP,GAAI2I,EACF,MAAOhE,GAAG6uB,EAAK2zB,iBAAiBx+C,EAAKu/C,EAAOp4B,KAAME,QAGjD,IAAIrnB,EAET,MAAOhE,GAAG6uB,EAAK2zB,iBAAiBx+C,EAAKu/C,EAAOp4B,KAAME,GAGpDrrB,GAAG,KAAM8yC,MAIN4P,EAAA//C,UAAA2xC,UAAP,SAAiBjpB,GACf,GAAIk4B,GAASpoD,KAAKonD,OAAOl3B,EACzB,IAAIlwB,KAAKsoD,iBAAiBp4B,GACxB,KAAMqlB,GAAA4C,SAAS6L,UAAU9zB,EAEzB,KACEk4B,EAAOzS,GAAGwD,UAAUiP,EAAOp4B,MAC3B,MAAO9vB,GACP,KAAMF,MAAKqnD,iBAAiBnnD,EAAGkoD,EAAOp4B,KAAME,KAQ1Cq3B,EAAA//C,UAAA8gD,iBAAR,SAAyBp4B,GAEvB,IAAK,GADDq4B,GAAcvoD,KAAKwnD,UAAWx/C,EAAMugD,EAAYvnD,OAC3CwnD,EAAI,EAAGA,EAAIxgD,EAAKwgD,IAAK,CAC5B,GAAIC,GAAKF,EAAYC,EACrB,IAAIC,EAAGznD,QAAUkvB,EAAElvB,QAAUynD,EAAGzlD,MAAM,EAAGktB,EAAElvB,UAAYkvB,EACrD,OAAO,EAGX,OAAO,GAGFq3B,EAAA//C,UAAAg4C,MAAP,SAAatvB,EAAWrrB,GAAxB,GAAA6uB,GAAA1zB,KACMooD,EAASpoD,KAAKonD,OAAOl3B,EACrBlwB,MAAKsoD,iBAAiBp4B,GACxBrrB,EAAG0wC,EAAA4C,SAAS6L,UAAU9zB,IAEtBk4B,EAAOzS,GAAG6J,MAAM4I,EAAOp4B,KAAM,SAACnnB,GAC5BhE,EAAGgE,EAAM6qB,EAAK2zB,iBAAiBx+C,EAAKu/C,EAAOp4B,KAAME,GAAK,SAI9Dq3B,GA1QiDjS,EAAYqK,eAA7DngD,GAAAmtB,YAAA,aAiUA,KAAK,GAZD+7B,KAEA,SAAU,SAAU,aAEpB,OAAQ,QAAS,WAAY,aAE7B,OAAQ,WAAY,QAAS,WAE7B,UAEA,YAAa,eAER/nD,EAAI,EAAGA,EAAI+nD,EAAS1nD,OAAQL,IAEnC,IAAK,GADDgoD,GAAOD,EAAS/nD,GACX+mB,EAAI,EAAGA,EAAIihC,EAAK3nD,OAAQ0mB,IAAK,CACpC,GAAIkhC,GAASD,EAAKjhC,EACX6/B,GAAoB//C,UAAWohD,GAAU3B,EAAU2B,GAAQ,EAAOjoD,EAAI,GACtE4mD,EAAoB//C,UAAWohD,EAAS,QAAU3B,EAAU2B,EAAS,QAAQ,EAAMjoD,EAAI,oKCxUlG,SAAAkoD,GAA0BpvB,GACxB,MAAO,KAAQA,EAGjB,QAAA2d,GAAiB73C,GACf,MAAO6hD,GAAArK,SAASC,YAAYz3C,oMAnB9B6gD,EAAAl/C,EAAyC,uBACzCq0C,EAAAr0C,EAAkC,qBAClCkgD,EAAAlgD,EAAmC,qBAInC4nD,EAAA5nD,EAA0B,2BAC1B6nD,EAAA7nD,EAAqB,wBACd8uB,EAAI9uB,EAAW,QAClB8nD,EAAkB,qBAgBtBC,EAAA,SAAAphC,GACE,QAAAohC,GAAYtT,EAAuB3lB,EAAc4lB,EAAgBoC,EAAcvnC,GAC7EoX,EAAA9mB,KAAAf,KAAM21C,EAAI3lB,EAAM4lB,EAAMoC,EAAOvnC,GA6BjC,MA/B0BqX,GAAAmhC,EAAAphC,GAKjBohC,EAAAzhD,UAAAqM,KAAP,SAAYhP,GAAZ,GAAA6uB,GAAA1zB,IACE,OAAKA,MAAK+1C,cAKV/1C,MAAKg2C,IAAIkT,WAAWlpD,KAAM,SAAC6I,GACzB6qB,EAAKwiB,aACLrxC,EAAGgE,SANHhE,GAAG,OAUAokD,EAAAzhD,UAAAsuC,SAAP,WACM91C,KAAK+1C,YACP/1C,KAAKg2C,IAAIC,UAAUj2C,MACnBA,KAAKk2C,eAIF+S,EAAAzhD,UAAAo2C,MAAP,SAAa/4C,GACX7E,KAAK6T,KAAKhP,IAGLokD,EAAAzhD,UAAA2uC,UAAP,WACEn2C,KAAK81C,YAETmT,GA/B0BH,EAAA1S,aAsC1B+S,EAAA,SAAAthC,GAQE,QAAAshC,GAAYnsB,EAAsB6M,GAIhC,GAHAhiB,EAAA9mB,KAAAf,MANMA,KAAAu2C,gBAA0B,EAC1Bv2C,KAAAw2C,wBACAx2C,KAAAopD,iBACAppD,KAAAqpD,WAAmB,KAIzBrpD,KAAKspD,UAAYtsB,EACjBh9B,KAAKupD,UAAY1f,EACb7pC,KAAKspD,UAAUhR,aACjB,KAAM,IAAI/C,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,0CAgyB3C,MA7yBuCtyB,GAAAqhC,EAAAthC,GAiB7BshC,EAAA3hD,UAAA0wC,iBAAR,WACE,IAAKl4C,KAAKu2C,eACR,KAAM,IAAIhB,GAAA4C,SAAS5C,EAAA6C,UAAUC,MAAO,6GAIhC8Q,EAAA3hD,UAAAgiD,eAAR,SAAuB3kD,GACrB,QAAK7E,KAAKu2C,iBACR1xC,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUC,MAAO,8GAC1B,IAKJ8Q,EAAA3hD,UAAAiiD,wBAAP,WACE,OACE5f,SAAU7pC,KAAKupD,UACfvsB,SAAUh9B,KAAKspD,YAIXH,EAAA3hD,UAAAkiD,6BAAR,SAAqCx5B,EAAWrrB,GAM9C,QAAA8kD,GAAkB9gD,EAAegtC,GAC3BhtC,GACF+gD,EAAS9hD,KAAKk3C,GACdA,EAAShvB,EAAKyB,QAAQutB,GACtBtrB,EAAM41B,UAAUzT,KAAKmJ,GAAQ,EAAO2K,IAEpCE,IAIJ,QAAAA,KACE,IAAKD,EAAS5oD,OACZ,MAAO6D,IAGT,IAAIgY,GAAM+sC,EAASrlD,KACnBmvB,GAAM61B,UAAU1T,KAAKh5B,GAAK,EAAO,SAAChU,EAAemvC,GAE/C,MAAKA,OAILtkB,GAAM41B,UAAUpM,MAAMrgC,EAAKm7B,EAAMve,KAAM,SAAC5wB,GACtC,MAAIA,GACKhE,EAAGgE,OAEZghD,OAPOhlD,MAxBb,GAAIm6C,GAAShvB,EAAKyB,QAAQvB,GACtB05B,KACAl2B,EAAQ1zB,IAEZA,MAAKspD,UAAUzT,KAAKmJ,GAAQ,EAAO2K,IAqC7BR,EAAA3hD,UAAAsiD,wBAAR,SAAgC55B,GAE9B,IAFF,GAAAwD,GAAA1zB,KACMg/C,EAAShvB,EAAKyB,QAAQvB,GAAI05B,MACtB5pD,KAAKspD,UAAUjQ,WAAW2F,IAChC4K,EAAS9hD,KAAKk3C,GACdA,EAAShvB,EAAKyB,QAAQutB,EAExB4K,GAAWA,EAASl0C,UAEpBk0C,EAAStrC,QAAQ,SAAC4R,GAChBwD,EAAK41B,UAAU7R,UAAUvnB,EAAGwD,EAAKolB,SAAS5oB,GAAG,GAAOuJ,SAI1C0vB,EAAA1oC,YAAd,WACE,OAAO,GAGF0oC,EAAA3hD,UAAA0hD,WAAP,SAAkBhL,EAAsCr5C,GAAxD,GAAA6uB,GAAA1zB,IACEA,MAAK0pD,6BAA6BxL,EAAKpH,UAAW,SAACjuC,GACjD,MAAIA,GACKhE,EAAGgE,OAEZ6qB,GAAK41B,UAAUrM,UAAUiB,EAAKpH,UAAWoH,EAAKxK,YAAa,KAAM0D,EAAQ,KAAM8G,EAAKjH,WAAWxd,KAAM50B,MAIlGskD,EAAA3hD,UAAAyuC,UAAP,SAAiBiI,GACfl+C,KAAK8pD,wBAAwB5L,EAAKpH,WAClC92C,KAAKspD,UAAUzS,cAAcqH,EAAKpH,UAAWoH,EAAKxK,YAAa,KAAM0D,EAAQ,KAAM8G,EAAKjH,WAAWxd,OAG9F0vB,EAAA3hD,UAAAovC,QAAP,WACE,MAAO,aAMFuS,EAAA3hD,UAAA6vC,WAAP,SAAkBxyC,GAAlB,GAAA6uB,GAAA1zB,KACQ+pD,EAAgB/pD,KAAKw2C,qBAErB3oC,EAAM,SAAC3N,GACXwzB,EAAK6iB,gBAAkBr2C,EACvBwzB,EAAK8iB,wBACLuT,EAAczrC,QAAQ,SAAEzZ,GAAO,MAAAA,GAAG3E,KAIpC,OAAIF,MAAKu2C,eACA1xC,KAGTklD,EAAcjiD,KAAKjD,QAEU,IAAzBklD,EAAc/oD,QAKlBhB,KAAKspD,UAAUvR,SAASiR,EAAiB,OAAQ5R,EAAQ,KAAM,SAACvuC,EAAe4H,GAC7E,GAAI5H,GAEF,GAAIA,EAAImhD,QAAUzU,EAAA6C,UAAUoC,OAC1B,MAAO3sC,GAAIhF,OAGb4H,GAAK1B,MAAM,MAAMuP,QAAQ,SAAC0R,GAIxB0D,EAAK01B,cAAcp5B,EAAKhtB,MAAM,IAA2B,MAArBgtB,EAAKhtB,MAAM,EAAG,IAItD0wB,GAAK41B,UAAU5K,KAAKsK,EAAiB5R,EAAQ,KAAM,IAAO,SAACvuC,EAAegxB,GACnEhxB,IACH6qB,EAAK21B,WAAaxvB,GAEpBhsB,EAAIhF,UAKHsgD,EAAA3hD,UAAA8wC,WAAP,WAA+B,OAAO,GAC/B6Q,EAAA3hD,UAAAmvC,cAAP,WAAkC,MAAO32C,MAAKupD,UAAU5S,iBAAmB32C,KAAKspD,UAAU3S,iBACnFwS,EAAA3hD,UAAA+wC,cAAP,WAAkC,OAAO,GAClC4Q,EAAA3hD,UAAAgxC,cAAP,WAAkC,MAAOx4C,MAAKupD,UAAU/Q,iBAAmBx4C,KAAKspD,UAAU9Q,iBAElF2Q,EAAA3hD,UAAAyiD,WAAR,SAAmB/5B,GACjBlwB,KAAKopD,cAAcl5B,IAAK,CACxB,IAAIpG,GAAO,GAAIjJ,GAAO,IAAMqP,EAAI,KAChClwB,MAAKqpD,WAAWa,UAAUpgC,EAAM,EAAGA,EAAK9oB,OAAQ,MAChDhB,KAAKqpD,WAAWvT,YAGVqT,EAAA3hD,UAAA2iD,aAAR,SAAqBj6B,GACnB,GAAIlwB,KAAKopD,cAAcl5B,GAAI,CACzBlwB,KAAKopD,cAAcl5B,IAAK,CACxB,IAAIpG,GAAO,GAAIjJ,GAAO,IAAMqP,EAC5BlwB,MAAKqpD,WAAWa,UAAUpgC,EAAM,EAAGA,EAAK9oB,OAAQ,MAChDhB,KAAKqpD,WAAWvT,aAIbqT,EAAA3hD,UAAA22C,OAAP,SAAcvF,EAAiBC,EAAiBh0C,GAAhD,GAAA6uB,GAAA1zB,IACE,IAAKA,KAAKwpD,eAAe3kD,GAEzB,MAAI+zC,KAAYC,EACPh0C,QAGT7E,MAAK61C,KAAK+C,GAAS,EAAO,SAACwR,EAAkBC,GAC3C,MAAID,GACKvlD,EAAGulD,GAGL12B,EAAKmiB,KAAKgD,GAAS,EAAO,SAACyR,EAAkBC,GAMlD,QAAAC,GAAyB7S,GACvB,GAAIuG,GAAOvG,EAAM9rC,OACjB,KAAKqyC,EACH,MAAOr5C,IAGT,IAAI4lD,GAAUz6B,EAAKa,QAAQ+nB,EAASsF,GAChCwM,EAAU16B,EAAKa,QAAQgoB,EAASqF,EAGpCl+C,MAAKm+C,OAAOsM,EAASC,EAAS,SAAC7hD,GAC7B,MAAIA,GACKhE,EAAGgE,OAEZ2hD,GAAgB7S,KAIpB,GAAIle,GAAO,GAKX,IAAI4wB,EAASpS,cAAe,CAC1B,GAAIqS,EACF,MAAIA,GAAON,QAAUzU,EAAA6C,UAAUoC,OACtB31C,EAAGylD,GAGL52B,EAAK41B,UAAU/I,OAAO3H,EAAS,SAAC2H,GAErC,MAAIA,GACK7sB,EAAK41B,UAAUnL,OAAOvF,EAASC,EAASh0C,OAGjD6uB,GAAK41B,UAAUpM,MAAMrE,EAASpf,EAAM,SAACkxB,GACnC,MAAIA,GACK9lD,EAAG8lD,OAGZj3B,GAAK61B,UAAU7R,QAAQkB,EAAS,SAAC/vC,EAAe8uC,GAC9C,MAAI9uC,GACKhE,QAET2lD,GAAgB7S,QAOxB,IADAle,EAAO8wB,EAAS9wB,MACX8wB,EAAStS,cACZ,MAAOpzC,GAAG0wC,EAAA4C,SAASkH,QAAQxG,GAG7BnlB,GAAKgkB,QAAQmB,EAAS,SAAC+R,EAAsBjT,GAC3C,MAAIA,IAASA,EAAM32C,OACV6D,EAAG0wC,EAAA4C,SAAS6L,UAAUnL,QAG/BnlB,GAAK61B,UAAU7R,QAAQkB,EAAS,SAAC/vC,EAAe8uC,GAC9C,MAAI9uC,GACKhE,QAET2lD,GAAgB7S,OAKtB,MAAI4S,IAAYA,EAAStS,cAChBpzC,EAAG0wC,EAAA4C,SAASmH,OAAOzG,QAG5BnlB,GAAKqkB,SAASa,EAAS,KAAMxB,EAAQ,KAAM,SAACvuC,EAAe4H,GACzD,MAAI5H,GACKhE,EAAGgE,GAGL6qB,EAAKupB,UAAUpE,EAASpoC,EAAM,KAAM2mC,EAAQ,KAAMiT,EAAS5wB,KAAM,SAAC5wB,GACvE,MAAIA,GACKhE,EAAGgE,GAEL6qB,EAAK6rB,OAAO3G,EAAS/zC,YAO/BskD,EAAA3hD,UAAAmxC,WAAP,SAAkBC,EAAiBC,GAAnC,GAAAnlB,GAAA1zB,IACEA,MAAKk4C,kBAEL,IAAImS,GAAWrqD,KAAK84C,SAASF,GAAS,EACtC,IAAIyR,EAASpS,cAAe,CAE1B,GAAIW,IAAYC,EACd,MAGF,IAAIpf,GAAO,GACX,IAAIz5B,KAAKq5C,WAAWR,GAAU,CAC5B,GAAIb,GAAQh4C,KAAK84C,SAASD,GAAS,GACjCpf,EAAOue,EAAMve,IACf,KAAIue,EAAMC,cAKR,KAAM1C,GAAA4C,SAASkH,QAAQxG,EAJvB,IAAI74C,KAAKo5C,YAAYP,GAAS73C,OAAS,EACrC,KAAMu0C,GAAA4C,SAAS6L,UAAUnL,GAS3B74C,KAAKspD,UAAUjQ,WAAWT,GAC5B54C,KAAKspD,UAAU3Q,WAAWC,EAASC,GACzB74C,KAAKspD,UAAUjQ,WAAWR,IACpC74C,KAAKspD,UAAU7R,UAAUoB,EAASpf,GAKhCz5B,KAAKupD,UAAUlQ,WAAWT,IAC5B54C,KAAKupD,UAAUnQ,YAAYR,GAASt6B,QAAQ,SAAC5O,GAE3CgkB,EAAKilB,WAAW3oB,EAAKa,QAAQ+nB,EAASlpC,GAAOsgB,EAAKa,QAAQgoB,EAASnpC,UAGlE,CACL,GAAI1P,KAAKq5C,WAAWR,IAAY74C,KAAK84C,SAASD,GAAS,GAAOZ,cAC5D,KAAM1C,GAAA4C,SAASmH,OAAOzG,EAGxB74C,MAAK62C,cAAcgC,EACjB74C,KAAKi5C,aAAaL,EAAS,KAAMxB,EAAQ,MAAO,KAAMA,EAAQ,KAAMiT,EAAS5wB,MAG7Emf,IAAYC,GAAW74C,KAAKq5C,WAAWT,IACzC54C,KAAKk5C,WAAWN,IAIbuQ,EAAA3hD,UAAAquC,KAAP,SAAY3lB,EAAW6oB,EAAmBl0C,GAA1C,GAAA6uB,GAAA1zB,IACOA,MAAKwpD,eAAe3kD,IACzB7E,KAAKspD,UAAUzT,KAAK3lB,EAAG6oB,EAAS,SAAClwC,EAAegtC,GAC1ChtC,GAAOA,EAAImhD,QAAUzU,EAAA6C,UAAUoC,QAC7B9mB,EAAK01B,cAAcl5B,IACrBrrB,EAAG0wC,EAAA4C,SAASqC,OAAOtqB,IAErBwD,EAAK61B,UAAU1T,KAAK3lB,EAAG6oB,EAAS,SAAClwC,EAAegtC,GAC1CA,IAIFA,EAAOA,EAAKgV,QACZhV,EAAKpc,KAAOovB,EAAiBhT,EAAKpc,OAEpC50B,EAAGgE,EAAKgtC,MAGVhxC,EAAGgE,EAAKgtC,MAKPsT,EAAA3hD,UAAAsxC,SAAP,SAAgB5oB,EAAW6oB,GACzB/4C,KAAKk4C,kBACL,KACE,MAAOl4C,MAAKspD,UAAUxQ,SAAS5oB,EAAG6oB,GAClC,MAAO74C,GACP,GAAIF,KAAKopD,cAAcl5B,GACrB,KAAMqlB,GAAA4C,SAASqC,OAAOtqB,EAExB,IAAI46B,GAAU9qD,KAAKupD,UAAUzQ,SAAS5oB,EAAG6oB,GAAS8R,OAIlD,OADAC,GAAQrxB,KAAOovB,EAAiBiC,EAAQrxB,MACjCqxB,IAIJ3B,EAAA3hD,UAAAk3C,KAAP,SAAYxuB,EAAW0lB,EAAgBnc,EAAc50B,GAArD,GAAA6uB,GAAA1zB,IACOA,MAAKwpD,eAAe3kD,IACzB7E,KAAK61C,KAAK3lB,GAAG,EAAO,SAACrnB,EAAemvC,GAClC,GAAIA,EACF,OAAQpC,EAAKmV,oBACb,IAAK3J,GAAAoC,WAAWwH,cACd,MAAOt3B,GAAKg2B,6BAA6Bx5B,EAAG,SAACrnB,GAC3C,MAAIA,GACKhE,EAAGgE,OAEZ6qB,GAAK41B,UAAU5K,KAAKxuB,EAAG0lB,EAAMnc,EAAM50B,IAEvC,KAAKu8C,GAAAoC,WAAWyH,IACd,MAAOv3B,GAAK41B,UAAU/I,OAAOrwB,EAAG,SAACqwB,GAC3BA,EACF7sB,EAAK41B,UAAU5K,KAAKxuB,EAAG0lB,EAAMnc,EAAM50B,IAInCmzC,EAAQA,EAAM6S,QACd7S,EAAMve,KAAOA,EACb/F,EAAK61B,UAAUxR,SAAS7nB,EAAG,KAAMknB,EAAQ,KAAM,SAAC8T,EAAuBz6C,GACrE,GAAIy6C,EACF,MAAOrmD,GAAGqmD,EAERlT,GAAM/d,QAAS,IACjB+d,EAAM/d,KAAOxpB,EAAKzP,OAEpB,IAAIzB,GAAI,GAAI0pD,GAAYv1B,EAAMxD,EAAG0lB,EAAMoC,EAAOvnC,EAC9C5L,GAAG,KAAMtF,OAIjB,SACE,MAAOsF,GAAG0wC,EAAA4C,SAASsH,OAAOvvB,QAG5B,QAAO0lB,EAAK2N,uBACZ,IAAKnC,GAAAoC,WAAWC,YACd,MAAO/vB,GAAKg2B,6BAA6Bx5B,EAAG,SAACrnB,GAC3C,MAAIA,GACKhE,EAAGgE,GAEL6qB,EAAK41B,UAAU5K,KAAKxuB,EAAG0lB,EAAMnc,EAAM50B,IAE9C,SACE,MAAOA,GAAG0wC,EAAA4C,SAASqC,OAAOtqB,QAM3Bi5B,EAAA3hD,UAAAwxC,SAAP,SAAgB9oB,EAAW0lB,EAAgBnc,GAEzC,GADAz5B,KAAKk4C,mBACDl4C,KAAKq5C,WAAWnpB,GAClB,OAAQ0lB,EAAKmV,oBACX,IAAK3J,GAAAoC,WAAWwH,cAEd,MADAhrD,MAAK8pD,wBAAwB55B,GACtBlwB,KAAKspD,UAAUtQ,SAAS9oB,EAAG0lB,EAAMnc,EAC1C,KAAK2nB,GAAAoC,WAAWyH,IACd,GAAIjrD,KAAKspD,UAAUjQ,WAAWnpB,GAC5B,MAAOlwB,MAAKspD,UAAUtQ,SAAS9oB,EAAG0lB,EAAMnc,EAGxC,IAAIue,GAAQh4C,KAAKupD,UAAUzQ,SAAS5oB,GAAG,GAAO26B,OAE9C,OADA7S,GAAMve,KAAOA,EACN,GAAIwvB,GAAYjpD,KAAMkwB,EAAG0lB,EAAMoC,EAAOh4C,KAAKupD,UAAUtQ,aAAa/oB,EAAG,KAAMknB,EAAQ,MAE9F,SACE,KAAM7B,GAAA4C,SAASsH,OAAOvvB,OAG1B,QAAO0lB,EAAK2N,uBACV,IAAKnC,GAAAoC,WAAWC,YAEd,MADAzjD,MAAK8pD,wBAAwB55B,GACtBlwB,KAAKspD,UAAUtQ,SAAS9oB,EAAG0lB,EAAMnc,EAC1C,SACE,KAAM8b,GAAA4C,SAASqC,OAAOtqB,KAKvBi5B,EAAA3hD,UAAA+3C,OAAP,SAAcrvB,EAAWrrB,GAAzB,GAAA6uB,GAAA1zB,IACOA,MAAKwpD,eAAe3kD,IACzB7E,KAAKugD,OAAOrwB,EAAG,SAACqwB,GACd,MAAKA,OAGL7sB,GAAK41B,UAAU/I,OAAOrwB,EAAG,SAACi7B,GACxB,MAAIA,GACKz3B,EAAK41B,UAAU/J,OAAOrvB,EAAG,SAACrnB,GAC/B,MAAIA,GACKhE,EAAGgE,OAGZ6qB,GAAK6sB,OAAOrwB,EAAG,SAACk7B,GACVA,GACF13B,EAAKu2B,WAAW/5B,GAElBrrB,EAAG,WAMP6uB,EAAKu2B,WAAW/5B;IAChBrrB,GAAG,SApBEA,EAAG0wC,EAAA4C,SAASqC,OAAOtqB,OA0BzBi5B,EAAA3hD,UAAA0xC,WAAP,SAAkBhpB,GAEhB,GADAlwB,KAAKk4C,oBACDl4C,KAAKq5C,WAAWnpB,GAUlB,KAAMqlB,GAAA4C,SAASqC,OAAOtqB,EATlBlwB,MAAKspD,UAAUjQ,WAAWnpB,IAC5BlwB,KAAKspD,UAAUpQ,WAAWhpB,GAIxBlwB,KAAKq5C,WAAWnpB,IAClBlwB,KAAKiqD,WAAW/5B,IAOfi5B,EAAA3hD,UAAAg4C,MAAP,SAAatvB,EAAWrrB,GAAxB,GAAA6uB,GAAA1zB,IACE,IAAKA,KAAKwpD,eAAe3kD,GAAzB,CAEA,GAAIwmD,GAAa,WACf33B,EAAKgkB,QAAQxnB,EAAG,SAACrnB,EAAe8uC,GAC9B,MAAI9uC,GACKhE,EAAGgE,GAGR8uC,EAAM32C,OACD6D,EAAG0wC,EAAA4C,SAAS6L,UAAU9zB,KAG/BwD,EAAKu2B,WAAW/5B,OAChBrrB,GAAG,SAIP7E,MAAKugD,OAAOrwB,EAAG,SAACqwB,GACd,MAAKA,OAIL7sB,GAAK41B,UAAU/I,OAAOrwB,EAAG,SAACi7B,GACpBA,EACFz3B,EAAK41B,UAAU9J,MAAMtvB,EAAG,SAACrnB,GACvB,MAAIA,GACKhE,EAAGgE,OAGZ6qB,GAAK61B,UAAUhJ,OAAOrwB,EAAG,SAACk7B,GACpBA,EACFC,IAEAxmD,QAKNwmD,MAnBKxmD,EAAG0wC,EAAA4C,SAASqC,OAAOtqB,QAyBzBi5B,EAAA3hD,UAAA2xC,UAAP,SAAiBjpB,GAEf,GADAlwB,KAAKk4C,oBACDl4C,KAAKq5C,WAAWnpB,GAalB,KAAMqlB,GAAA4C,SAASqC,OAAOtqB,EATtB,IAHIlwB,KAAKspD,UAAUjQ,WAAWnpB,IAC5BlwB,KAAKspD,UAAUnQ,UAAUjpB,GAEvBlwB,KAAKq5C,WAAWnpB,GAAI,CAEtB,GAAIlwB,KAAKo5C,YAAYlpB,GAAGlvB,OAAS,EAC/B,KAAMu0C,GAAA4C,SAAS6L,UAAU9zB,EAEzBlwB,MAAKiqD,WAAW/5B,KAQjBi5B,EAAA3hD,UAAA01C,MAAP,SAAahtB,EAAWuJ,EAAc50B,GAAtC,GAAA6uB,GAAA1zB,IACOA,MAAKwpD,eAAe3kD,IACzB7E,KAAKugD,OAAOrwB,EAAG,SAACqwB,GACd,MAAIA,GACK17C,EAAG0wC,EAAA4C,SAASsH,OAAOvvB,QAK5BwD,GAAKg2B,6BAA6Bx5B,EAAG,SAACrnB,GACpC,MAAIA,GACKhE,EAAGgE,OAEZ6qB,GAAK41B,UAAUpM,MAAMhtB,EAAGuJ,EAAM50B,QAK7BskD,EAAA3hD,UAAAiwC,UAAP,SAAiBvnB,EAAWuJ,GAE1B,GADAz5B,KAAKk4C,mBACDl4C,KAAKq5C,WAAWnpB,GAClB,KAAMqlB,GAAA4C,SAASsH,OAAOvvB,EAItBlwB,MAAK8pD,wBAAwB55B,GAC7BlwB,KAAKspD,UAAU7R,UAAUvnB,EAAGuJ,IAIzB0vB,EAAA3hD,UAAAkwC,QAAP,SAAexnB,EAAWrrB,GAA1B,GAAA6uB,GAAA1zB,IACOA,MAAKwpD,eAAe3kD,IACzB7E,KAAK61C,KAAK3lB,GAAG,EAAO,SAACrnB,EAAeyiD,GAClC,MAAIziD,GACKhE,EAAGgE,GAGPyiD,EAASrT,kBAIdvkB,GAAK41B,UAAU5R,QAAQxnB,EAAG,SAACrnB,EAAe0iD,GACxC,MAAI1iD,IAAoB,WAAbA,EAAIhI,KACNgE,EAAGgE,KACDA,GAAQ0iD,IACjBA,UAGF73B,GAAK61B,UAAU7R,QAAQxnB,EAAG,SAACrnB,EAAe2iD,IAGpC3iD,GAAQ2iD,IACVA,KAIF,IAAIvP,GAAqBsP,EAAOzmD,OAAO0mD,GACnCC,KACAC,EAAWzP,EAAS/+B,OAAO,SAACyuC,GAC9B,GAAIpoD,IAAUkoD,EAAQE,KAAWj4B,EAAK01B,cAAcl5B,EAAI,IAAMy7B,EAE9D,OADAF,GAAQE,IAAS,EACVpoD,GAGTsB,GAAG,KAAM6mD,QA1BJ7mD,EAAG0wC,EAAA4C,SAASkH,QAAQnvB,OAgC1Bi5B,EAAA3hD,UAAA4xC,YAAP,SAAmBlpB,GAAnB,GAAAwD,GAAA1zB,IACEA,MAAKk4C,kBACL,IAAIoT,GAAWtrD,KAAK84C,SAAS5oB,GAAG,EAChC,KAAKo7B,EAASrT,cACZ,KAAM1C,GAAA4C,SAASkH,QAAQnvB,EAIzB,IAAI+rB,KACJ,KACEA,EAAWA,EAASn3C,OAAO9E,KAAKspD,UAAUlQ,YAAYlpB,IACtD,MAAOhwB,IAET,IACE+7C,EAAWA,EAASn3C,OAAO9E,KAAKupD,UAAUnQ,YAAYlpB,IACtD,MAAOhwB,IAET,GAAIurD,KACJ,OAAOxP,GAAS/+B,OAAO,SAAC0uC,GACtB,GAAIroD,GAA4BO,SAAnB2nD,EAAQG,IAAwBl4B,EAAK01B,cAAcl5B,EAAI,IAAM07B,MAAW,CAErF,OADAH,GAAQG,IAAS,EACVroD,KAIJ4lD,EAAA3hD,UAAA+4C,OAAP,SAAcrwB,EAAWrrB,GAAzB,GAAA6uB,GAAA1zB,IAGEA,MAAKk4C,mBACLl4C,KAAKspD,UAAU/I,OAAOrwB,EAAG,SAAC27B,GACxB,MAAIA,GACKhnD,GAAG,OAGZ6uB,GAAK61B,UAAUhJ,OAAOrwB,EAAG,SAAC47B,GACxBjnD,EAAGinD,GAAkBp4B,EAAK01B,cAAcl5B,MAAO,QAK9Ci5B,EAAA3hD,UAAA6xC,WAAP,SAAkBnpB,GAEhB,MADAlwB,MAAKk4C,mBACEl4C,KAAKspD,UAAUjQ,WAAWnpB,IAAOlwB,KAAKupD,UAAUlQ,WAAWnpB,IAAMlwB,KAAKopD,cAAcl5B,MAAO,GAG7Fi5B,EAAA3hD,UAAAukD,MAAP,SAAa77B,EAAWqpB,EAAmB9f,EAAc50B,GAAzD,GAAA6uB,GAAA1zB,IACOA,MAAKwpD,eAAe3kD,IACzB7E,KAAKgsD,uBAAuB97B,EAAG,SAACrnB,GAC9B,MAAIA,GACKhE,EAAGgE,OAEV6qB,GAAK41B,UAAUyC,MAAM77B,EAAGqpB,EAAU9f,EAAM50B,MAKvCskD,EAAA3hD,UAAA8xC,UAAP,SAAiBppB,EAAWqpB,EAAmB9f,GAA/C,GAAA/F,GAAA1zB,IACEA,MAAKk4C,mBACLl4C,KAAKisD,kBAAkB/7B,EAAG,WACxBwD,EAAK41B,UAAUhQ,UAAUppB,EAAGqpB,EAAU9f,MAInC0vB,EAAA3hD,UAAA0kD,MAAP,SAAah8B,EAAWqpB,EAAmBvhB,EAAaH,EAAahzB,GAArE,GAAA6uB,GAAA1zB,IACOA,MAAKwpD,eAAe3kD,IACzB7E,KAAKgsD,uBAAuB97B,EAAG,SAACrnB,GAC9B,MAAIA,GACKhE,EAAGgE,OAEV6qB,GAAK41B,UAAU4C,MAAMh8B,EAAGqpB,EAAUvhB,EAAKH,EAAKhzB,MAK3CskD,EAAA3hD,UAAAgyC,UAAP,SAAiBtpB,EAAWupB,EAAmBzhB,EAAaH,GAA5D,GAAAnE,GAAA1zB,IACEA,MAAKk4C,mBACLl4C,KAAKisD,kBAAkB/7B,EAAG,WACxBwD,EAAK41B,UAAU9P,UAAUtpB,EAAGupB,EAAUzhB,EAAKH,MAIxCsxB,EAAA3hD,UAAA2kD,OAAP,SAAcj8B,EAAWypB,EAAaC,EAAa/0C,GAAnD,GAAA6uB,GAAA1zB,IACOA,MAAKwpD,eAAe3kD,IACzB7E,KAAKgsD,uBAAuB97B,EAAG,SAACrnB,GAC9B,MAAIA,GACKhE,EAAGgE,OAEV6qB,GAAK41B,UAAU6C,OAAOj8B,EAAGypB,EAAOC,EAAO/0C,MAKtCskD,EAAA3hD,UAAAkyC,WAAP,SAAkBxpB,EAAWypB,EAAaC,GAA1C,GAAAlmB,GAAA1zB,IACEA,MAAKk4C,mBACLl4C,KAAKisD,kBAAkB/7B,EAAG,WACxBwD,EAAK41B,UAAU5P,WAAWxpB,EAAGypB,EAAOC,MAShCuP,EAAA3hD,UAAAykD,kBAAR,SAA0B/7B,EAAW3wB,GACnC,IAAIS,KAAKq5C,WAAWnpB,GAQlB,KAAMqlB,GAAA4C,SAASqC,OAAOtqB,EAPjBlwB,MAAKspD,UAAUjQ,WAAWnpB,IAG7BlwB,KAAKosD,eAAel8B,GAEtB3wB,KAMI4pD,EAAA3hD,UAAAwkD,uBAAR,SAA+B97B,EAAWrrB,GAA1C,GAAA6uB,GAAA1zB,IACEA,MAAKugD,OAAOrwB,EAAG,SAACqwB,GACd,MAAKA,OAIL7sB,GAAK41B,UAAU/I,OAAOrwB,EAAG,SAAC27B,GACxB,MAAIA,OACFhnD,KAEO6uB,EAAK24B,oBAAoBn8B,EAAGrrB,KAP9BA,EAAG0wC,EAAA4C,SAASqC,OAAOtqB,OAiBxBi5B,EAAA3hD,UAAA4kD,eAAR,SAAuBl8B,GACrB,GAAIo8B,GAAStsD,KAAK84C,SAAS5oB,GAAG,EAC1Bo8B,GAAOrU,cACTj4C,KAAKspD,UAAU7R,UAAUvnB,EAAGo8B,EAAO7yB,MAEnCz5B,KAAK62C,cAAc3mB,EACjBlwB,KAAKupD,UAAUtQ,aAAa/oB,EAAG,KAAMknB,EAAQ,MAAO,KACpDA,EAAQ,KAAMp3C,KAAK84C,SAAS5oB,GAAG,GAAOuJ,OAIpC0vB,EAAA3hD,UAAA6kD,oBAAR,SAA4Bn8B,EAAWrrB,GAAvC,GAAA6uB,GAAA1zB,IACEA,MAAK61C,KAAK3lB,GAAG,EAAO,SAACrnB,EAAeyjD,GAClC,MAAIzjD,GACKhE,EAAGgE,GAGRyjD,EAAOrU,cACFvkB,EAAK41B,UAAUpM,MAAMhtB,EAAGo8B,EAAO7yB,KAAM50B,OAI9C6uB,GAAK61B,UAAUxR,SAAS7nB,EAAG,KAAMknB,EAAQ,KAAM,SAACvuC,EAAe4H,GAC7D,MAAI5H,GACKhE,EAAGgE,OAGZ6qB,GAAKupB,UAAU/sB,EAAGzf,EAAM,KAAM2mC,EAAQ,KAAMkV,EAAO7yB,KAAM50B,QAIjEskD,GA7yBuC/I,EAAAT,eAA1BngD,GAAA2pD,kBAAiBA,CA+yB9B,IAAAoD,GAAA,SAAA1kC,GACC,QAAA0kC,GAAYvvB,EAAsB6M,GACjChiB,EAAA9mB,KAAAf,KAAM,GAAImpD,GAAkBnsB,EAAU6M,IAcxC,MAhBuC/hB,GAAAykC,EAAA1kC,GAKtC0kC,EAAA/kD,UAAA6vC,WAAA,SAAWxyC,GACVgjB,EAAArgB,UAAM6vC,WAAUt2C,KAAAf,KAAC6E,IAGX0nD,EAAA9rC,YAAP,WACC,MAAO0oC,GAAkB1oC,eAG1B8rC,EAAA/kD,UAAAiiD,wBAAA,WACC,MAAO5hC,GAAArgB,UAAMglD,cAAazrD,KAAAf,MAAGypD,2BAE/B8C,GAhBuCxD,EAAA,QAAvCvpD,GAAAmtB,YAAA,wPCjqBA,SAAA8/B,GAA8BvsD,GAC5B,OACEyB,KAAM+qD,EAAeC,UACrBC,UAAWC,EAA4B3sD,EAAE4sD,kBAI7C,QAAAC,GAA8B7sD,GAC5B,MAAOq1C,GAAA4C,SAAS6U,WAAWC,EAA4B/sD,EAAE0sD,YAY3D,QAAAM,GAA2BhtD,GACzB,OACEyB,KAAM+qD,EAAeS,MACrBz9C,KAAMxP,EAAEwP,KACRlF,QAAStK,EAAEsK,QACX4iD,MAAOltD,EAAEktD,OAIb,QAAAC,GAA2BntD,GACzB,GAAIotD,GAEAxtD,EAAOI,EAAEwP,KACS,mBAAZ,KACR49C,EAAQ1sD,MAEV,IAAIiI,GAAM,GAAIykD,GAAMptD,EAAEsK,QAEtB,OADA3B,GAAIukD,MAAQltD,EAAEktD,MACPvkD,EAQT,QAAA0kD,GAA2BvV,GACzB,OACEr2C,KAAM+qD,EAAec,MACrBC,UAAWZ,EAA4B7U,EAAM0V,aAIjD,QAAAC,GAA2B3V,GACzB,MAAOsD,GAAA,QAAM0R,WAAWC,EAA4BjV,EAAMyV,YAO5D,QAAAG,GAA8BhY,GAC5B,OACEj0C,KAAM+qD,EAAemB,SACrBC,QAASlY,EAAKmY,iBAIlB,QAAAC,GAA8BC,GAC5B,MAAOzY,GAAUuB,SAASC,YAAYiX,EAAWH,SAOnD,QAAAjB,GAAqC/iC,GACnC,MAAOzJ,GAAAq9B,mBAAmB5zB,GAG5B,QAAAmjC,GAAqCnjC,GACnC,MAAOzJ,GAAAw+B,mBAAmB/0B,GAG5B,QAAAokC,GAA4BpkC,GAC1B,OACEnoB,KAAM+qD,EAAeyB,OACrB19C,KAAMo8C,EAA4B/iC,IAItC,QAAAskC,GAA4BC,GAC1B,MAAOpB,GAA4BoB,EAAQ59C,MAQ7C,QAAA69C,GAAsB79C,GACpB,MAAe,OAARA,GAAgC,gBAATA,IAAqBA,EAAKzK,eAAe,qBAAuByK,EAAuB,iBAQvH,QAAA89C,GAAuB99C,GACrB,MAAe,OAARA,GAAgC,gBAATA,IAAqBA,EAAKzK,eAAe,qBAAuByK,EAAuB,oBA7SlHi8C,gMAdEpX,EAAWp0C,EAAW,uBAC7Bq0C,EAAAr0C,EAAuB,qBAChBs0C,EAASt0C,EAAW,qBAC3Bmf,EAAAnf,EAAqD,gBAC9Cg9C,EAAIh9C,EAAW,gBACtBo6C,EAAAp6C,EAAyC,yBAClCu0C,EAAYv0C,EAAW,2BACvBpB,EAAMoB,EAAW,kBACjBy0C,EAAEz0C,EAAW,oBAMpB,SAAKwrD,GAEHA,EAAAA,EAAA,GAAA,GAAA,KAEAA,EAAAA,EAAA,GAAA,GAAA,KAEAA,EAAAA,EAAA,UAAA,GAAA,YAEAA,EAAAA,EAAA,MAAA,GAAA,QAEAA,EAAAA,EAAA,MAAA,GAAA,QAEAA,EAAAA,EAAA,SAAA,GAAA,WAEAA,EAAAA,EAAA,OAAA,GAAA,SAEAA,EAAAA,EAAA,MAAA,GAAA,SAhBGA,IAAAA,MAsCL,IAAA8B,GAAA,WAAA,QAAAA,KACUxuD,KAAAyuD,cACAzuD,KAAA0uD,QAAkB,EAgB5B,MAdSF,GAAAhnD,UAAAmnD,YAAP,SAAmB9pD,GACjB,GAAI+pD,GAAK5uD,KAAK0uD,SAEd,OADA1uD,MAAKyuD,WAAWG,GAAM/pD,GAEpBlD,KAAM+qD,EAAemC,GACrBD,GAAIA,IAIDJ,EAAAhnD,UAAAsnD,WAAP,SAAkBF,GAChB,GAAI/pD,GAAK7E,KAAKyuD,WAAWG,EAEzB,cADO5uD,MAAKyuD,WAAWG,GAChB/pD,GAEX2pD,KAeAO,EAAA,WAAA,QAAAA,KACU/uD,KAAAgvD,oBACAhvD,KAAA0uD,QAAkB,EA+G5B,MA7GSK,GAAAvnD,UAAAmnD,YAAP,SAAmB90B,EAAe3J,EAAW0lB,EAA0B/wC,GACrE,GACE4L,GACAolC,EAFE+Y,EAAK5uD,KAAK0uD,SAId1uD,MAAKgvD,iBAAiBJ,GAAM/0B,EAG5BA,EAAGgc,KAAK,SAAChtC,EAAKmvC,GACRnvC,EACFhE,EAAGgE,IAEHgtC,EAAOgX,EAA4B7U,EAAM0V,YAErC9X,EAAKmJ,aACPllB,EAAGsS,KAAK,GAAItrB,GAAOm3B,EAAM/d,MAAO,EAAG+d,EAAM/d,KAAM,EAAG,SAACpxB,EAAKomD,EAAWnlC,GAC7DjhB,EACFhE,EAAGgE,IAEH4H,EAAOo8C,EAA4B/iC,GACnCjlB,EAAG,MACDlD,KAAM+qD,EAAewC,GACrBN,GAAIA,EACJn+C,KAAMA,EACNolC,KAAMA,EACN7lB,KAAME,EACN0lB,KAAMA,EAAKmY,qBAOjBlpD,EAAG,MACDlD,KAAM+qD,EAAewC,GACrBN,GAAIA,EACJn+C,KAAM,GAAI0S,aAAY,GACtB0yB,KAAMA,EACN7lB,KAAME,EACN0lB,KAAMA,EAAKmY,sBAObgB,EAAAvnD,UAAA2nD,gBAAR,SAAwBC,EAAmCvqD,GACzD,GAAIg1B,GAAK75B,KAAKgvD,iBAAiBI,EAASR,IACtCn+C,EAAOw8C,EAA4BmC,EAAS3+C,MAC5C4+C,EAAc/T,EAAA,QAAM0R,WAAWC,EAA4BmC,EAASvZ,OAGlED,EAAOJ,EAAUuB,SAASC,YAAYoY,EAASxZ,KAC/CA,GAAK0Z,cAGPz1B,EAAGrY,MAAM/Q,EAAM,EAAGA,EAAKzP,OAAQ40C,EAAK2Z,eAAiB11B,EAAG21B,SAAW,EAAG,SAACtvD,GACrE,QAAAuvD,KAEE51B,EAAGgc,KAAK,SAAC31C,EAAG83C,GACN93C,EACF2E,EAAG3E,GAEC83C,EAAMve,OAAS41B,EAAY51B,KAC7BI,EAAGkyB,MAAMsD,EAAY51B,KAAM,SAACv5B,GAC1B2E,EAAG3E,EAAG25B,KAGRh1B,EAAG3E,EAAG25B,KAKV35B,EACF2E,EAAG3E,GAKE01C,EAAK2Z,eAKRE,IAJA51B,EAAGioB,SAASrxC,EAAKzP,OAAQ,WACvByuD,QAQR5qD,EAAG,KAAMg1B,IAINk1B,EAAAvnD,UAAAkoD,kBAAP,SAAyBC,EAAsB9qD,GAA/C,GAAA6uB,GAAA1zB,KACM4vD,EAAkCD,EAAQnuD,KAAK,EACnDxB,MAAKmvD,gBAAgBS,EAAO,SAAC/mD,EAAKgxB,GAC5BhxB,EACFhE,EAAGgE,GAGIgxB,EAAI81B,EAAQrlB,QAAQ,SAACpqC,GACH,UAAnByvD,EAAQrlB,cACH5W,GAAKs7B,iBAAiBY,EAAMhB,IAErC/pD,EAAG3E,QAKb6uD,KA2HAc,EAAA,SAAAhoC,GAGE,QAAAgoC,GAAY7Z,EAAeuH,EAAeC,EAA2BC,EAAcqS,EAAoB7T,GACrGp0B,EAAA9mB,KAAAf,KAAMg2C,EAAKuH,EAAOC,EAAOC,EAAOxB,GAChCj8C,KAAK+vD,YAAcD,EAsCvB,MA3CyBhoC,GAAA+nC,EAAAhoC,GAQhBgoC,EAAAroD,UAAAwoD,cAAP,WACE,MAAOhwD,MAAK+vD,aAGPF,EAAAroD,UAAAmnD,YAAP,WACE,OACEhtD,KAAM+qD,EAAewC,GACrBN,GAAI5uD,KAAK+vD,YACTt/C,KAAMo8C,EAA4B7sD,KAAK0zC,aACvCmC,KAAMgX,EAA4B7sD,KAAKi3C,WAAWyW,YAClD19B,KAAMhwB,KAAK82C,UACXlB,KAAM51C,KAAKo3C,UAAU2W,kBAIjB8B,EAAAroD,UAAAyoD,WAAR,SAAmBtuD,EAAckD,GAAjC,GAAA6uB,GAAA1zB,IACMA,MAAK+1C,UACK/1C,KAAKg2C,IAAKka,UAAUvuD,EAAM3B,KAAM,SAACE,GACtCA,GACHwzB,EAAKwiB,aAEPrxC,EAAG3E,KAGL2E,KAIGgrD,EAAAroD,UAAAqM,KAAP,SAAYhP,GACV7E,KAAKiwD,WAAW,OAAQprD,IAGnBgrD,EAAAroD,UAAAo2C,MAAP,SAAa/4C,GACX7E,KAAKiwD,WAAW,QAASprD,IAE7BgrD,GA3CyBpa,EAAaW,aAoEtC+Z,EAAA,SAAAtoC,GAkBE,QAAAsoC,GAAY7/C,GAlBd,GAAAojB,GAAA1zB,IAmBI6nB,GAAA9mB,KAAAf,MAjBMA,KAAAowD,mBAAqB,GAAI5B,GAEzBxuD,KAAAu2C,gBAA0B,EAC1Bv2C,KAAAqwD,aAAuB,EACvBrwD,KAAAswD,eAAyB,EACzBtwD,KAAAuwD,eAAyB,EAKzBvwD,KAAAwwD,wBAQNxwD,KAAKywD,QAAUngD,EACftQ,KAAKywD,QAAQC,iBAAiB,UAAU,SAACxwD,GACvC,GAAIywD,GAAezwD,EAAEuQ,IACrB,IAAI89C,EAAcoC,GAAO,CACvB,GAAIhwD,GAAWa,EAAOmvD,EAAKnvD,KAAMovD,EAAY,GAAI1sD,OAAM1C,EAAKR,OAE5D,KAAKL,EAAI,EAAGA,EAAIiwD,EAAU5vD,OAAQL,IAChCiwD,EAAUjwD,GAAK+yB,EAAKm9B,iBAAiBrvD,EAAKb,GAE5C+yB,GAAK08B,mBAAmBtB,WAAW6B,EAAKG,MAAMzvD,MAAM,KAAMuvD,MA8VlE,MA3XsC9oC,GAAAqoC,EAAAtoC,GAkCtBsoC,EAAA1vC,YAAd,WACE,MAAiC,mBAApB,gBAAsD,mBAAb,SAGjD0vC,EAAA3oD,UAAAovC,QAAP,WACE,MAAO,YAGDuZ,EAAA3oD,UAAAqpD,iBAAR,SAAyB3hD,GACvB,GAAW,MAAPA,EACF,MAAOA,EAET,cAAeA,IACb,IAAK,SACH,GAAmB,MAAfA,EAAU,MAAoC,gBAAhBA,GAAU,KAoB1C,MAAOA,EAnBP,IAAI6hD,GAAgC7hD,CACpC,QAAQ6hD,EAAWpvD,MACjB,IAAK+qD,GAAeC,UAClB,MAAOI,GAAyCgE,EAClD,KAAKrE,GAAewC,GAClB,GAAIU,GAAkCmB,CACtC,OAAO,IAAIlB,GAAW7vD,KAAM4vD,EAAM5/B,KAAMwlB,EAAUuB,SAASC,YAAY4Y,EAAMha,MAAO0F,EAAA,QAAM0R,WAAWC,EAA4B2C,EAAM/Z,OAAQ+Z,EAAMhB,GAAI3B,EAA4B2C,EAAMn/C,MAC7L,KAAKi8C,GAAec,MAClB,MAAOG,GAAmCoD,EAC5C,KAAKrE,GAAemB,SAClB,MAAOG,GAAyC+C,EAClD,KAAKrE,GAAeyB,OAClB,MAAOC,GAAqC2C,EAC9C,KAAKrE,GAAeS,MAClB,MAAOE,GAAmC0D,EAC5C,SACE,MAAO7hD,GAKf,QACE,MAAOA,KAONihD,EAAA3oD,UAAAwpD,iBAAP,SAAwB9hD,GACtB,GAAW,MAAPA,EACF,MAAOA,EAET,cAAeA,IACb,IAAK,SACH,MAAIA,aAAeosC,GAAA,QACViS,EAAkBr+C,GAChBA,YAAeqmC,GAAA4C,SACjBsU,EAAqBv9C,GACnBA,YAAe2gD,GACH3gD,EAAKy/C,cACjBz/C,YAAesmC,GAAUuB,SAC3B6W,EAAqB1+C,GACnBA,YAAe2R,GACjBqtC,EAAmBh/C,GACjBA,YAAetO,OACjBssD,EAAkBh+C,GAElB,kBAEX,KAAK,WACH,MAAOlP,MAAKowD,mBAAmBzB,YAAYz/C,EAC7C,SACE,MAAOA,KAONihD,EAAA3oD,UAAA6vC,WAAP,SAAkBxyC,GAAlB,GAAA6uB,GAAA1zB,IACE,IAAKA,KAAKu2C,eAcR1xC,QAdwB,CACxB,GAAI2F,IACFymD,kBAAkB,EAClB3mB,OAAQ,QACR9oC,MAAOxB,KAAKgxD,iBAAiB,GAAInwC,GAAO,IAAK7gB,KAAKowD,mBAAmBzB,YAAY,SAACuC,GAChFx9B,EAAK6iB,gBAAiB,EACtB7iB,EAAK28B,YAAca,EAAc5Y,WACjC5kB,EAAK48B,cAAgBY,EAAc3Y,cACnC7kB,EAAK68B,cAAgBW,EAAc1Y,cACnC3zC,OAGJ7E,MAAKywD,QAAQU,YAAY3mD,KAMtB2lD,EAAA3oD,UAAA8wC,WAAP,WAA+B,MAAOt4C,MAAKqwD,aACpCF,EAAA3oD,UAAAmvC,cAAP,WAAkC,OAAO,GAClCwZ,EAAA3oD,UAAA+wC,cAAP,WAAkC,MAAOv4C,MAAKswD,eACvCH,EAAA3oD,UAAAgxC,cAAP,WAAkC,MAAOx4C,MAAKuwD,eAEtCJ,EAAA3oD,UAAA4pD,KAAR,SAAaC,EAAoB7vD,GAC/B,GAIuCb,GAJnC6J,GACFymD,kBAAkB,EAClB3mB,OAAQ+mB,EACR7vD,KAAM,MACLovD,EAAY,GAAI1sD,OAAM1C,EAAKR,OAC9B,KAAKL,EAAI,EAAGA,EAAIa,EAAKR,OAAQL,IAC3BiwD,EAAUjwD,GAAKX,KAAKgxD,iBAAiBxvD,EAAKb,GAE5C6J,GAAQhJ,KAAOovD,EACf5wD,KAAKywD,QAAQU,YAAY3mD,IAGpB2lD,EAAA3oD,UAAA22C,OAAP,SAAcvF,EAAiBC,EAAiBh0C,GAC9C7E,KAAKoxD,KAAK,SAAUrtD,YAEfosD,EAAA3oD,UAAAquC,KAAP,SAAY3lB,EAAW6oB,EAAkBl0C,GACvC7E,KAAKoxD,KAAK,OAAQrtD,YAEbosD,EAAA3oD,UAAAk3C,KAAP,SAAYxuB,EAAW0lB,EAA0Bnc,EAAc50B,GAC7D7E,KAAKoxD,KAAK,OAAQrtD,YAEbosD,EAAA3oD,UAAA+3C,OAAP,SAAcrvB,EAAWrrB,GACvB7E,KAAKoxD,KAAK,SAAUrtD,YAEfosD,EAAA3oD,UAAAg4C,MAAP,SAAatvB,EAAWrrB,GACtB7E,KAAKoxD,KAAK,QAASrtD,YAEdosD,EAAA3oD,UAAA01C,MAAP,SAAahtB,EAAWuJ,EAAc50B,GACpC7E,KAAKoxD,KAAK,QAASrtD,YAEdosD,EAAA3oD,UAAAkwC,QAAP,SAAexnB,EAAWrrB,GACxB7E,KAAKoxD,KAAK,UAAWrtD,YAEhBosD,EAAA3oD,UAAA+4C,OAAP,SAAcrwB,EAAWrrB,GACvB7E,KAAKoxD,KAAK,SAAUrtD,YAEfosD,EAAA3oD,UAAA8pD,SAAP,SAAgBphC,EAAWgrB,EAAmCr2C,GAC5D7E,KAAKoxD,KAAK,WAAYrtD,YAEjBosD,EAAA3oD,UAAAs6C,SAAP,SAAgB5xB,EAAWloB,EAAanD,GACtC7E,KAAKoxD,KAAK,WAAYrtD,YAEjBosD,EAAA3oD,UAAAuwC,SAAP,SAAgBwZ,EAAepvC,EAAkByzB,EAA0B/wC,GACzE7E,KAAKoxD,KAAK,WAAYrtD,YAEjBosD,EAAA3oD,UAAAy1C,UAAP,SAAiBsU,EAAe9gD,EAAW0R,EAAkByzB,EAA0Bnc,EAAc50B,GACnG7E,KAAKoxD,KAAK,YAAartD,YAElBosD,EAAA3oD,UAAAgqD,WAAP,SAAkBD,EAAe9gD,EAAW0R,EAAkByzB,EAA0Bnc,EAAc50B,GACpG7E,KAAKoxD,KAAK,aAAcrtD,YAEnBosD,EAAA3oD,UAAAukD,MAAP,SAAa77B,EAAWqpB,EAAmB9f,EAAc50B,GACvD7E,KAAKoxD,KAAK,QAASrtD,YAEdosD,EAAA3oD,UAAA0kD,MAAP,SAAah8B,EAAWupB,EAAmBzhB,EAAaH,EAAahzB,GACnE7E,KAAKoxD,KAAK,QAASrtD,YAEdosD,EAAA3oD,UAAA2kD,OAAP,SAAcj8B,EAAWypB,EAAaC,EAAa/0C,GACjD7E,KAAKoxD,KAAK,SAAUrtD,YAEfosD,EAAA3oD,UAAAiqD,KAAP,SAAYC,EAAiBC,EAAiB9sD,GAC5C7E,KAAKoxD,KAAK,OAAQrtD,YAEbosD,EAAA3oD,UAAAoqD,QAAP,SAAeF,EAAiBC,EAAiBhwD,EAAckD,GAC7D7E,KAAKoxD,KAAK,UAAWrtD,YAEhBosD,EAAA3oD,UAAAqqD,SAAP,SAAgB3hC,EAAWrrB,GACzB7E,KAAKoxD,KAAK,WAAYrtD,YAGjBosD,EAAA3oD,UAAA0oD,UAAP,SAAiB5lB,EAAgBzQ,EAAeh1B,GAC9C7E,KAAKywD,QAAQU,aACXF,kBAAkB,EAClB3mB,OAAQA,EACR9oC,MAAqBq4B,EAAI80B,cAAe3uD,KAAKowD,mBAAmBzB,YAAY9pD,OAOlEsrD,EAAA2B,qBAAd,SAAmCxhD,GAGjC,QAAAyhD,GAAyB7iD,EAAU8iD,EAAoBntD,GACrD,aAAeqK,IACb,IAAK,SACCA,YAAeosC,GAAA,QACjBz2C,EAAG,KAAM0oD,EAAkBr+C,IAClBA,YAAeqmC,GAAA4C,SACxBtzC,EAAG,KAAM4nD,EAAqBv9C,IACrBA,YAAegvC,GAAK+T,SAE7BptD,EAAG,KAAMqtD,EAAYvD,YAAYz/C,EAAK8iD,EAAY,GAAIA,EAAY,GAAIntD,IAC7DqK,YAAesmC,GAAUuB,SAClClyC,EAAG,KAAM+oD,EAAqB1+C,IACrBA,YAAe2R,GACxBhc,EAAG,KAAMqpD,EAAmBh/C,IACnBA,YAAetO,OACxBiE,EAAG,KAAMqoD,EAAkBh+C,IAE3BrK,EAAG,KAAMqK,EAEX,MACF,SACErK,EAAG,KAAMqK,IAKf,QAAAijD,GAAyBjjD,EAAUkjD,GACjC,GAAW,MAAPljD,EACF,MAAOA,EAET,cAAeA,IACb,IAAK,SACH,GAA2B,gBAAhBA,GAAU,KAmEnB,MAAOA,EAlEP,IAAI6hD,GAAgC7hD,CACpC,QAAQ6hD,EAAWpvD,MACjB,IAAK+qD,GAAemC,GAClB,GAAIiC,GAA4B5hD,EAAK0/C,EACrC,OAAO,YAKL,QAAAyD,GAA2BxpD,GACrBypD,EAAY,IACdA,GAAY,EACZ9nD,GACEymD,kBAAkB,EAClBH,KAAMA,EACNtvD,MAAOirD,EAAqB5jD,KAE9ByH,EAAO6gD,YAAY3mD,IAZvB,GAAI7J,GACF6J,EADaomD,EAAY,GAAI1sD,OAAMH,UAAU/C,QAE7CsxD,EAAYvuD,UAAU/C,MAexB,KAAKL,EAAI,EAAGA,EAAIoD,UAAU/C,OAAQL,KAEhC,SAAEA,EAAWuO,GACX6iD,EAAgB7iD,EAAKkjD,EAAkB,SAACvpD,EAAK0pD,GAC3C3B,EAAUjwD,GAAK4xD,EACX1pD,EACFwpD,EAAkBxpD,GACO,MAAdypD,IACX9nD,GACEymD,kBAAkB,EAClBH,KAAMA,EACNtvD,KAAMovD,GAERtgD,EAAO6gD,YAAY3mD,OAGtB7J,EAAGoD,UAAUpD,GAGO,KAArBoD,UAAU/C,SACZwJ,GACEymD,kBAAkB,EAClBH,KAAMA,EACNtvD,KAAMovD,GAERtgD,EAAO6gD,YAAY3mD,IAIzB,KAAKkiD,GAAeC,UAClB,MAAOI,GAAyCgE,EAClD,KAAKrE,GAAec,MAClB,MAAOG,GAAmCoD,EAC5C,KAAKrE,GAAemB,SAClB,MAAOG,GAAyC+C,EAClD,KAAKrE,GAAeyB,OAClB,MAAOC,GAAqC2C,EAC9C,KAAKrE,GAAeS,MAClB,MAAOE,GAAmC0D,EAC5C,SAEE,MAAO7hD,GAKf,QACE,MAAOA,IAxGb,GAAIgjD,GAAc,GAAInD,EA4GtBz+C,GAAOogD,iBAAiB,UAAU,SAACxwD,GACjC,GAAIyvD,GAAkBzvD,EAAEuQ,IACxB,IAAI69C,EAAaqB,GAAU,CACzB,GAEEhvD,GAFEa,EAAOmuD,EAAQnuD,KACjBovD,EAAY,GAAI1sD,OAAW1C,EAAKR,OAGlC,QAAQ2uD,EAAQrlB,QACd,IAAK,QACL,IAAK,QACH,WAEE,GAAIkoB,GAA+BhxD,EAAK,EACxC0wD,GAAYxC,kBAAkBC,EAAS,SAAC9mD,GAEtC,GAAIy1C,IACF2S,kBAAkB,EAClBH,KAAM0B,EAAS5D,GACfptD,KAAMqH,GAAO4jD,EAAqB5jD,OAEpCyH,GAAO6gD,YAAY7S,OAGvB,MACF,KAAK,SACH,WACE,GAAIoJ,GAAkC/R,EAAG8c,YACvCD,EAA+BhxD,EAAK,GACpC0vD,GACEvvD,KAAM+qD,EAAegG,MACrBpa,WAAYoP,EAAOpP,aACnBC,cAAemP,EAAOnP,gBACtBC,cAAekP,EAAOlP,iBAExB8F,GACE2S,kBAAkB,EAClBH,KAAM0B,EAAS5D,GACfptD,MAAO0vD,GAGX5gD,GAAO6gD,YAAY7S,KAErB,MACF,SAEE,IAAK39C,EAAI,EAAGA,EAAIa,EAAKR,OAAQL,IAC3BiwD,EAAUjwD,GAAKwxD,EAAgB3wD,EAAKb,GAAIiwD,EAE1C,IAAI+B,GAAShd,EAAG8c,WACJE,GAAOhD,EAAQrlB,QAASjpC,MAAMsxD,EAAQ/B,QAM9DT,GA3XsC7a,EAAYqK,eAAlDngD,GAAAmtB,YAAA,iTCtXA,SAAAimC,GAAqB9oC,EAAc3H,EAAkBtd,GACnD,IACEA,EAAG,KAAMilB,EAAKvb,SAAS4T,IACvB,MAAOjiB,GACP2E,EAAG3E,qMAnBAo1C,EAAWp0C,EAAW,uBAC7Bq0C,EAAAr0C,EAAkC,qBAClCkgD,EAAAlgD,EAAmC,qBACnCmf,EAAAnf,EAA2B,gBAGpBu0C,EAAYv0C,EAAW,2BACvB2xD,EAAG3xD,EAAW,kBACrB4xD,EAAA5xD,EAA6E,yBAkB7E6xD,EAAA,SAAAlrC,GAUE,QAAAkrC,GAAYC,EAAkCC,GAAA,SAAAA,IAAAA,EAAA,IAC5CprC,EAAA9mB,KAAAf,MACKgzD,IACHA,EAAkB,cAGhBC,EAAUjyD,OAAS,GAAgD,MAA3CiyD,EAAUxmC,OAAOwmC,EAAUjyD,OAAS,KAC9DiyD,GAAwB,KAE1BjzD,KAAKizD,UAAYA,CAEjB,IAAIC,GAAkB,IACtB,IAAgC,gBAAtB,IAER,GADAA,EAAUlzD,KAAKmzD,iBAA0BH,EAAiB,SACrDE,EACH,KAAM,IAAItyD,OAAM,yDAGlBsyD,GAAUF,CAGZhzD,MAAKozD,OAASN,EAAAO,UAAUC,YAAYJ,GAgSxC,MA/T4CprC,GAAAirC,EAAAlrC,GAkCnCkrC,EAAAvrD,UAAAmK,MAAP,WACE3R,KAAKozD,OAAOG,aAAa,SAASrV,GAChCA,EAAKsV,UAAY,QAIbT,EAAAvrD,UAAAisD,WAAR,SAAmBC,GAIjB,MAH2B,MAAvBA,EAASjnC,OAAO,KAClBinC,EAAWA,EAAS1wD,MAAM,IAErBhD,KAAKizD,UAAYS,GAMnBX,EAAAvrD,UAAAmsD,sBAAP,SAA6B3jC,EAAcnrB,GACzCguD,EAAIe,iBAAiB5zD,KAAKyzD,WAAWzjC,GAAOnrB,IAEvCkuD,EAAAvrD,UAAAqsD,qBAAP,SAA4B7jC,GAC1B,MAAO6iC,GAAIiB,gBAAgB9zD,KAAKyzD,WAAWzjC,KASrC+iC,EAAAvrD,UAAAusD,kBAAR,SAA0B7jC,EAAWvuB,EAAckD,GACjDguD,EAAImB,kBAAkBh0D,KAAKyzD,WAAWvjC,GAAIvuB,EAAMkD,IAS1CkuD,EAAAvrD,UAAA2rD,iBAAR,SAAyBjjC,EAAWvuB,GAClC,MAAOkxD,GAAIoB,iBAAiBj0D,KAAKyzD,WAAWvjC,GAAIvuB,IAG3CoxD,EAAAvrD,UAAAovC,QAAP,WACE,MAAO,kBAGKmc,EAAAtyC,YAAd,WAEE,MAAiC,mBAAnByzC,iBAAqD,OAAnBA,gBAG3CnB,EAAAvrD,UAAAwgD,UAAP,SAAiBh4B,EAAcnrB,GAG7BA,EAAG,EAAG,IAGDkuD,EAAAvrD,UAAA8wC,WAAP,WACE,OAAO,GAGFya,EAAAvrD,UAAA+wC,cAAP,WACE,OAAO,GAGFwa,EAAAvrD,UAAAgxC,cAAP,WACE,OAAO,GAGFua,EAAAvrD,UAAAmvC,cAAP,WACE,OAAO,GAQFoc,EAAAvrD,UAAA2sD,YAAP,SAAmBnkC,EAAcxe,GAC/B,GAAI4iD,GAAQp0D,KAAKozD,OAAOiB,SAASrkC,EACjC,KAAI8iC,EAAAwB,YAAmBF,GAQrB,KAAM7e,GAAA4C,SAASmH,OAAOtvB,EAPtB,IAAc,OAAVokC,EACF,KAAM7e,GAAA4C,SAASqC,OAAOxqB,EAExB,IAAIgoB,GAAQoc,EAAMG,SAClBvc,GAAM/d,KAAOzoB,EAAOxQ,OACpBg3C,EAAMwb,UAAYhiD,GAMfuhD,EAAAvrD,UAAAquC,KAAP,SAAY7lB,EAAc+oB,EAAkBl0C,GAC1C,GAAIuvD,GAAQp0D,KAAKozD,OAAOiB,SAASrkC,EACjC,IAAc,OAAVokC,EACF,MAAOvvD,GAAG0wC,EAAA4C,SAASqC,OAAOxqB,GAE5B,IAAIgoB,EACA8a,GAAAwB,YAAmBF,IACrBpc,EAAQoc,EAAMG,UAEVvc,EAAM/d,KAAO,EACfj6B,KAAK2zD,sBAAsB3jC,EAAM,SAAS9vB,EAAa+5B,GACrD,MAAI/5B,GACK2E,EAAG3E,IAEZ83C,EAAM/d,KAAOA,MACbp1B,GAAG,KAAMmzC,EAAM6S,YAGjBhmD,EAAG,KAAMmzC,EAAM6S,UAERiI,EAAA0B,WAAWJ,IACpBpc,EAAQoc,EAAMnd,WACdpyC,EAAG,KAAMmzC,IAETnzC,EAAG0wC,EAAA4C,SAASsG,UAAUlJ,EAAA6C,UAAUgC,OAAQpqB,KAIrC+iC,EAAAvrD,UAAAsxC,SAAP,SAAgB9oB,EAAc+oB,GAC5B,GAAIqb,GAAQp0D,KAAKozD,OAAOiB,SAASrkC,EACjC,IAAc,OAAVokC,EACF,KAAM7e,GAAA4C,SAASqC,OAAOxqB,EAExB,IAAIgoB,EACJ,IAAI8a,EAAAwB,YAAmBF,GACrBpc,EAAQoc,EAAMG,UAEVvc,EAAM/d,KAAO,IACf+d,EAAM/d,KAAOj6B,KAAK6zD,qBAAqB7jC,QAEpC,CAAA,IAAI8iC,EAAA0B,WAAWJ,GAGpB,KAAM7e,GAAA4C,SAASsG,UAAUlJ,EAAA6C,UAAUgC,OAAQpqB,EAF3CgoB,GAAQoc,EAAMnd,WAIhB,MAAOe,IAGF+a,EAAAvrD,UAAAk3C,KAAP,SAAY1uB,EAAc0S,EAAiBjJ,EAAc50B,GAEvD,GAAI69B,EAAM4sB,cACR,MAAOzqD,GAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUC,MAAOroB,GAE1C,IAAI0D,GAAQ1zB,KAERo0D,EAAQp0D,KAAKozD,OAAOiB,SAASrkC,EACjC,IAAc,OAAVokC,EACF,MAAOvvD,GAAG0wC,EAAA4C,SAASqC,OAAOxqB,GAE5B,KAAI8iC,EAAAwB,YAAmBF,GA2BrB,MAAOvvD,GAAG0wC,EAAA4C,SAASmH,OAAOtvB,GA1B1B,IAAIgoB,GAAQoc,EAAMG,SAClB,QAAQ7xB,EAAMqoB,oBACZ,IAAK3J,GAAAoC,WAAWiR,gBAChB,IAAKrT,GAAAoC,WAAWwH,cACd,MAAOnmD,GAAG0wC,EAAA4C,SAASsH,OAAOzvB,GAC5B,KAAKoxB,GAAAoC,WAAWyH,IAGd,GAAuB,MAAnBjT,EAAMwb,UACR,MAAO3uD,GAAG,KAAM,GAAI4wC,GAAaif,WAAWhhC,EAAO1D,EAAM0S,EAAOsV,EAAM6S,QAAS7S,EAAMwb,WAGvFxzD,MAAK+zD,kBAAkB/jC,EAAM,SAAU,SAASnnB,EAAe2I,GAC7D,MAAI3I,GACKhE,EAAGgE,IAGZmvC,EAAM/d,KAAOzoB,EAAOxQ,OACpBg3C,EAAMwb,UAAYhiD,EACX3M,EAAG,KAAM,GAAI4wC,GAAaif,WAAWhhC,EAAO1D,EAAM0S,EAAOsV,EAAM6S,QAASr5C,MAEjF,MACF,SACE,MAAO3M,GAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,+BAO1C2Y,EAAAvrD,UAAAwxC,SAAP,SAAgBhpB,EAAc0S,EAAiBjJ,GAE7C,GAAIiJ,EAAM4sB,cACR,KAAM,IAAI/Z,GAAA4C,SAAS5C,EAAA6C,UAAUC,MAAOroB,EAGtC,IAAIokC,GAAQp0D,KAAKozD,OAAOiB,SAASrkC,EACjC,IAAc,OAAVokC,EACF,KAAM7e,GAAA4C,SAASqC,OAAOxqB,EAExB,KAAI8iC,EAAAwB,YAAmBF,GAsBrB,KAAM7e,GAAA4C,SAASmH,OAAOtvB,EArBtB,IAAIgoB,GAAQoc,EAAMG,SAClB,QAAQ7xB,EAAMqoB,oBACZ,IAAK3J,GAAAoC,WAAWiR,gBAChB,IAAKrT,GAAAoC,WAAWwH,cACd,KAAMzV,GAAA4C,SAASsH,OAAOzvB,EACxB,KAAKoxB,GAAAoC,WAAWyH,IAGd,GAAuB,MAAnBjT,EAAMwb,UACR,MAAO,IAAI/d,GAAaif,WAAW10D,KAAMgwB,EAAM0S,EAAOsV,EAAM6S,QAAS7S,EAAMwb,UAG7E,IAAIhiD,GAASxR,KAAKmzD,iBAAiBnjC,EAAM,SAIzC,OAFAgoB,GAAM/d,KAAOzoB,EAAOxQ,OACpBg3C,EAAMwb,UAAYhiD,EACX,GAAIikC,GAAaif,WAAW10D,KAAMgwB,EAAM0S,EAAOsV,EAAM6S,QAASr5C,EACvE,SACE,KAAM,IAAI+jC,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,8BAOtC2Y,EAAAvrD,UAAAkwC,QAAP,SAAe1nB,EAAcnrB,GAC3B,IACEA,EAAG,KAAM7E,KAAKo5C,YAAYppB,IAC1B,MAAO9vB,GACP2E,EAAG3E,KAIA6yD,EAAAvrD,UAAA4xC,YAAP,SAAmBppB,GAEjB,GAAIokC,GAAQp0D,KAAKozD,OAAOiB,SAASrkC,EACjC,IAAc,OAAVokC,EACF,KAAM7e,GAAA4C,SAASqC,OAAOxqB,EACjB,IAAI8iC,EAAA0B,WAAWJ,GACpB,MAAOA,GAAMO,YAEb,MAAMpf,GAAA4C,SAASkH,QAAQrvB,IAOpB+iC,EAAAvrD,UAAAuwC,SAAP,SAAgBwZ,EAAepvC,EAAkByzB,EAAgB/wC,GAE/D,GAAI+vD,GAAQ/vD,CAEZ7E,MAAK0+C,KAAK6S,EAAO3b,EAAM,IAAO,SAAS/sC,EAAegxB,GACpD,GAAIhxB,EACF,MAAOhE,GAAGgE,EAEZhE,GAAK,SAASgE,EAAeqG,GAC3B2qB,EAAG+jB,MAAM,SAASiX,GAIhB,MAHW,OAAPhsD,IACFA,EAAMgsD,GAEDD,EAAM/rD,EAAKqG,KAGtB,IAAI4lD,GAAmDj7B,EACnDk7B,EAAkBD,EAAOphB,WACZ,QAAbvxB,EACFtd,EAAGgE,EAAKwX,EAAA20C,aAAaD,IAErBnC,EAAYmC,EAAQ5yC,EAAUtd,MAQ7BkuD,EAAAvrD,UAAAyxC,aAAP,SAAoBsY,EAAepvC,EAAkByzB,GAEnD,GAAI/b,GAAK75B,KAAKg5C,SAASuY,EAAO3b,EAAM,IACpC,KACE,GAAIkf,GAAmDj7B,EACnDk7B,EAAkBD,EAAOphB,WAC7B,OAAiB,QAAbvxB,EACK9B,EAAA20C,aAAaD,GAEfA,EAAOxmD,SAAS4T,WAEvB0X,EAAGsc,cAGT4c,GA/T4Czd,EAAYqK,eAAxDngD,GAAAmtB,YAAA,uNCyEA,SAAAsoC,GAAoB10B,EAAc20B,GAIhC,GAAIC,GAAa,GAAPD,EAENE,GAAUF,GAAQ,EAAK,IAAO,EAC9BG,GAAQH,GAAQ,GAAK,KAIrBI,EAAgB,GAAP/0B,EACTg1B,EAAUh1B,GAAQ,EAAK,GACvBi1B,EAAOj1B,GAAQ,EACnB,OAAO,IAAIzM,MAAKuhC,EAAMD,EAAOD,EAAKK,EAAMD,EAAQD,GAQlD,QAAAG,GAAsB3rC,EAAkB4rC,EAAkBhyD,EAAe1C,GACvE,MAAe,KAAXA,EACK,GACE00D,EACF5rC,EAAKvb,SAAS,OAAQ7K,EAAOA,EAAQ1C,GAErC0sB,EAAA,QAAcnL,SAASuH,EAAK9mB,MAAMU,EAAOA,EAAQ1C,qMAhF5Du0C,EAAAr0C,EAAkC,qBAClCo6C,EAAAp6C,EAAyC,yBAClCo0C,EAAWp0C,EAAW,uBAE7BkgD,EAAAlgD,EAAmC,qBAC5Bu0C,EAAYv0C,EAAW,2BAC9Bmf,EAAAnf,EAAuE,gBACvEwsB,EAAAxsB,EAA0B,gCACtBgoC,EAIAhoC,EAAQ,8BAA8BgoC,WAC1C4pB,EAAA5xD,EAAsE,0BAMtE,SAAYy0D,GACVA,EAAAA,EAAA,MAAA,GAAA,QAAWA,EAAAA,EAAA,MAAA,GAAA,QAAWA,EAAAA,EAAA,QAAA,GAAA,UAAaA,EAAAA,EAAA,KAAA,GAAA,OAAUA,EAAAA,EAAA,OAAA,GAAA,SAAYA,EAAAA,EAAA,SAAA,GAAA,WACzDA,EAAAA,EAAA,SAAA,GAAA,WAAcA,EAAAA,EAAA,IAAA,GAAA,MAASA,EAAAA,EAAA,SAAA,GAAA,WAAcA,EAAAA,EAAA,KAAA,GAAA,OAAUA,EAAAA,EAAA,KAAA,IAAA,OAAWA,EAAAA,EAAA,IAAA,IAAA,MAAUA,EAAAA,EAAA,IAAA,IAAA,MACpEA,EAAAA,EAAA,WAAA,IAAA,aAAiBA,EAAAA,EAAA,KAAA,IAAA,OAAWA,EAAAA,EAAA,QAAA,IAAA,UAAcA,EAAAA,EAAA,KAAA,IAAA,OAAWA,EAAAA,EAAA,OAAA,IAAA,SAAaA,EAAAA,EAAA,OAAA,IAAA,SAClEA,EAAAA,EAAA,IAAA,IAAA,OAJUn2D,EAAAm2D,4BAAAn2D,EAAAm2D,8BAAAn2D,GAAAm2D,2BAUZ,SAAYC,GACVA,EAAAA,EAAA,OAAA,GAAA,SACAA,EAAAA,EAAA,OAAA,GAAA,SACAA,EAAAA,EAAA,UAAA,GAAA,YACAA,EAAAA,EAAA,UAAA,GAAA,YACAA,EAAAA,EAAA,UAAA,GAAA,YACAA,EAAAA,EAAA,UAAA,GAAA,YACAA,EAAAA,EAAA,QAAA,GAAA,UACAA,EAAAA,EAAA,QAAA,GAAA,UACAA,EAAAA,EAAA,UAAA,GAAA,YACAA,EAAAA,EAAA,UAAA,IAAA,YACAA,EAAAA,EAAA,MAAA,IAAA,QACAA,EAAAA,EAAA,KAAA,IAAA,OACAA,EAAAA,EAAA,UAAA,IAAA,YACAA,EAAAA,EAAA,KAAA,IAAA,OACAA,EAAAA,EAAA,QAAA,IAAA,UACAA,EAAAA,EAAA,KAAA,IAAA,QAhBUp2D,EAAAo2D,oBAAAp2D,EAAAo2D,sBAAZ,IAAYA,GAAAp2D,EAAAo2D,kBAmGZC,EAAA,WACE,QAAAA,GAAoBplD,GAClB,GADkBzQ,KAAAyQ,KAAAA,EACW,WAAzBA,EAAKsU,aAAa,GACpB,KAAM,IAAIwwB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,8DAAgEp6C,KAAKyQ,KAAKsU,aAAa,IAsClI,MAnCS8wC,GAAAruD,UAAAsuD,cAAP,WAAiC,MAAO91D,MAAKyQ,KAAKqU,aAAa,IACxD+wC,EAAAruD,UAAAk7B,MAAP,WAAyB,MAAO1iC,MAAKyQ,KAAKqU,aAAa,IAChD+wC,EAAAruD,UAAAuuD,kBAAP,WAAgD,MAAO/1D,MAAKyQ,KAAKqU,aAAa,IACvE+wC,EAAAruD,UAAAwuD,gBAAP,WAEE,MAAOf,GAAWj1D,KAAKyQ,KAAKqU,aAAa,IAAK9kB,KAAKyQ,KAAKqU,aAAa,MAEhE+wC,EAAAruD,UAAAyuD,mBAAP,WACE,MAAOj2D,MAAKyQ,KAAKsU,aAAa,KAEzB8wC,EAAAruD,UAAA0uD,MAAP,WAAyB,MAAOl2D,MAAKyQ,KAAKsU,aAAa,KAchD8wC,EAAAruD,UAAA2uD,eAAP,WAAkC,MAAOn2D,MAAKyQ,KAAKqU,aAAa,KACzD+wC,EAAAruD,UAAA4uD,iBAAP,WAAoC,MAAOp2D,MAAKyQ,KAAKqU,aAAa,KAC3D+wC,EAAAruD,UAAA6uD,SAAP,WACE,MAAOZ,GAAaz1D,KAAKyQ,KAAMzQ,KAAK01D,UAAW,GAAI11D,KAAKm2D,mBAEnDN,EAAAruD,UAAA8uD,WAAP,WACE,GAAI5yD,GAAQ,GAAK1D,KAAKm2D,gBACtB,OAAOn2D,MAAKyQ,KAAKzN,MAAMU,EAAOA,EAAQ1D,KAAKo2D,qBAEtCP,EAAAruD,UAAA+uD,UAAP,WAA6B,MAAO,IAAKv2D,KAAKm2D,iBAAmBn2D,KAAKo2D,oBAC/DP,EAAAruD,UAAAkuD,QAAP,WAA4B,MAAkC,SAAX,KAAf11D,KAAK0iC,UAC3CmzB,IAzCar2D,GAAAq2D,WAAUA,CAyDvB,IAAAW,GAAA,WACE,QAAAA,GAAoB3tB,EAA4B4tB,EAAkChmD,GAA9DzQ,KAAA6oC,OAAAA,EAA4B7oC,KAAAy2D,OAAAA,EAAkCz2D,KAAAyQ,KAAAA,EA6BpF,MA5BS+lD,GAAAhvD,UAAAkvD,WAAP,WAEE,GAAIX,GAAuC/1D,KAAK6oC,OAAOktB,mBACvD,QAAQA,GACN,IAAKH,GAAkBe,QACrB,GAAIlmD,GAAOy4B,EACT7oB,EAAAu2C,gBAAgB52D,KAAKyQ,KAAKzN,MAAM,EAAGhD,KAAKy2D,OAAOI,oBAC7CruB,UAAWxoC,KAAKy2D,OAAOK,oBAE3B,OAAOz2C,GAAA02C,gBAAgBtmD,EACzB,KAAKmlD,GAAkBoB,OAErB,MAAO32C,GAAA20C,aAAah1D,KAAKyQ,KAAM,EAAGzQ,KAAKy2D,OAAOK,mBAChD,SACE,GAAIpnD,GAAekmD,EAAkBG,EAErC,MADArmD,GAAOA,EAAOA,EAAO,YAAcqmD,EAC7B,GAAIxgB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,uCAAyCp6C,KAAK6oC,OAAOwtB,WAAa,MAAQ3mD,KAG9G8mD,EAAAhvD,UAAAyvD,UAAP,WACE,MAAOj3D,MAAK6oC,QAEP2tB,EAAAhvD,UAAA0vD,UAAP,WACE,MAAOl3D,MAAKy2D,QAEPD,EAAAhvD,UAAA2vD,WAAP,WACE,MAAOn3D,MAAKyQ,MAEhB+lD,IA9Bah3D,GAAAg3D,SAAQA,CAuCrB,IAAAY,GAAA,WACE,QAAAA,GAAoB3mD,GAAAzQ,KAAAyQ,KAAAA,EAItB,MAHS2mD,GAAA5vD,UAAA0uD,MAAP,WAAyB,MAAOl2D,MAAKyQ,KAAKsU,aAAa,IAChDqyC,EAAA5vD,UAAAqvD,eAAP,WAAkC,MAAO72D,MAAKyQ,KAAKsU,aAAa,IACzDqyC,EAAA5vD,UAAAsvD,iBAAP,WAAoC,MAAO92D,MAAKyQ,KAAKsU,aAAa,IACpEqyC,IALa53D,GAAA43D,eAAcA,CA+B3B,IAAAC,GAAA,WACE,QAAAA,GAAoB5mD,GAClB,GADkBzQ,KAAAyQ,KAAAA,EACgB,YAA9BzQ,KAAKyQ,KAAKsU,aAAa,GACzB,KAAM,IAAIwwB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,gDAAkDp6C,KAAKyQ,KAAKsU,aAAa,IAKpH,MAFSsyC,GAAA7vD,UAAAxG,OAAP,WAA0B,MAAOhB,MAAKyQ,KAAKsU,aAAa,IACjDsyC,EAAA7vD,UAAA8vD,eAAP,WAAsC,MAAOt3D,MAAKyQ,KAAKzN,MAAM,EAAG,EAAIhD,KAAKgB,WAC3Eq2D,IARa73D,GAAA63D,uBAAsBA,CA2BnC,IAAAE,GAAA,WACE,QAAAA,GAAoB9mD,GAClB,GADkBzQ,KAAAyQ,KAAAA,EACgB,WAA9BzQ,KAAKyQ,KAAKsU,aAAa,GACzB,KAAM,IAAIwwB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,wCAA0Cp6C,KAAKyQ,KAAKsU,aAAa,IAK5G,MAFSwyC,GAAA/vD,UAAAyyB,KAAP,WAAwB,MAAOj6B,MAAKyQ,KAAKqU,aAAa,IAC/CyyC,EAAA/vD,UAAAgwD,cAAP,WAAqC,MAAOx3D,MAAKyQ,KAAKzN,MAAM,EAAG,EAAIhD,KAAKi6B,SAC1Es9B,IARa/3D,GAAA+3D,iBAAgBA,CAmC7B,IAAAE,GAAA,WAGE,QAAAA,GAAoBC,EAA6BjnD,GAE/C,GAFkBzQ,KAAA03D,QAAAA,EAA6B13D,KAAAyQ,KAAAA,EAEb,WAA9BzQ,KAAKyQ,KAAKsU,aAAa,GACzB,KAAM,IAAIwwB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,qEAAuEp6C,KAAKyQ,KAAKsU,aAAa,GACrI/kB,MAAK23D,UAAY33D,KAAK43D,kBA4F1B,MA1FSH,GAAAjwD,UAAAqwD,cAAP,WAAiC,MAAO73D,MAAKyQ,KAAKqU,aAAa,IACxD2yC,EAAAjwD,UAAAsuD,cAAP,WAAiC,MAAO91D,MAAKyQ,KAAKqU,aAAa,IACxD2yC,EAAAjwD,UAAAouC,KAAP,WAAwB,MAAO51C,MAAKyQ,KAAKqU,aAAa,IAC/C2yC,EAAAjwD,UAAAuuD,kBAAP,WAAgD,MAAO/1D,MAAKyQ,KAAKqU,aAAa,KACvE2yC,EAAAjwD,UAAAwuD,gBAAP,WAEE,MAAOf,GAAWj1D,KAAKyQ,KAAKqU,aAAa,IAAK9kB,KAAKyQ,KAAKqU,aAAa,MAEhE2yC,EAAAjwD,UAAAyuD,mBAAP,WACE,MAAOj2D,MAAKyQ,KAAKsU,aAAa,KAEzB0yC,EAAAjwD,UAAA0uD,MAAP,WAAyB,MAAOl2D,MAAKyQ,KAAKsU,aAAa,KAChD0yC,EAAAjwD,UAAAqvD,eAAP,WAAkC,MAAO72D,MAAKyQ,KAAKsU,aAAa,KACzD0yC,EAAAjwD,UAAAsvD,iBAAP,WAAoC,MAAO92D,MAAKyQ,KAAKsU,aAAa,KAC3D0yC,EAAAjwD,UAAA2uD,eAAP,WAAkC,MAAOn2D,MAAKyQ,KAAKqU,aAAa,KACzD2yC,EAAAjwD,UAAA4uD,iBAAP,WAAoC,MAAOp2D,MAAKyQ,KAAKqU,aAAa,KAC3D2yC,EAAAjwD,UAAAswD,kBAAP,WAAqC,MAAO93D,MAAKyQ,KAAKqU,aAAa,KAC5D2yC,EAAAjwD,UAAAuwD,gBAAP,WAAmC,MAAO/3D,MAAKyQ,KAAKqU,aAAa,KAC1D2yC,EAAAjwD,UAAAwwD,mBAAP,WAAsC,MAAOh4D,MAAKyQ,KAAKqU,aAAa,KAC7D2yC,EAAAjwD,UAAAywD,mBAAP,WAAsC,MAAOj4D,MAAKyQ,KAAKsU,aAAa,KAC7D0yC,EAAAjwD,UAAA0wD,qBAAP,WAAwC,MAAOl4D,MAAKyQ,KAAKsU,aAAa,KAC/D0yC,EAAAjwD,UAAAowD,gBAAP,WAcE,GAAIvB,GAAmBZ,EAAaz1D,KAAKyQ,KAAMzQ,KAAK01D,UAAW,GAAI11D,KAAKm2D,iBACxE,OAAOE,GAAS5zD,QAAQ,MAAO,MAE1Bg1D,EAAAjwD,UAAA6uD,SAAP,WACE,MAAOr2D,MAAK23D,WAEPF,EAAAjwD,UAAA2wD,YAAP,WACE,MAAOn4D,MAAKyQ,KAAKzN,MAAM,GAAI,GAAKhD,KAAKm2D,mBAEhCsB,EAAAjwD,UAAA8uD,WAAP,WACE,GAAI5yD,GAAQ,GAAK1D,KAAKm2D,gBACtB,OAAOn2D,MAAKyQ,KAAKzN,MAAMU,EAAOA,EAAQ1D,KAAKo2D,qBAEtCqB,EAAAjwD,UAAA4wD,YAAP,WACE,GAAI10D,GAAQ,GAAK1D,KAAKm2D,iBAAmBn2D,KAAKo2D,kBAC9C,OAAOX,GAAaz1D,KAAKyQ,KAAMzQ,KAAK01D,UAAWhyD,EAAO1D,KAAK83D,sBAEtDL,EAAAjwD,UAAA6wD,eAAP,WACE,GAAI30D,GAAQ,GAAK1D,KAAKm2D,iBAAmBn2D,KAAKo2D,kBAC9C,OAAOp2D,MAAKyQ,KAAKzN,MAAMU,EAAOA,EAAQ1D,KAAK83D,sBAEtCL,EAAAjwD,UAAA+uD,UAAP,WACE,MAAO,IAAKv2D,KAAKm2D,iBAAmBn2D,KAAKo2D,mBAAqBp2D,KAAK83D,qBAE9DL,EAAAjwD,UAAAywC,YAAP,WASE,GAAIoe,GAAWr2D,KAAKq2D,UACpB,UAAoC,GAA5Br2D,KAAKi4D,uBAAuF,MAAvC5B,EAAS5pC,OAAO4pC,EAASr1D,OAAO,IAExFy2D,EAAAjwD,UAAA2zC,OAAP,WAA2B,OAAQn7C,KAAKi4C,eACjCwf,EAAAjwD,UAAAkuD,QAAP,WAA4B,MAAiC,SAAX,KAAd11D,KAAK41C,SAClC6hB,EAAAjwD,UAAA8wD,YAAP,WAAgC,MAA+B,MAAT,EAAdt4D,KAAK41C,SACtC6hB,EAAAjwD,UAAA+wD,YAAP,WAGE,GAAI70D,GAAQ1D,KAAKk4D,uBACbrvB,EAAS,GAAIgtB,GAAW71D,KAAK03D,QAAQ10D,MAAMU,GAC/C,OAAO,IAAI8yD,GAAS3tB,EAAQ7oC,KAAMA,KAAK03D,QAAQ10D,MAAMU,EAAQmlC,EAAO0tB,eAE/DkB,EAAAjwD,UAAA+sD,QAAP,WACE,MAAOv0D,MAAKu4D,cAAc7B,cAErBe,EAAAjwD,UAAA2vD,WAAP,WACE,MAAOn3D,MAAKu4D,cAAcpB,cAErBM,EAAAjwD,UAAAyvC,SAAP,WACE,MAAO,IAAIqE,GAAA,QAAMA,EAAA2D,SAASC,KAAMl/C,KAAK82D,mBAAoB,IAAO,GAAIhjC,MAAQ9zB,KAAKg2D,oBAErFyB,IAnGaj4D,GAAAi4D,iBAAgBA,CAsH7B,IAAAe,GAAA,WACE,QAAAA,GAAoB/nD,GAClB,GADkBzQ,KAAAyQ,KAAAA,EACgB,YAA9BzQ,KAAKyQ,KAAKsU,aAAa,GACzB,KAAM,IAAIwwB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,4EAA8Ep6C,KAAKyQ,KAAKsU,aAAa,IAgBhJ,MAdSyzC,GAAAhxD,UAAAixD,WAAP,WAA8B,MAAOz4D,MAAKyQ,KAAKqU,aAAa,IACrD0zC,EAAAhxD,UAAAkxD,aAAP,WAAgC,MAAO14D,MAAKyQ,KAAKqU,aAAa,IACvD0zC,EAAAhxD,UAAAmxD,iBAAP,WAAoC,MAAO34D,MAAKyQ,KAAKqU,aAAa,IAC3D0zC,EAAAhxD,UAAAoxD,kBAAP,WAAqC,MAAO54D,MAAKyQ,KAAKqU,aAAa,KAC5D0zC,EAAAhxD,UAAAqxD,OAAP,WAA0B,MAAO74D,MAAKyQ,KAAKsU,aAAa,KACjDyzC,EAAAhxD,UAAAsxD,SAAP,WAA4B,MAAO94D,MAAKyQ,KAAKsU,aAAa,KACnDyzC,EAAAhxD,UAAAuxD,mBAAP,WAAsC,MAAO/4D,MAAKyQ,KAAKqU,aAAa,KAC7D0zC,EAAAhxD,UAAAwxD,aAAP,WAEE,MAAOvD,GAAaz1D,KAAKyQ,MAAM,EAAM,GAAIzQ,KAAK+4D,uBAEzCP,EAAAhxD,UAAAyxD,gBAAP,WACE,MAAOj5D,MAAKyQ,KAAKzN,MAAM,GAAI,GAAKhD,KAAK+4D,uBAEzCP,IAnBah5D,GAAAg5D,sBAAqBA,CAqBlC,IAAAU,GAAA,WACE,QAAAA,GAAmBl1D,EAA2Cm1D,EAA6CC,EAAoC3oD,GAA5HzQ,KAAAgE,MAAAA,EAA2ChE,KAAAm5D,iBAAAA,EAA6Cn5D,KAAAo5D,KAAAA,EAAoCp5D,KAAAyQ,KAAAA,EAEjJ,MAAAyoD,KAHa15D,GAAA05D,OAAMA,CAKnB,IAAAG,GAAA,SAAAxxC,GAWE,QAAAwxC,GAAoB93B,EAAoC7xB,GAAR,SAAAA,IAAAA,EAAA,IAC9CmY,EAAA9mB,KAAAf,MADkBA,KAAAuhC,MAAAA,EAAoCvhC,KAAA0P,KAAAA,EAVhD1P,KAAAozD,OAAsC,GAAIN,GAAAO,UAC1CrzD,KAAAs5D,qBACAt5D,KAAAu5D,MAA+B,KAUjCh4B,YAAiB23B,IACnBl5D,KAAKozD,OAAS7xB,EAAMv9B,MACpBhE,KAAKs5D,kBAAoB/3B,EAAM43B,iBAC/Bn5D,KAAKu5D,MAAQh4B,EAAM63B,KACnBp5D,KAAKyQ,KAAO8wB,EAAM9wB,OAElBzQ,KAAKyQ,KAAO8wB,EACZvhC,KAAKw5D,iBA6NX,MAjPmC1xC,GAAAuxC,EAAAxxC,GAwB1BwxC,EAAA7xD,UAAAovC,QAAP,WACE,MAAO,SAAyB,KAAd52C,KAAK0P,KAAc,IAAM1P,KAAK0P,KAAO,KAMlD2pD,EAAA7xD,UAAAiyD,yBAAP,SAAgCzpC,GAC9B,GAAIokC,GAAQp0D,KAAKozD,OAAOiB,SAASrkC,EACjC,IAAc,OAAVokC,EACF,KAAM7e,GAAA4C,SAASqC,OAAOxqB,EAExB,OAAI8iC,GAAAwB,YAA8BF,GACzBA,EAAMG,UACJzB,EAAA0B,WAA6BJ,GAC/BA,EAAMG,UADR,QAKF8E,EAAA7xD,UAAAkyD,2BAAP,SAAkC11D,GAChC,GAAIigD,GAAWjkD,KAAKs5D,kBAAkBt1D,EACtC,KAAKigD,EACH,KAAM,IAAIpkC,YAAW,4BAA4B7b,EAAK,IAExD,OAAOigD,IAGFoV,EAAA7xD,UAAAmyD,mCAAP,WACE,MAAO35D,MAAKs5D,kBAAkBt4D,QAGzBq4D,EAAA7xD,UAAAoyD,yBAAP,WACE,MAAO55D,MAAKu5D,OAGAF,EAAA54C,YAAd,WAAuC,OAAO,GAEvC44C,EAAA7xD,UAAAwgD,UAAP,SAAiBh4B,EAAcnrB,GAE7BA,EAAG7E,KAAKyQ,KAAKzP,OAAQ,IAGhBq4D,EAAA7xD,UAAA8wC,WAAP,WACE,OAAO,GAGF+gB,EAAA7xD,UAAA+wC,cAAP,WACE,OAAO,GAGF8gB,EAAA7xD,UAAAgxC,cAAP,WACE,OAAO,GAGF6gB,EAAA7xD,UAAAmvC,cAAP,WACE,OAAO,GAGF0iB,EAAA7xD,UAAAsxC,SAAP,SAAgB9oB,EAAc+oB,GAC5B,GAAIqb,GAAQp0D,KAAKozD,OAAOiB,SAASrkC,EACjC,IAAc,OAAVokC,EACF,KAAM7e,GAAA4C,SAASqC,OAAOxqB,EAExB,IAAIgoB,EACJ,IAAI8a,EAAAwB,YAA8BF,GAChCpc,EAAQoc,EAAMG,UAAUtd,eACnB,CAAA,IAAI6b,EAAA0B,WAAWJ,GAGpB,KAAM,IAAI7e,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,iBAFrCpC,GAAQoc,EAAMnd,WAIhB,MAAOe,IAGFqhB,EAAA7xD,UAAAwxC,SAAP,SAAgBhpB,EAAc0S,EAAiBjJ,GAE7C,GAAIiJ,EAAM4sB,cACR,KAAM,IAAI/Z,GAAA4C,SAAS5C,EAAA6C,UAAUC,MAAOroB,EAGtC,IAAIokC,GAAQp0D,KAAKozD,OAAOiB,SAASrkC,EACjC,KAAKokC,EACH,KAAM7e,GAAA4C,SAASqC,OAAOxqB,EACjB,KAAI8iC,EAAAwB,YAA8BF,GAavC,KAAM7e,GAAA4C,SAASmH,OAAOtvB,EAZtB,IAAI6pC,GAAWzF,EAAMG,UACjBvc,EAAQ6hB,EAAS5iB,UACrB,QAAQvU,EAAMqoB,oBACZ,IAAK3J,GAAAoC,WAAWiR,gBAChB,IAAKrT,GAAAoC,WAAWwH,cACd,KAAMzV,GAAA4C,SAASsH,OAAOzvB,EACxB,KAAKoxB,GAAAoC,WAAWyH,IACd,MAAO,IAAIxV,GAAaif,WAAW10D,KAAMgwB,EAAM0S,EAAOsV,EAAO6hB,EAAStF,UACxE,SACE,KAAM,IAAIhf,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,8BAOtCif,EAAA7xD,UAAA4xC,YAAP,SAAmBppB,GAEjB,GAAIokC,GAAQp0D,KAAKozD,OAAOiB,SAASrkC,EACjC,IAAKokC,EAEE,CAAA,GAAItB,EAAA0B,WAAWJ,GACpB,MAAOA,GAAMO,YAEb,MAAMpf,GAAA4C,SAASkH,QAAQrvB,GAJvB,KAAMulB,GAAA4C,SAASqC,OAAOxqB,IAWnBqpC,EAAA7xD,UAAAyxC,aAAP,SAAoBsY,EAAepvC,EAAkByzB,GAEnD,GAAI/b,GAAK75B,KAAKg5C,SAASuY,EAAO3b,EAAM,IACpC,KACE,GAAIkf,GAA0Cj7B,EAC1Ck7B,EAAkBD,EAAOphB,WAC7B,OAAiB,QAAbvxB,EACK9B,EAAA20C,aAAaD,GAEfA,EAAOxmD,SAAS4T,WAEvB0X,EAAGsc,cAQQkjB,EAAAS,QAAf,SAAuBrpD,GAWrB,IAAK,GAJDspD,GAAc,GACdC,EAAYloD,KAAKC,IAAIgoD,EAAc,MAAQtpD,EAAKzP,OAAS,GAGpDL,EAAIo5D,EAAap5D,EAAIq5D,EAAWr5D,IAEvC,GAA2C,YAAvC8P,EAAKsU,aAAatU,EAAKzP,OAASL,GAClC,MAAO,IAAI63D,GAAsB/nD,EAAKzN,MAAMyN,EAAKzP,OAASL,GAG9D,MAAM,IAAI40C,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,2EAGxBif,EAAAY,WAAf,SAA0BC,EAAsBl2D,GAG9C,GAAI4rB,GAAWsqC,EAAG7D,UAClB,IAA2B,MAAvBzmC,EAASnD,OAAO,GAAY,KAAM,IAAI7rB,OAAM,uBAEH,OAAzCgvB,EAASnD,OAAOmD,EAAS5uB,OAAS,KACpC4uB,EAAWA,EAASmB,OAAO,EAAGnB,EAAS5uB,OAAO,IAG5Ck5D,EAAGjiB,cACLj0C,EAAMm2D,YAAY,IAAMvqC,EAAU,GAAIkjC,GAAAsH,SAA2BF,IAEjEl2D,EAAMm2D,YAAY,IAAMvqC,EAAU,GAAIkjC,GAAAuH,UAA4BH,KAIvDb,EAAAiB,uBAAf,SAAsC7pD,EAAkBzM,EAAoCu2D,EAAeC,EAAe31D,EAA8B41D,EAA+BrB,GACrL,GAAImB,EAAQC,EAAO,CAEjB,IADA,GAAIpiD,GAAQ,EACLA,IAAU,KAAOmiD,EAAQC,GAAO,CACrC,GAAMN,GAAuB,GAAIzC,GAAiBhnD,EAAMA,EAAKzN,MAAMu3D,GACnElB,GAAMY,WAAWC,EAAIl2D,GACrBu2D,GAASL,EAAG3D,YACZkE,EAAU3yD,KAAKoyD,GAEjBz+C,aAAa,WACX49C,EAAMiB,uBAAuB7pD,EAAMzM,EAAOu2D,EAAOC,EAAO31D,EAAI41D,EAAWrB,SAGzEv0D,GAAG,GAAIq0D,GAAOl1D,EAAOy2D,EAAWrB,EAAM3oD,KAInC4oD,EAAAqB,aAAP,SAAoBjqD,EAAkB5L,GACpC,GAAMb,GAAqC,GAAI8uD,GAAAO,UACzC+F,EAA8BC,EAAMS,QAAQrpD,EAClD,IAAI2oD,EAAKX,eAAiBW,EAAKV,eAC7B,KAAM,IAAInjB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,4CAEvC,IAAMmgB,GAAQnB,EAAKN,UACnB,IAAc,aAAVyB,EACF,KAAM,IAAIhlB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,gCACvC,IAAMogB,GAAQD,EAAQnB,EAAKP,QAC3BQ,GAAMiB,uBAAuB7pD,EAAMzM,EAAOu2D,EAAOC,EAAO31D,KAAQu0D,IAG1DC,EAAA7xD,UAAAgyD,cAAR,WACE,GAAIJ,GAA8Bp5D,KAAKu5D,MAAQF,EAAMS,QAAQ95D,KAAKyQ,KAClE,IAAI2oD,EAAKX,eAAiBW,EAAKV,eAC7B,KAAM,IAAInjB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,4CAEvC,IAAImgB,GAAQnB,EAAKN,UACjB,IAAc,aAAVyB,EACF,KAAM,IAAIhlB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,gCAEvC,KADA,GAAIogB,GAAQD,EAAQnB,EAAKP,SAClB0B,EAAQC,GAAO,CACpB,GAAMN,GAAuB,GAAIzC,GAAiBz3D,KAAKyQ,KAAMzQ,KAAKyQ,KAAKzN,MAAMu3D,GAC7EA,IAASL,EAAG3D,YACZ8C,EAAMY,WAAWC,EAAIl6D,KAAKozD,QAC1BpzD,KAAKs5D,kBAAkBxxD,KAAKoyD,KAGlCb,GAjPmC/jB,EAAYuE,sBAA/Cr6C,GAAAmtB,YAAA,+RCrfAltB,GAAAD,QAAS0B,EAAQ,yECejB,SAAAy5D,GAAoC91D,EAAOsiD,GACzC,GAAIyT,EACF,MAAO/1D,EAEP,IAAkB,kBAAPA,GACT,KAAM,IAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ;AAUvC,OAL4B,mBAAjBygB,gBACT/6D,EAAO+6D,aAAe,GAExBA,eAEQ1T,GACN,IAAK,GACH,MAAa,UAASrmC,GACpBrF,aAAa,WAEX,MADAo/C,gBACOh2D,EAAGic,KAGhB,KAAK,GACH,MAAa,UAASA,EAAWC,GAC/BtF,aAAa,WAEX,MADAo/C,gBACOh2D,EAAGic,EAAMC,KAGtB,KAAK,GACH,MAAa,UAASD,EAAWC,EAAWC,GAC1CvF,aAAa,WAEX,MADAo/C,gBACOh2D,EAAGic,EAAMC,EAAMC,KAG5B,SACE,KAAM,IAAIpgB,OAAM,kCAKxB,QAAAk6D,GAAuBrhC,EAAqBshC,GAC1C,aAActhC,IACZ,IAAK,SAEH,MAAgBA,EAClB,KAAK,SAEH,GAAIuhC,GAAW9hD,SAAkBugB,EAAM,EACvC,IAAiBhQ,MAAbuxC,EACF,MAAOA,EAGX,SACE,MAAOD,IAIb,QAAAE,GAAuB16B,GACrB,GAAIA,YAAgBzM,MAClB,MAAOyM,EACF,IAAoB,gBAATA,GAChB,MAAO,IAAIzM,MAAY,IAAPyM,EAEhB,MAAM,IAAIgV,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,iBAIzC,QAAA8gB,GAAuBhrC,GAErB,GAAIA,EAAE1M,QAAQ,OAAa,EACzB,KAAM,IAAI+xB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,4CAChC,IAAU,KAANlqB,EACT,KAAM,IAAIqlB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,0BAEvC,OAAOpqB,GAAKa,QAAQX,GAGtB,QAAAirC,GAA0BvkD,EAAcwkD,EAAgBC,EAAiBC,GACvE,aAAe1kD,IACb,IAAK,SACH,OACEuL,SAAyC,mBAAxBvL,GAAkB,SAAoBA,EAAkB,SAAIwkD,EAC7ExlB,KAAiC,mBAApBh/B,GAAc,KAAoBA,EAAc,KAAIykD,EACjE5hC,KAAMqhC,EAAclkD,EAAc,KAAG0kD,GAEzC,KAAK,SACH,OACEn5C,SAAUvL,EACVg/B,KAAMylB,EACN5hC,KAAM6hC,EAEV,SACE,OACEn5C,SAAUi5C,EACVxlB,KAAMylB,EACN5hC,KAAM6hC,IAMd,QAAAC,MA7HA,GAAAhmB,GAAAr0C,EAAkC,eAElCkgD,EAAAlgD,EAAuB,eAChB8uB,EAAI9uB,EAAW,QACtBo6C,EAAAp6C,EAAkB,mBAGXpB,EAAMoB,EAAW,YAsIxBs6D,EAAA,WAAA,QAAAA,KAIUx7D,KAAAka,KAA+B,KAC/Bla,KAAAy7D,SACAz7D,KAAA07D,OAAS,IA6vCV17D,KAAA27D,KAAe,EACf37D,KAAA47D,KAAe,EACf57D,KAAA67D,KAAe,EACf77D,KAAA87D,KAAe,EA+Bf97D,KAAA+7D,QAAoDpB,EAC7D,MA/xCUa,GAAAh0D,UAAAw0D,aAAR,SAAqB9d,GACnB,GAAIrkB,GAAK75B,KAAK07D,QAEd,OADA17D,MAAKy7D,MAAM5hC,GAAMqkB,EACVrkB,GAED2hC,EAAAh0D,UAAAy0D,QAAR,SAAgBpiC,GACd,GAAI/T,GAAK9lB,KAAKy7D,MAAM5hC,EACpB,IAAI/T,EACF,MAAOA,EAEP,MAAM,IAAIyvB,GAAA4C,SAAS5C,EAAA6C,UAAU8jB,MAAO,6BAGhCV,EAAAh0D,UAAA20D,QAAR,SAAgBtiC,SACP75B,MAAKy7D,MAAM5hC,IAGb2hC,EAAAh0D,UAAA6vC,WAAP,SAAkBsb,GAChB,IAAYA,EAAQrrD,YAAYmZ,cAC9B,KAAM,IAAI80B,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,kEAEvC,OAAOp6C,MAAKka,KAAOy4C,GAOd6I,EAAAh0D,UAAA40D,iBAAP,SAAwB77B,GACtB,GAAoB,gBAATA,GACT,MAAOA,EACF,IAAIA,YAAgBzM,MACzB,MAAOyM,GAAK3H,UAAY,GAE1B,MAAM,IAAIh4B,OAAM,sBAAwB2/B,IAQnCi7B,EAAAh0D,UAAAirD,UAAP,WACE,MAAIzyD,MAAKka,KACAla,KAAKka,KAEL,MAaJshD,EAAAh0D,UAAA22C,OAAP,SAAcvF,EAAiBC,EAAiBh0C,GAAA,SAAAA,IAAAA,EAAA02D,EAC9C,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACE7E,KAAKka,KAAKikC,OAAO+c,EAActiB,GAAUsiB,EAAcriB,GAAUwjB,GACjE,MAAOn8D,GACPm8D,EAAMn8D,KASHs7D,EAAAh0D,UAAAmxC,WAAP,SAAkBC,EAAiBC,GACjC74C,KAAKka,KAAKy+B,WAAWuiB,EAActiB,GAAUsiB,EAAcriB,KAatD2iB,EAAAh0D,UAAA+4C,OAAP,SAAcvwB,EAAcnrB,GAAA,SAAAA,IAAAA,EAAA02D,EAC1B,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACE,MAAO7E,MAAKka,KAAKqmC,OAAO2a,EAAclrC,GAAOqsC,GAC7C,MAAOn8D,GAGP,MAAOm8D,IAAM,KASVb,EAAAh0D,UAAA6xC,WAAP,SAAkBrpB,GAChB,IACE,MAAOhwB,MAAKka,KAAKm/B,WAAW6hB,EAAclrC,IAC1C,MAAO9vB,GAGP,OAAO,IASJs7D,EAAAh0D,UAAAquC,KAAP,SAAY7lB,EAAcnrB,GAAA,SAAAA,IAAAA,EAAA02D,EACxB,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACE,MAAO7E,MAAKka,KAAK27B,KAAKqlB,EAAclrC,IAAO,EAAOqsC,GAClD,MAAOn8D,GACP,MAAOm8D,GAAMn8D,EAAG,QASbs7D,EAAAh0D,UAAAsxC,SAAP,SAAgB9oB,GACd,MAAOhwB,MAAKka,KAAK4+B,SAASoiB,EAAclrC,IAAO,IAU1CwrC,EAAAh0D,UAAA80D,MAAP,SAAatsC,EAAcnrB,GAAA,SAAAA,IAAAA,EAAA02D,EACzB,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACE,MAAO7E,MAAKka,KAAK27B,KAAKqlB,EAAclrC,IAAO,EAAMqsC,GACjD,MAAOn8D,GACP,MAAOm8D,GAAMn8D,EAAG,QAWbs7D,EAAAh0D,UAAA+0D,UAAP,SAAiBvsC,GACf,MAAOhwB,MAAKka,KAAK4+B,SAASoiB,EAAclrC,IAAO,IAa1CwrC,EAAAh0D,UAAAs6C,SAAP,SAAgB9xB,EAAcjP,EAAelc,GAAf,SAAAkc,IAAAA,EAAA,GAAe,SAAAlc,IAAAA,EAAA02D,EAC3C,IAAIvzD,GAAM,CACU,mBAAT+Y,GACTlc,EAAKkc,EACoB,gBAATA,KAChB/Y,EAAM+Y,EAGR,IAAIs7C,GAAQ1B,EAAO91D,EAAI,EACvB,KACE,GAAImD,EAAM,EACR,KAAM,IAAIutC,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAE/B,OAAOp6C,MAAKka,KAAK4nC,SAASoZ,EAAclrC,GAAOhoB,EAAKq0D,GACpD,MAAOn8D,GACP,MAAOm8D,GAAMn8D,KASVs7D,EAAAh0D,UAAAg1D,aAAP,SAAoBxsC,EAAchoB,GAChC,GADgC,SAAAA,IAAAA,EAAA,GAC5BA,EAAM,EACR,KAAM,IAAIutC,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAE/B,OAAOp6C,MAAKka,KAAKsiD,aAAatB,EAAclrC,GAAOhoB,IAQ9CwzD,EAAAh0D,UAAA+3C,OAAP,SAAcvvB,EAAcnrB,GAAA,SAAAA,IAAAA,EAAA02D,EAC1B,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACE,MAAO7E,MAAKka,KAAKqlC,OAAO2b,EAAclrC,GAAOqsC,GAC7C,MAAOn8D,GACP,MAAOm8D,GAAMn8D,KAQVs7D,EAAAh0D,UAAA0xC,WAAP,SAAkBlpB,GAChB,MAAOhwB,MAAKka,KAAKg/B,WAAWgiB,EAAclrC,KA8BrCwrC,EAAAh0D,UAAAk3C,KAAP,SAAY1uB,EAAc4lB,EAAc70B,EAAYlc,GAApD,GAAA6uB,GAAA1zB,IAAoD,UAAA6E,IAAAA,EAAA02D,EAClD,IAAI9hC,GAAOqhC,EAAc/5C,EAAM,IAC/Blc,GAAqB,kBAATkc,GAAsBA,EAAOlc,CACzC,IAAIw3D,GAAQ1B,EAAO91D,EAAI,EACvB,KACE7E,KAAKka,KAAKwkC,KAAKwc,EAAclrC,GAAOoxB,EAAArK,SAASC,YAAYpB,GAAOnc,EAAM,SAACv5B,EAAag+C,GAC9EA,EACFme,EAAMn8D,EAAGwzB,EAAKsoC,aAAa9d,IAE3Bme,EAAMn8D,KAGV,MAAOA,GACPm8D,EAAMn8D,EAAG,QAYNs7D,EAAAh0D,UAAAwxC,SAAP,SAAgBhpB,EAAc4lB,EAAcnc,GAC1C,MAD0C,UAAAA,IAAAA,EAAA,KACnCz5B,KAAKg8D,aACVh8D,KAAKka,KAAK8+B,SAASkiB,EAAclrC,GAAOoxB,EAAArK,SAASC,YAAYpB,GAAOklB,EAAcrhC,EAAM,QAoBrF+hC,EAAAh0D,UAAAuwC,SAAP,SAAgBnoB,EAAkB7O,EAAgBlc,GAAhB,SAAAkc,IAAAA,MAAgB,SAAAlc,IAAAA,EAAA02D,EAChD,IAAI3kD,GAAUukD,EAAiBp6C,EAAM,KAAM,IAAK,KAChDlc,GAAqB,kBAATkc,GAAsBA,EAAOlc,CACzC,IAAIw3D,GAAQ1B,EAAO91D,EAAI,EACvB,KACE,GAAI+wC,GAAOwL,EAAArK,SAASC,YAAYpgC,EAAc,KAC9C,OAAKg/B,GAAKmJ,aAGH/+C,KAAKka,KAAK69B,SAASmjB,EAActrC,GAAWhZ,EAAQuL,SAAUyzB,EAAMymB,GAFlEA,EAAM,GAAI9mB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,oDAG9C,MAAOl6C,GACP,MAAOm8D,GAAMn8D,EAAG,QAebs7D,EAAAh0D,UAAAyxC,aAAP,SAAoBrpB,EAAkB7O,GAAA,SAAAA,IAAAA,KACpC,IAAInK,GAAUukD,EAAiBp6C,EAAM,KAAM,IAAK,MAC5C60B,EAAOwL,EAAArK,SAASC,YAAYpgC,EAAQg/B,KACxC,KAAKA,EAAKmJ,aACR,KAAM,IAAIxJ,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,kDAEvC,OAAOp6C,MAAKka,KAAK++B,aAAaiiB,EAActrC,GAAWhZ,EAAQuL,SAAUyzB,IAyBpE4lB,EAAAh0D,UAAAy1C,UAAP,SAAiBrtB,EAAkBnf,EAAWuQ,EAAgBnc,GAAhB,SAAAmc,IAAAA,MAAgB,SAAAnc,IAAAA,EAAA02D,EAC5D,IAAI3kD,GAAUukD,EAAiBn6C,EAAM,OAAQ,IAAK,IAClDnc,GAAqB,kBAATmc,GAAsBA,EAAOnc,CACzC,IAAIw3D,GAAQ1B,EAAO91D,EAAI,EACvB,KACE,GAAI+wC,GAAOwL,EAAArK,SAASC,YAAYpgC,EAAQg/B,KACxC,OAAKA,GAAK0Z,cAGHtvD,KAAKka,KAAK+iC,UAAUie,EAActrC,GAAWnf,EAAMmG,EAAQuL,SAAUyzB,EAAMh/B,EAAQ6iB,KAAM4iC,GAFvFA,EAAM,GAAI9mB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,qDAG9C,MAAOl6C,GACP,MAAOm8D,GAAMn8D,KAkBVs7D,EAAAh0D,UAAAqvC,cAAP,SAAqBjnB,EAAkBnf,EAAWuQ,GAChD,GAAIpK,GAAUukD,EAAiBn6C,EAAM,OAAQ,IAAK,KAC9C40B,EAAOwL,EAAArK,SAASC,YAAYpgC,EAAQg/B,KACxC,KAAKA,EAAK0Z,cACR,KAAM,IAAI/Z,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,mDAEvC,OAAOp6C,MAAKka,KAAK28B,cAAcqkB,EAActrC,GAAWnf,EAAMmG,EAAQuL,SAAUyzB,EAAMh/B,EAAQ6iB,OAuBzF+hC,EAAAh0D,UAAAgqD,WAAP,SAAkB5hC,EAAkBnf,EAAWuQ,EAAYnc,GAAA,SAAAA,IAAAA,EAAA02D,EACzD,IAAI3kD,GAAUukD,EAAiBn6C,EAAM,OAAQ,IAAK,IAClDnc,GAAqB,kBAATmc,GAAsBA,EAAOnc,CACzC,IAAIw3D,GAAQ1B,EAAO91D,EAAI,EACvB,KACE,GAAI+wC,GAAOwL,EAAArK,SAASC,YAAYpgC,EAAQg/B,KACxC,KAAKA,EAAK2Z,eACR,MAAO8M,GAAM,GAAI9mB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,uDAE9Cp6C,MAAKka,KAAKs3C,WAAW0J,EAActrC,GAAWnf,EAAMmG,EAAQuL,SAAUyzB,EAAMh/B,EAAQ6iB,KAAM4iC,GAC1F,MAAOn8D,GACPm8D,EAAMn8D,KAsBHs7D,EAAAh0D,UAAAi1D,eAAP,SAAsB7sC,EAAkBnf,EAAWuQ,GACjD,GAAIpK,GAAUukD,EAAiBn6C,EAAM,OAAQ,IAAK,KAC9C40B,EAAOwL,EAAArK,SAASC,YAAYpgC,EAAQg/B,KACxC,KAAKA,EAAK2Z,eACR,KAAM,IAAIha,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,sDAEvC,OAAOp6C,MAAKka,KAAKuiD,eAAevB,EAActrC,GAAWnf,EAAMmG,EAAQuL,SAAUyzB,EAAMh/B,EAAQ6iB,OAY1F+hC,EAAAh0D,UAAAk1D,MAAP,SAAa7iC,EAAYh1B,GAAA,SAAAA,IAAAA,EAAA02D,EACvB,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACE,GAAIq5C,GAAOl+C,KAAKi8D,QAAQpiC,EACxBqkB,GAAKrI,KAAKwmB,GACV,MAAOn8D,GACPm8D,EAAMn8D,KAWHs7D,EAAAh0D,UAAAm1D,UAAP,SAAiB9iC,GACf,MAAO75B,MAAKi8D,QAAQpiC,GAAIif,YAQnB0iB,EAAAh0D,UAAAo2C,MAAP,SAAa/jB,EAAYh1B,GAAzB,GAAA6uB,GAAA1zB,IAAyB,UAAA6E,IAAAA,EAAA02D,EACvB,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACE7E,KAAKi8D,QAAQpiC,GAAI+jB,MAAM,SAAC19C,GACjBA,GACHwzB,EAAKyoC,QAAQtiC,GAEfwiC,EAAMn8D,KAER,MAAOA,GACPm8D,EAAMn8D,KAQHs7D,EAAAh0D,UAAA2uC,UAAP,SAAiBtc,GACf75B,KAAKi8D,QAAQpiC,GAAIsc,YACjBn2C,KAAKm8D,QAAQtiC,IAWR2hC,EAAAh0D,UAAAo1D,UAAP,SAAiB/iC,EAAY9Y,EAAYlc,GAAA,SAAAA,IAAAA,EAAA02D,EACvC,IAAIv6D,GAAyB,gBAAT+f,GAAoBA,EAAO,CAC/Clc,GAAqB,kBAATkc,GAAsBA,EAAOlc,CACzC,IAAIw3D,GAAQ1B,EAAO91D,EAAI,EACvB,KACE,GAAIq5C,GAAOl+C,KAAKi8D,QAAQpiC,EACxB,IAAI74B,EAAS,EACX,KAAM,IAAIu0C,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAE/B8D,GAAK4D,SAAS9gD,EAAQq7D,GACtB,MAAOn8D,GACPm8D,EAAMn8D,KASHs7D,EAAAh0D,UAAAq1D,cAAP,SAAqBhjC,EAAY7xB,GAAA,SAAAA,IAAAA,EAAA,EAC/B,IAAIk2C,GAAOl+C,KAAKi8D,QAAQpiC,EACxB,IAAI7xB,EAAM,EACR,KAAM,IAAIutC,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAE/B8D,GAAKse,aAAax0D,IAQbwzD,EAAAh0D,UAAAs1D,MAAP,SAAajjC,EAAYh1B,GAAA,SAAAA,IAAAA,EAAA02D,EACvB,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACE7E,KAAKi8D,QAAQpiC,GAAIhmB,KAAKwoD,GACtB,MAAOn8D,GACPm8D,EAAMn8D,KAQHs7D,EAAAh0D,UAAAu1D,UAAP,SAAiBljC,GACf75B,KAAKi8D,QAAQpiC,GAAIic,YAQZ0lB,EAAAh0D,UAAAw1D,UAAP,SAAiBnjC,EAAYh1B,GAAA,SAAAA,IAAAA,EAAA02D,EAC3B,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACE7E,KAAKi8D,QAAQpiC,GAAIojC,SAASZ,GAC1B,MAAOn8D,GACPm8D,EAAMn8D,KAQHs7D,EAAAh0D,UAAA01D,cAAP,SAAqBrjC,GACnB75B,KAAKi8D,QAAQpiC,GAAIsjC,gBAuBZ3B,EAAAh0D,UAAAga,MAAP,SAAaqY,EAAY9Y,EAAWC,EAAYo8C,EAAYC,EAAYx4D,GAAA,SAAAA,IAAAA,EAAA02D,EACtE,IAAI/pD,GAAgBmO,EAAgB3e,EAAgBs7B,EAAmB,IACvE,IAAoB,gBAATvb,GAAmB,CAE5B,GAAIoB,GAAW,MACf,cAAenB,IACb,IAAK,WAEHnc,EAAKmc,CACL,MACF,KAAK,SAEHsb,EAAWtb,EACXmB,EAA2B,gBAATi7C,GAAoBA,EAAO,OAC7Cv4D,EAAqB,kBAATw4D,GAAsBA,EAAOx4D,CACzC,MACF,SAGE,OADAA,EAAqB,kBAATu4D,GAAsBA,EAAuB,kBAATC,GAAsBA,EAAOx4D,GACnE,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,uBAE7C5oC,EAAS,GAAIqP,GAAOE,EAAMoB,GAC1BxC,EAAS,EACT3e,EAASwQ,EAAOxQ,WAGhBwQ,GAASuP,EACTpB,EAASqB,EACThgB,EAASo8D,EACT9gC,EAA2B,gBAAT+gC,GAAoBA,EAAO,KAC7Cx4D,EAAqB,kBAATw4D,GAAsBA,EAAOx4D,CAG3C,IAAIw3D,GAAQ1B,EAAO91D,EAAI,EACvB,KACE,GAAIq5C,GAAOl+C,KAAKi8D,QAAQpiC,EACR,OAAZyC,IACFA,EAAW4hB,EAAKsR,UAElBtR,EAAK18B,MAAMhQ,EAAQmO,EAAQ3e,EAAQs7B,EAAU+/B,GAC7C,MAAOn8D,GACPm8D,EAAMn8D,KAoBHs7D,EAAAh0D,UAAA0iD,UAAP,SAAiBrwB,EAAY9Y,EAAWC,EAAYo8C,EAAYC,GAC9D,GAAI7rD,GAAoCxQ,EAAgBs7B,EAApC3c,EAAiB,CACrC,IAAoB,gBAAToB,GAAmB,CAE5Bub,EAA2B,gBAATtb,GAAoBA,EAAO,IAC7C,IAAImB,GAA2B,gBAATi7C,GAAoBA,EAAO,MACjDz9C,GAAS,EACTnO,EAAS,GAAIqP,GAAOE,EAAMoB,GAC1BnhB,EAASwQ,EAAOxQ,WAGhBwQ,GAASuP,EACTpB,EAASqB,EACThgB,EAASo8D,EACT9gC,EAA2B,gBAAT+gC,GAAoBA,EAAO,IAG/C,IAAInf,GAAOl+C,KAAKi8D,QAAQpiC,EAIxB,OAHgB,OAAZyC,IACFA,EAAW4hB,EAAKsR,UAEXtR,EAAKgM,UAAU14C,EAAQmO,EAAQ3e,EAAQs7B,IAmBzCk/B,EAAAh0D,UAAA2kC,KAAP,SAAYtS,EAAY9Y,EAAWC,EAAWo8C,EAAWC,EAAYx4D,GAAA,SAAAA,IAAAA,EAAA02D,EACnE,IAAIj/B,GAAkB3c,EAAgB3e,EAAgBwQ,EAAgB6qD,CACtE,IAAoB,gBAATt7C,GAAmB,CAG5B/f,EAAS+f,EACTub,EAAWtb,CACX,IAAImB,GAAWi7C,CACfv4D,GAAqB,kBAATw4D,GAAsBA,EAAOx4D,EACzC8a,EAAS,EACTnO,EAAS,GAAIqP,GAAO7f,GAIpBq7D,EAAQ1B,EAAO,SAAU9xD,EAAUomD,EAAmBznC,GACpD,MAAI3e,GACKhE,EAAGgE,OAEZhE,GAAGgE,EAAK2e,EAAIjZ,SAAS4T,GAAW8sC,IAC9B,OAEJz9C,GAASuP,EACTpB,EAASqB,EACThgB,EAASo8D,EACT9gC,EAAW+gC,EACXhB,EAAQ1B,EAAO91D,EAAI,EAGrB,KACE,GAAIq5C,GAAOl+C,KAAKi8D,QAAQpiC,EACR,OAAZyC,IACFA,EAAW4hB,EAAKsR,UAElBtR,EAAK/R,KAAK36B,EAAQmO,EAAQ3e,EAAQs7B,EAAU+/B,GAC5C,MAAOn8D,GACPm8D,EAAMn8D,KAmBHs7D,EAAAh0D,UAAA81D,SAAP,SAAgBzjC,EAAY9Y,EAAWC,EAAWo8C,EAAWC,GAC3D,GACI7rD,GAAgBmO,EAAgB3e,EAAgBs7B,EADhDihC,GAAc,CAElB,IAAoB,gBAATx8C,GAAmB,CAC5B/f,EAAS+f,EACTub,EAAWtb,CACX,IAAImB,GAAWi7C,CACfz9C,GAAS,EACTnO,EAAS,GAAIqP,GAAO7f,GACpBu8D,GAAc,MAEd/rD,GAASuP,EACTpB,EAASqB,EACThgB,EAASo8D,EACT9gC,EAAW+gC,CAEb,IAAInf,GAAOl+C,KAAKi8D,QAAQpiC,EACR,OAAZyC,IACFA,EAAW4hB,EAAKsR,SAGlB,IAAI1pC,GAAKo4B,EAAKof,SAAS9rD,EAAQmO,EAAQ3e,EAAQs7B,EAC/C,OAAKihC,IAGK/rD,EAAOjD,SAAS4T,GAAW2D,GAF5BA,GAaJ01C,EAAAh0D,UAAAg2D,OAAP,SAAc3jC,EAAY7B,EAAaH,EAAavzB,GAAA,SAAAA,IAAAA,EAAAi3D,EAClD,IAAIc,GAAQ1B,EAAOr2D,EAAU,EAC7B,KACEtE,KAAKi8D,QAAQpiC,GAAIqyB,MAAMl0B,EAAKH,EAAKwkC,GACjC,MAAOn8D,GACPm8D,EAAMn8D,KAUHs7D,EAAAh0D,UAAAi2D,WAAP,SAAkB5jC,EAAY7B,EAAaH,GACzC73B,KAAKi8D,QAAQpiC,GAAI2f,UAAUxhB,EAAKH,IAS3B2jC,EAAAh0D,UAAAk2D,OAAP,SAAc7jC,EAAYJ,EAAuB50B,GAC/C,GAAIw3D,GAAQ1B,EAAO91D,EAAI,EACvB,KACE,GAAI84D,GAA0B,gBAATlkC,GAAoBvgB,SAASugB,EAAM,GAAKA,CAC7Dz5B,MAAKi8D,QAAQpiC,GAAIkyB,MAAM4R,EAAStB,GAChC,MAAOn8D,GACPm8D,EAAMn8D,KASHs7D,EAAAh0D,UAAAo2D,WAAP,SAAkB/jC,EAAYJ,GAC5B,GAAIkkC,GAA0B,gBAATlkC,GAAoBvgB,SAASugB,EAAM,GAAKA,CAC7Dz5B,MAAKi8D,QAAQpiC,GAAIyf,UAAUqkB,IAatBnC,EAAAh0D,UAAAq2D,QAAP,SAAehkC,EAAY8f,EAAYC,EAAY/0C,GAAA,SAAAA,IAAAA,EAAA02D,EACjD,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACE,GAAIq5C,GAAOl+C,KAAKi8D,QAAQpiC,EACH,iBAAV8f,KACTA,EAAQ,GAAI7lB,MAAa,IAAR6lB,IAEE,gBAAVC,KACTA,EAAQ,GAAI9lB,MAAa,IAAR8lB,IAEnBsE,EAAKiO,OAAOxS,EAAOC,EAAOyiB,GAC1B,MAAOn8D,GACPm8D,EAAMn8D,KAWHs7D,EAAAh0D,UAAAs2D,YAAP,SAAmBjkC,EAAY8f,EAAsBC,GACnD55C,KAAKi8D,QAAQpiC,GAAI6f,WAAWuhB,EAActhB,GAAQshB,EAAcrhB,KAU3D4hB,EAAAh0D,UAAAg4C,MAAP,SAAaxvB,EAAcnrB,GAAA,SAAAA,IAAAA,EAAA02D,EACzB,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACEmrB,EAAOkrC,EAAclrC,GACrBhwB,KAAKka,KAAKslC,MAAMxvB,EAAMqsC,GACtB,MAAOn8D,GACPm8D,EAAMn8D,KAQHs7D,EAAAh0D,UAAA2xC,UAAP,SAAiBnpB,GAEf,MADAA,GAAOkrC,EAAclrC,GACdhwB,KAAKka,KAAKi/B,UAAUnpB,IAStBwrC,EAAAh0D,UAAA01C,MAAP,SAAaltB,EAAcyJ,EAAY50B,GAAA,SAAAA,IAAAA,EAAA02D,GACjB,kBAAT9hC,KACT50B,EAAK40B,EACLA,EAAO,IAET,IAAI4iC,GAAQ1B,EAAO91D,EAAI,EACvB,KACEmrB,EAAOkrC,EAAclrC,GACrBhwB,KAAKka,KAAKgjC,MAAMltB,EAAMyJ,EAAM4iC,GAC5B,MAAOn8D,GACPm8D,EAAMn8D,KASHs7D,EAAAh0D,UAAAiwC,UAAP,SAAiBznB,EAAcyJ,GAC7Bz5B,KAAKka,KAAKu9B,UAAUyjB,EAAclrC,GAAO8qC,EAAcrhC,EAAM,OAUxD+hC,EAAAh0D,UAAAkwC,QAAP,SAAe1nB,EAAcnrB,GAAA,SAAAA,IAAAA,EAAA02D,EAC3B,IAAIc,GAAoD1B,EAAO91D,EAAI,EACnE,KACEmrB,EAAOkrC,EAAclrC,GACrBhwB,KAAKka,KAAKw9B,QAAQ1nB,EAAMqsC,GACxB,MAAOn8D,GACPm8D,EAAMn8D,KASHs7D,EAAAh0D,UAAA4xC,YAAP,SAAmBppB,GAEjB,MADAA,GAAOkrC,EAAclrC,GACdhwB,KAAKka,KAAKk/B,YAAYppB,IAWxBwrC,EAAAh0D,UAAAiqD,KAAP,SAAYC,EAAiBC,EAAiB9sD,GAAA,SAAAA,IAAAA,EAAA02D,EAC5C,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACE6sD,EAAUwJ,EAAcxJ,GACxBC,EAAUuJ,EAAcvJ,GACxB3xD,KAAKka,KAAKu3C,KAAKC,EAASC,EAAS0K,GACjC,MAAOn8D,GACPm8D,EAAMn8D,KASHs7D,EAAAh0D,UAAAu2D,SAAP,SAAgBrM,EAAiBC,GAG/B,MAFAD,GAAUwJ,EAAcxJ,GACxBC,EAAUuJ,EAAcvJ,GACjB3xD,KAAKka,KAAK6jD,SAASrM,EAASC,IAY9B6J,EAAAh0D,UAAAoqD,QAAP,SAAeF,EAAiBC,EAAiB3wC,EAAYnc,GAAA,SAAAA,IAAAA,EAAA02D,EAC3D,IAAI55D,GAAuB,gBAATqf,GAAoBA,EAAO,MAC7Cnc,GAAqB,kBAATmc,GAAsBA,EAAOnc,CACzC,IAAIw3D,GAAQ1B,EAAO91D,EAAI,EACvB,KACE,GAAa,SAATlD,GAA4B,QAATA,EACrB,MAAO06D,GAAM,GAAI9mB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,iBAAmBz4C,GAEjE+vD,GAAUwJ,EAAcxJ,GACxBC,EAAUuJ,EAAcvJ,GACxB3xD,KAAKka,KAAK03C,QAAQF,EAASC,EAAShwD,EAAM06D,GAC1C,MAAOn8D,GACPm8D,EAAMn8D,KAUHs7D,EAAAh0D,UAAAw2D,YAAP,SAAmBtM,EAAiBC,EAAiBhwD,GACnD,GAAY,MAARA,EACFA,EAAO,WACF,IAAa,SAATA,GAA4B,QAATA,EAC5B,KAAM,IAAI4zC,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,iBAAmBz4C,EAI1D,OAFA+vD,GAAUwJ,EAAcxJ,GACxBC,EAAUuJ,EAAcvJ,GACjB3xD,KAAKka,KAAK8jD,YAAYtM,EAASC,EAAShwD,IAQ1C65D,EAAAh0D,UAAAqqD,SAAP,SAAgB7hC,EAAcnrB,GAAA,SAAAA,IAAAA,EAAA02D,EAC5B,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACEmrB,EAAOkrC,EAAclrC,GACrBhwB,KAAKka,KAAK23C,SAAS7hC,EAAMqsC,GACzB,MAAOn8D,GACPm8D,EAAMn8D,KASHs7D,EAAAh0D,UAAAy2D,aAAP,SAAoBjuC,GAElB,MADAA,GAAOkrC,EAAclrC,GACdhwB,KAAKka,KAAK+jD,aAAajuC,IAYzBwrC,EAAAh0D,UAAA0kD,MAAP,SAAal8B,EAAcgI,EAAaH,EAAahzB,GAAA,SAAAA,IAAAA,EAAA02D,EACnD,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACEmrB,EAAOkrC,EAAclrC,GACrBhwB,KAAKka,KAAKgyC,MAAMl8B,GAAM,EAAOgI,EAAKH,EAAKwkC,GACvC,MAAOn8D,GACPm8D,EAAMn8D,KAUHs7D,EAAAh0D,UAAAgyC,UAAP,SAAiBxpB,EAAcgI,EAAaH,GAC1C7H,EAAOkrC,EAAclrC,GACrBhwB,KAAKka,KAAKs/B,UAAUxpB,GAAM,EAAOgI,EAAKH,IAUjC2jC,EAAAh0D,UAAA02D,OAAP,SAAcluC,EAAcgI,EAAaH,EAAahzB,GAAA,SAAAA,IAAAA,EAAA02D,EACpD,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACEmrB,EAAOkrC,EAAclrC,GACrBhwB,KAAKka,KAAKgyC,MAAMl8B,GAAM,EAAMgI,EAAKH,EAAKwkC,GACtC,MAAOn8D,GACPm8D,EAAMn8D,KAUHs7D,EAAAh0D,UAAA22D,WAAP,SAAkBnuC,EAAcgI,EAAaH,GAC3C7H,EAAOkrC,EAAclrC,GACrBhwB,KAAKka,KAAKs/B,UAAUxpB,GAAM,EAAMgI,EAAKH,IAShC2jC,EAAAh0D,UAAAukD,MAAP,SAAa/7B,EAAcyJ,EAAuB50B,GAAA,SAAAA,IAAAA,EAAA02D,EAChD,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACE,GAAI84D,GAAU7C,EAAcrhC,GAAM,EAClC,IAAIkkC,EAAU,EACZ,KAAM,IAAIpoB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,gBAEvCp6C,MAAKka,KAAK6xC,MAAMmP,EAAclrC,IAAO,EAAO2tC,EAAStB,GACrD,MAAOn8D,GACPm8D,EAAMn8D,KASHs7D,EAAAh0D,UAAA8xC,UAAP,SAAiBtpB,EAAcyJ,GAC7B,GAAIkkC,GAAU7C,EAAcrhC,GAAM,EAClC,IAAIkkC,EAAU,EACZ,KAAM,IAAIpoB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,gBAEvCpqB,GAAOkrC,EAAclrC,GACrBhwB,KAAKka,KAAKo/B,UAAUtpB,GAAM,EAAO2tC,IAS5BnC,EAAAh0D,UAAA42D,OAAP,SAAcpuC,EAAcyJ,EAAqB50B,GAAA,SAAAA,IAAAA,EAAA02D,EAC/C,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACE,GAAI84D,GAAU7C,EAAcrhC,GAAM,EAClC,IAAIkkC,EAAU,EACZ,KAAM,IAAIpoB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,gBAEvCp6C,MAAKka,KAAK6xC,MAAMmP,EAAclrC,IAAO,EAAM2tC,EAAStB,GACpD,MAAOn8D,GACPm8D,EAAMn8D,KASHs7D,EAAAh0D,UAAA62D,WAAP,SAAkBruC,EAAcyJ,GAC9B,GAAIkkC,GAAU7C,EAAcrhC,GAAM,EAClC,IAAIkkC,EAAU,EACZ,KAAM,IAAIpoB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,gBAEvCp6C,MAAKka,KAAKo/B,UAAU4hB,EAAclrC,IAAO,EAAM2tC,IAU1CnC,EAAAh0D,UAAA2kD,OAAP,SAAcn8B,EAAc2pB,EAAoBC,EAAoB/0C,GAAA,SAAAA,IAAAA,EAAA02D,EAClE,IAAIc,GAAQ1B,EAAO91D,EAAI,EACvB,KACE7E,KAAKka,KAAKiyC,OAAO+O,EAAclrC,GAAOirC,EAActhB,GAAQshB,EAAcrhB,GAAQyiB,GAClF,MAAOn8D,GACPm8D,EAAMn8D,KAUHs7D,EAAAh0D,UAAAkyC,WAAP,SAAkB1pB,EAAc2pB,EAAoBC,GAClD55C,KAAKka,KAAKw/B,WAAWwhB,EAAclrC,GAAOirC,EAActhB,GAAQshB,EAAcrhB,KAsBzE4hB,EAAAh0D,UAAA8pD,SAAP,SAAgBthC,EAAcjP,EAAYlc,GAAA,SAAAA,IAAAA,EAAA02D,EACxC,IAAIrgB,GAAwB,gBAATn6B,GAAoBA,IACvClc,GAAqB,kBAATkc,GAAsBA,EAAOw6C,CACzC,IAAIc,GAAuD1B,EAAO91D,EAAI,EACtE,KACEmrB,EAAOkrC,EAAclrC,GACrBhwB,KAAKka,KAAKo3C,SAASthC,EAAMkrB,EAAOmhB,GAChC,MAAOn8D,GACPm8D,EAAMn8D,KAYHs7D,EAAAh0D,UAAA82D,aAAP,SAAoBtuC,EAAckrB,GAEhC,MAFgC,UAAAA,IAAAA,MAChClrB,EAAOkrC,EAAclrC,GACdhwB,KAAKka,KAAKokD,aAAatuC,EAAMkrB,IAK/BsgB,EAAAh0D,UAAA+2D,UAAP,SAAiB3uC,EAAkB7O,EAAW+a,GAC5C,KAD4C,UAAAA,IAAAA,EAAAy/B,GACtC,GAAIhmB,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAGxBhD,EAAAh0D,UAAAi3D,YAAP,SAAmB7uC,EAAkBkM,GACnC,KADmC,UAAAA,IAAAA,EAAAy/B,GAC7B,GAAIhmB,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAKxBhD,EAAAh0D,UAAAk3D,MAAP,SAAa9uC,EAAkB7O,EAAW+a,GACxC,KADwC,UAAAA,IAAAA,EAAAy/B,GAClC,GAAIhmB,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAUxBhD,EAAAh0D,UAAAm3D,OAAP,SAAc3uC,EAAcjP,EAAWlc,GACrC,KADqC,UAAAA,IAAAA,EAAA02D,GAC/B,GAAIhmB,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAGxBhD,EAAAh0D,UAAAo3D,WAAP,SAAkB5uC,EAAcyJ,GAC9B,KAAM,IAAI8b,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAGxBhD,EAAAh0D,UAAAq3D,iBAAP,SAAwB7uC,EAAcpZ,GAOpC,KAAM,IAAI2+B,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAGxBhD,EAAAh0D,UAAAs3D,kBAAP,SAAyB9uC,EAAcpZ,GAMrC,KAAM,IAAI2+B,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAhyCjBhD,EAAAuD,MAAQzjB,EAAA,QAoyCxBkgB,IAtyCAh8D,GAAAmtB,YAAA,aAyyCoB,IAAI6uC,0XCl7CxB,SAAYpjB,GACVA,EAAAA,EAAA,MAAA,GAAA,QAAOA,EAAAA,EAAA,OAAA,GAAA,SAAQA,EAAAA,EAAA,IAAA,GAAA,MAAKA,EAAAA,EAAA,MAAA,GAAA,QAAOA,EAAAA,EAAA,OAAA,GAAA,SAAQA,EAAAA,EAAA,MAAA,GAAA,QAAOA,EAAAA,EAAA,OAAA,GAAA,SAAQA,EAAAA,EAAA,QAAA,GAAA,UAASA,EAAAA,EAAA,OAAA,GAAA,SAAQA,EAAAA,EAAA,OAAA,GAAA,SACnEA,EAAAA,EAAA,MAAA,IAAA,QAAOA,EAAAA,EAAA,OAAA,IAAA,SAAQA,EAAAA,EAAA,MAAA,IAAA,QAAOA,EAAAA,EAAA,UAAA,IAAA,YAAWA,EAAAA,EAAA,QAAA,IAAA,WAFvB54C,EAAA44C,YAAA54C,EAAA44C,cAAZ,IAAYA,GAAA54C,EAAA44C,UAOR4mB,IACJA,GAAa5mB,EAAUC,OAAS,2BAChC2mB,EAAa5mB,EAAUoC,QAAU,6BACjCwkB,EAAa5mB,EAAU8B,KAAO,sBAC9B8kB,EAAa5mB,EAAU8jB,OAAS,uBAChC8C,EAAa5mB,EAAU8J,QAAU,qBACjC8c,EAAa5mB,EAAUyC,OAAS,2BAChCmkB,EAAa5mB,EAAUqH,QAAU,eACjCuf,EAAa5mB,EAAUiH,SAAW,2BAClC2f,EAAa5mB,EAAUkH,QAAU,uBACjC0f,EAAa5mB,EAAUgC,QAAU,oBACjC4kB,EAAa5mB,EAAU6mB,OAAS,mBAChCD,EAAa5mB,EAAU4C,QAAU,yBACjCgkB,EAAa5mB,EAAU8mB,OAAS,yCAChCF,EAAa5mB,EAAU4L,WAAa,0BACpCgb,EAAa5mB,EAAUomB,SAAW,6BAWlC,IAAArmB,GAAA,SAAAtwB,GAkBE,QAAAswB,GAAYx2C,EAAiB6I,EAAsCwlB,GAAtC,SAAAxlB,IAAAA,EAAkBw0D,EAAar9D,IAAO,SAAAquB,IAAAA,EAAA,MACjEnI,EAAA9mB,KAAAf,KAAMwK,GAdDxK,KAAAm/D,QAAkB,GAevBn/D,KAAKgqD,MAAQroD,EACb3B,KAAKa,KAAOu3C,EAAUz2C,GACtB3B,KAAKgwB,KAAOA,EACZhwB,KAAKotD,OAAQ,GAAUxsD,QAASwsD,MAChCptD,KAAKwK,QAAU,UAAUxK,KAAKa,KAAI,KAAK2J,GAAUxK,KAAKgwB,KAAO,MAAMhwB,KAAKgwB,KAAI,IAAM,IAgFtF,MAxG8BlI,GAAAqwB,EAAAtwB,GA8BrBswB,EAAA3wC,UAAA+G,SAAP,WACE,MAAOvO,MAAKwK,SAGP2tC,EAAA3wC,UAAAgb,OAAP,WACE,OACEwnC,MAAOhqD,KAAKgqD,MACZnpD,KAAMb,KAAKa,KACXmvB,KAAMhwB,KAAKgwB,KACXo9B,MAAOptD,KAAKotD,MACZ5iD,QAASxK,KAAKwK,UAIJ2tC,EAAAinB,SAAd,SAAuBC,GACrB,GAAIx2D,GAAM,GAAIsvC,GAAS,EAMvB,OALAtvC,GAAImhD,MAAQqV,EAAKrV,MACjBnhD,EAAIhI,KAAOw+D,EAAKx+D,KAChBgI,EAAImnB,KAAOqvC,EAAKrvC,KAChBnnB,EAAIukD,MAAQiS,EAAKjS,MACjBvkD,EAAI2B,QAAU60D,EAAK70D,QACZ3B,GAMFsvC,EAAA3wC,UAAAslD,cAAP,SAAqBt7C,EAAgD7Q,GAAhD,SAAA6Q,IAAAA,EAAA,GAAqBqP,GAAO7gB,KAAKs/D,eAAe,SAAA3+D,IAAAA,EAAA,EACnE,IAAI4+D,GAAe/tD,EAAOgQ,MAAMg+C,KAAKC,UAAUz/D,KAAKwiB,UAAW7hB,EAAI,EAEnE,OADA6Q,GAAOwU,cAAcu5C,EAAc5+D,GAC5B6Q,GAMK2mC,EAAA6U,WAAd,SAAyBx7C,EAAgB7Q,GACvC,MADuC,UAAAA,IAAAA,EAAA,GAChCw3C,EAASinB,SAASI,KAAKttC,MAAM1gB,EAAOjD,SAAS,OAAQ5N,EAAI,EAAGA,EAAI,EAAI6Q,EAAOuT,aAAapkB,OAM1Fw3C,EAAA3wC,UAAA83D,WAAP,WAEE,MAAO,GAAIz+C,EAAOM,WAAWq+C,KAAKC,UAAUz/D,KAAKwiB,YAGrC21B,EAAAsG,UAAd,SAAwB59C,EAAiBqvB,GACvC,MAAO,IAAIioB,GAASt3C,EAAMm+D,EAAan+D,GAAOqvB,IAElCioB,EAAAqC,OAAd,SAAqBxqB,GACnB,MAAOhwB,MAAKy+C,UAAUrG,EAAUoC,OAAQxqB,IAG5BmoB,EAAAsH,OAAd,SAAqBzvB,GACnB,MAAOhwB,MAAKy+C,UAAUrG,EAAUqH,OAAQzvB,IAG5BmoB,EAAAmH,OAAd,SAAqBtvB,GACnB,MAAOhwB,MAAKy+C,UAAUrG,EAAUkH,OAAQtvB,IAG5BmoB,EAAAkH,QAAd,SAAsBrvB,GACpB,MAAOhwB,MAAKy+C,UAAUrG,EAAUiH,QAASrvB,IAG7BmoB,EAAAE,MAAd,SAAoBroB,GAClB,MAAOhwB,MAAKy+C,UAAUrG,EAAUC,MAAOroB,IAG3BmoB,EAAA6L,UAAd,SAAwBh0B,GACtB,MAAOhwB,MAAKy+C,UAAUrG,EAAU4L,UAAWh0B,IAE/CmoB,GAxG8Bv3C,MAAjBpB,GAAA24C,SAAQA,yFCtCrB,IAAAunB,GAAAx+D,EAAwB,yBAYhB1B,GAAA62C,YAAWqpB,EAAA,OAXnB,IAAAC,GAAAz+D,EAAoB,qBAWC1B,GAAAw6C,QAAO2lB,EAAA,OAV5B,IAAAC,GAAA1+D,EAA0B,2BAUI1B,GAAA6gD,cAAauf,EAAA,OAT3C,IAAAC,GAAA3+D,EAAoB,qBASyB1B,GAAAwiD,QAAO6d,EAAA,OARpD,IAAAvY,GAAApmD,EAAqB,sBAQiC1B,GAAAsgE,SAAQxY,EAAA,OAP9D,IAAAyY,GAAA7+D,EAAsB,uBAO0C1B,GAAAwgE,UAASD,EAAA,OANzE,IAAAE,GAAA/+D,EAAyB,0BAMkD1B,GAAA0gE,aAAYD,EAAA,OALvF,IAAAE,GAAAj/D,EAAgC,iCAKyD1B,GAAA+nD,oBAAmB4Y,EAAA,OAJ5G,IAAAC,GAAAl/D,EAAsB,uBAIwF1B,GAAA+sD,UAAS6T,EAAA,OAHvH,IAAAC,GAAAn/D,EAAqB,sBAGoG1B,GAAA2wD,SAAQkQ,EAAA,OAFjI,IAAAC,GAAAp/D,EAA2B,4BAEwG1B,GAAAuzD,eAAcuN,EAAA,OADjJ,IAAAC,GAAAr/D,EAAkB,mBACiI1B,GAAA65D,MAAKkH,EAAA,iYCkBxJ,SAAAC,GAAwBj4D,GACtBA,EAAIsY,OAASA,EACbtY,EAAI2I,QAAUA,CACd,IAAIuvD,GAA4B,MAAfl4D,EAAI7H,QAAkB6H,EAAI7H,QAAU,IAErD6H,GAAI7H,QAAU,SAASwO,GACrB,GAAI4W,GAAK46C,EAAWxxD,EACpB,OAAU,OAAN4W,EACK26C,EAAWp/D,MAAM,KAAM6C,MAAMsD,UAAUxE,MAAMjC,KAAKgD,UAAW,IAE7D+hB,GAKb,QAAA66C,GAAmCjxD,EAAcimC,GACxCirB,EAAYlxD,GAAQimC,EAS7B,QAAA+qB,GAA2BjhE,GACzB,OAAOA,GACL,IAAK,KACH,MAAOk2C,EACT,KAAK,OACH,MAAO3lB,EACT,KAAK,SAEH,MAAOxe,EACT,KAAK,UACH,MAAON,EACT,KAAK,YACH,MAAO2vD,EACT,SACE,MAAOD,GAAWnhE,IAUxB,QAAA43C,GAA2BypB,GACzB,MAAOnrB,GAAG0B,WAAWypB,GA5EvB,GAAOtvD,GAAMtQ,EAAW,UACjBy0C,EAAEz0C,EAAW,aACb8uB,EAAI9uB,EAAW,QAEtB6/D,EAAA7/D,EAAyB,2BA2EjB1B,GAAAwhE,aAAYD,EAAA,OA1EpB,IAAYH,GAAU1/D,EAAM,aA0EN1B,GAAAohE,WAAUA,CAzEhC,IAAYC,GAAQ3/D,EAAM,SAEtBgQ,GAAwB,gBAC1BA,EAAwB,iBAiBV1R,EAAAghE,QAAOA,EAePhhE,EAAAmhE,mBAAkBA,EAUlBnhE,EAAAkhE,WAAUA,EAwBVlhE,EAAA63C,WAAUA,qNC/E1B,IAAA9B,GAAAr0C,EAAkC,eAiKlC+wD,EAAA,WAAA,QAAAA,MA+BA,MA9BSA,GAAAzqD,UAAAqM,KAAP,SAAYhP,GACVA,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,WAErBvM,EAAAzqD,UAAAsuC,SAAP,WACE,KAAM,IAAIP,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAExBvM,EAAAzqD,UAAAy1D,SAAP,SAAgBp4D,GACd7E,KAAK6T,KAAKhP,IAELotD,EAAAzqD,UAAA21D,aAAP,WACE,MAAOn9D,MAAK81C,YAEPmc,EAAAzqD,UAAA0kD,MAAP,SAAal0B,EAAaH,EAAahzB,GACrCA,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,WAErBvM,EAAAzqD,UAAAgyC,UAAP,SAAiBxhB,EAAaH,GAC5B,KAAM,IAAI0d,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAExBvM,EAAAzqD,UAAAukD,MAAP,SAAatyB,EAAc50B,GACzBA,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,WAErBvM,EAAAzqD,UAAA8xC,UAAP,SAAiB7f,GACf,KAAM,IAAI8b,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAExBvM,EAAAzqD,UAAA2kD,OAAP,SAAcxS,EAAaC,EAAa/0C,GACtCA,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,WAErBvM,EAAAzqD,UAAAkyC,WAAP,SAAkBC,EAAaC,GAC7B,KAAM,IAAIrE,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAEjCvM,IA/BazyD,GAAAyyD,SAAQA,uDCjKrB,IAAOgP,GAAS//D,EAAW,gBAK3B,SAAYsiD,GAEVA,EAAAA,EAAA,IAAA,GAAA,MAEAA,EAAAA,EAAA,gBAAA,GAAA,kBAEAA,EAAAA,EAAA,cAAA,GAAA,gBAEAA,EAAAA,EAAA,YAAA,GAAA,eARUhkD,EAAAgkD,aAAAhkD,EAAAgkD,eAAZ,IAAYA,GAAAhkD,EAAAgkD,WA8BZzM,EAAA,WA0BE,QAAAA,GAAY+W,GAEV,GADA9tD,KAAK8tD,QAAUA,EACX/W,EAASmqB,cAAc19C,QAAQsqC,GAAW,EAC5C,KAAM,IAAImT,GAAU9oB,SAAS8oB,EAAU7oB,UAAUgC,OAAQ,iBAAmB0T,GA+ElF,MAhGgB/W,GAAAC,YAAd,SAA0B8W,GAExB,MAAI/W,GAASoqB,UAAUn7D,eAAe8nD,GAC7B/W,EAASoqB,UAAUrT,GAErB/W,EAASoqB,UAAUrT,GAAW,GAAI/W,GAAS+W,IAmB7C/W,EAAAvvC,UAAAumD,cAAP,WACE,MAAO/tD,MAAK8tD,SAOP/W,EAAAvvC,UAAAu3C,WAAP,WACE,MAAO/+C,MAAK8tD,QAAQtqC,QAAQ,QAAS,GAAMxjB,KAAK8tD,QAAQtqC,QAAQ,QAAS,GAMpEuzB,EAAAvvC,UAAA8nD,YAAP,WACE,MAAOtvD,MAAK8tD,QAAQtqC,QAAQ,QAAS,GAAMxjB,KAAK8tD,QAAQtqC,QAAQ,QAAS,GAAMxjB,KAAK8tD,QAAQtqC,QAAQ,QAAS,GAMxGuzB,EAAAvvC,UAAA45D,aAAP,WACE,MAAOphE,MAAK8tD,QAAQtqC,QAAQ,QAAS,GAMhCuzB,EAAAvvC,UAAA+nD,aAAP,WACE,MAAOvvD,MAAK8tD,QAAQtqC,QAAQ,QAAS,GAMhCuzB,EAAAvvC,UAAA65D,cAAP,WACE,MAAOrhE,MAAK8tD,QAAQtqC,QAAQ,QAAS,GAMhCuzB,EAAAvvC,UAAA87C,YAAP,WACE,MAAOtjD,MAAK8tD,QAAQtqC,QAAQ,QAAS,GAOhCuzB,EAAAvvC,UAAAujD,iBAAP,WACE,MAAI/qD,MAAKsjD,cACAE,EAAWiR,gBACTz0D,KAAKohE,eACP5d,EAAWwH,cAEXxH,EAAWyH,KAQflU,EAAAvvC,UAAA+7C,oBAAP,WACE,OAAKvjD,KAAKsvD,eAAiBtvD,KAAKuvD,iBAAoC,OAAjBvvD,KAAK8tD,QAC/CtK,EAAWC,YAEXD,EAAWiR,iBAvGP1d,EAAAoqB,aAEApqB,EAAAmqB,eAAiB,IAAK,KAAM,KAAM,MAAO,IAAK,KAAM,KAAM,MAAO,IAAK,KAAM,KAAM,OAwGnGnqB,IA5Gav3C,GAAAu3C,SAAQA,sQCnCrBxB,EAAAr0C,EAAkC,eAGlCkgD,EAAAlgD,EAAmC,eAC5B8uB,EAAI9uB,EAAW,QAqetBy+C,EAAA,WAAA,QAAAA,MAoZA,MAnZSA,GAAAn4C,UAAA+wC,cAAP,WACE,OAAO,GAEFoH,EAAAn4C,UAAAwgD,UAAP,SAAiB93B,EAAWrrB,GAC1BA,EAAG,EAAG,IAOD86C,EAAAn4C,UAAA85D,SAAP,SAAgBpxC,EAAW0lB,EAAgB/wC,GACzC,KAAM,IAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAMxB7e,EAAAn4C,UAAA+5D,WAAP,SAAkBrxC,EAAW0lB,EAAgBnc,EAAc50B,GACzD,KAAM,IAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAExB7e,EAAAn4C,UAAAk3C,KAAP,SAAYxuB,EAAW0lB,EAAenc,EAAc50B,GAApD,GAAA6uB,GAAA1zB,KACMwhE,EAAe,SAACthE,EAAa83C,GAC/B,GAAI93C,EAEF,OAAQ01C,EAAK2N,uBACX,IAAKnC,GAAAoC,WAAWC,YAEd,MAAO/vB,GAAKmiB,KAAK7lB,EAAKyB,QAAQvB,IAAI,EAAO,SAAChwB,EAAauhE,GACjDvhE,EACF2E,EAAG3E,GACOuhE,EAAYxpB,cAGtBvkB,EAAK6tC,WAAWrxC,EAAG0lB,EAAMnc,EAAM50B,GAF/BA,EAAG0wC,EAAA4C,SAASkH,QAAQrvB,EAAKyB,QAAQvB,MAKvC,KAAKkxB,GAAAoC,WAAWiR,gBACd,MAAO5vD,GAAG0wC,EAAA4C,SAASqC,OAAOtqB,GAC5B,SACE,MAAOrrB,GAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,iCAExC,CAEL,GAAIpC,EAAMC,cACR,MAAOpzC,GAAG0wC,EAAA4C,SAASmH,OAAOpvB,GAE5B,QAAQ0lB,EAAKmV,oBACX,IAAK3J,GAAAoC,WAAWiR,gBACd,MAAO5vD,GAAG0wC,EAAA4C,SAASsH,OAAOvvB,GAC5B,KAAKkxB,GAAAoC,WAAWwH,cAKd,MAAOt3B,GAAK4tC,SAASpxC,EAAG0lB,EAAM,SAAC11C,EAAa25B,GACtC35B,EACF2E,EAAG3E,GAEH25B,EAAGioB,SAAS,EAAG,WACbjoB,EAAGhmB,KAAK,WACNhP,EAAG,KAAMg1B,QAKnB,KAAKunB,GAAAoC,WAAWyH,IACd,MAAOv3B,GAAK4tC,SAASpxC,EAAG0lB,EAAM/wC,EAChC,SACE,MAAOA,GAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,+BAIjDp6C,MAAK61C,KAAK3lB,GAAG,EAAOsxC,IAEf7hB,EAAAn4C,UAAA22C,OAAP,SAAcvF,EAAiBC,EAAiBh0C,GAC9CA,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,WAErB7e,EAAAn4C,UAAAmxC,WAAP,SAAkBC,EAAiBC,GACjC,KAAM,IAAItD,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAExB7e,EAAAn4C,UAAAquC,KAAP,SAAY3lB,EAAW6oB,EAAkBl0C,GACvCA,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,WAErB7e,EAAAn4C,UAAAsxC,SAAP,SAAgB5oB,EAAW6oB,GACzB,KAAM,IAAIxD,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAQxB7e,EAAAn4C,UAAAk6D,aAAP,SAAoBxxC,EAAW0lB,GAC7B,KAAM,IAAIL,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAMxB7e,EAAAn4C,UAAAm6D,eAAP,SAAsBzxC,EAAW0lB,EAAgBnc,GAC/C,KAAM,IAAI8b,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAExB7e,EAAAn4C,UAAAwxC,SAAP,SAAgB9oB,EAAW0lB,EAAgBnc,GAEzC,GAAIue,EACJ,KACEA,EAAQh4C,KAAK84C,SAAS5oB,GAAG,GACzB,MAAOhwB,GAEP,OAAQ01C,EAAK2N,uBACX,IAAKnC,GAAAoC,WAAWC,YAEd,GAAIge,GAAczhE,KAAK84C,SAAS9oB,EAAKyB,QAAQvB,IAAI,EACjD,KAAKuxC,EAAYxpB,cACf,KAAM1C,GAAA4C,SAASkH,QAAQrvB,EAAKyB,QAAQvB,GAEtC,OAAOlwB,MAAK2hE,eAAezxC,EAAG0lB,EAAMnc,EACtC,KAAK2nB,GAAAoC,WAAWiR,gBACd,KAAMlf,GAAA4C,SAASqC,OAAOtqB,EACxB,SACE,KAAM,IAAIqlB,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,6BAK3C,GAAIpC,EAAMC,cACR,KAAM1C,GAAA4C,SAASmH,OAAOpvB,EAExB,QAAQ0lB,EAAKmV,oBACX,IAAK3J,GAAAoC,WAAWiR,gBACd,KAAMlf,GAAA4C,SAASsH,OAAOvvB,EACxB,KAAKkxB,GAAAoC,WAAWwH,cAOd,MALAhrD,MAAKk5C,WAAWhpB,GAKTlwB,KAAK2hE,eAAezxC,EAAG0lB,EAAMoC,EAAMve,KAC5C,KAAK2nB,GAAAoC,WAAWyH,IACd,MAAOjrD,MAAK0hE,aAAaxxC,EAAG0lB,EAC9B,SACE,KAAM,IAAIL,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,8BAGpCuF,EAAAn4C,UAAA+3C,OAAP,SAAcrvB,EAAWrrB,GACvBA,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,WAErB7e,EAAAn4C,UAAA0xC,WAAP,SAAkBhpB,GAChB,KAAM,IAAIqlB,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAExB7e,EAAAn4C,UAAAg4C,MAAP,SAAatvB,EAAWrrB,GACtBA,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,WAErB7e,EAAAn4C,UAAA2xC,UAAP,SAAiBjpB,GACf,KAAM,IAAIqlB,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAExB7e,EAAAn4C,UAAA01C,MAAP,SAAahtB,EAAWuJ,EAAc50B,GACpCA,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,WAErB7e,EAAAn4C,UAAAiwC,UAAP,SAAiBvnB,EAAWuJ,GAC1B,KAAM,IAAI8b,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAExB7e,EAAAn4C,UAAAkwC,QAAP,SAAexnB,EAAWrrB,GACxBA,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,WAErB7e,EAAAn4C,UAAA4xC,YAAP,SAAmBlpB,GACjB,KAAM,IAAIqlB,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAExB7e,EAAAn4C,UAAA+4C,OAAP,SAAcrwB,EAAWrrB,GACvB7E,KAAK61C,KAAK3lB,EAAG,KAAM,SAASrnB,GAC1BhE,EAAU,MAAPgE,MAGA82C,EAAAn4C,UAAA6xC,WAAP,SAAkBnpB,GAChB,IAEE,MADAlwB,MAAK84C,SAAS5oB,GAAG,IACV,EACP,MAAOhwB,GACP,OAAO,IAGJy/C,EAAAn4C,UAAA8pD,SAAP,SAAgBphC,EAAWgrB,EAAiCr2C,GAC1D,GAAI7E,KAAKu4C,gBAKP,IAAK,GAFDqpB,GAAY1xC,EAAEnhB,MAAMihB,EAAKI,KAEpBzvB,EAAI,EAAGA,EAAIihE,EAAU5gE,OAAQL,IAAK,CACzC,GAAIkhE,GAAWD,EAAU5+D,MAAM,EAAGrC,EAAI,EACtCihE,GAAUjhE,GAAKqvB,EAAK5iB,KAAK/L,MAAM,KAAMwgE,OAIvC7hE,MAAKugD,OAAOrwB,EAAG,SAAS4xC,GAClBA,EACFj9D,EAAG,KAAMqrB,GAETrrB,EAAG0wC,EAAA4C,SAASqC,OAAOtqB,OAKpByvB,EAAAn4C,UAAA82D,aAAP,SAAoBpuC,EAAWgrB,GAC7B,IAAIl7C,KAAKu4C,gBASF,CAEL,GAAIv4C,KAAKq5C,WAAWnpB,GAClB,MAAOA,EAEP,MAAMqlB,GAAA4C,SAASqC,OAAOtqB,GATxB,IAAK,GAFD0xC,GAAY1xC,EAAEnhB,MAAMihB,EAAKI,KAEpBzvB,EAAI,EAAGA,EAAIihE,EAAU5gE,OAAQL,IAAK,CACzC,GAAIkhE,GAAWD,EAAU5+D,MAAM,EAAGrC,EAAI,EACtCihE,GAAUjhE,GAAKqvB,EAAK5iB,KAAK/L,MAAM,KAAMwgE,KAWpCliB,EAAAn4C,UAAAs6C,SAAP,SAAgB5xB,EAAWloB,EAAanD,GACtC7E,KAAK0+C,KAAKxuB,EAAGkxB,EAAArK,SAASC,YAAY,MAAO,IAAO,SAAUrb,EAAc9B,GACtE,MAAI8B,GACK92B,EAAG82B,OAEZ9B,GAAGioB,SAAS95C,EAAK,SAAU2zB,GACzB9B,EAAG+jB,MAAM,SAAUmkB,GACjBl9D,EAAG82B,GAAMomC,UAKVpiB,EAAAn4C,UAAAg1D,aAAP,SAAoBtsC,EAAWloB,GAC7B,GAAI6xB,GAAK75B,KAAKg5C,SAAS9oB,EAAGkxB,EAAArK,SAASC,YAAY,MAAO,IAEtD,KACEnd,EAAG2iC,aAAax0D,GAChB,MAAO9H,GACP,KAAMA,WAEN25B,EAAGsc,cAGAwJ,EAAAn4C,UAAAuwC,SAAP,SAAgBwZ,EAAepvC,EAAkByzB,EAAgB/wC,GAE/D,GAAI+vD,GAAQ/vD,CAEZ7E,MAAK0+C,KAAK6S,EAAO3b,EAAM,IAAO,SAAS/sC,EAAegxB,GACpD,MAAIhxB,GACKhE,EAAGgE,IAEZhE,EAAK,SAASgE,EAAeqG,GAC3B2qB,EAAG+jB,MAAM,SAASiX,GAIhB,MAHW,OAAPhsD,IACFA,EAAMgsD,GAEDD,EAAM/rD,EAAKqG,UAGtB2qB,GAAGgc,KAAK,SAAShtC,EAAegtC,GAC9B,GAAW,MAAPhtC,EACF,MAAOhE,GAAGgE,EAGZ,IAAI2e,GAAM,GAAI3G,GAAOg1B,EAAK5b,KAC1BJ,GAAGsS,KAAK3kB,EAAK,EAAGquB,EAAK5b,KAAM,EAAG,SAASpxB,GACrC,GAAW,MAAPA,EACF,MAAOhE,GAAGgE,EACL,IAAiB,OAAbsZ,EACT,MAAOtd,GAAGgE,EAAK2e,EAEjB,KACE3iB,EAAG,KAAM2iB,EAAIjZ,SAAS4T,IACtB,MAAOjiB,GACP2E,EAAG3E,YAMNy/C,EAAAn4C,UAAAyxC,aAAP,SAAoBsY,EAAepvC,EAAkByzB,GAEnD,GAAI/b,GAAK75B,KAAKg5C,SAASuY,EAAO3b,EAAM,IACpC,KACE,GAAIC,GAAOhc,EAAGif,WAEVtxB,EAAM,GAAI3G,GAAOg1B,EAAK5b,KAG1B,OAFAJ,GAAGyjC,SAAS91C,EAAK,EAAGquB,EAAK5b,KAAM,GAC/BJ,EAAGsc,YACc,OAAbh0B,EACKqF,EAEFA,EAAIjZ,SAAS4T,WAEpB0X,EAAGsc,cAGAwJ,EAAAn4C,UAAAy1C,UAAP,SAAiBsU,EAAe9gD,EAAW0R,EAAkByzB,EAAgBnc,EAAc50B,GAEzF,GAAI+vD,GAAQ/vD,CAEZ7E,MAAK0+C,KAAK6S,EAAO3b,EAAM,IAAO,SAAS/sC,EAAegxB,GACpD,GAAW,MAAPhxB,EACF,MAAOhE,GAAGgE,EAEZhE,GAAK,SAASgE,GACZgxB,EAAG+jB,MAAM,SAASiX,GAChBD,EAAa,MAAP/rD,EAAcA,EAAMgsD,KAI9B,KACsB,gBAATpkD,KACTA,EAAO,GAAIoQ,GAAOpQ,EAAM0R,IAE1B,MAAOjiB,GACP,MAAO2E,GAAG3E,GAGZ25B,EAAGrY,MAAM/Q,EAAM,EAAGA,EAAKzP,OAAQ,EAAG6D,MAG/B86C,EAAAn4C,UAAAqvC,cAAP,SAAqB0a,EAAe9gD,EAAW0R,EAAkByzB,EAAgBnc,GAE/E,GAAII,GAAK75B,KAAKg5C,SAASuY,EAAO3b,EAAMnc,EACpC,KACsB,gBAAThpB,KACTA,EAAO,GAAIoQ,GAAOpQ,EAAM0R,IAG1B0X,EAAGqwB,UAAUz5C,EAAM,EAAGA,EAAKzP,OAAQ,WAEnC64B,EAAGsc,cAGAwJ,EAAAn4C,UAAAgqD,WAAP,SAAkBD,EAAe9gD,EAAW0R,EAAkByzB,EAAgBnc,EAAc50B,GAE1F,GAAI+vD,GAAQ/vD,CACZ7E,MAAK0+C,KAAK6S,EAAO3b,EAAMnc,EAAM,SAAS5wB,EAAegxB,GACnD,MAAW,OAAPhxB,EACKhE,EAAGgE,IAEZhE,EAAK,SAASgE,GACZgxB,EAAG+jB,MAAM,SAASiX,GAChBD,EAAa,MAAP/rD,EAAcA,EAAMgsD,MAGV,gBAATpkD,KACTA,EAAO,GAAIoQ,GAAOpQ,EAAM0R,QAE1B0X,GAAGrY,MAAM/Q,EAAM,EAAGA,EAAKzP,OAAQ,KAAM6D,OAGlC86C,EAAAn4C,UAAAi1D,eAAP,SAAsBlL,EAAe9gD,EAAW0R,EAAkByzB,EAAgBnc,GAChF,GAAII,GAAK75B,KAAKg5C,SAASuY,EAAO3b,EAAMnc,EACpC,KACsB,gBAAThpB,KACTA,EAAO,GAAIoQ,GAAOpQ,EAAM0R,IAE1B0X,EAAGqwB,UAAUz5C,EAAM,EAAGA,EAAKzP,OAAQ,cAEnC64B,EAAGsc,cAGAwJ,EAAAn4C,UAAAukD,MAAP,SAAa77B,EAAWqpB,EAAmB9f,EAAc50B,GACvDA,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,WAErB7e,EAAAn4C,UAAA8xC,UAAP,SAAiBppB,EAAWqpB,EAAmB9f,GAC7C,KAAM,IAAI8b,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAExB7e,EAAAn4C,UAAA0kD,MAAP,SAAah8B,EAAWupB,EAAmBzhB,EAAaH,EAAahzB,GACnEA,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,WAErB7e,EAAAn4C,UAAAgyC,UAAP,SAAiBtpB,EAAWupB,EAAmBzhB,EAAaH,GAC1D,KAAM,IAAI0d,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAExB7e,EAAAn4C,UAAA2kD,OAAP,SAAcj8B,EAAWypB,EAAaC,EAAa/0C,GACjDA,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,WAErB7e,EAAAn4C,UAAAkyC,WAAP,SAAkBxpB,EAAWypB,EAAaC,GACxC,KAAM,IAAIrE,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAExB7e,EAAAn4C,UAAAiqD,KAAP,SAAYC,EAAiBC,EAAiB9sD,GAC5CA,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,WAErB7e,EAAAn4C,UAAAu2D,SAAP,SAAgBrM,EAAiBC,GAC/B,KAAM,IAAIpc,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAExB7e,EAAAn4C,UAAAoqD,QAAP,SAAeF,EAAiBC,EAAiBhwD,EAAckD,GAC7DA,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,WAErB7e,EAAAn4C,UAAAw2D,YAAP,SAAmBtM,EAAiBC,EAAiBhwD,GACnD,KAAM,IAAI4zC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAExB7e,EAAAn4C,UAAAqqD,SAAP,SAAgB3hC,EAAWrrB,GACzBA,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUomB,WAErB7e,EAAAn4C,UAAAy2D,aAAP,SAAoB/tC,GAClB,KAAM,IAAIqlB,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAEjC7e,IApZangD,GAAAmgD,eAAcA,CA0Z3B,IAAA9F,GAAA,SAAAhyB,GAAA,QAAAgyB,KAA2ChyB,EAAAxmB,MAAArB,KAAA+D,WAqH3C,MArH2C+jB,GAAA+xB,EAAAhyB,GAClCgyB,EAAAryC,UAAAmvC,cAAP,WACE,OAAO,GAGFkD,EAAAryC,UAAA22C,OAAP,SAAcvF,EAAiBC,EAAiBh0C,GAC9C,IACE7E,KAAK24C,WAAWC,EAASC,GACzBh0C,IACA,MAAO3E,GACP2E,EAAG3E,KAIA25C,EAAAryC,UAAAquC,KAAP,SAAY3lB,EAAW6oB,EAAkBl0C,GACvC,IACEA,EAAG,KAAM7E,KAAK84C,SAAS5oB,EAAG6oB,IAC1B,MAAO74C,GACP2E,EAAG3E,KAIA25C,EAAAryC,UAAAk3C,KAAP,SAAYxuB,EAAWwS,EAAiBjJ,EAAc50B,GACpD,IACEA,EAAG,KAAM7E,KAAKg5C,SAAS9oB,EAAGwS,EAAOjJ,IACjC,MAAOv5B,GACP2E,EAAG3E,KAIA25C,EAAAryC,UAAA+3C,OAAP,SAAcrvB,EAAWrrB,GACvB,IACE7E,KAAKk5C,WAAWhpB,GAChBrrB,IACA,MAAO3E,GACP2E,EAAG3E,KAIA25C,EAAAryC,UAAAg4C,MAAP,SAAatvB,EAAWrrB,GACtB,IACE7E,KAAKm5C,UAAUjpB,GACfrrB,IACA,MAAO3E,GACP2E,EAAG3E,KAIA25C,EAAAryC,UAAA01C,MAAP,SAAahtB,EAAWuJ,EAAc50B,GACpC,IACE7E,KAAKy3C,UAAUvnB,EAAGuJ,GAClB50B,IACA,MAAO3E,GACP2E,EAAG3E,KAIA25C,EAAAryC,UAAAkwC,QAAP,SAAexnB,EAAWrrB,GACxB,IACEA,EAAG,KAAM7E,KAAKo5C,YAAYlpB,IAC1B,MAAOhwB,GACP2E,EAAG3E,KAIA25C,EAAAryC,UAAAukD,MAAP,SAAa77B,EAAWqpB,EAAmB9f,EAAc50B,GACvD,IACE7E,KAAKs5C,UAAUppB,EAAGqpB,EAAU9f,GAC5B50B,IACA,MAAO3E,GACP2E,EAAG3E,KAIA25C,EAAAryC,UAAA0kD,MAAP,SAAah8B,EAAWupB,EAAmBzhB,EAAaH,EAAahzB,GACnE,IACE7E,KAAKw5C,UAAUtpB,EAAGupB,EAAUzhB,EAAKH,GACjChzB,IACA,MAAO3E,GACP2E,EAAG3E,KAIA25C,EAAAryC,UAAA2kD,OAAP,SAAcj8B,EAAWypB,EAAaC,EAAa/0C,GACjD,IACE7E,KAAK05C,WAAWxpB,EAAGypB,EAAOC,GAC1B/0C,IACA,MAAO3E,GACP2E,EAAG3E,KAIA25C,EAAAryC,UAAAiqD,KAAP,SAAYC,EAAiBC,EAAiB9sD,GAC5C,IACE7E,KAAK+9D,SAASrM,EAASC,GACvB9sD,IACA,MAAO3E,GACP2E,EAAG3E,KAIA25C,EAAAryC,UAAAoqD,QAAP,SAAeF,EAAiBC,EAAiBhwD,EAAckD,GAC7D,IACE7E,KAAKg+D,YAAYtM,EAASC,EAAShwD,GACnCkD,IACA,MAAO3E,GACP2E,EAAG3E,KAIA25C,EAAAryC,UAAAqqD,SAAP,SAAgB3hC,EAAWrrB,GACzB,IACEA,EAAG,KAAM7E,KAAKi+D,aAAa/tC,IAC3B,MAAOhwB,GACP2E,EAAG3E,KAGT25C,GArH2C8F,EAA9BngD,GAAAq6C,sBAAqBA,gJC53BlC,IAAImoB,EAEFA,GADqB,mBAAb,QACGniE,OACe,mBAAX,MACJE,KAEAD,EAEbL,EAAAD,QAASwiE,yJCfT,IAAAC,GAAA/gE,EAAsC,QAWlCy0C,EAAK,GAAIssB,GAAA,QACTC,KAEAC,EAAUF,EAAA,QAAGz6D,SACjB1B,QAAO4B,KAAKy6D,GAAS7jD,QAAQ,SAACtZ,GACL,kBAAZ2wC,GAAG3wC,GACZk9D,EAAQl9D,GAAO,WACb,MAAmB2wC,GAAG3wC,GAAM3D,MAAMs0C,EAAI5xC,YAGxCm+D,EAAQl9D,GAAO2wC,EAAG3wC,KAItBk9D,EAAwB,eAAI,SAASE,GACnCzsB,EAAKysB,GAEPF,EAAqB,YAAI,WACvB,MAAOvsB,IAETusB,EAAiB,QAAI,SAASr9D,EAAcsiD,GAC1C,MAAOxR,GAAGomB,QAAQl3D,EAAIsiD,IAExB+a,EAAY,GAAID,EAAA,QAEhBxiE,EAAAD,QAAS0iE,+DC9BT,SAAYjjB,GACVA,EAAAA,EAAA,KAAA,OAAA,OACAA,EAAAA,EAAA,UAAA,OAAA,YACAA,EAAAA,EAAA,QAAA,OAAA,WAHUz/C,EAAAy/C,WAAAz/C,EAAAy/C,aAAZ,IAAYA,GAAAz/C,EAAAy/C,SAcZ8f,EAAA,WAqCE,QAAAA,GACEsD,EACOpoC,EACAR,EACAkgB,EACAC,EACA0oB,GACP,GAHA,SAAA3oB,IAAAA,EAAA,GAAyB7lB,OACzB,SAAA8lB,IAAAA,EAAA,GAAyB9lB,OACzB,SAAAwuC,IAAAA,EAAA,GAAyBxuC,OAJlB9zB,KAAAi6B,KAAAA,EACAj6B,KAAAy5B,KAAAA,EACAz5B,KAAA25C,MAAAA,EACA35C,KAAA45C,MAAAA,EACA55C,KAAAsiE,MAAAA,EAnCFtiE,KAAAuiE,IAAc,EAEdviE,KAAAwiE,IAAc,EAEdxiE,KAAAyiE,KAAe,EAEfziE,KAAA0iE,MAAgB,EAEhB1iE,KAAA2iE,QAAkB,KAGlB3iE,KAAAg4B,IAAc,EAEdh4B,KAAA63B,IAAc,EAEd73B,KAAA4iE,UAAkB,GAAI9uC,MAAK,GAE3B9zB,KAAAwzD,UAAwB,KAmBZ,MAAbxzD,KAAKy5B,KACP,OAAO4oC,GACL,IAAKpjB,GAASC,KACZl/C,KAAKy5B,KAAO,GACZ,MACF,KAAKwlB,GAASE,UACd,QACEn/C,KAAKy5B,KAAO,IAIlBz5B,KAAK6iE,OAAS/wD,KAAKiM,KAAKkc,EAAO,KAG3Bj6B,KAAKy5B,KAAO,OACdz5B,KAAKy5B,MAAQ4oC,GA8EnB,MA1EStD,GAAAv3D,UAAAkmD,SAAP,WACE,GAAIl8C,GAAS,GAAIqP,GAAO,GAMxB,OALArP,GAAOwU,cAAchmB,KAAKi6B,KAAM,GAChCzoB,EAAOwU,cAAchmB,KAAKy5B,KAAM,GAChCjoB,EAAOoV,cAAc5mB,KAAK25C,MAAM/gB,UAAW,GAC3CpnB,EAAOoV,cAAc5mB,KAAK45C,MAAMhhB,UAAW,IAC3CpnB,EAAOoV,cAAc5mB,KAAKsiE,MAAM1pC,UAAW,IACpCpnB,GAGKutD,EAAA/R,WAAd,SAAyBx7C,GACvB,GAAIyoB,GAAOzoB,EAAOuT,aAAa,GAC7B0U,EAAOjoB,EAAOuT,aAAa,GAC3B40B,EAAQnoC,EAAOmU,aAAa,GAC5Bi0B,EAAQpoC,EAAOmU,aAAa,IAC5B28C,EAAQ9wD,EAAOmU,aAAa,GAE9B,OAAO,IAAIo5C,GAAa,MAAPtlC,EAAeQ,EAAa,KAAPR,EAAc,GAAI3F,MAAK6lB,GAAQ,GAAI7lB,MAAK8lB,GAAQ,GAAI9lB,MAAKwuC,KAO1FvD,EAAAv3D,UAAAqjD,MAAP,WACE,MAAO,IAAIkU,GAAkB,MAAZ/+D,KAAKy5B,KAAez5B,KAAKi6B,KAAkB,KAAZj6B,KAAKy5B,KAAcz5B,KAAK25C,MAAO35C,KAAK45C,MAAO55C,KAAKsiE,QAM3FvD,EAAAv3D,UAAA2zC,OAAP,WACE,OAAoB,MAAZn7C,KAAKy5B,QAAmBwlB,EAASC,MAMpC6f,EAAAv3D,UAAAywC,YAAP,WACE,OAAoB,MAAZj4C,KAAKy5B,QAAmBwlB,EAASE,WAMpC4f,EAAAv3D,UAAAs7D,eAAP,WACE,OAAoB,MAAZ9iE,KAAKy5B,QAAmBwlB,EAAS8jB,SAOpChE,EAAAv3D,UAAAukD,MAAP,SAAatyB,GACXz5B,KAAKy5B,KAAoB,MAAZz5B,KAAKy5B,KAAiBA,GAK9BslC,EAAAv3D,UAAAw7D,SAAP,WACE,OAAO,GAGFjE,EAAAv3D,UAAAy7D,cAAP,WACE,OAAO,GAGFlE,EAAAv3D,UAAA07D,kBAAP,WACE,OAAO,GAGFnE,EAAAv3D,UAAA27D,OAAP,WACE,OAAO,GAEXpE,IAzIAv/D,GAAAmtB,YAAA,kHCOA,SAAAk7B,GAA2B33B,EAAWuJ,EAAckc,GAC7CA,EAAG0D,WAAWnpB,KACjB23B,EAAW73B,EAAKyB,QAAQvB,GAAIuJ,EAAMkc,GAClCA,EAAG8B,UAAUvnB,EAAGuJ,IAQpB,QAAAikB,GAAmC5zB,GACjC,GAAIs5C,GAAKC,EAAkBv5C,GACzBw5C,EAAWF,EAAGlgD,WACdqgD,EAAQH,EAAGjiD,UACb,OAAiB,KAAbmiD,GAAkBC,IAAUH,EAAG5xD,OAAO2P,WACjCiiD,EAAG5xD,OAEH4xD,EAAG5xD,OAAOxO,MAAMsgE,EAAUA,EAAWC,GAQhD,QAAAF,GAAkCv5C,GAChC,MAAIA,GAAmB,aACPA,EAAMzG,eACXyG,YAAgBxG,YAEZwG,EAIN,GAAIxG,YAAWwG,GAU1B,QAAA8sC,GAAgC9sC,GAC9B,MAAwB,gBAAbA,GAAK,GACPA,EACE05C,EACFH,EAAkBv5C,GAElBA,EAAKtH,SAAS/R,KAQzB,QAAAsmD,GAAgC/sD,GAC9B,MAAIw5D,IAAyBx5D,YAAesZ,YACnCmgD,EAAkBz5D,GAChBA,YAAe6W,GACjB7W,EAEA,GAAI6W,GAAkB7W,GAOjC,QAAAy5D,GAAkCL,GAChC,MAAsB,KAAlBA,EAAGlgD,YAAoBkgD,EAAGjiD,aAAeiiD,EAAG5xD,OAAO2P,WAC9C09B,EAAmBukB,GAEnB,GAAIviD,GAAOuiD,GAQtB,QAAAvkB,GAAmC57B,GACjC,IAEE,MAAO,IAAIpC,GAAaoC,GACxB,MAAO/iB,GAEP,MAAO,IAAI2gB,GAAO,GAAIyC,YAAWL,KAiCrC,QAAA+xC,GAA6BlrC,EAAcpmB,EAAmBmK,GAC5D,GADyC,SAAAnK,IAAAA,EAAA,GAAmB,SAAAmK,IAAAA,EAAMic,EAAK9oB,QACnE0C,EAAQ,GAAKmK,EAAM,GAAKA,EAAMic,EAAK9oB,QAAU0C,EAAQmK,EACvD,KAAM,IAAIlK,WAAU,4CAA4CmmB,EAAK9oB,OAAM,MAAM0C,EAAK,KAAKmK,EAAG,IAEhG,IAAoB,IAAhBic,EAAK9oB,OAEP,MAAO,IAAI6f,GAAO,EACb,IAAI2iD,EAAuB,CAChC,GAAIJ,GAAKC,EAAkBv5C,GACzB45C,EAAK55C,EAAK7H,UAAU,GACpB0hD,GAASD,EAAK,GAAK,GAGrB,OADA55C,GAAKvI,WAAWoiD,EAAO,GACnBP,EAAG,KAAOO,GAEZP,EAAG,GAAKM,EACDD,EAAkBL,EAAGpgE,MAAMU,EAAOmK,MAGzCic,EAAKvI,WAAWmiD,EAAI,GACbD,EAAkBL,EAAG7/C,SAAS7f,EAAOmK,KAG9C,GAAI+1D,GAAY,GAAI/iD,GAAOhT,EAAMnK,EAEjC,OADAomB,GAAKxI,KAAKsiD,EAAW,EAAGlgE,EAAOmK,GACxB+1D,EA3KX,GAAO5zC,GAAI9uB,EAAW,QAEhBsiE,EAAgD,mBAAlB,YAMzBhkE,GAAAqkE,KAAqC,mBAAdjjB,aAA2F,MAA7D,kBAAkB7wB,KAAK6wB,UAAUkjB,UAAU72C,gBAA0B2zB,UAAUkjB,UAAUtgD,QAAQ,cAAe,GAKrKhkB,EAAAukE,YAAyC,mBAAXlkE,QAUzBL,EAAAqoD,WAAUA,EAWVroD,EAAAk+C,mBAAkBA,EAelBl+C,EAAA6jE,kBAAiBA,EAmBjB7jE,EAAAo3D,gBAAeA,EAcfp3D,EAAAu3D,gBAAeA,EAafv3D,EAAAikE,kBAAiBA,EAYjBjkE,EAAAq/C,mBAAkBA,EAYN,mBAAlB,cAAwD,mBAAjB,cAC1Cv7B,WAAW9b,UAAiB,QAC/B8b,WAAW9b,UAAUxE,MAAQ,SAASU,EAAmBmK,GAAnB,SAAAnK,IAAAA,EAAA,GAAmB,SAAAmK,IAAAA,EAAc7N,KAAKgB,OAC1E,IAAIjB,GAAmBC,IAgBvB,OAfI0D,GAAQ,IACVA,EAAQ1D,KAAKgB,OAAS0C,EAClBA,EAAQ,IACVA,EAAQ,IAGRmK,EAAM,IACRA,EAAM7N,KAAKgB,OAAS6M,EAChBA,EAAM,IACRA,EAAM,IAGNA,EAAMnK,IACRmK,EAAMnK,GAED,GAAI4f,YAAWvjB,EAAKyR,OAAQzR,EAAKmjB,WAAaxf,EAAOmK,EAAMnK,MAQxDlE,EAAAw1D,aAAYA,iGC3I5B,IAAO/0D,GAASiB,EAAW,qBAEpBy0C,EAAEz0C,EAAW,mBAEpBmf,EAAAnf,EAAgC,gBAiEhC8iE,EAAA,WAME,QAAAA,GAAoBruB,GAAA31C,KAAA21C,GAAAA,EAClB31C,KAAKikE,OAAStuB,EAAGuuB;AACjBlkE,KAAKw7D,GAAK7lB,EAAGwuB,QACbnkE,KAAKokE,KAAOzuB,EAAG0uB,UACfrkE,KAAKskE,YAAc3uB,EAAG4uB,iBAoE1B,MAjESP,GAAAx8D,UAAAk3C,KAAP,SAAYzlB,GACV,GAAIjJ,GAAOhwB,KAAK21C,GAAGsS,SAAShvB,EAAO7oB,MACjCorD,EAAKx7D,KAAKw7D,EACZ,KACMA,EAAGrgB,OAAOliB,EAAO7oB,KAAKqpB,QACxBR,EAAOurC,IAAMxkE,KAAKikE,OAAOjrB,SAAShpB,EAAMhwB,KAAK21C,GAAG8uB,wBAAwBxrC,EAAOyJ,SAEjF,MAAOxiC,GACP,IAAKA,EAAEW,KAAM,KAAMX,EACnB,MAAM,IAAIs7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYpkE,EAAEW,SAIxCmjE,EAAAx8D,UAAAo2C,MAAP,SAAa3kB,GACX,GAAIuiC,GAAKx7D,KAAKw7D,EACd,KACMA,EAAGrgB,OAAOliB,EAAO7oB,KAAKqpB,OAASR,EAAOurC,KACxCxkE,KAAKikE,OAAO9tB,UAAUld,EAAOurC,KAE/B,MAAOtkE,GACP,IAAKA,EAAEW,KAAM,KAAMX,EACnB,MAAM,IAAIs7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYpkE,EAAEW,SAIxCmjE,EAAAx8D,UAAA2kC,KAAP,SAAYlT,EAA0BznB,EAAoBmO,EAAgB3e,EAAgBs7B,GAExF,IACE,MAAOt8B,MAAKikE,OAAO3G,SAASrkC,EAAOurC,IAAKnkD,EAAAojD,kBAAkBjyD,GAASmO,EAAQ3e,EAAQs7B,GACnF,MAAOp8B,GACP,KAAM,IAAIF,MAAKw7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYpkE,EAAEW,SAI7CmjE,EAAAx8D,UAAAga,MAAP,SAAayX,EAA0BznB,EAAoBmO,EAAgB3e,EAAgBs7B,GAEzF,IACE,MAAOt8B,MAAKikE,OAAO/Z,UAAUjxB,EAAOurC,IAAKnkD,EAAAojD,kBAAkBjyD,GAASmO,EAAQ3e,EAAQs7B,GACpF,MAAOp8B,GACP,KAAM,IAAIF,MAAKw7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYpkE,EAAEW,SAI7CmjE,EAAAx8D,UAAAm9D,OAAP,SAAc1rC,EAA0BtZ,EAAgBilD,GACtD,GAAItoC,GAAW3c,CACf,IAAe,IAAXilD,EACFtoC,GAAYrD,EAAOqD,aACd,IAAe,IAAXsoC,GACL5kE,KAAKw7D,GAAGrgB,OAAOliB,EAAO7oB,KAAKqpB,MAC7B,IACE,GAAIoc,GAAO71C,KAAKikE,OAAOtH,UAAU1jC,EAAOurC,IACxCloC,IAAYuZ,EAAK5b,KACjB,MAAO/5B,GACP,KAAM,IAAIF,MAAKw7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYpkE,EAAEW,OAKtD,GAAIy7B,EAAW,EACb,KAAM,IAAIt8B,MAAKw7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYlqB,OAIhD,OADAnhB,GAAOqD,SAAWA,EACXA,GAEX0nC,KAEAa,EAAA,WAME,QAAAA,GAAoBlvB,GAAA31C,KAAA21C,GAAAA,EAClB31C,KAAKikE,OAAStuB,EAAGuuB,YACjBlkE,KAAKw7D,GAAK7lB,EAAGwuB,QACbnkE,KAAKokE,KAAOzuB,EAAG0uB,UACfrkE,KAAKskE,YAAc3uB,EAAG4uB,iBA8I1B,MA3ISM,GAAAr9D,UAAAs9D,QAAP,SAAe10D,GACb,GACIylC,GADA7lB,EAAOhwB,KAAK21C,GAAGsS,SAAS73C,EAE5B,KACEylC,EAAO71C,KAAKikE,OAAO1H,UAAUvsC,GAC7B,MAAO9vB,GACP,IAAKA,EAAEW,KAAM,KAAMX,EACnB,MAAM,IAAIF,MAAKw7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYpkE,EAAEW,OAElD,OACE0hE,IAAK1sB,EAAK0sB,IACVC,IAAK3sB,EAAK2sB,IACV/oC,KAAMoc,EAAKpc,KACXipC,MAAO7sB,EAAK6sB,MACZ1qC,IAAK6d,EAAK7d,IACVH,IAAKge,EAAKhe,IACV4qC,KAAM5sB,EAAK4sB,KACXxoC,KAAM4b,EAAK5b,KACX0f,MAAO9D,EAAK8D,MACZC,MAAO/D,EAAK+D,MACZ0oB,MAAOzsB,EAAKysB,MACZK,QAAS9sB,EAAK8sB,QACdE,OAAQhtB,EAAKgtB,SAIVgC,EAAAr9D,UAAAu9D,QAAP,SAAe30D,EAAwB40D,GACrC,GAAIh1C,GAAOhwB,KAAK21C,GAAGsS,SAAS73C,EAC5B,KAME,GALkBtM,SAAdkhE,EAAKvrC,OACPz5B,KAAKikE,OAAO3qB,UAAUtpB,EAAMg1C,EAAKvrC,MAEjCrpB,EAAKqpB,KAAOurC,EAAKvrC,MAEI31B,SAAnBkhE,EAAKC,UAAyB,CAChC,GAAI/P,GAAO,GAAIphC,MAAKkxC,EAAKC,UACzBjlE,MAAKikE,OAAOvqB,WAAW1pB,EAAMklC,EAAMA,IAErC,MAAOh1D,GACP,IAAKA,EAAEW,KAAM,KAAMX,EAGnB,IAAe,YAAXA,EAAEW,KACJ,KAAM,IAAIb,MAAKw7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYpkE,EAAEW,OAGpD,GAAkBiD,SAAdkhE,EAAK/qC,KACP,IACEj6B,KAAKikE,OAAOzH,aAAaxsC,EAAMg1C,EAAK/qC,MACpC,MAAO/5B,GACP,IAAKA,EAAEW,KAAM,KAAMX,EACnB,MAAM,IAAIF,MAAKw7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYpkE,EAAEW,SAK/CgkE,EAAAr9D,UAAA09D,OAAP,SAAclmB,EAA0BtvC,GACtC,GAAIsgB,GAAOhwB,KAAKokE,KAAKe,MAAMnlE,KAAK21C,GAAGsS,SAASjJ,GAAStvC,GACjD+pB,EAAOz5B,KAAK21C,GAAGyvB,QAAQp1C,EAC3B,OAAOhwB,MAAK21C,GAAG0vB,WAAWrmB,EAAQtvC,EAAM+pB,IAGnCorC,EAAAr9D,UAAA89D,MAAP,SAAatmB,EAA0BtvC,EAAc+pB,EAAc8oC,GACjE,GAAInyD,GAAOpQ,KAAK21C,GAAG0vB,WAAWrmB,EAAQtvC,EAAM+pB,EAAM8oC,GAE9CvyC,EAAOhwB,KAAK21C,GAAGsS,SAAS73C,EAC5B,KACMpQ,KAAKw7D,GAAG+J,MAAMn1D,EAAKqpB,MACrBz5B,KAAKikE,OAAOxsB,UAAUznB,EAAM5f,EAAKqpB,MAEjCz5B,KAAKikE,OAAOptB,cAAc7mB,EAAM,IAAMyJ,KAAMrpB,EAAKqpB,OAEnD,MAAOv5B,GACP,IAAKA,EAAEW,KAAM,KAAMX,EACnB,MAAM,IAAIF,MAAKw7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYpkE,EAAEW,OAElD,MAAOuP,IAGFy0D,EAAAr9D,UAAA22C,OAAP,SAAcqnB,EAA2BC,EAA0BC,GACjE,GAAI9sB,GAAU54C,KAAK21C,GAAGsS,SAASud,GAC3B3sB,EAAU74C,KAAKokE,KAAKe,MAAMnlE,KAAK21C,GAAGsS,SAASwd,GAASC,EACxD,KACE1lE,KAAKikE,OAAOtrB,WAAWC,EAASC,GAChC,MAAO34C,GACP,IAAKA,EAAEW,KAAM,KAAMX,EACnB,MAAM,IAAIF,MAAKw7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYpkE,EAAEW,SAI7CgkE,EAAAr9D,UAAA+3C,OAAP,SAAcP,EAA0BtvC,GACtC,GAAIsgB,GAAOhwB,KAAKokE,KAAKe,MAAMnlE,KAAK21C,GAAGsS,SAASjJ,GAAStvC,EACrD,KACE1P,KAAKikE,OAAO/qB,WAAWlpB,GACvB,MAAO9vB,GACP,IAAKA,EAAEW,KAAM,KAAMX,EACnB,MAAM,IAAIF,MAAKw7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYpkE,EAAEW,SAI7CgkE,EAAAr9D,UAAAg4C,MAAP,SAAaR,EAA0BtvC,GACrC,GAAIsgB,GAAOhwB,KAAKokE,KAAKe,MAAMnlE,KAAK21C,GAAGsS,SAASjJ,GAAStvC,EACrD,KACE1P,KAAKikE,OAAO9qB,UAAUnpB,GACtB,MAAO9vB,GACP,IAAKA,EAAEW,KAAM,KAAMX,EACnB,MAAM,IAAIF,MAAKw7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYpkE,EAAEW,SAI7CgkE,EAAAr9D,UAAAkwC,QAAP,SAAetnC,GACb,GAAI4f,GAAOhwB,KAAK21C,GAAGsS,SAAS73C,EAC5B,KACE,MAAOpQ,MAAKikE,OAAO7qB,YAAYppB,GAC/B,MAAO9vB,GACP,IAAKA,EAAEW,KAAM,KAAMX,EACnB,MAAM,IAAIF,MAAKw7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYpkE,EAAEW,SAI7CgkE,EAAAr9D,UAAAoqD,QAAP,SAAe5S,EAA0B0mB,EAAiB9sB,GACxD,GAAIC,GAAU74C,KAAKokE,KAAKe,MAAMnlE,KAAK21C,GAAGsS,SAASjJ,GAAS0mB,EACxD,KACE1lE,KAAKikE,OAAOjG,YAAYplB,EAASC,GACjC,MAAO34C,GACP,IAAKA,EAAEW,KAAM,KAAMX,EACnB,MAAM,IAAIF,MAAKw7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYpkE,EAAEW,SAI7CgkE,EAAAr9D,UAAAqqD,SAAP,SAAgBzhD,GACd,GAAI4f,GAAOhwB,KAAK21C,GAAGsS,SAAS73C,EAC5B,KACE,MAAOpQ,MAAKikE,OAAOhG,aAAajuC,GAChC,MAAO9vB,GACP,IAAKA,EAAEW,KAAM,KAAMX,EACnB,MAAM,IAAIF,MAAKw7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYpkE,EAAEW,SAGtDgkE,KAEAc,EAAA,WAKE,QAAAA,GAAYC,EAA0BC,EAA8BC,EAA4C7B,GAC9G,GADU,SAAA2B,IAAAA,EAAa7lE,KAAU,IAAG,SAAA8lE,IAAAA,EAAe9lE,KAAY,MAAG,SAAA+lE,IAAAA,EAAsB/lE,KAAmB,aAAG,SAAAkkE,IAAAA,EAAAtuB,GAkDzG31C,KAAA+lE,4BACLh+B,EAAe,IACf9mC,EAAe,KACf+8B,EAAa,KACbgoC,GAAe,IACfC,GAAwB,KACxBC,GAAsB,KACtBC,IAAwB,MACxBC,IAAgC,MAChCC,IAAuB,KACvBC,IAAiC,IACjCC,IAA+B,KAC/BC,IAAwC,KACxCC,IAAsC,MACtCC,KAAkB,IAClBC,KAA2B,IAC3BC,KAAyB,KACzBC,KAAmC,IACnCC,KAAiC,KACjCC,KAAkC,KAClCC,KAAgC,MAChCC,KAA0C,KAC1CC,KAAwC,MACxCC,KAA0B,KAC1BC,KAAwB,OAzEC,mBAAdnnE,GACT,KAAM,IAAIW,OAAM,+DAElBZ,MAAKikE,OAASA,EACdjkE,KAAKw7D,GAAKoK,EACV5lE,KAAKokE,KAAOyB,EACZ7lE,KAAKskE,YAAcwB,EACnB9lE,KAAKqnE,SAAW,GAAIxC,GAAqB7kE,MACzCA,KAAKsnE,WAAa,GAAItD,GAAuBhkE,MAgGjD,MA7FS2lE,GAAAn+D,UAAAmgD,MAAP,SAAaA,GACX,MAAO3nD,MAAKqlE,WAAW,KAAM,IAAKrlE,KAAKolE,QAAQzd,EAAMzxC,KAAKgE,MAAO,IAG5DyrD,EAAAn+D,UAAA69D,WAAP,SAAkBrmB,EAA0BtvC,EAAc+pB,EAAc8oC,GACtE,GAAI/G,GAAKx7D,KAAKw7D,EACd,KAAKA,EAAG+J,MAAM9rC,KAAU+hC,EAAGrgB,OAAO1hB,KAAU+hC,EAAG+L,OAAO9tC,GACpD,KAAM,IAAI+hC,GAAGkJ,WAAW1kE,KAAKskE,YAAYlqB,OAE3C,IAAIhqC,GAAOorD,EAAG6J,WAAWrmB,EAAQtvC,EAAM+pB,EAGvC,OAFArpB,GAAKi3D,SAAWrnE,KAAKqnE,SACrBj3D,EAAKk3D,WAAatnE,KAAKsnE,WAChBl3D,GAGFu1D,EAAAn+D,UAAA49D,QAAP,SAAep1C,GACb,GAAI6lB,EACJ,KACEA,EAAO71C,KAAKikE,OAAO1H,UAAUvsC,GAC7B,MAAO9vB,GACP,IAAKA,EAAEW,KAAM,KAAMX,EACnB,MAAM,IAAIF,MAAKw7D,GAAGkJ,WAAW1kE,KAAKskE,YAAYpkE,EAAEW,OAElD,MAAOg1C,GAAKpc,MAGPksC,EAAAn+D,UAAAygD,SAAP,SAAgB73C,GAEd,IADA,GAAIo3D,MACGp3D,EAAK4uC,SAAW5uC,GACrBo3D,EAAM1/D,KAAKsI,EAAKV,MAChBU,EAAOA,EAAK4uC,MAId,OAFAwoB,GAAM1/D,KAAKsI,EAAKu3C,MAAMzxC,KAAKgE,MAC3BstD,EAAM9xD,UACC1V,KAAKokE,KAAKh3D,KAAK/L,MAAM,KAAMmmE,IA+B7B7B,EAAAn+D,UAAAi9D,wBAAP,SAA+B/hC,GAC7B,GAAI+kC,GAAgC,gBAAV/kC,GAAsBxpB,SAASwpB,EAAO,IAAoBA,CAEpF,OADA+kC,IAAe,KACXA,IAAeznE,MAAK+lE,2BACR/lE,KAAK+lE,2BAA4B0B,GAExC/kC,GAIJijC,EAAAn+D,UAAA08D,UAAP,WACE,MAAOlkE,MAAKikE,QAGP0B,EAAAn+D,UAAA28D,MAAP,WACE,MAAOnkE,MAAKw7D,IAGPmK,EAAAn+D,UAAA68D,QAAP,WACE,MAAOrkE,MAAKokE,MAGPuB,EAAAn+D,UAAA+8D,eAAP,WACE,MAAOvkE,MAAKskE,aAKhBqB,IA9GAnmE,GAAAmtB,YAAA,gHC0BA,SAAA2nC,GAA+BF,GAC7B,MAAOA,IAASA,EAAMjZ,SAGxB,QAAAqZ,GAA8BJ,GAC5B,MAAOA,IAASA,EAAMmR,QAzVxB,GAAAjqB,GAAAp6C,EAAyC,yBAClC8uB,EAAI9uB,EAAW,QAStBmyD,EAAA,WAOE,QAAAA,KAGErzD,KAAKozD,UAELpzD,KAAK0nE,QAAQ,IAAK,GAAItN,IA4N1B,MAtNU/G,GAAA7rD,UAAAmgE,YAAR,SAAoBz3C,GAClB,GAAI03C,GAAU53C,EAAKyB,QAAQvB,GACvB23C,EAAW33C,EAAEa,OAAO62C,EAAQ5mE,QAAsB,MAAZ4mE,EAAkB,EAAI,GAChE,QAAQA,EAASC,IAMZxU,EAAA7rD,UAAA+rD,aAAP,SAAuB1uD,GACrB,IAAK,GAAImrB,KAAQhwB,MAAKozD,OAGpB,IAAK,GAFDv2C,GAAM7c,KAAKozD,OAAOpjC,GAClB2nB,EAAQ96B,EAAI83C,aACPh0D,EAAI,EAAGA,EAAIg3C,EAAM32C,OAAQL,IAAK,CACrC,GAAIwH,GAAO0U,EAAIgqC,QAAQlP,EAAMh3C,GACzB2zD,GAAensD,IACjBtD,EAAGsD,EAAKosD,aAkBTlB,EAAA7rD,UAAAkgE,QAAP,SAAe13C,EAAcokC,GAC3B,GAAa,MAATA,EACF,KAAM,IAAIxzD,OAAM,0BAElB,IAAgB,MAAZovB,EAAK,GACP,KAAM,IAAIpvB,OAAM,+BAAiCovB,EAInD,IAAIhwB,KAAKozD,OAAOptD,eAAegqB,GAC7B,MAAOhwB,MAAKozD,OAAOpjC,KAAUokC,CAG/B,IAAIwN,GAAY5hE,KAAK2nE,YAAY33C,GAC7B43C,EAAUhG,EAAU,GACpBiG,EAAWjG,EAAU,GAErB5iB,EAASh/C,KAAKozD,OAAOwU,EACzB,SAAe9jE,SAAXk7C,GAAiC,MAAThvB,IAE1BgvB,EAAS,GAAIob,IACRp6D,KAAK0nE,QAAQE,EAAS5oB,SAKhB,MAAThvB,IACGgvB,EAAO8oB,QAAQD,EAAUzT,MAK5BI,EAAcJ,KAChBp0D,KAAKozD,OAAOpjC,GAAQokC,IAEf,KAgBFf,EAAA7rD,UAAA2yD,YAAP,SAAmBnqC,EAAcokC,GAE/B,GAAM2T,GAAe/3C,EAAK+B,YAAY,KAChCi2C,EAA6B,GAAhBD,EAAoB,IAAM/3C,EAAKilB,UAAU,EAAG8yB,GACzDE,EAAWj4C,EAAKilB,UAAU8yB,EAAa,GAGzC/oB,EAASh/C,KAAKozD,OAAO4U,EAOzB,OANelkE,UAAXk7C,IAEFA,EAAS,GAAIob,GACbp6D,KAAKm6D,YAAY6N,EAAYhpB,MAG1BA,EAAO8oB,QAAQG,EAAU7T,KAK1BA,EAAMmR,UACRvlE,KAAKozD,OAAOpjC,GAAsBokC,IAE7B,IAQFf,EAAA7rD,UAAA0gE,WAAP,SAAkBl4C,GAChB,GAAI4xC,GAAY5hE,KAAK2nE,YAAY33C,GAC7B43C,EAAUhG,EAAU,GACpBiG,EAAWjG,EAAU,GAGrB5iB,EAASh/C,KAAKozD,OAAOwU,EACzB,IAAe9jE,SAAXk7C,EACF,MAAO,KAGT,IAAIoV,GAAQpV,EAAOmpB,QAAQN,EAC3B,IAAc,OAAVzT,EACF,MAAO,KAGT,IAAII,EAAWJ,GAAQ,CAErB,IAAK,GADDgU,GAAWhU,EAAMO,aACZh0D,EAAI,EAAGA,EAAIynE,EAASpnE,OAAQL,IACnCX,KAAKkoE,WAAWl4C,EAAO,IAAMo4C,EAASznE,GAI3B,OAATqvB,SACKhwB,MAAKozD,OAAOpjC,GAGvB,MAAOokC,IAQFf,EAAA7rD,UAAA6gE,GAAP,SAAUr4C,GACR,GAAI7nB,GAAOnI,KAAKozD,OAAOpjC,EACvB,OAAalsB,UAATqE,EACK,KAEFA,EAAKwsD,cASPtB,EAAA7rD,UAAA6sD,SAAP,SAAgBrkC,GACd,GAAI4xC,GAAY5hE,KAAK2nE,YAAY33C,GAC7B43C,EAAUhG,EAAU,GACpBiG,EAAWjG,EAAU,GAErB5iB,EAASh/C,KAAKozD,OAAOwU,EACzB,OAAe9jE,UAAXk7C,EACK,KAGL4oB,IAAY53C,EACPgvB,EAEFA,EAAO6H,QAAQghB,IAQVxU,EAAAC,YAAd,SAA6BJ,GAC3B,GAAIxkC,GAAM,GAAI2kC,GAEViV,EAAY,GAAIlO,EACpB1rC,GAAI0kC,OAAO,KAAOkV,CAElB,KADA,GAAIj4D,KAAU,GAAI6iD,EAASoV,IACpBj4D,EAAMrP,OAAS,GAAG,CACvB,GAAIozD,GACAhsD,EAAOiI,EAAM9L,MACbgkE,EAAMngE,EAAK,GACXogE,EAAOpgE,EAAK,GACZ42C,EAAS52C,EAAK,EAClB,KAAK,GAAIgI,KAAQo4D,GAAM,CACrB,GAAIJ,GAAWI,EAAKp4D,GAChBV,EAAO,GAAK64D,EAAM,IAAMn4D,CACZ,OAAZg4D,GACF15C,EAAI0kC,OAAO1jD,GAAQ0kD,EAAQ,GAAIgG,GAC/B/pD,EAAMvI,MAAM4H,EAAM04D,EAAUhU,KAG5BA,EAAQ,GAAIiG,GAAiB,GAAI/e,GAAA,QAAMA,EAAA2D,SAASC,MAAM,EAAI,MAE9C,MAAVF,IACFA,EAAOypB,IAAIr4D,GAAQgkD,IAIzB,MAAO1lC,IAEX2kC,IAxOa7zD,GAAA6zD,UAASA,CAwPtB,IAAAgH,GAAA,WACE,QAAAA,GAAoB5pD,GAAAzQ,KAAAyQ,KAAAA,EAKtB,MAJS4pD,GAAA7yD,UAAA2zC,OAAP,WAA2B,OAAO,GAC3Bkf,EAAA7yD,UAAA+9D,MAAP,WAA0B,OAAO,GAC1BlL,EAAA7yD,UAAA+sD,QAAP,WAAsB,MAAOv0D,MAAKyQ,MAC3B4pD,EAAA7yD,UAAAkhE,QAAP,SAAej4D,GAAiBzQ,KAAKyQ,KAAOA,GAC9C4pD,IANa76D,GAAA66D,UAASA,CAWtB,IAAAD,GAAA,WAKE,QAAAA,GAAoB3pD,GAAR,SAAAA,IAAAA,EAAA,MAAQzQ,KAAAyQ,KAAAA,EAJZzQ,KAAAyoE,OAoEV,MA/DSrO,GAAA5yD,UAAA2zC,OAAP,WACE,OAAO,GAEFif,EAAA5yD,UAAA+9D,MAAP,WACE,OAAO,GAEFnL,EAAA5yD,UAAA+sD,QAAP,WAAsB,MAAOv0D,MAAKyQ,MAQ3B2pD,EAAA5yD,UAAAyvC,SAAP,WACE,MAAO,IAAIqE,GAAA,QAAMA,EAAA2D,SAASE,UAAW,KAAM,MAOtCib,EAAA5yD,UAAAmtD,WAAP,WACE,MAAO7uD,QAAO4B,KAAK1H,KAAKyoE,MAOnBrO,EAAA5yD,UAAAq/C,QAAP,SAAe32B,GACb,GAAIy4C,EACJ,OAA+B,QAAvBA,EAAO3oE,KAAKyoE,IAAIv4C,IAAcy4C,EAAO,MAUxCvO,EAAA5yD,UAAAsgE,QAAP,SAAe53C,EAAWkkC,GACxB,QAAIlkC,IAAKlwB,MAAKyoE,OAGdzoE,KAAKyoE,IAAIv4C,GAAKkkC,GACP,IAQFgG,EAAA5yD,UAAA2gE,QAAP,SAAej4C,GACb,GAAI/nB,GAAOnI,KAAKyoE,IAAIv4C,EACpB,OAAapsB,UAATqE,EACK,YAEFnI,MAAKyoE,IAAIv4C,GACT/nB,IAEXiyD,IArEa56D,GAAA46D,SAAQA,EAuEL56D,EAAA80D,YAAWA,EAIX90D,EAAAg1D,WAAUA,sFCxV1B,IAAAlZ,GAAAp6C,EAAyC,yBAKzC0nE,EAAA,WACE,QAAAA,GAAmBha,EACV30B,EACAR,EACAkgB,EACAC,EACA0oB,GALUtiE,KAAA4uD,GAAAA,EACV5uD,KAAAi6B,KAAAA,EACAj6B,KAAAy5B,KAAAA,EACAz5B,KAAA25C,MAAAA,EACA35C,KAAA45C,MAAAA,EACA55C,KAAAsiE,MAAAA,EA2GX,MAtGSsG,GAAAphE,UAAAqhE,QAAP,WACE,MAAO,IAAIvtB,GAAA,SACI,MAAZt7C,KAAKy5B,QAAmB6hB,EAAA2D,SAASE,UAAY7D,EAAA2D,SAASE,UAAY7D,EAAA2D,SAASC,KAC5El/C,KAAKi6B,KAAMj6B,KAAKy5B,KAAM,GAAI3F,MAAK9zB,KAAK25C,OAAQ,GAAI7lB,MAAK9zB,KAAK45C,OAAQ,GAAI9lB,MAAK9zB,KAAKsiE,SAM7EsG,EAAAphE,UAAAshE,QAAP,WAEE,MAAO,IAAK9oE,KAAK4uD,GAAG5tD,QAMf4nE,EAAAphE,UAAAkmD,SAAP,SAAgB5jC,GAOd,MAPc,UAAAA,IAAAA,EAAA,GAAuBjJ,GAAO7gB,KAAK8oE,YACjDh/C,EAAK9D,cAAchmB,KAAKi6B,KAAM,GAC9BnQ,EAAK/D,cAAc/lB,KAAKy5B,KAAM,GAC9B3P,EAAKlD,cAAc5mB,KAAK25C,MAAO,GAC/B7vB,EAAKlD,cAAc5mB,KAAK45C,MAAO,IAC/B9vB,EAAKlD,cAAc5mB,KAAKsiE,MAAO,IAC/Bx4C,EAAKtI,MAAMxhB,KAAK4uD,GAAI,GAAI5uD,KAAK4uD,GAAG5tD,OAAQ,SACjC8oB,GAaF8+C,EAAAphE,UAAAuhE,OAAP,SAAc/wB,GACZ,GAAIgxB,IAAa,CACbhpE,MAAKi6B,OAAS+d,EAAM/d,OACtBj6B,KAAKi6B,KAAO+d,EAAM/d,KAClB+uC,GAAa,GAGXhpE,KAAKy5B,OAASue,EAAMve,OACtBz5B,KAAKy5B,KAAOue,EAAMve,KAClBuvC,GAAa,EAGf,IAAIC,GAAUjxB,EAAM2B,MAAM/gB,SACtB54B,MAAK25C,QAAUsvB,IACjBjpE,KAAK25C,MAAQsvB,EACbD,GAAa,EAGf,IAAIE,GAAUlxB,EAAM4B,MAAMhhB,SACtB54B,MAAK45C,QAAUsvB,IACjBlpE,KAAK45C,MAAQsvB,EACbF,GAAa,EAGf,IAAIG,GAAUnxB,EAAMsqB,MAAM1pC,SAM1B,OALI54B,MAAKsiE,QAAU6G,IACjBnpE,KAAKsiE,MAAQ6G,EACbH,GAAa,GAGRA,GAMKJ,EAAA5b,WAAd,SAAyBx7C,GACvB,GAAe1N,SAAX0N,EACF,KAAM,IAAI5Q,OAAM,KAElB,OAAO,IAAIgoE,GAAMp3D,EAAOjD,SAAS,QAAS,IACxCiD,EAAOuT,aAAa,GACpBvT,EAAOsT,aAAa,GACpBtT,EAAOmU,aAAa,GACpBnU,EAAOmU,aAAa,IACpBnU,EAAOmU,aAAa,MAUjBijD,EAAAphE,UAAA2zC,OAAP,WACE,OAAoB,MAAZn7C,KAAKy5B,QAAmB6hB,EAAA2D,SAASC,MAMpC0pB,EAAAphE,UAAAywC,YAAP,WACE,OAAoB,MAAZj4C,KAAKy5B,QAAmB6hB,EAAA2D,SAASE,WAE7CypB,IAEAnpE,GAAAD,QAASopE,iIC3GT,SAAAQ,KAEE,MAAO,uCAAuC3mE,QAAQ,QAAS,SAAU+tB,GACvE,GAAInwB,GAAoB,GAAhByR,KAAKmlB,SAAgB,EAAG7sB,EAAS,KAALomB,EAAWnwB,EAAS,EAAJA,EAAU,CAC9D,OAAO+J,GAAEmE,SAAS,MAQtB,QAAA86D,GAAiBnpE,EAAa2E,GAC5B,OAAI3E,IACF2E,EAAG3E,IACI,GASX,QAAAopE,GAAmBppE,EAAaolD,EAAgCzgD,GAC9D,OAAI3E,IACFolD,EAAG9tB,MAAM,WACP3yB,EAAG3E,MAEE,oMA1CJo1C,EAAWp0C,EAAW,uBAC7Bq0C,EAAAr0C,EAAkC,qBAClCo6C,EAAAp6C,EAAyC,yBAGlC8uB,EAAI9uB,EAAW,QACf0nE,EAAK1nE,EAAW,oBAChBu0C,EAAYv0C,EAAW,2BAC1BqoE,EAAuB,IAoH3B/kB,EAAA,WACE,QAAAA,GAAoBF,GAAAtkD,KAAAskD,MAAAA,EAKZtkD,KAAAwpE,gBAIAxpE,KAAAypE,gBA0DV,MAnDUjlB,GAAAh9C,UAAAkiE,cAAR,SAAsB1kE,EAAatD,GAE5B1B,KAAKwpE,aAAaxjE,eAAehB,KACpChF,KAAKwpE,aAAaxkE,GAAOtD,IAOrB8iD,EAAAh9C,UAAAmiE,aAAR,SAAqB3kE,GACfhF,KAAKypE,aAAajmD,QAAQxe,MAAS,IACrChF,KAAKypE,aAAa3hE,KAAK9C,GAClBhF,KAAKwpE,aAAaxjE,eAAehB,KACpChF,KAAKwpE,aAAaxkE,GAAOhF,KAAKskD,MAAMtiC,IAAIhd,MAKvCw/C,EAAAh9C,UAAAwa,IAAP,SAAWhd,GACT,GAAIsH,GAAMtM,KAAKskD,MAAMtiC,IAAIhd,EAEzB,OADAhF,MAAK0pE,cAAc1kE,EAAKsH,GACjBA,GAGFk4C,EAAAh9C,UAAAi9C,IAAP,SAAWz/C,EAAayL,EAAkBi0C,GAExC,MADA1kD,MAAK2pE,aAAa3kE,GACXhF,KAAKskD,MAAMG,IAAIz/C,EAAKyL,EAAMi0C,IAG5BF,EAAAh9C,UAAAm9C,IAAP,SAAW3/C,GACThF,KAAK2pE,aAAa3kE,GAClBhF,KAAKskD,MAAMK,IAAI3/C,IAGVw/C,EAAAh9C,UAAAm+C,OAAP,aACOnB,EAAAh9C,UAAAgwB,MAAP,WAEE,GAAI72B,GAAWqE,EAAatD,CAC5B,KAAKf,EAAI,EAAGA,EAAIX,KAAKypE,aAAazoE,OAAQL,IACxCqE,EAAMhF,KAAKypE,aAAa9oE,GACxBe,EAAQ1B,KAAKwpE,aAAaxkE,GACZ,OAAVtD,EAEF1B,KAAKskD,MAAMK,IAAI3/C,GAGfhF,KAAKskD,MAAMG,IAAIz/C,EAAKtD,GAAO,IAInC8iD,IApEahlD,GAAAglD,wBAAuBA,CA0FpC,IAAAolB,GAAA,SAAA/hD,GACE,QAAA+hD,GAAY5zB,EAA6BuH,EAAeC,EAA2BC,EAAcxB,GAC/Fp0B,EAAA9mB,KAAAf,KAAMg2C,EAAKuH,EAAOC,EAAOC,EAAOxB,GAapC,MAfsCn0B,GAAA8hD,EAAA/hD,GAK7B+hD,EAAApiE,UAAAsuC,SAAP,WACM91C,KAAK+1C,YACP/1C,KAAKg2C,IAAIC,UAAUj2C,KAAK82C,UAAW92C,KAAK0zC,YAAa1zC,KAAKi3C,YAC1Dj3C,KAAKk2C,eAIF0zB,EAAApiE,UAAA2uC,UAAP,WACEn2C,KAAK81C,YAET8zB,GAfsCn0B,EAAaW,YAAtC52C,GAAAoqE,iBAAgBA,CA0B7B,IAAA/kB,GAAA,SAAAh9B,GAEE,QAAAg9B,GAAYjuC,GACViR,EAAA9mB,KAAAf,MACAA,KAAKskD,MAAQ1tC,EAAQ0tC,MAErBtkD,KAAK6pE,oBA8VT,MApW4C/hD,GAAA+8B,EAAAh9B,GAS5Bg9B,EAAApkC,YAAd,WAAuC,OAAO,GACvCokC,EAAAr9C,UAAAovC,QAAP,WAA2B,MAAO52C,MAAKskD,MAAM50C,QACtCm1C,EAAAr9C,UAAA8wC,WAAP,WAA+B,OAAO,GAC/BuM,EAAAr9C,UAAAs2C,iBAAP,WAAqC,OAAO,GACrC+G,EAAAr9C,UAAAgxC,cAAP,WAAkC,OAAO,GAClCqM,EAAAr9C,UAAAmvC,cAAP,WAAkC,OAAO,GAKjCkO,EAAAr9C,UAAAqiE,kBAAR,WACE,GAAIvkB,GAAKtlD,KAAKskD,MAAMC,iBAAiB,YACrC,IAA6BzgD,SAAzBwhD,EAAGtjC,IAAIunD,GAA6B,CAEtC,GAAIO,IAAW,GAAKh2C,OAAQ8E,UAE1BmxC,EAAW,GAAInB,GAAMQ,IAAoB,KAAM,IAAM9tB,EAAA2D,SAASE,UAAW2qB,EAAUA,EAAUA,EAG/FxkB,GAAGb,IAAIslB,EAASnb,GAAI,GAAI/tC,GAAO,OAAO,GACtCykC,EAAGb,IAAI8kB,EAAcQ,EAASrc,YAAY,GAC1CpI,EAAGK,WAWCd,EAAAr9C,UAAAwiE,WAAR,SAAmB1kB,EAA+BtG,EAAgBpvB,GAAlE,GAAA8D,GAAA1zB,KACMiqE,EAAiB,SAAC7V,GAEpB,GAAI8V,GAAUx2C,EAAKy2C,cAAc7kB,EAAItG,EAAQoV,EAE7C,IAAI8V,EAAQt6C,GACV,MAAOs6C,GAAQt6C,EAEf,MAAM2lB,GAAA4C,SAASqC,OAAOxqB,EAAKa,QAAQmuB,EAAQpvB,IAG/C,OAAe,MAAXovB,EACe,KAAbpvB,EAEK25C,EAGAU,EAAejqE,KAAKoqE,SAAS9kB,EAAItG,EAAQuqB,IAG3CU,EAAejqE,KAAKoqE,SAAS9kB,EAAItG,EAAShvB,EAAKI,IAAMR,EAC1D5vB,KAAKgqE,WAAW1kB,EAAIt1B,EAAKyB,QAAQutB,GAAShvB,EAAK2B,SAASqtB,OAUtD6F,EAAAr9C,UAAA6iE,UAAR,SAAkB/kB,EAA+Bp1B,GAC/C,MAAOlwB,MAAKoqE,SAAS9kB,EAAIp1B,EAAGlwB,KAAKgqE,WAAW1kB,EAAIt1B,EAAKyB,QAAQvB,GAAIF,EAAK2B,SAASzB,MASzE20B,EAAAr9C,UAAA4iE,SAAR,SAAiB9kB,EAA+Bp1B,EAAW0+B,GACzD,GAAIwF,GAAQ9O,EAAGtjC,IAAI4sC,EACnB,IAAc9qD,SAAVswD,EACF,KAAM7e,GAAA4C,SAASqC,OAAOtqB,EAExB,OAAO04C,GAAM5b,WAAWoH,IAOlBvP,EAAAr9C,UAAA2iE,cAAR,SAAsB7kB,EAA+Bp1B,EAAWkkC,GAC9D,IAAKA,EAAMnc,cACT,KAAM1C,GAAA4C,SAASkH,QAAQnvB,EAEzB,IAAIzf,GAAO60C,EAAGtjC,IAAIoyC,EAAMxF,GACxB,IAAa9qD,SAAT2M,EACF,KAAM8kC,GAAA4C,SAASqC,OAAOtqB,EAExB,OAAOsvC,MAAKttC,MAAMzhB,EAAKlC,aAQjBs2C,EAAAr9C,UAAA8iE,WAAR,SAAmBhlB,EAA+B70C,GAEhD,IADA,GAAiB85D,GAAbC,EAAU,EACPA,EAAU,GACf,IAGE,MAFAD,GAASnB,IACT9jB,EAAGb,IAAI8lB,EAAQ95D,GAAM,GACd85D,EACP,MAAOrqE,IAIX,KAAM,IAAIq1C,GAAA4C,SAAS5C,EAAA6C,UAAU8B,IAAK,8CAa5B2K,EAAAr9C,UAAAijE,cAAR,SAAsBnlB,EAA+Bp1B,EAAWvuB,EAAgB83B,EAAchpB,GAC5F,GAAIsyC,GAAY/yB,EAAKyB,QAAQvB,GAC3BqhC,EAAQvhC,EAAK2B,SAASzB,GACtBw6C,EAAa1qE,KAAKqqE,UAAU/kB,EAAIvC,GAChC4nB,EAAa3qE,KAAKmqE,cAAc7kB,EAAIvC,EAAW2nB,GAC/CZ,GAAW,GAAKh2C,OAAQ8E,SAK1B,IAAU,MAAN1I,EACF,KAAMqlB,GAAA4C,SAASsH,OAAOvvB,EAIxB,IAAIy6C,EAAWpZ,GACb,KAAMhc,GAAA4C,SAASsH,OAAOvvB,EAGxB,KAEE,GAAI06C,GAAS5qE,KAAKsqE,WAAWhlB,EAAI70C,GAC/Bo6D,EAAW,GAAIjC,GAAMgC,EAAQn6D,EAAKzP,OAAQy4B,EAAO93B,EAAMmoE,EAAUA,EAAUA,GAE3EgB,EAAa9qE,KAAKsqE,WAAWhlB,EAAIulB,EAASnd,WAE5Cid,GAAWpZ,GAASuZ,EACpBxlB,EAAGb,IAAIimB,EAAW9b,GAAI,GAAI/tC,GAAO2+C,KAAKC,UAAUkL,KAAc,GAC9D,MAAOzqE,GAEP,KADAolD,GAAG9tB,QACGt3B,EAGR,MADAolD,GAAGK,SACIklB,GAMFhmB,EAAAr9C,UAAAmK,MAAP,WACE3R,KAAKskD,MAAM5W,QAEX1tC,KAAK6pE,qBAGAhlB,EAAAr9C,UAAAmxC,WAAP,SAAkBC,EAAiBC,GACjC,GAAIyM,GAAKtlD,KAAKskD,MAAMC,iBAAiB,aACnCwmB,EAAY/6C,EAAKyB,QAAQmnB,GAAUoyB,EAAUh7C,EAAK2B,SAASinB,GAC3DqyB,EAAYj7C,EAAKyB,QAAQonB,GAAU6sB,EAAU11C,EAAK2B,SAASknB,GAE3DqyB,EAAalrE,KAAKqqE,UAAU/kB,EAAIylB,GAChCI,EAAanrE,KAAKmqE,cAAc7kB,EAAIylB,EAAWG,EAEjD,KAAKC,EAAWH,GACd,KAAMz1B,GAAA4C,SAASqC,OAAO5B,EAExB,IAAIwyB,GAAiBD,EAAWH,EAOhC,UANOG,GAAWH,GAM+B,KAA5CC,EAAY,KAAKznD,QAAQo1B,EAAU,KACtC,KAAM,IAAIrD,GAAA4C,SAAS5C,EAAA6C,UAAUyC,MAAOkwB,EAItC,IAAIM,GAAmBC,CAWvB,IAVIL,IAAcF,GAGhBM,EAAaH,EACbI,EAAaH,IAEbE,EAAarrE,KAAKqqE,UAAU/kB,EAAI2lB,GAChCK,EAAatrE,KAAKmqE,cAAc7kB,EAAI2lB,EAAWI,IAG7CC,EAAW5F,GAAU,CAEvB,GAAI6F,GAAcvrE,KAAKoqE,SAAS9kB,EAAIzM,EAASyyB,EAAW5F,GACxD,KAAI6F,EAAYpwB,SAUd,KAAM5F,GAAA4C,SAASE,MAAMQ,EATrB,KACEyM,EAAGX,IAAI4mB,EAAY3c,IACnBtJ,EAAGX,IAAI2mB,EAAW5F,IAClB,MAAOxlE,GAEP,KADAolD,GAAG9tB,QACGt3B,GAOZorE,EAAW5F,GAAW0F,CAGtB,KACE9lB,EAAGb,IAAIymB,EAAWtc,GAAI,GAAI/tC,GAAO2+C,KAAKC,UAAU0L,KAAc,GAC9D7lB,EAAGb,IAAI4mB,EAAWzc,GAAI,GAAI/tC,GAAO2+C,KAAKC,UAAU6L,KAAc,GAC9D,MAAOprE,GAEP,KADAolD,GAAG9tB,QACGt3B,EAGRolD,EAAGK,UAGEd,EAAAr9C,UAAAsxC,SAAP,SAAgB5oB,EAAW6oB,GAEzB,MAAO/4C,MAAKqqE,UAAUrqE,KAAKskD,MAAMC,iBAAiB,YAAar0B,GAAG24C,WAG7DhkB,EAAAr9C,UAAAm6D,eAAP,SAAsBzxC,EAAW0lB,EAA0Bnc,GACzD,GAAI6rB,GAAKtlD,KAAKskD,MAAMC,iBAAiB,aACnC9zC,EAAO,GAAIoQ,GAAO,GAClB6pC,EAAU1qD,KAAKyqE,cAAcnlB,EAAIp1B,EAAGorB,EAAA2D,SAASC,KAAMzlB,EAAMhpB,EAE3D,OAAO,IAAIm5D,GAAiB5pE,KAAMkwB,EAAG0lB,EAAM8U,EAAQme,UAAWp4D,IAGzDo0C,EAAAr9C,UAAAk6D,aAAP,SAAoBxxC,EAAW0lB,GAC7B,GAAI0P,GAAKtlD,KAAKskD,MAAMC,iBAAiB,YACnCn0C,EAAOpQ,KAAKqqE,UAAU/kB,EAAIp1B,GAC1Bzf,EAAO60C,EAAGtjC,IAAI5R,EAAKw+C,GACrB,IAAa9qD,SAAT2M,EACF,KAAM8kC,GAAA4C,SAASqC,OAAOtqB,EAExB,OAAO,IAAI05C,GAAiB5pE,KAAMkwB,EAAG0lB,EAAMxlC,EAAKy4D,UAAWp4D,IASrDo0C,EAAAr9C,UAAAgkE,YAAR,SAAoBt7C,EAAWq1C,GAC7B,GAAIjgB,GAAKtlD,KAAKskD,MAAMC,iBAAiB,aACnCvF,EAAiBhvB,EAAKyB,QAAQvB,GAC9Bw6C,EAAa1qE,KAAKqqE,UAAU/kB,EAAItG,GAChCysB,EAAgBzrE,KAAKmqE,cAAc7kB,EAAItG,EAAQ0rB,GAC/CrU,EAAmBrmC,EAAK2B,SAASzB,EAEnC,KAAKu7C,EAAcpV,GACjB,KAAM9gB,GAAA4C,SAASqC,OAAOtqB,EAIxB,IAAI46C,GAAaW,EAAcpV,SACxBoV,GAAcpV,EAGrB,IAAIwU,GAAW7qE,KAAKoqE,SAAS9kB,EAAIp1B,EAAG46C,EACpC,KAAKvF,GAASsF,EAAS5yB,cACrB,KAAM1C,GAAA4C,SAASmH,OAAOpvB,EACjB,IAAIq1C,IAAUsF,EAAS5yB,cAC5B,KAAM1C,GAAA4C,SAASkH,QAAQnvB,EAGzB,KAEEo1B,EAAGX,IAAIkmB,EAASjc,IAEhBtJ,EAAGX,IAAImmB,GAEPxlB,EAAGb,IAAIimB,EAAW9b,GAAI,GAAI/tC,GAAO2+C,KAAKC,UAAUgM,KAAiB,GACjE,MAAOvrE,GAEP,KADAolD,GAAG9tB,QACGt3B,EAGRolD,EAAGK,UAGEd,EAAAr9C,UAAA0xC,WAAP,SAAkBhpB,GAChBlwB,KAAKwrE,YAAYt7C,GAAG,IAGf20B,EAAAr9C,UAAA2xC,UAAP,SAAiBjpB,GAEf,GAAIlwB,KAAKo5C,YAAYlpB,GAAGlvB,OAAS,EAC/B,KAAMu0C,GAAA4C,SAAS6L,UAAU9zB,EAEzBlwB,MAAKwrE,YAAYt7C,GAAG,IAIjB20B,EAAAr9C,UAAAiwC,UAAP,SAAiBvnB,EAAWuJ,GAC1B,GAAI6rB,GAAKtlD,KAAKskD,MAAMC,iBAAiB,aACnC9zC,EAAO,GAAIoQ,GAAO,KACpB7gB,MAAKyqE,cAAcnlB,EAAIp1B,EAAGorB,EAAA2D,SAASE,UAAW1lB,EAAMhpB,IAG/Co0C,EAAAr9C,UAAA4xC,YAAP,SAAmBlpB,GACjB,GAAIo1B,GAAKtlD,KAAKskD,MAAMC,iBAAiB,WACrC,OAAOz+C,QAAO4B,KAAK1H,KAAKmqE,cAAc7kB,EAAIp1B,EAAGlwB,KAAKqqE,UAAU/kB,EAAIp1B,MAG3D20B,EAAAr9C,UAAAyuC,UAAP,SAAiB/lB,EAAWzf,EAAkBunC,GAG5C,GAAIsN,GAAKtlD,KAAKskD,MAAMC,iBAAiB,aAEnCmnB,EAAc1rE,KAAKgqE,WAAW1kB,EAAIt1B,EAAKyB,QAAQvB,GAAIF,EAAK2B,SAASzB,IACjEy7C,EAAY3rE,KAAKoqE,SAAS9kB,EAAIp1B,EAAGw7C,GACjCE,EAAeD,EAAU5C,OAAO/wB,EAElC,KAEEsN,EAAGb,IAAIknB,EAAU/c,GAAIn+C,GAAM,GAEvBm7D,GACFtmB,EAAGb,IAAIinB,EAAaC,EAAUje,YAAY,GAE5C,MAAOxtD,GAEP,KADAolD,GAAG9tB,QACGt3B,EAERolD,EAAGK,UAEPd,GApW4CvP,EAAYuE,sBAA3Cr6C,GAAAqlD,uBAAsBA,CAuanC,IAAAgnB,GAAA,SAAAhkD,GACE,QAAAgkD,GAAY71B,EAA8BuH,EAAeC,EAA2BC,EAAcxB,GAChGp0B,EAAA9mB,KAAAf,KAAMg2C,EAAKuH,EAAOC,EAAOC,EAAOxB,GAmBpC,MArBuCn0B,GAAA+jD,EAAAhkD,GAK9BgkD,EAAArkE,UAAAqM,KAAP,SAAYhP,GAAZ,GAAA6uB,GAAA1zB,IACMA,MAAK+1C,UACP/1C,KAAKg2C,IAAIS,MAAMz2C,KAAK82C,UAAW92C,KAAK0zC,YAAa1zC,KAAKi3C,WAAY,SAAC/2C,GAC5DA,GACHwzB,EAAKwiB,aAEPrxC,EAAG3E,KAGL2E,KAIGgnE,EAAArkE,UAAAo2C,MAAP,SAAa/4C,GACX7E,KAAK6T,KAAKhP,IAEdgnE,GArBuCp2B,EAAaW,YAAvC52C,GAAAqsE,kBAAiBA,CA2B9B,IAAAplB,GAAA,SAAA5+B,GAAA,QAAA4+B,KAA6C5+B,EAAAxmB,MAAArB,KAAA+D,WAgiB7C,MAhiB6C+jB,GAAA2+B,EAAA5+B,GAOpC4+B,EAAAj/C,UAAAg/C,KAAP,SAAYlC,EAA2Bz/C,GACrC7E,KAAKskD,MAAQA,EAEbtkD,KAAK6pE,kBAAkBhlE,IAGX4hD,EAAAhmC,YAAd,WAAuC,OAAO,GACvCgmC,EAAAj/C,UAAAovC,QAAP,WAA2B,MAAO52C,MAAKskD,MAAM50C,QACtC+2C,EAAAj/C,UAAA8wC,WAAP,WAA+B,OAAO,GAC/BmO,EAAAj/C,UAAAs2C,iBAAP,WAAqC,OAAO,GACrC2I,EAAAj/C,UAAAgxC,cAAP,WAAkC,OAAO,GAClCiO,EAAAj/C,UAAAmvC,cAAP,WAAkC,OAAO,GAKjC8P,EAAAj/C,UAAAqiE,kBAAR,SAA0BhlE,GACxB,GAAIygD,GAAKtlD,KAAKskD,MAAMC,iBAAiB,YACrCe,GAAGtjC,IAAIunD,EAAc,SAACrpE,EAAauQ,GACjC,GAAIvQ,GAAc4D,SAAT2M,EAAoB,CAE3B,GAAIq5D,IAAW,GAAKh2C,OAAQ8E,UAE1BmxC,EAAW,GAAInB,GAAMQ,IAAoB,KAAM,IAAM9tB,EAAA2D,SAASE,UAAW2qB,EAAUA,EAAUA,EAG/FxkB,GAAGb,IAAIslB,EAASnb,GAAI,GAAI/tC,GAAO,OAAO,EAAO,SAAC3gB,GACxCopE,EAAUppE,EAAGolD,EAAIzgD,IACnBygD,EAAGb,IAAI8kB,EAAcQ,EAASrc,YAAY,EAAO,SAACxtD,GAC5CA,EACFolD,EAAG9tB,MAAM,WAAQ3yB,EAAG3E,KAEpBolD,EAAGK,OAAO9gD,WAOlBygD,GAAGK,OAAO9gD,MAYR4hD,EAAAj/C,UAAAwiE,WAAR,SAAmB1kB,EAAgCtG,EAAgBpvB,EAAkB/qB,GAArF,GAAA6uB,GAAA1zB,KACM8rE,EAA4B,SAAC5rE,EAAak0D,EAAe8V,GACvDhqE,EACF2E,EAAG3E,GACMgqE,EAAQt6C,GACjB/qB,EAAG,KAAMqlE,EAAQt6C,IAEjB/qB,EAAG0wC,EAAA4C,SAASqC,OAAOxqB,EAAKa,QAAQmuB,EAAQpvB,KAI7B,OAAXovB,EACe,KAAbpvB,EAEF/qB,EAAG,KAAM0kE,GAGTvpE,KAAKoqE,SAAS9kB,EAAItG,EAAQuqB,EAAc,SAACrpE,EAAak0D,GAChDiV,EAAQnpE,EAAG2E,IACb6uB,EAAKy2C,cAAc7kB,EAAItG,EAAQoV,EAAO,SAACl0D,EAAagqE,GAElD4B,EAA0B5rE,EAAGk0D,EAAO8V,OAQ5ClqE,KAAK+rE,uBAAuBzmB,EAAItG,EAAQ8sB,IAUpCrlB,EAAAj/C,UAAA6iE,UAAR,SAAkB/kB,EAAgCp1B,EAAWrrB,GAA7D,GAAA6uB,GAAA1zB,IACEA,MAAKgqE,WAAW1kB,EAAIt1B,EAAKyB,QAAQvB,GAAIF,EAAK2B,SAASzB,GAAI,SAAChwB,EAAa0uD,GAC/Dya,EAAQnpE,EAAG2E,IACb6uB,EAAK02C,SAAS9kB,EAAIp1B,EAAG0+B,EAAI/pD,MAYvB4hD,EAAAj/C,UAAA4iE,SAAR,SAAiB9kB,EAAgCp1B,EAAW0+B,EAAY/pD,GACtEygD,EAAGtjC,IAAI4sC,EAAI,SAAC1uD,EAAauQ,GACnB44D,EAAQnpE,EAAG2E,KACAf,SAAT2M,EACF5L,EAAG0wC,EAAA4C,SAASqC,OAAOtqB,IAEnBrrB,EAAG,KAAM+jE,EAAM5b,WAAWv8C,QAU1Bg2C,EAAAj/C,UAAA2iE,cAAR,SAAsB7kB,EAAgCp1B,EAAWkkC,EAAcvvD,GACxEuvD,EAAMnc,cAGTqN,EAAGtjC,IAAIoyC,EAAMxF,GAAI,SAAC1uD,EAAauQ,GAC7B,GAAI44D,EAAQnpE,EAAG2E,GACb,IACEA,EAAG,KAAM26D,KAAKttC,MAAMzhB,EAAKlC,aACzB,MAAOrO,GAIP2E,EAAG0wC,EAAA4C,SAASqC,OAAOtqB,OAVzBrrB,EAAG0wC,EAAA4C,SAASkH,QAAQnvB,KAqBhBu2B,EAAAj/C,UAAAukE,uBAAR,SAA+BzmB,EAAgCp1B,EAAWrrB,GAA1E,GAAA6uB,GAAA1zB,IACEA,MAAKqqE,UAAU/kB,EAAIp1B,EAAG,SAAChwB,EAAak0D,GAC9BiV,EAAQnpE,EAAG2E,IACb6uB,EAAKy2C,cAAc7kB,EAAIp1B,EAAGkkC,EAAO,SAACl0D,EAAGgzD,GAC/BmW,EAAQnpE,EAAG2E,IACbA,EAAG,KAAMuvD,EAAOlB,QAYlBzM,EAAAj/C,UAAA8iE,WAAR,SAAmBhlB,EAAgC70C,EAAkB5L,GACnE,GAAiB0lE,GAAbC,EAAU,EACZwB,EAAS,WACW,MAAZxB,EAEJ3lE,EAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAU8B,IAAK,+CAG/BqwB,EAASnB,IACT9jB,EAAGb,IAAI8lB,EAAQ95D,GAAM,EAAO,SAACvQ,EAAa+rE,GACpC/rE,IAAM+rE,EACRD,IAGAnnE,EAAG,KAAM0lE,MAKnByB,MAaMvlB,EAAAj/C,UAAAijE,cAAR,SAAsBnlB,EAAgCp1B,EAAWvuB,EAAgB83B,EAAchpB,EAAkB5L,GAAjH,GAAA6uB,GAAA1zB,KACM+iD,EAAY/yB,EAAKyB,QAAQvB,GAC3BqhC,EAAQvhC,EAAK2B,SAASzB,GACtB45C,GAAW,GAAKh2C,OAAQ8E,SAK1B,OAAU,MAAN1I,EACKrrB,EAAG0wC,EAAA4C,SAASsH,OAAOvvB,QAM5BlwB,MAAK+rE,uBAAuBzmB,EAAIvC,EAAW,SAAC7iD,EAAawqE,EAAoBC,GACvErB,EAAUppE,EAAGolD,EAAIzgD,KACf8lE,EAAWpZ,GAEbjM,EAAG9tB,MAAM,WACP3yB,EAAG0wC,EAAA4C,SAASsH,OAAOvvB,MAIrBwD,EAAK42C,WAAWhlB,EAAI70C,EAAM,SAACvQ,EAAa0qE,GACtC,GAAItB,EAAUppE,EAAGolD,EAAIzgD,GAAK,CAExB,GAAI8mE,GAAY,GAAI/C,GAAMgC,EAAQn6D,EAAKzP,OAAQy4B,EAAO93B,EAAMmoE,EAAUA,EAAUA,EAChFp2C,GAAK42C,WAAWhlB,EAAIqmB,EAAUje,WAAY,SAACxtD,EAAawrE,GAClDpC,EAAUppE,EAAGolD,EAAIzgD,KAEnB8lE,EAAWpZ,GAASma,EACpBpmB,EAAGb,IAAIimB,EAAW9b,GAAI,GAAI/tC,GAAO2+C,KAAKC,UAAUkL,KAAc,EAAM,SAACzqE,GAC/DopE,EAAUppE,EAAGolD,EAAIzgD,IAEnBygD,EAAGK,OAAO,SAACzlD,GACLopE,EAAUppE,EAAGolD,EAAIzgD,IACnBA,EAAG,KAAM8mE,iBAiB1BllB,EAAAj/C,UAAAmK,MAAP,SAAa9M,GAAb,GAAA6uB,GAAA1zB,IACEA,MAAKskD,MAAM5W,MAAM,SAACxtC,GACZmpE,EAAQnpE,EAAG2E,IAEb6uB,EAAKm2C,kBAAkBhlE,MAKtB4hD,EAAAj/C,UAAA22C,OAAP,SAAcvF,EAAiBC,EAAiBh0C,GAAhD,GAAA6uB,GAAA1zB,KACMslD,EAAKtlD,KAAKskD,MAAMC,iBAAiB,aACnCwmB,EAAY/6C,EAAKyB,QAAQmnB,GAAUoyB,EAAUh7C,EAAK2B,SAASinB,GAC3DqyB,EAAYj7C,EAAKyB,QAAQonB,GAAU6sB,EAAU11C,EAAK2B,SAASknB,GAC3DqzB,KACAC,KAGAC,GAAyB,CAM3B,IAAiD,KAA5CnB,EAAY,KAAKznD,QAAQo1B,EAAU,KACtC,MAAO/zC,GAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUyC,MAAOkwB,GAQ1C,IAAIsB,GAAmB,WAErB,IAAID,GAAkBD,EAAMnmE,eAAe+kE,IAAeoB,EAAMnmE,eAAeilE,GAA/E,CAGA,GAAIqB,GAAgBH,EAAMpB,GAAYwB,EAAiBL,EAAOnB,GAC5DyB,EAAgBL,EAAMlB,GAAYwB,EAAiBP,EAAOjB,EAG5D,IAAKqB,EAActB,GAEZ,CACL,GAAI0B,GAASJ,EAActB,SACpBsB,GAActB,EAIrB,IAAI2B,GAAiB,WACnBH,EAAc9G,GAAWgH,EAEzBpnB,EAAGb,IAAI8nB,EAAe3d,GAAI,GAAI/tC,GAAO2+C,KAAKC,UAAU6M,KAAiB,EAAM,SAACpsE,GACtEopE,EAAUppE,EAAGolD,EAAIzgD,KACfkmE,IAAcE,EAEhB3lB,EAAGK,OAAO9gD,GAGVygD,EAAGb,IAAIgoB,EAAe7d,GAAI,GAAI/tC,GAAO2+C,KAAKC,UAAU+M,KAAiB,EAAM,SAACtsE,GACtEopE,EAAUppE,EAAGolD,EAAIzgD,IACnBygD,EAAGK,OAAO9gD,QAQlB2nE,GAAc9G,GAGhBhyC,EAAK02C,SAAS9kB,EAAIzM,EAAS2zB,EAAc9G,GAAU,SAACxlE,EAAak0D,GAC3DkV,EAAUppE,EAAGolD,EAAIzgD,KACfuvD,EAAMjZ,SAERmK,EAAGX,IAAIyP,EAAMxF,GAAI,SAAC1uD,GACZopE,EAAUppE,EAAGolD,EAAIzgD,IACnBygD,EAAGX,IAAI6nB,EAAc9G,GAAU,SAACxlE,GAC1BopE,EAAUppE,EAAGolD,EAAIzgD,IACnB8nE,QAORrnB,EAAG9tB,MAAM,SAACt3B,GACR2E,EAAG0wC,EAAA4C,SAASE,MAAMQ,SAM1B8zB,QApDF9nE,GAAG0wC,EAAA4C,SAASqC,OAAO5B,MA6DnBg0B,EAA0B,SAAC18C,GAC7BwD,EAAKq4C,uBAAuBzmB,EAAIp1B,EAAG,SAAChwB,EAAakQ,EAAc85D,GACzDhqE,EACGksE,IACHA,GAAgB,EAChB9mB,EAAG9tB,MAAM,WACP3yB,EAAG3E,OAKPgsE,EAAOh8C,GAAK9f,EACZ+7D,EAAMj8C,GAAKg6C,EACXmC,OAKNO,GAAwB7B,GACpBA,IAAcE,GAChB2B,EAAwB3B,IAIrBxkB,EAAAj/C,UAAAquC,KAAP,SAAY3lB,EAAW6oB,EAAkBl0C,GACvC,GAAIygD,GAAKtlD,KAAKskD,MAAMC,iBAAiB,WACrCvkD,MAAKqqE,UAAU/kB,EAAIp1B,EAAG,SAAChwB,EAAak0D,GAC9BiV,EAAQnpE,EAAG2E,IACbA,EAAG,KAAMuvD,EAAMyU,cAKdpiB,EAAAj/C,UAAA+5D,WAAP,SAAkBrxC,EAAW0lB,EAA0Bnc,EAAc50B,GAArE,GAAA6uB,GAAA1zB,KACMslD,EAAKtlD,KAAKskD,MAAMC,iBAAiB,aACnC9zC,EAAO,GAAIoQ,GAAO,EAEpB7gB,MAAKyqE,cAAcnlB,EAAIp1B,EAAGorB,EAAA2D,SAASC,KAAMzlB,EAAMhpB,EAAM,SAACvQ,EAAawqD,GAC7D2e,EAAQnpE,EAAG2E,IACbA,EAAG,KAAM,GAAIgnE,GAAkBn4C,EAAMxD,EAAG0lB,EAAM8U,EAAQme,UAAWp4D,OAKhEg2C,EAAAj/C,UAAA85D,SAAP,SAAgBpxC,EAAW0lB,EAA0B/wC,GAArD,GAAA6uB,GAAA1zB,KACMslD,EAAKtlD,KAAKskD,MAAMC,iBAAiB,WAErCvkD,MAAKqqE,UAAU/kB,EAAIp1B,EAAG,SAAChwB,EAAak0D,GAC9BiV,EAAQnpE,EAAG2E,IAEbygD,EAAGtjC,IAAIoyC,EAAMxF,GAAI,SAAC1uD,EAAauQ,GACzB44D,EAAQnpE,EAAG2E,KACAf,SAAT2M,EACF5L,EAAG0wC,EAAA4C,SAASqC,OAAOtqB,IAEnBrrB,EAAG,KAAM,GAAIgnE,GAAkBn4C,EAAMxD,EAAG0lB,EAAMwe,EAAMyU,UAAWp4D,UAcnEg2C,EAAAj/C,UAAAgkE,YAAR,SAAoBt7C,EAAWq1C,EAAgB1gE,GAA/C,GAAA6uB,GAAA1zB,KACMslD,EAAKtlD,KAAKskD,MAAMC,iBAAiB,aACnCvF,EAAiBhvB,EAAKyB,QAAQvB,GAAImmC,EAAmBrmC,EAAK2B,SAASzB,EAErElwB,MAAK+rE,uBAAuBzmB,EAAItG,EAAQ,SAAC9+C,EAAawqE,EAAoBe,GACxE,GAAInC,EAAUppE,EAAGolD,EAAIzgD,GACnB,GAAK4mE,EAAcpV,GAIZ,CAEL,GAAIyU,GAAaW,EAAcpV,SACxBoV,GAAcpV,GAErB3iC,EAAK02C,SAAS9kB,EAAIp1B,EAAG46C,EAAY,SAAC5qE,EAAa2qE,GACzCvB,EAAUppE,EAAGolD,EAAIzgD,MACd0gE,GAASsF,EAAS5yB,cACrBqN,EAAG9tB,MAAM,WACP3yB,EAAG0wC,EAAA4C,SAASmH,OAAOpvB,MAEZq1C,IAAUsF,EAAS5yB,cAC5BqN,EAAG9tB,MAAM,WACP3yB,EAAG0wC,EAAA4C,SAASkH,QAAQnvB,MAItBo1B,EAAGX,IAAIkmB,EAASjc,GAAI,SAAC1uD,GACfopE,EAAUppE,EAAGolD,EAAIzgD,IAEnBygD,EAAGX,IAAImmB,EAAY,SAAC5qE,GACdopE,EAAUppE,EAAGolD,EAAIzgD,IAEnBygD,EAAGb,IAAIimB,EAAW9b,GAAI,GAAI/tC,GAAO2+C,KAAKC,UAAUgM,KAAiB,EAAM,SAACvrE,GAClEopE,EAAUppE,EAAGolD,EAAIzgD,IACnBygD,EAAGK,OAAO9gD,gBA5B5BygD,GAAG9tB,MAAM,WACP3yB,EAAG0wC,EAAA4C,SAASqC,OAAOtqB,SA0CtBu2B,EAAAj/C,UAAA+3C,OAAP,SAAcrvB,EAAWrrB,GACvB7E,KAAKwrE,YAAYt7C,GAAG,EAAOrrB,IAGtB4hD,EAAAj/C,UAAAg4C,MAAP,SAAatvB,EAAWrrB,GAAxB,GAAA6uB,GAAA1zB,IAEEA,MAAK03C,QAAQxnB,EAAG,SAACrnB,EAAK8uC,GAChB9uC,EACFhE,EAAGgE,GACM8uC,EAAM32C,OAAS,EACxB6D,EAAG0wC,EAAA4C,SAAS6L,UAAU9zB,IAEtBwD,EAAK83C,YAAYt7C,GAAG,EAAMrrB,MAKzB4hD,EAAAj/C,UAAA01C,MAAP,SAAahtB,EAAWuJ,EAAc50B,GACpC,GAAIygD,GAAKtlD,KAAKskD,MAAMC,iBAAiB,aACnC9zC,EAAO,GAAIoQ,GAAO,KACpB7gB,MAAKyqE,cAAcnlB,EAAIp1B,EAAGorB,EAAA2D,SAASE,UAAW1lB,EAAMhpB,EAAM5L,IAGrD4hD,EAAAj/C,UAAAkwC,QAAP,SAAexnB,EAAWrrB,GAA1B,GAAA6uB,GAAA1zB,KACMslD,EAAKtlD,KAAKskD,MAAMC,iBAAiB,WACrCvkD,MAAKqqE,UAAU/kB,EAAIp1B,EAAG,SAAChwB,EAAak0D,GAC9BiV,EAAQnpE,EAAG2E,IACb6uB,EAAKy2C,cAAc7kB,EAAIp1B,EAAGkkC,EAAO,SAACl0D,EAAayqE,GACzCtB,EAAQnpE,EAAG2E,IACbA,EAAG,KAAMiB,OAAO4B,KAAKijE,SAOxBlkB,EAAAj/C,UAAAivC,MAAP,SAAavmB,EAAWzf,EAAkBunC,EAAcnzC,GAAxD,GAAA6uB,GAAA1zB,KAGMslD,EAAKtlD,KAAKskD,MAAMC,iBAAiB,YAErCvkD,MAAKgqE,WAAW1kB,EAAIt1B,EAAKyB,QAAQvB,GAAIF,EAAK2B,SAASzB,GAAI,SAAChwB,EAAawrE,GAC/DpC,EAAUppE,EAAGolD,EAAIzgD,IAEnB6uB,EAAK02C,SAAS9kB,EAAIp1B,EAAGw7C,EAAa,SAACxrE,EAAayrE,GAC9C,GAAIrC,EAAUppE,EAAGolD,EAAIzgD,GAAK,CACxB,GAAI+mE,GAAwBD,EAAU5C,OAAO/wB,EAE7CsN,GAAGb,IAAIknB,EAAU/c,GAAIn+C,GAAM,EAAM,SAACvQ,GAC5BopE,EAAUppE,EAAGolD,EAAIzgD,KAEf+mE,EACFtmB,EAAGb,IAAIinB,EAAaC,EAAUje,YAAY,EAAM,SAACxtD,GAC3CopE,EAAUppE,EAAGolD,EAAIzgD,IACnBygD,EAAGK,OAAO9gD,KAKdygD,EAAGK,OAAO9gD,YAS5B4hD,GAhiB6CnR,EAAYqK,eAA5CngD,GAAAinD,wBAAuBA,+NClrBpC,IAAAomB,GAAA3rE,EAAkB,WAelB4rE,EAAA,WAIE,QAAAA,GAAYn3B,GACV31C,KAAKg2C,IAAML,EACX31C,KAAK+sE,IAAM,GAAIF,GAAA,QAiUnB,MA9TEC,GAAAtlE,UAAAovC,QAAA,WACE,MAAO,YAAc52C,KAAKg2C,IAAIY,UAAa,KAG7Ck2B,EAAAtlE,UAAAglD,cAAA,WACE,MAAOxsD,MAAKg2C,KAGd82B,EAAAtlE,UAAA6vC,WAAA,SAAWxyC,GAEH7E,KAAKg2C,IAAKqB,WAAWxyC,IAG7BioE,EAAAtlE,UAAAwgD,UAAA,SAAU93B,EAAWrrB,GAEnB7E,KAAKg2C,IAAIgS,UAAU93B,EAAGrrB,IAGxBioE,EAAAtlE,UAAA8wC,WAAA,WACE,MAAOt4C,MAAKg2C,IAAIsC,cAGlBw0B,EAAAtlE,UAAA+wC,cAAA,WACE,MAAOv4C,MAAKg2C,IAAIuC,iBAGlBu0B,EAAAtlE,UAAAgxC,cAAA,WACE,MAAOx4C,MAAKg2C,IAAIwC,iBAGlBs0B,EAAAtlE,UAAAmvC,cAAA,WACE,MAAO32C,MAAKg2C,IAAIW,iBAGlBm2B,EAAAtlE,UAAA22C,OAAA,SAAOvF,EAAiBC,EAAiBh0C,GAAzC,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAImI,OAAOvF,EAASC,EAAS,SAAChwC,GACjC6qB,EAAKq5C,IAAIE,SACTpoE,EAAGgE,QAKTikE,EAAAtlE,UAAAmxC,WAAA,SAAWC,EAAiBC,GAC1B,GAAI74C,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAI2C,WAAWC,EAASC,IAGtCi0B,EAAAtlE,UAAAquC,KAAA,SAAK3lB,EAAW6oB,EAAkBl0C,GAAlC,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAIH,KAAK3lB,EAAG6oB,EAAS,SAAClwC,EAAgBgtC,GACzCniB,EAAKq5C,IAAIE,SACTpoE,EAAGgE,EAAKgtC,QAKdi3B,EAAAtlE,UAAAsxC,SAAA,SAAS5oB,EAAW6oB,GAClB,GAAI/4C,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAI8C,SAAS5oB,EAAG6oB,IAG9B+zB,EAAAtlE,UAAAk3C,KAAA,SAAKxuB,EAAW0lB,EAAgBnc,EAAc50B,GAA9C,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAI0I,KAAKxuB,EAAG0lB,EAAMnc,EAAM,SAAC5wB,EAAgBgxB,GAC5CnG,EAAKq5C,IAAIE,SACTpoE,EAAGgE,EAAKgxB,QAKdizC,EAAAtlE,UAAAwxC,SAAA,SAAS9oB,EAAW0lB,EAAgBnc,GAClC,GAAIz5B,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAIgD,SAAS9oB,EAAG0lB,EAAMnc,IAGpCqzC,EAAAtlE,UAAA+3C,OAAA,SAAOrvB,EAAWrrB,GAAlB,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAIuJ,OAAOrvB,EAAG,SAACrnB,GAClB6qB,EAAKq5C,IAAIE,SACTpoE,EAAGgE,QAKTikE,EAAAtlE,UAAA0xC,WAAA,SAAWhpB,GACT,GAAIlwB,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAIkD,WAAWhpB,IAG7B48C,EAAAtlE,UAAAg4C,MAAA,SAAMtvB,EAAWrrB,GAAjB,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAIwJ,MAAMtvB,EAAG,SAACrnB,GACjB6qB,EAAKq5C,IAAIE,SACTpoE,EAAGgE,QAKTikE,EAAAtlE,UAAA2xC,UAAA,SAAUjpB,GACR,GAAIlwB,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAImD,UAAUjpB,IAG5B48C,EAAAtlE,UAAA01C,MAAA,SAAMhtB,EAAWuJ,EAAc50B,GAA/B,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAIkH,MAAMhtB,EAAGuJ,EAAM,SAAC5wB,GACvB6qB,EAAKq5C,IAAIE,SACTpoE,EAAGgE,QAKTikE,EAAAtlE,UAAAiwC,UAAA,SAAUvnB,EAAWuJ,GACnB,GAAIz5B,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAIyB,UAAUvnB,EAAGuJ,IAG/BqzC,EAAAtlE,UAAAkwC,QAAA,SAAQxnB,EAAWrrB,GAAnB,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAI0B,QAAQxnB,EAAG,SAACrnB,EAAgB8uC,GACnCjkB,EAAKq5C,IAAIE,SACTpoE,EAAGgE,EAAK8uC,QAKdm1B,EAAAtlE,UAAA4xC,YAAA,SAAYlpB,GACV,GAAIlwB,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAIoD,YAAYlpB,IAG9B48C,EAAAtlE,UAAA+4C,OAAA,SAAOrwB,EAAWrrB,GAAlB,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAIuK,OAAOrwB,EAAG,SAACqwB,GAClB7sB,EAAKq5C,IAAIE,SACTpoE,EAAG07C,QAKTusB,EAAAtlE,UAAA6xC,WAAA,SAAWnpB,GACT,GAAIlwB,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAIqD,WAAWnpB,IAG7B48C,EAAAtlE,UAAA8pD,SAAA,SAASphC,EAAWgrB,EAAiCr2C,GAArD,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAIsb,SAASphC,EAAGgrB,EAAO,SAACryC,EAAgBskE,GAC3Cz5C,EAAKq5C,IAAIE,SACTpoE,EAAGgE,EAAKskE,QAKdL,EAAAtlE,UAAA82D,aAAA,SAAapuC,EAAWgrB,GACtB,GAAIl7C,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAIsoB,aAAapuC,EAAGgrB,IAGlC4xB,EAAAtlE,UAAAs6C,SAAA,SAAS5xB,EAAWloB,EAAanD,GAAjC,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAI8L,SAAS5xB,EAAGloB,EAAK,SAACa,GACzB6qB,EAAKq5C,IAAIE,SACTpoE,EAAGgE,QAKTikE,EAAAtlE,UAAAg1D,aAAA,SAAatsC,EAAWloB,GACtB,GAAIhI,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAIwmB,aAAatsC,EAAGloB,IAGlC8kE,EAAAtlE,UAAAuwC,SAAA,SAASwZ,EAAepvC,EAAkByzB,EAAgB/wC,GAA1D,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAI+B,SAASwZ,EAAOpvC,EAAUyzB,EAAM,SAAC/sC,EAAgB4H,GACxDijB,EAAKq5C,IAAIE,SACTpoE,EAAGgE,EAAK4H,QAKdq8D,EAAAtlE,UAAAyxC,aAAA,SAAasY,EAAepvC,EAAkByzB,GAC5C,GAAI51C,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAIiD,aAAasY,EAAOpvC,EAAUyzB,IAGhDk3B,EAAAtlE,UAAAy1C,UAAA,SAAUsU,EAAe9gD,EAAW0R,EAAkByzB,EAAgBnc,EAAc50B,GAApF,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAIiH,UAAUsU,EAAO9gD,EAAM0R,EAAUyzB,EAAMnc,EAAM,SAAC5wB,GACrD6qB,EAAKq5C,IAAIE,SACTpoE,EAAGgE,QAKTikE,EAAAtlE,UAAAqvC,cAAA,SAAc0a,EAAe9gD,EAAW0R,EAAkByzB,EAAgBnc,GACxE,GAAIz5B,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAIa,cAAc0a,EAAO9gD,EAAM0R,EAAUyzB,EAAMnc,IAG7DqzC,EAAAtlE,UAAAgqD,WAAA,SAAWD,EAAe9gD,EAAW0R,EAAkByzB,EAAgBnc,EAAc50B,GAArF,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAIwb,WAAWD,EAAO9gD,EAAM0R,EAAUyzB,EAAMnc,EAAM,SAAC5wB,GACtD6qB,EAAKq5C,IAAIE,SACTpoE,EAAGgE,QAKTikE,EAAAtlE,UAAAi1D,eAAA,SAAelL,EAAe9gD,EAAW0R,EAAkByzB,EAAgBnc,GACzE,GAAIz5B,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAIymB,eAAelL,EAAO9gD,EAAM0R,EAAUyzB,EAAMnc,IAG9DqzC,EAAAtlE,UAAAukD,MAAA,SAAM77B,EAAWqpB,EAAmB9f,EAAc50B,GAAlD,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAI+V,MAAM77B,EAAGqpB,EAAU9f,EAAM,SAAC5wB,GACjC6qB,EAAKq5C,IAAIE,SACTpoE,EAAGgE,QAKTikE,EAAAtlE,UAAA8xC,UAAA,SAAUppB,EAAWqpB,EAAmB9f,GACtC,GAAIz5B,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAIsD,UAAUppB,EAAGqpB,EAAU9f,IAGzCqzC,EAAAtlE,UAAA0kD,MAAA,SAAMh8B,EAAWupB,EAAmBzhB,EAAaH,EAAahzB,GAA9D,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAIkW,MAAMh8B,EAAGupB,EAAUzhB,EAAKH,EAAK,SAAChvB,GACrC6qB,EAAKq5C,IAAIE,SACTpoE,EAAGgE,QAKTikE,EAAAtlE,UAAAgyC,UAAA,SAAUtpB,EAAWupB,EAAmBzhB,EAAaH,GACnD,GAAI73B,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAIwD,UAAUtpB,EAAGupB,EAAUzhB,EAAKH,IAG9Ci1C,EAAAtlE,UAAA2kD,OAAA,SAAOj8B,EAAWypB,EAAaC,EAAa/0C,GAA5C,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAImW,OAAOj8B,EAAGypB,EAAOC,EAAO,SAAC/wC,GAChC6qB,EAAKq5C,IAAIE,SACTpoE,EAAGgE,QAKTikE,EAAAtlE,UAAAkyC,WAAA,SAAWxpB,EAAWypB,EAAaC,GACjC,GAAI55C,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAI0D,WAAWxpB,EAAGypB,EAAOC,IAGvCkzB,EAAAtlE,UAAAiqD,KAAA,SAAKC,EAAiBC,EAAiB9sD,GAAvC,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAIyb,KAAKC,EAASC,EAAS,SAAC9oD,GAC/B6qB,EAAKq5C,IAAIE,SACTpoE,EAAGgE,QAKTikE,EAAAtlE,UAAAu2D,SAAA,SAASrM,EAAiBC,GACxB,GAAI3xD,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAI+nB,SAASrM,EAASC,IAGpCmb,EAAAtlE,UAAAoqD,QAAA,SAAQF,EAAiBC,EAAiBhwD,EAAckD,GAAxD,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAI4b,QAAQF,EAASC,EAAShwD,EAAM,SAACkH,GACxC6qB,EAAKq5C,IAAIE,SACTpoE,EAAGgE,QAKTikE,EAAAtlE,UAAAw2D,YAAA,SAAYtM,EAAiBC,EAAiBhwD,GAC5C,GAAI3B,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAIgoB,YAAYtM,EAASC,EAAShwD,IAGhDmrE,EAAAtlE,UAAAqqD,SAAA,SAAS3hC,EAAWrrB,GAApB,GAAA6uB,GAAA1zB,IACEA,MAAK+sE,IAAIC,KAAK,WACZt5C,EAAKsiB,IAAI6b,SAAS3hC,EAAG,SAACrnB,EAAgBukE,GACpC15C,EAAKq5C,IAAIE,SACTpoE,EAAGgE,EAAKukE,QAKdN,EAAAtlE,UAAAy2D,aAAA,SAAa/tC,GACX,GAAIlwB,KAAK+sE,IAAIG,WACX,KAAM,IAAItsE,OAAM,oBAClB,OAAOZ,MAAKg2C,IAAIioB,aAAa/tC,IAEjC48C,IAvUAttE,GAAAmtB,YAAA,+DCXA,IAAA0gD,GAAA,WAAA,QAAAA,KACUrtE,KAAAstE,SAAmB,EACnBttE,KAAAutE,YAyCV,MAvCEF,GAAA7lE,UAAAwlE,KAAA,SAAKnoE,GACH,MAAI7E,MAAKstE,YACPttE,MAAKutE,SAASzlE,KAAKjD,IAGrB7E,KAAKstE,SAAU,MACfzoE,OAGFwoE,EAAA7lE,UAAAylE,OAAA,WACE,IAAKjtE,KAAKstE,QACR,KAAM,IAAI1sE,OAAM,+BAElB,IAAIwH,GAAOpI,KAAKutE,SAAS1hE,OAOzB,OAAIzD,OACFqT,cAAarT,QAIfpI,KAAKstE,SAAU,IAGjBD,EAAA7lE,UAAAgmE,QAAA,WACE,OAAIxtE,KAAKstE,UAGTttE,KAAKstE,SAAU,GACR,IAGTD,EAAA7lE,UAAA0lE,SAAA,WACE,MAAOltE,MAAKstE,SAEhBD,IA3CA7tE,GAAAmtB,YAAA,kQCJOuxB,EAAIh9C,EAAW,gBAItBq0C,EAAAr0C,EAAkC,qBAC3By0C,EAAEz0C,EAAW,mBAWpBk1C,EAAA,SAAAvuB,GAsBE,QAAAuuB,GAAYJ,EAAQuH,EAAeC,EAAiBC,EAAcxB,GAgBhE,GAfAp0B,EAAA9mB,KAAAf,MAtBMA,KAAAytE,KAAe,EAMfztE,KAAA0tE,QAAkB,EAiBxB1tE,KAAKg2C,IAAMA,EACXh2C,KAAKu9C,MAAQA,EACbv9C,KAAKw9C,MAAQA,EACbx9C,KAAKy9C,MAAQA,EACG,MAAZxB,EACFj8C,KAAK2tE,QAAU1xB,EAGfj8C,KAAK2tE,QAAU,GAAI9sD,GAAO,GAMxB7gB,KAAKy9C,MAAMxjB,OAASj6B,KAAK2tE,QAAQ3sE,QAAUhB,KAAKw9C,MAAMuB,aACxD,KAAM,IAAIn+C,OAAM,6BAA+BZ,KAAK2tE,QAAQ3sE,OAAS,kDAAoDhB,KAAKy9C,MAAMxjB,KAAO,UAgUjJ,MAvWmEnS,GAAAsuB,EAAAvuB,GA2CvDuuB,EAAA5uC,UAAAuuC,QAAV,WACE,MAAO/1C,MAAK0tE,QAMJt3B,EAAA5uC,UAAA0uC,WAAV,WACEl2C,KAAK0tE,QAAS,GAMTt3B,EAAA5uC,UAAAksC,UAAP,WACE,MAAO1zC,MAAK2tE,SAMPv3B,EAAA5uC,UAAAyvC,SAAP,WACE,MAAOj3C,MAAKy9C,OAGPrH,EAAA5uC,UAAA4vC,QAAP,WACE,MAAOp3C,MAAKw9C,OAOPpH,EAAA5uC,UAAAsvC,QAAP,WACE,MAAO92C,MAAKu9C,OAYPnH,EAAA5uC,UAAAgoD,OAAP,WACE,MAAIxvD,MAAKw9C,MAAM+R,eACNvvD,KAAKy9C,MAAMxjB,KAEbj6B,KAAKytE,MAOPr3B,EAAA5uC,UAAAomE,WAAP,SAAkBC,GAChB,MAAO7tE,MAAKytE,MAAQI,GAOfz3B,EAAA5uC,UAAAsmE,OAAP,SAAcC,GACZ,MAAO/tE,MAAKytE,KAAOM,GAQd33B,EAAA5uC,UAAAqM,KAAP,SAAYhP,GACV,IACE7E,KAAK81C,WACLjxC,IACA,MAAO3E,GACP2E,EAAG3E,KAOAk2C,EAAA5uC,UAAAsuC,SAAP,WACE,KAAM,IAAIP,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAQxBpoB,EAAA5uC,UAAAo2C,MAAP,SAAa/4C,GACX,IACE7E,KAAKm2C,YACLtxC,IACA,MAAO3E,GACP2E,EAAG3E,KAOAk2C,EAAA5uC,UAAA2uC,UAAP,WACE,KAAM,IAAIZ,GAAA4C,SAAS5C,EAAA6C,UAAUomB,UAOxBpoB,EAAA5uC,UAAAquC,KAAP,SAAYhxC,GACV,IACEA,EAAG,KAAM7E,KAAKy9C,MAAMoN,SACpB,MAAO3qD,GACP2E,EAAG3E,KAOAk2C,EAAA5uC,UAAAsxC,SAAP,WACE,MAAO94C,MAAKy9C,MAAMoN,SAQbzU,EAAA5uC,UAAAs6C,SAAP,SAAgB95C,EAAanD,GAC3B,IACE7E,KAAKw8D,aAAax0D,GACdhI,KAAKw9C,MAAM6jB,kBAAoB1rB,EAAG8c,YAAY9b,iBAChD32C,KAAK6T,KAAKhP,GAEZA,IACA,MAAO3E,GACP,MAAO2E,GAAG3E,KAQPk2C,EAAA5uC,UAAAg1D,aAAP,SAAoBx0D,GAElB,GADAhI,KAAK0tE,QAAS,GACT1tE,KAAKw9C,MAAM8R,cACd,KAAM,IAAI/Z,GAAA4C,SAAS5C,EAAA6C,UAAUC,MAAO,yCAGtC,IADAr4C,KAAKy9C,MAAM7D,MAAQ,GAAI9lB,MACnB9rB,EAAMhI,KAAK2tE,QAAQ3sE,OAAQ,CAC7B,GAAIwmB,GAAM,GAAI3G,GAAO7Y,EAAMhI,KAAK2tE,QAAQ3sE,OAOxC,OANAwmB,GAAIhD,KAAK,GAETxkB,KAAKkqD,UAAU1iC,EAAK,EAAGA,EAAIxmB,OAAQhB,KAAK2tE,QAAQ3sE,aAC5ChB,KAAKw9C,MAAM6jB,iBAAmB1rB,EAAG8c,YAAY9b,iBAC/C32C,KAAK81C,YAIT91C,KAAKy9C,MAAMxjB,KAAOjyB,CAElB,IAAIob,GAAU,GAAIvC,GAAO7Y,EACzBhI,MAAK2tE,QAAQrsD,KAAK8B,EAAS,EAAG,EAAGpb,GACjChI,KAAK2tE,QAAUvqD,EACXpjB,KAAKw9C,MAAM6jB,iBAAmB1rB,EAAG8c,YAAY9b,iBAC/C32C,KAAK81C,YAkBFM,EAAA5uC,UAAAga,MAAP,SAAahQ,EAAoBmO,EAAgB3e,EAAgBs7B,EAAkBz3B,GACjF,IACEA,EAAG,KAAM7E,KAAKkqD,UAAU14C,EAAQmO,EAAQ3e,EAAQs7B,GAAW9qB,GAC3D,MAAOtR,GACP2E,EAAG3E,KAiBAk2C,EAAA5uC,UAAA0iD,UAAP,SAAiB14C,EAAoBmO,EAAgB3e,EAAgBs7B,GAKnE,GAJAt8B,KAAK0tE,QAAS,EACE,MAAZpxC,IACFA,EAAWt8B,KAAKwvD,WAEbxvD,KAAKw9C,MAAM8R,cACd,KAAM,IAAI/Z,GAAA4C,SAAS5C,EAAA6C,UAAUC,MAAO,yCAEtC,IAAI21B,GAAQ1xC,EAAWt7B,CACvB,IAAIgtE,EAAQhuE,KAAKy9C,MAAMxjB,OACrBj6B,KAAKy9C,MAAMxjB,KAAO+zC,EACdA,EAAQhuE,KAAK2tE,QAAQ3sE,QAAQ,CAE/B,GAAIoiB,GAAU,GAAIvC,GAAOmtD,EACzBhuE,MAAK2tE,QAAQrsD,KAAK8B,GAClBpjB,KAAK2tE,QAAUvqD,EAGnB,GAAIpb,GAAMwJ,EAAO8P,KAAKthB,KAAK2tE,QAASrxC,EAAU3c,EAAQA,EAAS3e,EAE/D,OADAhB,MAAKy9C,MAAM7D,MAAQ,GAAI9lB,MACnB9zB,KAAKw9C,MAAM6jB,iBACbrhE,KAAK81C,WACE9tC,IAEThI,KAAK8tE,OAAOxxC,EAAWt0B,GAChBA,IAgBFouC,EAAA5uC,UAAA2kC,KAAP,SAAY36B,EAAoBmO,EAAgB3e,EAAgBs7B,EAAkBz3B,GAChF,IACEA,EAAG,KAAM7E,KAAKs9D,SAAS9rD,EAAQmO,EAAQ3e,EAAQs7B,GAAW9qB,GAC1D,MAAOtR,GACP2E,EAAG3E,KAgBAk2C,EAAA5uC,UAAA81D,SAAP,SAAgB9rD,EAAoBmO,EAAgB3e,EAAgBs7B,GAClE,IAAKt8B,KAAKw9C,MAAMuB,aACd,KAAM,IAAIxJ,GAAA4C,SAAS5C,EAAA6C,UAAUC,MAAO,wCAEtB,OAAZ/b,IACFA,EAAWt8B,KAAKwvD,SAElB,IAAIye,GAAU3xC,EAAWt7B,CACrBitE,GAAUjuE,KAAKy9C,MAAMxjB,OACvBj5B,EAAShB,KAAKy9C,MAAMxjB,KAAOqC,EAE7B,IAAIxW,GAAK9lB,KAAK2tE,QAAQrsD,KAAK9P,EAAQmO,EAAQ2c,EAAUA,EAAWt7B,EAGhE,OAFAhB,MAAKy9C,MAAM9D,MAAQ,GAAI7lB,MACvB9zB,KAAKytE,KAAOnxC,EAAWt7B,EAChB8kB,GAQFswB,EAAA5uC,UAAAukD,MAAP,SAAatyB,EAAc50B,GACzB,IACE7E,KAAKs5C,UAAU7f,GACf50B,IACA,MAAO3E,GACP2E,EAAG3E,KAQAk2C,EAAA5uC,UAAA8xC,UAAP,SAAiB7f,GACf,IAAKz5B,KAAKg2C,IAAIwC,gBACZ,KAAM,IAAIjD,GAAA4C,SAAS5C,EAAA6C,UAAUomB,QAE/Bx+D,MAAK0tE,QAAS,EACd1tE,KAAKy9C,MAAMsO,MAAMtyB,GACjBz5B,KAAK81C,YAETM,GAvWmE8H,EAAK+T,SAA3DzyD,GAAA42C,YAAWA,CA6WxB,IAAAse,GAAA,SAAA7sC,GACE,QAAA6sC,GAAY1e,EAAQuH,EAAeC,EAAiBC,EAAcxB,GAChEp0B,EAAA9mB,KAAAf,KAAMg2C,EAAKuH,EAAOC,EAAOC,EAAOxB,GAwBpC,MA1BkEn0B,GAAA4sC,EAAA7sC,GAQzD6sC,EAAAltD,UAAAqM,KAAP,SAAYhP,GACVA,KAKK6vD,EAAAltD,UAAAsuC,SAAP;AAKO4e,EAAAltD,UAAAo2C,MAAP,SAAa/4C,GACXA,KAKK6vD,EAAAltD,UAAA2uC,UAAP,aACFue,GA1BkEte,EAArD52C,GAAAk1D,WAAUA,oKChXvB,SAAAwZ,GAAwBC,GAQtB,IAAK,GAPDC,GAAWC,wBAAwBF,GACnCG,EAAUC,6BAA6BJ,GACvCK,EAAWJ,EAAS3rE,QAAQ,UAAW,SAAS4L,GAClD,GAAIjE,GAAIiE,EAAMoW,WAAW,EACzB,OAAOzd,QAAO0lB,aAAe,IAAFtiB,EAAQA,GAAG,KACnCkkE,EACDG,EAAa,GAAIvqE,OAAMsqE,EAASxtE,QAC3BL,EAAI,EAAGA,EAAI6tE,EAASxtE,OAAQL,IACnC8tE,EAAW9tE,GAAK6tE,EAAS/pD,WAAW9jB,EAEtC,OAAO8tE,GAGT,QAAAC,GAAwBttE,EAAgB8uB,EAAWvuB,EAAckD,GAC/D,OAAOlD,GACL,IAAK,SAEL,IAAK,OACH,KACF,SACE,MAAOkD,GAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,0BAA4Bz4C,IAGzE,GAAIgtE,GAAM,GAAIza,eACdya,GAAIjwB,KAAK,MAAOxuB,EAAG9uB,GACnButE,EAAIC,iBAAiB,iBAAkB,kBACvCD,EAAIE,mBAAqB,SAAS3uE,GAChC,GAAIuuE,EACJ,IAAuB,IAAnBE,EAAIG,WAAkB,CACxB,GAAmB,MAAfH,EAAI/xB,OASN,MAAO/3C,GAAG,GAAI0wC,GAAA4C,SAASw2B,EAAI/xB,OAAQ,cARnC,QAAOj7C,GACL,IAAK,SAEH,MADA8sE,GAAaP,EAAeS,EAAII,cACzBlqE,EAAG,KAAM,GAAIgc,GAAO4tD,GAC7B,KAAK,OACH,MAAO5pE,GAAG,KAAM26D,KAAKttC,MAAMy8C,EAAIK,kBAOzCL,EAAIM,OAMN,QAAAC,GAA6Bh/C,EAAWvuB,EAAckD,GACpD6pE,GAAe,EAAMx+C,EAAGvuB,EAAMkD,GAMhC,QAAAsqE,GAA4Bj/C,EAAWvuB,GACrC,GAAImkB,EAKJ,OAJA4oD,IAAe,EAAOx+C,EAAGvuB,EAAM,SAASkH,EAAe4H,GACrD,GAAI5H,EAAK,KAAMA,EACfid,GAAKrV,IAEAqV,EAMT,QAAAspD,GAAiCl/C,EAAWvuB,EAAckD,GACxD,GAAI8pE,GAAM,GAAIza,eACdya,GAAIjwB,KAAK,MAAOxuB,GAAG,EACnB,IAAIm/C,IAAgB,CACpB,QAAO1tE,GACL,IAAK,SACHgtE,EAAIW,aAAe,aACnB,MACF,KAAK,OAIH,IACEX,EAAIW,aAAe,OACnBD,EAAqC,SAArBV,EAAIW,aACpB,MAAOpvE,GACPmvE,GAAgB,EAElB,KACF,SACE,MAAOxqE,GAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,0BAA4Bz4C,IAEzEgtE,EAAIE,mBAAqB,SAAS3uE,GAChC,GAAuB,IAAnByuE,EAAIG,WAAkB,CACxB,GAAmB,MAAfH,EAAI/xB,OAaN,MAAO/3C,GAAG,GAAI0wC,GAAA4C,SAASw2B,EAAI/xB,OAAQ,cAZnC,QAAOj7C,GACL,IAAK,SAEH,MAAOkD,GAAG,KAAM,GAAIgc,GAAO8tD,EAAIrwB,SAAWqwB,EAAIrwB,SAAW,GAC3D,KAAK,OACH,MAAI+wB,GACKxqE,EAAG,KAAM8pE,EAAIrwB,UAEbz5C,EAAG,KAAM26D,KAAKttC,MAAMy8C,EAAIK,kBAQ3CL,EAAIM,OAMN,QAAAM,GAAgCr/C,EAAWvuB,GACzC,GAAIgtE,GAAM,GAAIza,eACdya,GAAIjwB,KAAK,MAAOxuB,GAAG,EAInB,IAAIzf,GAAO,KACP5H,EAAM,IA6BV,IA3BA8lE,EAAIa,iBAAiB,sCACrBb,EAAIE,mBAAqB,SAAS3uE,GAChC,GAAuB,IAAnByuE,EAAIG,WAAkB,CACxB,GAAmB,MAAfH,EAAI/xB,OAmBN,YADA/zC,EAAM,GAAI0sC,GAAA4C,SAASw2B,EAAI/xB,OAAQ,cAjB/B,QAAOj7C,GACL,IAAK,SAEH,GAAI2+B,GAAOquC,EAAIK,YACfv+D,GAAO,GAAIoQ,GAAOyf,EAAKt/B,OAEvB,KAAK,GAAIL,GAAI,EAAGA,EAAI2/B,EAAKt/B,OAAQL,IAG/B8P,EAAK8Q,WAAW+e,EAAK7b,WAAW9jB,GAAIA,EAEtC,OACF,KAAK,OAEH,YADA8P,EAAO+uD,KAAKttC,MAAMy8C,EAAIK,kBAShCL,EAAIM,OACApmE,EACF,KAAMA,EAER,OAAO4H,GAUT,QAAAg/D,GAA8Bv/C,EAAWvuB,GACvC,GAAIgtE,GAAM,GAAIza,eAEd,QADAya,EAAIjwB,KAAK,MAAOxuB,GAAG,GACZvuB,GACL,IAAK,SACHgtE,EAAIW,aAAe,aACnB,MACF,KAAK,OAEH,KACF,SACE,KAAM,IAAI/5B,GAAA4C,SAAS5C,EAAA6C,UAAUgC,OAAQ,0BAA4Bz4C,GAErE,GAAI8O,GACA5H,CAkBJ,IAjBA8lE,EAAIE,mBAAqB,SAAS3uE,GAChC,GAAuB,IAAnByuE,EAAIG,WACN,GAAmB,MAAfH,EAAI/xB,OACN,OAAOj7C,GACL,IAAK,SACH8O,EAAO,GAAIoQ,GAAO8tD,EAAIrwB,SACtB,MACF,KAAK,OACH7tC,EAAO+uD,KAAKttC,MAAMy8C,EAAIrwB,cAI1Bz1C,GAAM,GAAI0sC,GAAA4C,SAASw2B,EAAI/xB,OAAQ,eAIrC+xB,EAAIM,OACApmE,EACF,KAAMA,EAER,OAAO4H,GAGT,QAAAi/D,GAAqBtuE,EAAgB8uB,EAAWrrB,GAC9C,GAAI8pE,GAAM,GAAIza,eACdya,GAAIjwB,KAAK,OAAQxuB,EAAG9uB,GACpButE,EAAIE,mBAAqB,SAAS3uE,GAChC,GAAuB,IAAnByuE,EAAIG,WAAkB,CACxB,GAAkB,KAAdH,EAAI/xB,OAQN,MAAO/3C,GAAG,GAAI0wC,GAAA4C,SAASw2B,EAAI/xB,OAAQ,mBAPnC,KACE,MAAO/3C,GAAG,KAAMqU,SAASy1D,EAAIgB,kBAAkB,mBAAqB,KAAM,KAC1E,MAAMzvE,GAEN,MAAO2E,GAAG,GAAI0wC,GAAA4C,SAAS5C,EAAA6C,UAAU8B,IAAK,sDAO9Cy0B,EAAIM,OA8BN,QAAAnb,GAAgC5jC,GAC9B,GAAIpK,EAOJ,OANA4pD,IAAY,EAAOx/C,EAAG,SAASrnB,EAAeoxB,GAC5C,GAAIpxB,EACF,KAAMA,EAERid,GAAKmU,IAEAnU,EAMT,QAAA8tC,GAAiC1jC,EAAWrrB,GAC1C6qE,GAAY,EAAMx/C,EAAGrrB,GAhRvB,GAAOulC,GAAIlpC,EAAW,gBACtBq0C,EAAAr0C,EAAkC,oBA2OvB1B,GAAAw0D,kBAIN5pB,EAAKy5B,MAAwB,mBAATjiB,MAAwBstB,EAAsBE,EAQ5D5vE,EAAAy0D,iBAIN7pB,EAAKy5B,MAAwB,mBAATjiB,MAAwButB,EAAsB/kC,EAAKy5B,MAAwB,mBAATjiB,MAAwB6tB,EAAuBF,EAK1H/vE,EAAAs0D,gBAAeA,EAcft0D,EAAAo0D,iBAAgBA,kIChRhC,IAAO9zD,GAAMoB,EAAW,gBA0HxB,IAvHK4yB,KAAKC,MACRD,KAAKC,IAAM,WACT,OAAO,GAAID,OAAO8E,YAKlB10B,MAAM0C,UACR1C,MAAM0C,QAAU,SAAUgpE,GACxB,MAAgD,mBAAzC9pE,OAAO0B,UAAU+G,SAASxN,KAAK6uE,KAMrC9pE,OAAO4B,OACV5B,OAAO4B,KAAQ,WAEb,GAAI1B,GAAiBF,OAAO0B,UAAUxB,eAClC6pE,IAAoBthE,SAAU,MAAO/H,qBAAqB,YAC1DspE,GACE,WACA,iBACA,UACA,iBACA,gBACA,uBACA,eAEFC,EAAkBD,EAAU9uE,MAEhC,OAAO,UAAUuH,GACf,GAAmB,gBAARA,KAAoC,kBAARA,IAA8B,OAARA,GAC3D,KAAM,IAAI5E,WAAU,mCAGtB,IAA2BqsE,GAAcrvE,EAArC4C,IAEJ,KAAKysE,IAAQznE,GACPvC,EAAejF,KAAKwH,EAAKynE,IAC3BzsE,EAAOuE,KAAKkoE,EAIhB,IAAIH,EACF,IAAKlvE,EAAI,EAAGA,EAAIovE,EAAiBpvE,IAC3BqF,EAAejF,KAAKwH,EAAKunE,EAAUnvE,KACrC4C,EAAOuE,KAAKgoE,EAAUnvE,GAI5B,OAAO4C,QAMW,MAApB,KAAKwtB,QAAO,KACd/pB,OAAOQ,UAAUupB,OAAS,SAASA,GACjC,MAAO,UAASrtB,EAAe1C,GAK7B,MAFI0C,GAAQ,IAAGA,EAAQ1D,KAAKgB,OAAS0C,GAE9BqtB,EAAOhwB,KAAKf,KAAM0D,EAAO1C,KAElCgG,OAAOQ,UAAUupB,SAIhB7sB,MAAMsD,UAAU8W,UACnBpa,MAAMsD,UAAU8W,QAAU,SAASja,EAA6D4rE,GAC9F,IAAK,GAAItvE,GAAI,EAAGA,EAAIX,KAAKgB,SAAUL,EAC7BA,IAAKX,OACPqE,EAAGtD,KAAKkvE,EAAOjwE,KAAKW,GAAIA,EAAGX,QAQ9BkE,MAAMsD,UAAU0V,SACnBhZ,MAAMsD,UAAU0V,OAAS,SAASkW,GAGhC,GAAa,SAATpzB,MAA4B,OAATA,KACrB,KAAM,IAAI2D,UAGZ,IAAIxD,GAAI2F,OAAO9F,MACXgI,EAAM7H,EAAEa,SAAW,CACvB,IAAmB,kBAARoyB,GACT,KAAM,IAAIzvB,UAKZ,KAAK,GAFDisC,MACAruC,EAAUwC,UAAU/C,QAAU,EAAI+C,UAAU,GAAK,OAC5CpD,EAAI,EAAGA,EAAIqH,EAAKrH,IACvB,GAAIA,IAAKR,GAAG,CACV,GAAImM,GAAMnM,EAAEQ,EAORyyB,GAAIryB,KAAKQ,EAAS+K,EAAK3L,EAAGR,IAC5ByvC,EAAI9nC,KAAKwE,GAKf,MAAOsjC,KAMiB,mBAAjBn0B,cAA8B,CACvC,GAAIy0D,GAASpwE,EACTqwE,KACAC,EAAc,uBACdC,EAAoB,WACtB,GAAoC,mBAAzBH,GAAOI,gBAAkCJ,EAAO/e,YACzD,OAAO,CAET,IAAIof,IAAqB,EACrBC,EAAeN,EAAOO,SAM1B,OALAP,GAAOO,UAAY,WACjBF,GAAqB,GAEvBL,EAAO/e,YAAY,GAAI,KACvB+e,EAAOO,UAAYD,EACZD,EAET,IAAIF,IAAqB,CACvBH,EAAOz0D,aAAe,SAASpX,GAC7B8rE,EAASroE,KAAKzD,GACd6rE,EAAO/e,YAAYif,EAAa,KAElC,IAAIM,GAAgB,SAAS/lC,GAC3B,GAAIA,EAAMp9B,SAAWxN,MAAQ4qC,EAAMl6B,OAAS2/D,IACtCzlC,EAAMgmC,gBACRhmC,EAAMgmC,kBAENhmC,EAAMimC,cAAe,EAEnBT,EAASnvE,OAAS,GAAG,CACvB,GAAIqD,GAAK8rE,EAAStkE,OAClB,OAAOxH,MAIT6rE,GAAOxf,iBACTwf,EAAOxf,iBAAiB,UAAWggB,GAAe,GAElDR,EAAOW,YAAY,YAAaH,OAE7B,IAAIR,EAAOY,eAAgB,CAEhC,GAAIC,GAAU,GAAIb,GAAOY,cACzBC,GAAQC,MAAMP,UAAY,SAAC9lC,GACzB,GAAIwlC,EAASnvE,OAAS,EACpB,MAAOmvE,GAAStkE,WAGpBqkE,EAAOz0D,aAAe,SAACpX,GACrB8rE,EAASroE,KAAKzD,GACd0sE,EAAQE,MAAM9f,YAAY,SAG5B+e,GAAOz0D,aAAe,SAASpX,GAC7B,MAAOuL,YAAWvL,EAAI,IA6G5B,GAtGKH,MAAMsD,UAAUgc,UACnBtf,MAAMsD,UAAUgc,QAAU,SAAS0tD,EAAoBjmE,GACrD,GADqD,SAAAA,IAAAA,EAAA,IAChDjL,KACH,KAAM,IAAI2D,UAGZ,IAAI3C,GAAShB,KAAKgB,MAClB,IAAe,IAAXA,GAAgBmwE,GAASnwE,EAC3B,OAAO,CAGT,IAAImwE,GAAQlmE,CACRkmE,GAAQ,IACVA,EAAQnwE,EAASmwE,EAGnB,KAAK,GAAIxwE,GAAIwwE,EAAOxwE,EAAIK,EAAQL,IAC9B,GAAIX,KAAKW,KAAOuwE,EACd,MAAOvwE,EAGX,QAAO,IAMNuD,MAAMsD,UAAU8W,UACnBpa,MAAMsD,UAAU8W,QAAU,SAASja,EAA6D4rE,GAC9F,GAAItvE,GAAWqH,CACf,KAAKrH,EAAI,EAAGqH,EAAMhI,KAAKgB,OAAQL,EAAIqH,IAAOrH,EACpCA,IAAKX,OACPqE,EAAGtD,KAAKkvE,EAAOjwE,KAAKW,GAAIA,EAAGX,QAQ9BkE,MAAMsD,UAAUyH,MACnB/K,MAAMsD,UAAUyH,IAAM,SAAS3K,EAAkE/C,GAC/F,GAAIslC,GAAQzF,EAAQ5oB,CACpB,IAAY,MAARxY,KACF,KAAM,IAAI2D,WAAU,+BAGtB,IAAI6iC,GAAI1gC,OAAO9F,MAGXgI,EAAMw+B,EAAExlC,SAAW,CAGvB,IAAwB,kBAAbsD,GACT,KAAM,IAAIX,WAAUW,EAAW,qBAYjC,KATI/C,IACFslC,EAAItlC,GAIN6/B,EAAI,GAAIl9B,OAAM8D,GAEdwQ,EAAI,EAEEA,EAAIxQ,GAAK,CACb,GAAIopE,GAAaC,CAMb74D,KAAKguB,KAEP4qC,EAAS5qC,EAAEhuB,GAGX64D,EAAc/sE,EAASvD,KAAK8lC,EAAGuqC,EAAQ54D,EAAGguB,GAO1CpF,EAAE5oB,GAAK64D,GAGT74D,IAGF,MAAO4oB,KAWc,mBAAf,WAAiD,mBAAb,SAAyDt9B,SAAtBjE,OAAgB,OAAiB,CAEhH,GAAMyxE,GAAa,8XAYnB,IAA4B,YAAxBrlD,SAAS6iD,WAEX7iD,SAASzK,MAAM,oCAAsC8vD,EAAa,qBAC7D,CAEL,GAAMC,GAAgBtlD,SAASC,cAAc,SAC7CqlD,GAAc5vE,KAAO,gBACrB4vE,EAAcC,UAAYF,EAC1BrlD,SAASjc,KAAKyhE,YAAYF,IAI9B,GAAOG,GAAGxwE,EAAW,mBACrBzB,GAAAD,QAASkyE","file":"browserfs.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (factory((global.async = global.async || {})));\n}(this, function (exports) { 'use strict';\n\n    /**\n     * A faster alternative to `Function#apply`, this function invokes `func`\n     * with the `this` binding of `thisArg` and the arguments of `args`.\n     *\n     * @private\n     * @param {Function} func The function to invoke.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {Array} args The arguments to invoke `func` with.\n     * @returns {*} Returns the result of `func`.\n     */\n    function apply(func, thisArg, args) {\n      var length = args.length;\n      switch (length) {\n        case 0: return func.call(thisArg);\n        case 1: return func.call(thisArg, args[0]);\n        case 2: return func.call(thisArg, args[0], args[1]);\n        case 3: return func.call(thisArg, args[0], args[1], args[2]);\n      }\n      return func.apply(thisArg, args);\n    }\n\n    /**\n     * Checks if `value` is the\n     * [language type](http://www.ecma-international.org/ecma-262/6.0/#sec-ecmascript-language-types)\n     * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(_.noop);\n     * // => true\n     *\n     * _.isObject(null);\n     * // => false\n     */\n    function isObject(value) {\n      var type = typeof value;\n      return !!value && (type == 'object' || type == 'function');\n    }\n\n    var funcTag = '[object Function]';\n    var genTag = '[object GeneratorFunction]';\n    /** Used for built-in method references. */\n    var objectProto = Object.prototype;\n\n    /**\n     * Used to resolve the\n     * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n     * of values.\n     */\n    var objectToString = objectProto.toString;\n\n    /**\n     * Checks if `value` is classified as a `Function` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified,\n     *  else `false`.\n     * @example\n     *\n     * _.isFunction(_);\n     * // => true\n     *\n     * _.isFunction(/abc/);\n     * // => false\n     */\n    function isFunction(value) {\n      // The use of `Object#toString` avoids issues with the `typeof` operator\n      // in Safari 8 which returns 'object' for typed array and weak map constructors,\n      // and PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n      var tag = isObject(value) ? objectToString.call(value) : '';\n      return tag == funcTag || tag == genTag;\n    }\n\n    /**\n     * Checks if `value` is object-like. A value is object-like if it's not `null`\n     * and has a `typeof` result of \"object\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n     * @example\n     *\n     * _.isObjectLike({});\n     * // => true\n     *\n     * _.isObjectLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isObjectLike(_.noop);\n     * // => false\n     *\n     * _.isObjectLike(null);\n     * // => false\n     */\n    function isObjectLike(value) {\n      return !!value && typeof value == 'object';\n    }\n\n    /** `Object#toString` result references. */\n    var symbolTag = '[object Symbol]';\n\n    /** Used for built-in method references. */\n    var objectProto$1 = Object.prototype;\n\n    /**\n     * Used to resolve the\n     * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n     * of values.\n     */\n    var objectToString$1 = objectProto$1.toString;\n\n    /**\n     * Checks if `value` is classified as a `Symbol` primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified,\n     *  else `false`.\n     * @example\n     *\n     * _.isSymbol(Symbol.iterator);\n     * // => true\n     *\n     * _.isSymbol('abc');\n     * // => false\n     */\n    function isSymbol(value) {\n      return typeof value == 'symbol' ||\n        (isObjectLike(value) && objectToString$1.call(value) == symbolTag);\n    }\n\n    /** Used as references for various `Number` constants. */\n    var NAN = 0 / 0;\n\n    /** Used to match leading and trailing whitespace. */\n    var reTrim = /^\\s+|\\s+$/g;\n\n    /** Used to detect bad signed hexadecimal string values. */\n    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n    /** Used to detect binary string values. */\n    var reIsBinary = /^0b[01]+$/i;\n\n    /** Used to detect octal string values. */\n    var reIsOctal = /^0o[0-7]+$/i;\n\n    /** Built-in method references without a dependency on `root`. */\n    var freeParseInt = parseInt;\n\n    /**\n     * Converts `value` to a number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     * @example\n     *\n     * _.toNumber(3.2);\n     * // => 3.2\n     *\n     * _.toNumber(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toNumber(Infinity);\n     * // => Infinity\n     *\n     * _.toNumber('3.2');\n     * // => 3.2\n     */\n    function toNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      if (isObject(value)) {\n        var other = isFunction(value.valueOf) ? value.valueOf() : value;\n        value = isObject(other) ? (other + '') : other;\n      }\n      if (typeof value != 'string') {\n        return value === 0 ? value : +value;\n      }\n      value = value.replace(reTrim, '');\n      var isBinary = reIsBinary.test(value);\n      return (isBinary || reIsOctal.test(value))\n        ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n        : (reIsBadHex.test(value) ? NAN : +value);\n    }\n\n    var INFINITY = 1 / 0;\n    var MAX_INTEGER = 1.7976931348623157e+308;\n    /**\n     * Converts `value` to a finite number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.12.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted number.\n     * @example\n     *\n     * _.toFinite(3.2);\n     * // => 3.2\n     *\n     * _.toFinite(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toFinite(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toFinite('3.2');\n     * // => 3.2\n     */\n    function toFinite(value) {\n      if (!value) {\n        return value === 0 ? value : 0;\n      }\n      value = toNumber(value);\n      if (value === INFINITY || value === -INFINITY) {\n        var sign = (value < 0 ? -1 : 1);\n        return sign * MAX_INTEGER;\n      }\n      return value === value ? value : 0;\n    }\n\n    /**\n     * Converts `value` to an integer.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToInteger`](http://www.ecma-international.org/ecma-262/6.0/#sec-tointeger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toInteger(3.2);\n     * // => 3\n     *\n     * _.toInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toInteger(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toInteger('3.2');\n     * // => 3\n     */\n    function toInteger(value) {\n      var result = toFinite(value),\n          remainder = result % 1;\n\n      return result === result ? (remainder ? result - remainder : result) : 0;\n    }\n\n    /** Used as the `TypeError` message for \"Functions\" methods. */\n    var FUNC_ERROR_TEXT = 'Expected a function';\n\n    /* Built-in method references for those with the same name as other `lodash` methods. */\n    var nativeMax = Math.max;\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * created function and arguments from `start` and beyond provided as\n     * an array.\n     *\n     * **Note:** This method is based on the\n     * [rest parameter](https://mdn.io/rest_parameters).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.rest(function(what, names) {\n     *   return what + ' ' + _.initial(names).join(', ') +\n     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n     * });\n     *\n     * say('hello', 'fred', 'barney', 'pebbles');\n     * // => 'hello fred, barney, & pebbles'\n     */\n    function rest(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = nativeMax(start === undefined ? (func.length - 1) : toInteger(start), 0);\n      return function() {\n        var args = arguments,\n            index = -1,\n            length = nativeMax(args.length - start, 0),\n            array = Array(length);\n\n        while (++index < length) {\n          array[index] = args[start + index];\n        }\n        switch (start) {\n          case 0: return func.call(this, array);\n          case 1: return func.call(this, args[0], array);\n          case 2: return func.call(this, args[0], args[1], array);\n        }\n        var otherArgs = Array(start + 1);\n        index = -1;\n        while (++index < start) {\n          otherArgs[index] = args[index];\n        }\n        otherArgs[start] = array;\n        return apply(func, this, otherArgs);\n      };\n    }\n\n    function initialParams (fn) {\n        return rest(function (args /*..., callback*/) {\n            var callback = args.pop();\n            fn.call(this, args, callback);\n        });\n    }\n\n    function applyEach$1(eachfn) {\n        return rest(function (fns, args) {\n            var go = initialParams(function (args, callback) {\n                var that = this;\n                return eachfn(fns, function (fn, cb) {\n                    fn.apply(that, args.concat([cb]));\n                }, callback);\n            });\n            if (args.length) {\n                return go.apply(this, args);\n            } else {\n                return go;\n            }\n        });\n    }\n\n    /**\n     * The base implementation of `_.property` without support for deep paths.\n     *\n     * @private\n     * @param {string} key The key of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     */\n    function baseProperty(key) {\n      return function(object) {\n        return object == null ? undefined : object[key];\n      };\n    }\n\n    /**\n     * Gets the \"length\" property value of `object`.\n     *\n     * **Note:** This function is used to avoid a\n     * [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792) that affects\n     * Safari on at least iOS 8.1-8.3 ARM64.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {*} Returns the \"length\" value.\n     */\n    var getLength = baseProperty('length');\n\n    /** Used as references for various `Number` constants. */\n    var MAX_SAFE_INTEGER = 9007199254740991;\n\n    /**\n     * Checks if `value` is a valid array-like length.\n     *\n     * **Note:** This function is loosely based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a valid length,\n     *  else `false`.\n     * @example\n     *\n     * _.isLength(3);\n     * // => true\n     *\n     * _.isLength(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isLength(Infinity);\n     * // => false\n     *\n     * _.isLength('3');\n     * // => false\n     */\n    function isLength(value) {\n      return typeof value == 'number' &&\n        value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is array-like. A value is considered array-like if it's\n     * not a function and has a `value.length` that's an integer greater than or\n     * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n     * @example\n     *\n     * _.isArrayLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLike(document.body.children);\n     * // => true\n     *\n     * _.isArrayLike('abc');\n     * // => true\n     *\n     * _.isArrayLike(_.noop);\n     * // => false\n     */\n    function isArrayLike(value) {\n      return value != null && isLength(getLength(value)) && !isFunction(value);\n    }\n\n    /**\n     * A method that returns `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Util\n     * @example\n     *\n     * _.times(2, _.noop);\n     * // => [undefined, undefined]\n     */\n    function noop() {\n      // No operation performed.\n    }\n\n    function once(fn) {\n        return function () {\n            if (fn === null) return;\n            var callFn = fn;\n            fn = null;\n            callFn.apply(this, arguments);\n        };\n    }\n\n    var iteratorSymbol = typeof Symbol === 'function' && Symbol.iterator;\n\n    function getIterator (coll) {\n        return iteratorSymbol && coll[iteratorSymbol] && coll[iteratorSymbol]();\n    }\n\n    /* Built-in method references for those with the same name as other `lodash` methods. */\n    var nativeGetPrototype = Object.getPrototypeOf;\n\n    /**\n     * Gets the `[[Prototype]]` of `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {null|Object} Returns the `[[Prototype]]`.\n     */\n    function getPrototype(value) {\n      return nativeGetPrototype(Object(value));\n    }\n\n    /** Used for built-in method references. */\n    var objectProto$2 = Object.prototype;\n\n    /** Used to check objects for own properties. */\n    var hasOwnProperty = objectProto$2.hasOwnProperty;\n\n    /**\n     * The base implementation of `_.has` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHas(object, key) {\n      // Avoid a bug in IE 10-11 where objects with a [[Prototype]] of `null`,\n      // that are composed entirely of index properties, return `false` for\n      // `hasOwnProperty` checks of them.\n      return object != null &&\n        (hasOwnProperty.call(object, key) ||\n          (typeof object == 'object' && key in object && getPrototype(object) === null));\n    }\n\n    /* Built-in method references for those with the same name as other `lodash` methods. */\n    var nativeKeys = Object.keys;\n\n    /**\n     * The base implementation of `_.keys` which doesn't skip the constructor\n     * property of prototypes or treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeys(object) {\n      return nativeKeys(Object(object));\n    }\n\n    /**\n     * The base implementation of `_.times` without support for iteratee shorthands\n     * or max array length checks.\n     *\n     * @private\n     * @param {number} n The number of times to invoke `iteratee`.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns the array of results.\n     */\n    function baseTimes(n, iteratee) {\n      var index = -1,\n          result = Array(n);\n\n      while (++index < n) {\n        result[index] = iteratee(index);\n      }\n      return result;\n    }\n\n    /**\n     * This method is like `_.isArrayLike` except that it also checks if `value`\n     * is an object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array-like object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArrayLikeObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLikeObject(document.body.children);\n     * // => true\n     *\n     * _.isArrayLikeObject('abc');\n     * // => false\n     *\n     * _.isArrayLikeObject(_.noop);\n     * // => false\n     */\n    function isArrayLikeObject(value) {\n      return isObjectLike(value) && isArrayLike(value);\n    }\n\n    /** `Object#toString` result references. */\n    var argsTag = '[object Arguments]';\n\n    /** Used for built-in method references. */\n    var objectProto$3 = Object.prototype;\n\n    /** Used to check objects for own properties. */\n    var hasOwnProperty$1 = objectProto$3.hasOwnProperty;\n\n    /**\n     * Used to resolve the\n     * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n     * of values.\n     */\n    var objectToString$2 = objectProto$3.toString;\n\n    /** Built-in value references. */\n    var propertyIsEnumerable = objectProto$3.propertyIsEnumerable;\n\n    /**\n     * Checks if `value` is likely an `arguments` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified,\n     *  else `false`.\n     * @example\n     *\n     * _.isArguments(function() { return arguments; }());\n     * // => true\n     *\n     * _.isArguments([1, 2, 3]);\n     * // => false\n     */\n    function isArguments(value) {\n      // Safari 8.1 incorrectly makes `arguments.callee` enumerable in strict mode.\n      return isArrayLikeObject(value) && hasOwnProperty$1.call(value, 'callee') &&\n        (!propertyIsEnumerable.call(value, 'callee') || objectToString$2.call(value) == argsTag);\n    }\n\n    /**\n     * Checks if `value` is classified as an `Array` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @type {Function}\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified,\n     *  else `false`.\n     * @example\n     *\n     * _.isArray([1, 2, 3]);\n     * // => true\n     *\n     * _.isArray(document.body.children);\n     * // => false\n     *\n     * _.isArray('abc');\n     * // => false\n     *\n     * _.isArray(_.noop);\n     * // => false\n     */\n    var isArray = Array.isArray;\n\n    /** `Object#toString` result references. */\n    var stringTag = '[object String]';\n\n    /** Used for built-in method references. */\n    var objectProto$4 = Object.prototype;\n\n    /**\n     * Used to resolve the\n     * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n     * of values.\n     */\n    var objectToString$3 = objectProto$4.toString;\n\n    /**\n     * Checks if `value` is classified as a `String` primitive or object.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is correctly classified,\n     *  else `false`.\n     * @example\n     *\n     * _.isString('abc');\n     * // => true\n     *\n     * _.isString(1);\n     * // => false\n     */\n    function isString(value) {\n      return typeof value == 'string' ||\n        (!isArray(value) && isObjectLike(value) && objectToString$3.call(value) == stringTag);\n    }\n\n    /**\n     * Creates an array of index keys for `object` values of arrays,\n     * `arguments` objects, and strings, otherwise `null` is returned.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array|null} Returns index keys, else `null`.\n     */\n    function indexKeys(object) {\n      var length = object ? object.length : undefined;\n      if (isLength(length) &&\n          (isArray(object) || isString(object) || isArguments(object))) {\n        return baseTimes(length, String);\n      }\n      return null;\n    }\n\n    /** Used as references for various `Number` constants. */\n    var MAX_SAFE_INTEGER$1 = 9007199254740991;\n\n    /** Used to detect unsigned integer values. */\n    var reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n    /**\n     * Checks if `value` is a valid array-like index.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n     */\n    function isIndex(value, length) {\n      length = length == null ? MAX_SAFE_INTEGER$1 : length;\n      return !!length &&\n        (typeof value == 'number' || reIsUint.test(value)) &&\n        (value > -1 && value % 1 == 0 && value < length);\n    }\n\n    /** Used for built-in method references. */\n    var objectProto$5 = Object.prototype;\n\n    /**\n     * Checks if `value` is likely a prototype object.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n     */\n    function isPrototype(value) {\n      var Ctor = value && value.constructor,\n          proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto$5;\n\n      return value === proto;\n    }\n\n    /**\n     * Creates an array of the own enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects. See the\n     * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)\n     * for more details.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keys(new Foo);\n     * // => ['a', 'b'] (iteration order is not guaranteed)\n     *\n     * _.keys('hi');\n     * // => ['0', '1']\n     */\n    function keys(object) {\n      var isProto = isPrototype(object);\n      if (!(isProto || isArrayLike(object))) {\n        return baseKeys(object);\n      }\n      var indexes = indexKeys(object),\n          skipIndexes = !!indexes,\n          result = indexes || [],\n          length = result.length;\n\n      for (var key in object) {\n        if (baseHas(object, key) &&\n            !(skipIndexes && (key == 'length' || isIndex(key, length))) &&\n            !(isProto && key == 'constructor')) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    function createArrayIterator(coll) {\n        var i = -1;\n        var len = coll.length;\n        return function next() {\n            return ++i < len ? { value: coll[i], key: i } : null;\n        };\n    }\n\n    function createES2015Iterator(iterator) {\n        var i = -1;\n        return function next() {\n            var item = iterator.next();\n            if (item.done) return null;\n            i++;\n            return { value: item.value, key: i };\n        };\n    }\n\n    function createObjectIterator(obj) {\n        var okeys = keys(obj);\n        var i = -1;\n        var len = okeys.length;\n        return function next() {\n            var key = okeys[++i];\n            return i < len ? { value: obj[key], key: key } : null;\n        };\n    }\n\n    function iterator(coll) {\n        if (isArrayLike(coll)) {\n            return createArrayIterator(coll);\n        }\n\n        var iterator = getIterator(coll);\n        return iterator ? createES2015Iterator(iterator) : createObjectIterator(coll);\n    }\n\n    function onlyOnce(fn) {\n        return function () {\n            if (fn === null) throw new Error(\"Callback was already called.\");\n            var callFn = fn;\n            fn = null;\n            callFn.apply(this, arguments);\n        };\n    }\n\n    function _eachOfLimit(limit) {\n        return function (obj, iteratee, callback) {\n            callback = once(callback || noop);\n            if (limit <= 0 || !obj) {\n                return callback(null);\n            }\n            var nextElem = iterator(obj);\n            var done = false;\n            var running = 0;\n\n            function iterateeCallback(err) {\n                running -= 1;\n                if (err) {\n                    done = true;\n                    callback(err);\n                } else if (done && running <= 0) {\n                    return callback(null);\n                } else {\n                    replenish();\n                }\n            }\n\n            function replenish() {\n                while (running < limit && !done) {\n                    var elem = nextElem();\n                    if (elem === null) {\n                        done = true;\n                        if (running <= 0) {\n                            callback(null);\n                        }\n                        return;\n                    }\n                    running += 1;\n                    iteratee(elem.value, elem.key, onlyOnce(iterateeCallback));\n                }\n            }\n\n            replenish();\n        };\n    }\n\n    /**\n     * The same as [`eachOf`]{@link module:Collections.eachOf} but runs a maximum of `limit` async operations at a\n     * time.\n     *\n     * @name eachOfLimit\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.eachOf]{@link module:Collections.eachOf}\n     * @alias forEachOfLimit\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {number} limit - The maximum number of async operations at a time.\n     * @param {Function} iteratee - A function to apply to each\n     * item in `coll`. The `key` is the item's key, or index in the case of an\n     * array. The iteratee is passed a `callback(err)` which must be called once it\n     * has completed. If no error has occurred, the callback should be run without\n     * arguments or with an explicit `null` argument. Invoked with\n     * (item, key, callback).\n     * @param {Function} [callback] - A callback which is called when all\n     * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n     */\n    function eachOfLimit(coll, limit, iteratee, callback) {\n      _eachOfLimit(limit)(coll, iteratee, callback);\n    }\n\n    function doLimit(fn, limit) {\n        return function (iterable, iteratee, callback) {\n            return fn(iterable, limit, iteratee, callback);\n        };\n    }\n\n    /** Used as the `TypeError` message for \"Functions\" methods. */\n    var FUNC_ERROR_TEXT$1 = 'Expected a function';\n\n    /**\n     * Creates a function that invokes `func`, with the `this` binding and arguments\n     * of the created function, while it's called less than `n` times. Subsequent\n     * calls to the created function return the result of the last `func` invocation.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {number} n The number of calls at which `func` is no longer invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * jQuery(element).on('click', _.before(5, addContactToList));\n     * // => allows adding up to 4 contacts to the list\n     */\n    function before(n, func) {\n      var result;\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT$1);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n > 0) {\n          result = func.apply(this, arguments);\n        }\n        if (n <= 1) {\n          func = undefined;\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that is restricted to invoking `func` once. Repeat calls\n     * to the function return the value of the first invocation. The `func` is\n     * invoked with the `this` binding and arguments of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var initialize = _.once(createApplication);\n     * initialize();\n     * initialize();\n     * // `initialize` invokes `createApplication` once\n     */\n    function once$1(func) {\n      return before(2, func);\n    }\n\n    // eachOf implementation optimized for array-likes\n    function eachOfArrayLike(coll, iteratee, callback) {\n        callback = once$1(callback || noop);\n        var index = 0,\n            completed = 0,\n            length = coll.length;\n        if (length === 0) {\n            callback(null);\n        }\n\n        function iteratorCallback(err) {\n            if (err) {\n                callback(err);\n            } else if (++completed === length) {\n                callback(null);\n            }\n        }\n\n        for (; index < length; index++) {\n            iteratee(coll[index], index, onlyOnce(iteratorCallback));\n        }\n    }\n\n    // a generic version of eachOf which can handle array, object, and iterator cases.\n    var eachOfGeneric = doLimit(eachOfLimit, Infinity);\n\n    /**\n     * Like [`each`]{@link module:Collections.each}, except that it passes the key (or index) as the second argument\n     * to the iteratee.\n     *\n     * @name eachOf\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @alias forEachOf\n     * @category Collection\n     * @see [async.each]{@link module:Collections.each}\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A function to apply to each\n     * item in `coll`. The `key` is the item's key, or index in the case of an\n     * array. The iteratee is passed a `callback(err)` which must be called once it\n     * has completed. If no error has occurred, the callback should be run without\n     * arguments or with an explicit `null` argument. Invoked with\n     * (item, key, callback).\n     * @param {Function} [callback] - A callback which is called when all\n     * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n     * @example\n     *\n     * var obj = {dev: \"/dev.json\", test: \"/test.json\", prod: \"/prod.json\"};\n     * var configs = {};\n     *\n     * async.forEachOf(obj, function (value, key, callback) {\n     *     fs.readFile(__dirname + value, \"utf8\", function (err, data) {\n     *         if (err) return callback(err);\n     *         try {\n     *             configs[key] = JSON.parse(data);\n     *         } catch (e) {\n     *             return callback(e);\n     *         }\n     *         callback();\n     *     });\n     * }, function (err) {\n     *     if (err) console.error(err.message);\n     *     // configs is now a map of JSON data\n     *     doSomethingWith(configs);\n     * });\n     */\n    function eachOf (coll, iteratee, callback) {\n        var eachOfImplementation = isArrayLike(coll) ? eachOfArrayLike : eachOfGeneric;\n        eachOfImplementation(coll, iteratee, callback);\n    }\n\n    function doParallel(fn) {\n        return function (obj, iteratee, callback) {\n            return fn(eachOf, obj, iteratee, callback);\n        };\n    }\n\n    function _asyncMap(eachfn, arr, iteratee, callback) {\n        callback = once(callback || noop);\n        arr = arr || [];\n        var results = [];\n        var counter = 0;\n\n        eachfn(arr, function (value, _, callback) {\n            var index = counter++;\n            iteratee(value, function (err, v) {\n                results[index] = v;\n                callback(err);\n            });\n        }, function (err) {\n            callback(err, results);\n        });\n    }\n\n    /**\n     * Produces a new collection of values by mapping each value in `coll` through\n     * the `iteratee` function. The `iteratee` is called with an item from `coll`\n     * and a callback for when it has finished processing. Each of these callback\n     * takes 2 arguments: an `error`, and the transformed item from `coll`. If\n     * `iteratee` passes an error to its callback, the main `callback` (for the\n     * `map` function) is immediately called with the error.\n     *\n     * Note, that since this function applies the `iteratee` to each item in\n     * parallel, there is no guarantee that the `iteratee` functions will complete\n     * in order. However, the results array will be in the same order as the\n     * original `coll`.\n     *\n     * If `map` is passed an Object, the results will be an Array.  The results\n     * will roughly be in the order of the original Objects' keys (but this can\n     * vary across JavaScript engines)\n     *\n     * @name map\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A function to apply to each item in `coll`.\n     * The iteratee is passed a `callback(err, transformed)` which must be called\n     * once it has completed with an error (which can be `null`) and a\n     * transformed item. Invoked with (item, callback).\n     * @param {Function} [callback] - A callback which is called when all `iteratee`\n     * functions have finished, or an error occurs. Results is an Array of the\n     * transformed items from the `coll`. Invoked with (err, results).\n     * @example\n     *\n     * async.map(['file1','file2','file3'], fs.stat, function(err, results) {\n     *     // results is now an array of stats for each file\n     * });\n     */\n    var map = doParallel(_asyncMap);\n\n    /**\n     * Applies the provided arguments to each function in the array, calling\n     * `callback` after all functions have completed. If you only provide the first\n     * argument, then it will return a function which lets you pass in the\n     * arguments as if it were a single function call.\n     *\n     * @name applyEach\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @category Control Flow\n     * @param {Array|Iterable|Object} fns - A collection of asynchronous functions to all\n     * call with the same arguments\n     * @param {...*} [args] - any number of separate arguments to pass to the\n     * function.\n     * @param {Function} [callback] - the final argument should be the callback,\n     * called when all functions have completed processing.\n     * @returns {Function} - If only the first argument is provided, it will return\n     * a function which lets you pass in the arguments as if it were a single\n     * function call.\n     * @example\n     *\n     * async.applyEach([enableSearch, updateSchema], 'bucket', callback);\n     *\n     * // partial application example:\n     * async.each(\n     *     buckets,\n     *     async.applyEach([enableSearch, updateSchema]),\n     *     callback\n     * );\n     */\n    var applyEach = applyEach$1(map);\n\n    function doParallelLimit(fn) {\n        return function (obj, limit, iteratee, callback) {\n            return fn(_eachOfLimit(limit), obj, iteratee, callback);\n        };\n    }\n\n    /**\n     * The same as [`map`]{@link module:Collections.map} but runs a maximum of `limit` async operations at a time.\n     *\n     * @name mapLimit\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.map]{@link module:Collections.map}\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {number} limit - The maximum number of async operations at a time.\n     * @param {Function} iteratee - A function to apply to each item in `coll`.\n     * The iteratee is passed a `callback(err, transformed)` which must be called\n     * once it has completed with an error (which can be `null`) and a transformed\n     * item. Invoked with (item, callback).\n     * @param {Function} [callback] - A callback which is called when all `iteratee`\n     * functions have finished, or an error occurs. Results is an array of the\n     * transformed items from the `coll`. Invoked with (err, results).\n     */\n    var mapLimit = doParallelLimit(_asyncMap);\n\n    /**\n     * The same as [`map`]{@link module:Collections.map} but runs only a single async operation at a time.\n     *\n     * @name mapSeries\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.map]{@link module:Collections.map}\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A function to apply to each item in `coll`.\n     * The iteratee is passed a `callback(err, transformed)` which must be called\n     * once it has completed with an error (which can be `null`) and a\n     * transformed item. Invoked with (item, callback).\n     * @param {Function} [callback] - A callback which is called when all `iteratee`\n     * functions have finished, or an error occurs. Results is an array of the\n     * transformed items from the `coll`. Invoked with (err, results).\n     */\n    var mapSeries = doLimit(mapLimit, 1);\n\n    /**\n     * The same as [`applyEach`]{@link module:ControlFlow.applyEach} but runs only a single async operation at a time.\n     *\n     * @name applyEachSeries\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @see [async.applyEach]{@link module:ControlFlow.applyEach}\n     * @category Control Flow\n     * @param {Array|Iterable|Object} fns - A collection of asynchronous functions to all\n     * call with the same arguments\n     * @param {...*} [args] - any number of separate arguments to pass to the\n     * function.\n     * @param {Function} [callback] - the final argument should be the callback,\n     * called when all functions have completed processing.\n     * @returns {Function} - If only the first argument is provided, it will return\n     * a function which lets you pass in the arguments as if it were a single\n     * function call.\n     */\n    var applyEachSeries = applyEach$1(mapSeries);\n\n    /**\n     * Creates a continuation function with some arguments already applied.\n     *\n     * Useful as a shorthand when combined with other control flow functions. Any\n     * arguments passed to the returned function are added to the arguments\n     * originally passed to apply.\n     *\n     * @name apply\n     * @static\n     * @memberOf module:Utils\n     * @method\n     * @category Util\n     * @param {Function} function - The function you want to eventually apply all\n     * arguments to. Invokes with (arguments...).\n     * @param {...*} arguments... - Any number of arguments to automatically apply\n     * when the continuation is called.\n     * @example\n     *\n     * // using apply\n     * async.parallel([\n     *     async.apply(fs.writeFile, 'testfile1', 'test1'),\n     *     async.apply(fs.writeFile, 'testfile2', 'test2')\n     * ]);\n     *\n     *\n     * // the same process without using apply\n     * async.parallel([\n     *     function(callback) {\n     *         fs.writeFile('testfile1', 'test1', callback);\n     *     },\n     *     function(callback) {\n     *         fs.writeFile('testfile2', 'test2', callback);\n     *     }\n     * ]);\n     *\n     * // It's possible to pass any number of additional arguments when calling the\n     * // continuation:\n     *\n     * node> var fn = async.apply(sys.puts, 'one');\n     * node> fn('two', 'three');\n     * one\n     * two\n     * three\n     */\n    var apply$1 = rest(function (fn, args) {\n        return rest(function (callArgs) {\n            return fn.apply(null, args.concat(callArgs));\n        });\n    });\n\n    /**\n     * Take a sync function and make it async, passing its return value to a\n     * callback. This is useful for plugging sync functions into a waterfall,\n     * series, or other async functions. Any arguments passed to the generated\n     * function will be passed to the wrapped function (except for the final\n     * callback argument). Errors thrown will be passed to the callback.\n     *\n     * If the function passed to `asyncify` returns a Promise, that promises's\n     * resolved/rejected state will be used to call the callback, rather than simply\n     * the synchronous return value.\n     *\n     * This also means you can asyncify ES2016 `async` functions.\n     *\n     * @name asyncify\n     * @static\n     * @memberOf module:Utils\n     * @method\n     * @alias wrapSync\n     * @category Util\n     * @param {Function} func - The synchronous function to convert to an\n     * asynchronous function.\n     * @returns {Function} An asynchronous wrapper of the `func`. To be invoked with\n     * (callback).\n     * @example\n     *\n     * // passing a regular synchronous function\n     * async.waterfall([\n     *     async.apply(fs.readFile, filename, \"utf8\"),\n     *     async.asyncify(JSON.parse),\n     *     function (data, next) {\n     *         // data is the result of parsing the text.\n     *         // If there was a parsing error, it would have been caught.\n     *     }\n     * ], callback);\n     *\n     * // passing a function returning a promise\n     * async.waterfall([\n     *     async.apply(fs.readFile, filename, \"utf8\"),\n     *     async.asyncify(function (contents) {\n     *         return db.model.create(contents);\n     *     }),\n     *     function (model, next) {\n     *         // `model` is the instantiated model object.\n     *         // If there was an error, this function would be skipped.\n     *     }\n     * ], callback);\n     *\n     * // es6 example\n     * var q = async.queue(async.asyncify(async function(file) {\n     *     var intermediateStep = await processFile(file);\n     *     return await somePromise(intermediateStep)\n     * }));\n     *\n     * q.push(files);\n     */\n    function asyncify(func) {\n        return initialParams(function (args, callback) {\n            var result;\n            try {\n                result = func.apply(this, args);\n            } catch (e) {\n                return callback(e);\n            }\n            // if result is Promise object\n            if (isObject(result) && typeof result.then === 'function') {\n                result.then(function (value) {\n                    callback(null, value);\n                }, function (err) {\n                    callback(err.message ? err : new Error(err));\n                });\n            } else {\n                callback(null, result);\n            }\n        });\n    }\n\n    /**\n     * A specialized version of `_.forEach` for arrays without support for\n     * iteratee shorthands.\n     *\n     * @private\n     * @param {Array} [array] The array to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns `array`.\n     */\n    function arrayEach(array, iteratee) {\n      var index = -1,\n          length = array ? array.length : 0;\n\n      while (++index < length) {\n        if (iteratee(array[index], index, array) === false) {\n          break;\n        }\n      }\n      return array;\n    }\n\n    /**\n     * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseFor(fromRight) {\n      return function(object, iteratee, keysFunc) {\n        var index = -1,\n            iterable = Object(object),\n            props = keysFunc(object),\n            length = props.length;\n\n        while (length--) {\n          var key = props[fromRight ? length : ++index];\n          if (iteratee(iterable[key], key, iterable) === false) {\n            break;\n          }\n        }\n        return object;\n      };\n    }\n\n    /**\n     * The base implementation of `baseForOwn` which iterates over `object`\n     * properties returned by `keysFunc` and invokes `iteratee` for each property.\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseFor = createBaseFor();\n\n    /**\n     * The base implementation of `_.forOwn` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwn(object, iteratee) {\n      return object && baseFor(object, iteratee, keys);\n    }\n\n    /**\n     * Gets the index at which the first occurrence of `NaN` is found in `array`.\n     *\n     * @private\n     * @param {Array} array The array to search.\n     * @param {number} fromIndex The index to search from.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {number} Returns the index of the matched `NaN`, else `-1`.\n     */\n    function indexOfNaN(array, fromIndex, fromRight) {\n      var length = array.length,\n          index = fromIndex + (fromRight ? 1 : -1);\n\n      while ((fromRight ? index-- : ++index < length)) {\n        var other = array[index];\n        if (other !== other) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n     *\n     * @private\n     * @param {Array} array The array to search.\n     * @param {*} value The value to search for.\n     * @param {number} fromIndex The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     */\n    function baseIndexOf(array, value, fromIndex) {\n      if (value !== value) {\n        return indexOfNaN(array, fromIndex);\n      }\n      var index = fromIndex - 1,\n          length = array.length;\n\n      while (++index < length) {\n        if (array[index] === value) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Determines the best order for running the functions in `tasks`, based on\n     * their requirements. Each function can optionally depend on other functions\n     * being completed first, and each function is run as soon as its requirements\n     * are satisfied.\n     *\n     * If any of the functions pass an error to their callback, the `auto` sequence\n     * will stop. Further tasks will not execute (so any other functions depending\n     * on it will not run), and the main `callback` is immediately called with the\n     * error.\n     *\n     * Functions also receive an object containing the results of functions which\n     * have completed so far as the first argument, if they have dependencies. If a\n     * task function has no dependencies, it will only be passed a callback.\n     *\n     * @name auto\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @category Control Flow\n     * @param {Object} tasks - An object. Each of its properties is either a\n     * function or an array of requirements, with the function itself the last item\n     * in the array. The object's key of a property serves as the name of the task\n     * defined by that property, i.e. can be used when specifying requirements for\n     * other tasks. The function receives one or two arguments:\n     * * a `results` object, containing the results of the previously executed\n     *   functions, only passed if the task has any dependencies,\n     * * a `callback(err, result)` function, which must be called when finished,\n     *   passing an `error` (which can be `null`) and the result of the function's\n     *   execution.\n     * @param {number} [concurrency=Infinity] - An optional `integer` for\n     * determining the maximum number of tasks that can be run in parallel. By\n     * default, as many as possible.\n     * @param {Function} [callback] - An optional callback which is called when all\n     * the tasks have been completed. It receives the `err` argument if any `tasks`\n     * pass an error to their callback. Results are always returned; however, if an\n     * error occurs, no further `tasks` will be performed, and the results object\n     * will only contain partial results. Invoked with (err, results).\n     * @returns undefined\n     * @example\n     *\n     * async.auto({\n     *     // this function will just be passed a callback\n     *     readData: async.apply(fs.readFile, 'data.txt', 'utf-8'),\n     *     showData: ['readData', function(results, cb) {\n     *         // results.readData is the file's contents\n     *         // ...\n     *     }]\n     * }, callback);\n     *\n     * async.auto({\n     *     get_data: function(callback) {\n     *         console.log('in get_data');\n     *         // async code to get some data\n     *         callback(null, 'data', 'converted to array');\n     *     },\n     *     make_folder: function(callback) {\n     *         console.log('in make_folder');\n     *         // async code to create a directory to store a file in\n     *         // this is run at the same time as getting the data\n     *         callback(null, 'folder');\n     *     },\n     *     write_file: ['get_data', 'make_folder', function(results, callback) {\n     *         console.log('in write_file', JSON.stringify(results));\n     *         // once there is some data and the directory exists,\n     *         // write the data to a file in the directory\n     *         callback(null, 'filename');\n     *     }],\n     *     email_link: ['write_file', function(results, callback) {\n     *         console.log('in email_link', JSON.stringify(results));\n     *         // once the file is written let's email a link to it...\n     *         // results.write_file contains the filename returned by write_file.\n     *         callback(null, {'file':results.write_file, 'email':'user@example.com'});\n     *     }]\n     * }, function(err, results) {\n     *     console.log('err = ', err);\n     *     console.log('results = ', results);\n     * });\n     */\n    function auto (tasks, concurrency, callback) {\n        if (typeof concurrency === 'function') {\n            // concurrency is optional, shift the args.\n            callback = concurrency;\n            concurrency = null;\n        }\n        callback = once(callback || noop);\n        var keys$$ = keys(tasks);\n        var numTasks = keys$$.length;\n        if (!numTasks) {\n            return callback(null);\n        }\n        if (!concurrency) {\n            concurrency = numTasks;\n        }\n\n        var results = {};\n        var runningTasks = 0;\n        var hasError = false;\n\n        var listeners = {};\n\n        var readyTasks = [];\n\n        // for cycle detection:\n        var readyToCheck = []; // tasks that have been identified as reachable\n        // without the possibility of returning to an ancestor task\n        var uncheckedDependencies = {};\n\n        baseForOwn(tasks, function (task, key) {\n            if (!isArray(task)) {\n                // no dependencies\n                enqueueTask(key, [task]);\n                readyToCheck.push(key);\n                return;\n            }\n\n            var dependencies = task.slice(0, task.length - 1);\n            var remainingDependencies = dependencies.length;\n            if (remainingDependencies === 0) {\n                enqueueTask(key, task);\n                readyToCheck.push(key);\n                return;\n            }\n            uncheckedDependencies[key] = remainingDependencies;\n\n            arrayEach(dependencies, function (dependencyName) {\n                if (!tasks[dependencyName]) {\n                    throw new Error('async.auto task `' + key + '` has a non-existent dependency in ' + dependencies.join(', '));\n                }\n                addListener(dependencyName, function () {\n                    remainingDependencies--;\n                    if (remainingDependencies === 0) {\n                        enqueueTask(key, task);\n                    }\n                });\n            });\n        });\n\n        checkForDeadlocks();\n        processQueue();\n\n        function enqueueTask(key, task) {\n            readyTasks.push(function () {\n                runTask(key, task);\n            });\n        }\n\n        function processQueue() {\n            if (readyTasks.length === 0 && runningTasks === 0) {\n                return callback(null, results);\n            }\n            while (readyTasks.length && runningTasks < concurrency) {\n                var run = readyTasks.shift();\n                run();\n            }\n        }\n\n        function addListener(taskName, fn) {\n            var taskListeners = listeners[taskName];\n            if (!taskListeners) {\n                taskListeners = listeners[taskName] = [];\n            }\n\n            taskListeners.push(fn);\n        }\n\n        function taskComplete(taskName) {\n            var taskListeners = listeners[taskName] || [];\n            arrayEach(taskListeners, function (fn) {\n                fn();\n            });\n            processQueue();\n        }\n\n        function runTask(key, task) {\n            if (hasError) return;\n\n            var taskCallback = onlyOnce(rest(function (err, args) {\n                runningTasks--;\n                if (args.length <= 1) {\n                    args = args[0];\n                }\n                if (err) {\n                    var safeResults = {};\n                    baseForOwn(results, function (val, rkey) {\n                        safeResults[rkey] = val;\n                    });\n                    safeResults[key] = args;\n                    hasError = true;\n                    listeners = [];\n\n                    callback(err, safeResults);\n                } else {\n                    results[key] = args;\n                    taskComplete(key);\n                }\n            }));\n\n            runningTasks++;\n            var taskFn = task[task.length - 1];\n            if (task.length > 1) {\n                taskFn(results, taskCallback);\n            } else {\n                taskFn(taskCallback);\n            }\n        }\n\n        function checkForDeadlocks() {\n            // Kahn's algorithm\n            // https://en.wikipedia.org/wiki/Topological_sorting#Kahn.27s_algorithm\n            // http://connalle.blogspot.com/2013/10/topological-sortingkahn-algorithm.html\n            var currentTask;\n            var counter = 0;\n            while (readyToCheck.length) {\n                currentTask = readyToCheck.pop();\n                counter++;\n                arrayEach(getDependents(currentTask), function (dependent) {\n                    if (--uncheckedDependencies[dependent] === 0) {\n                        readyToCheck.push(dependent);\n                    }\n                });\n            }\n\n            if (counter !== numTasks) {\n                throw new Error('async.auto cannot execute tasks due to a recursive dependency');\n            }\n        }\n\n        function getDependents(taskName) {\n            var result = [];\n            baseForOwn(tasks, function (task, key) {\n                if (isArray(task) && baseIndexOf(task, taskName, 0) >= 0) {\n                    result.push(key);\n                }\n            });\n            return result;\n        }\n    }\n\n    /**\n     * A specialized version of `_.map` for arrays without support for iteratee\n     * shorthands.\n     *\n     * @private\n     * @param {Array} [array] The array to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     */\n    function arrayMap(array, iteratee) {\n      var index = -1,\n          length = array ? array.length : 0,\n          result = Array(length);\n\n      while (++index < length) {\n        result[index] = iteratee(array[index], index, array);\n      }\n      return result;\n    }\n\n    /**\n     * Copies the values of `source` to `array`.\n     *\n     * @private\n     * @param {Array} source The array to copy values from.\n     * @param {Array} [array=[]] The array to copy values to.\n     * @returns {Array} Returns `array`.\n     */\n    function copyArray(source, array) {\n      var index = -1,\n          length = source.length;\n\n      array || (array = Array(length));\n      while (++index < length) {\n        array[index] = source[index];\n      }\n      return array;\n    }\n\n    /**\n     * Checks if `value` is a global object.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {null|Object} Returns `value` if it's a global object, else `null`.\n     */\n    function checkGlobal(value) {\n      return (value && value.Object === Object) ? value : null;\n    }\n\n    /** Detect free variable `global` from Node.js. */\n    var freeGlobal = checkGlobal(typeof global == 'object' && global);\n\n    /** Detect free variable `self`. */\n    var freeSelf = checkGlobal(typeof self == 'object' && self);\n\n    /** Detect `this` as the global object. */\n    var thisGlobal = checkGlobal(typeof this == 'object' && this);\n\n    /** Used as a reference to the global object. */\n    var root = freeGlobal || freeSelf || thisGlobal || Function('return this')();\n\n    /** Built-in value references. */\n    var Symbol$1 = root.Symbol;\n\n    /** Used as references for various `Number` constants. */\n    var INFINITY$1 = 1 / 0;\n\n    /** Used to convert symbols to primitives and strings. */\n    var symbolProto = Symbol$1 ? Symbol$1.prototype : undefined;\n    var symbolToString = symbolProto ? symbolProto.toString : undefined;\n    /**\n     * The base implementation of `_.toString` which doesn't convert nullish\n     * values to empty strings.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {string} Returns the string.\n     */\n    function baseToString(value) {\n      // Exit early for strings to avoid a performance hit in some environments.\n      if (typeof value == 'string') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return symbolToString ? symbolToString.call(value) : '';\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY$1) ? '-0' : result;\n    }\n\n    /**\n     * The base implementation of `_.slice` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseSlice(array, start, end) {\n      var index = -1,\n          length = array.length;\n\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = end > length ? length : end;\n      if (end < 0) {\n        end += length;\n      }\n      length = start > end ? 0 : ((end - start) >>> 0);\n      start >>>= 0;\n\n      var result = Array(length);\n      while (++index < length) {\n        result[index] = array[index + start];\n      }\n      return result;\n    }\n\n    /**\n     * Casts `array` to a slice if it's needed.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {number} start The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the cast slice.\n     */\n    function castSlice(array, start, end) {\n      var length = array.length;\n      end = end === undefined ? length : end;\n      return (!start && end >= length) ? array : baseSlice(array, start, end);\n    }\n\n    /**\n     * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol\n     * that is not found in the character symbols.\n     *\n     * @private\n     * @param {Array} strSymbols The string symbols to inspect.\n     * @param {Array} chrSymbols The character symbols to find.\n     * @returns {number} Returns the index of the last unmatched string symbol.\n     */\n    function charsEndIndex(strSymbols, chrSymbols) {\n      var index = strSymbols.length;\n\n      while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n      return index;\n    }\n\n    /**\n     * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol\n     * that is not found in the character symbols.\n     *\n     * @private\n     * @param {Array} strSymbols The string symbols to inspect.\n     * @param {Array} chrSymbols The character symbols to find.\n     * @returns {number} Returns the index of the first unmatched string symbol.\n     */\n    function charsStartIndex(strSymbols, chrSymbols) {\n      var index = -1,\n          length = strSymbols.length;\n\n      while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n      return index;\n    }\n\n    /** Used to compose unicode character classes. */\n    var rsAstralRange = '\\\\ud800-\\\\udfff';\n    var rsComboMarksRange = '\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe23';\n    var rsComboSymbolsRange = '\\\\u20d0-\\\\u20f0';\n    var rsVarRange = '\\\\ufe0e\\\\ufe0f';\n    var rsAstral = '[' + rsAstralRange + ']';\n    var rsCombo = '[' + rsComboMarksRange + rsComboSymbolsRange + ']';\n    var rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]';\n    var rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')';\n    var rsNonAstral = '[^' + rsAstralRange + ']';\n    var rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}';\n    var rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]';\n    var rsZWJ = '\\\\u200d';\n    var reOptMod = rsModifier + '?';\n    var rsOptVar = '[' + rsVarRange + ']?';\n    var rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*';\n    var rsSeq = rsOptVar + reOptMod + rsOptJoin;\n    var rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n    /** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\n    var reComplexSymbol = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n    /**\n     * Converts `string` to an array.\n     *\n     * @private\n     * @param {string} string The string to convert.\n     * @returns {Array} Returns the converted array.\n     */\n    function stringToArray(string) {\n      return string.match(reComplexSymbol);\n    }\n\n    /**\n     * Converts `value` to a string. An empty string is returned for `null`\n     * and `undefined` values. The sign of `-0` is preserved.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to process.\n     * @returns {string} Returns the string.\n     * @example\n     *\n     * _.toString(null);\n     * // => ''\n     *\n     * _.toString(-0);\n     * // => '-0'\n     *\n     * _.toString([1, 2, 3]);\n     * // => '1,2,3'\n     */\n    function toString(value) {\n      return value == null ? '' : baseToString(value);\n    }\n\n    /** Used to match leading and trailing whitespace. */\n    var reTrim$1 = /^\\s+|\\s+$/g;\n\n    /**\n     * Removes leading and trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trim('  abc  ');\n     * // => 'abc'\n     *\n     * _.trim('-_-abc-_-', '_-');\n     * // => 'abc'\n     *\n     * _.map(['  foo  ', '  bar  '], _.trim);\n     * // => ['foo', 'bar']\n     */\n    function trim(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.replace(reTrim$1, '');\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          chrSymbols = stringToArray(chars),\n          start = charsStartIndex(strSymbols, chrSymbols),\n          end = charsEndIndex(strSymbols, chrSymbols) + 1;\n\n      return castSlice(strSymbols, start, end).join('');\n    }\n\n    var FN_ARGS = /^(function)?\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m;\n    var FN_ARG_SPLIT = /,/;\n    var FN_ARG = /(=.+)?(\\s*)$/;\n    var STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\n\n    function parseParams(func) {\n        func = func.toString().replace(STRIP_COMMENTS, '');\n        func = func.match(FN_ARGS)[2].replace(' ', '');\n        func = func ? func.split(FN_ARG_SPLIT) : [];\n        func = func.map(function (arg) {\n            return trim(arg.replace(FN_ARG, ''));\n        });\n        return func;\n    }\n\n    /**\n     * A dependency-injected version of the [async.auto]{@link module:ControlFlow.auto} function. Dependent\n     * tasks are specified as parameters to the function, after the usual callback\n     * parameter, with the parameter names matching the names of the tasks it\n     * depends on. This can provide even more readable task graphs which can be\n     * easier to maintain.\n     *\n     * If a final callback is specified, the task results are similarly injected,\n     * specified as named parameters after the initial error parameter.\n     *\n     * The autoInject function is purely syntactic sugar and its semantics are\n     * otherwise equivalent to [async.auto]{@link module:ControlFlow.auto}.\n     *\n     * @name autoInject\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @see [async.auto]{@link module:ControlFlow.auto}\n     * @category Control Flow\n     * @param {Object} tasks - An object, each of whose properties is a function of\n     * the form 'func([dependencies...], callback). The object's key of a property\n     * serves as the name of the task defined by that property, i.e. can be used\n     * when specifying requirements for other tasks.\n     * * The `callback` parameter is a `callback(err, result)` which must be called\n     *   when finished, passing an `error` (which can be `null`) and the result of\n     *   the function's execution. The remaining parameters name other tasks on\n     *   which the task is dependent, and the results from those tasks are the\n     *   arguments of those parameters.\n     * @param {Function} [callback] - An optional callback which is called when all\n     * the tasks have been completed. It receives the `err` argument if any `tasks`\n     * pass an error to their callback, and a `results` object with any completed\n     * task results, similar to `auto`.\n     * @example\n     *\n     * //  The example from `auto` can be rewritten as follows:\n     * async.autoInject({\n     *     get_data: function(callback) {\n     *         // async code to get some data\n     *         callback(null, 'data', 'converted to array');\n     *     },\n     *     make_folder: function(callback) {\n     *         // async code to create a directory to store a file in\n     *         // this is run at the same time as getting the data\n     *         callback(null, 'folder');\n     *     },\n     *     write_file: function(get_data, make_folder, callback) {\n     *         // once there is some data and the directory exists,\n     *         // write the data to a file in the directory\n     *         callback(null, 'filename');\n     *     },\n     *     email_link: function(write_file, callback) {\n     *         // once the file is written let's email a link to it...\n     *         // write_file contains the filename returned by write_file.\n     *         callback(null, {'file':write_file, 'email':'user@example.com'});\n     *     }\n     * }, function(err, results) {\n     *     console.log('err = ', err);\n     *     console.log('email_link = ', results.email_link);\n     * });\n     *\n     * // If you are using a JS minifier that mangles parameter names, `autoInject`\n     * // will not work with plain functions, since the parameter names will be\n     * // collapsed to a single letter identifier.  To work around this, you can\n     * // explicitly specify the names of the parameters your task function needs\n     * // in an array, similar to Angular.js dependency injection.\n     *\n     * // This still has an advantage over plain `auto`, since the results a task\n     * // depends on are still spread into arguments.\n     * async.autoInject({\n     *     //...\n     *     write_file: ['get_data', 'make_folder', function(get_data, make_folder, callback) {\n     *         callback(null, 'filename');\n     *     }],\n     *     email_link: ['write_file', function(write_file, callback) {\n     *         callback(null, {'file':write_file, 'email':'user@example.com'});\n     *     }]\n     *     //...\n     * }, function(err, results) {\n     *     console.log('err = ', err);\n     *     console.log('email_link = ', results.email_link);\n     * });\n     */\n    function autoInject(tasks, callback) {\n        var newTasks = {};\n\n        baseForOwn(tasks, function (taskFn, key) {\n            var params;\n\n            if (isArray(taskFn)) {\n                params = copyArray(taskFn);\n                taskFn = params.pop();\n\n                newTasks[key] = params.concat(params.length > 0 ? newTask : taskFn);\n            } else if (taskFn.length === 1) {\n                // no dependencies, use the function as-is\n                newTasks[key] = taskFn;\n            } else {\n                params = parseParams(taskFn);\n                if (taskFn.length === 0 && params.length === 0) {\n                    throw new Error(\"autoInject task functions require explicit parameters.\");\n                }\n\n                params.pop();\n\n                newTasks[key] = params.concat(newTask);\n            }\n\n            function newTask(results, taskCb) {\n                var newArgs = arrayMap(params, function (name) {\n                    return results[name];\n                });\n                newArgs.push(taskCb);\n                taskFn.apply(null, newArgs);\n            }\n        });\n\n        auto(newTasks, callback);\n    }\n\n    var hasSetImmediate = typeof setImmediate === 'function' && setImmediate;\n    var hasNextTick = typeof process === 'object' && typeof process.nextTick === 'function';\n\n    function fallback(fn) {\n        setTimeout(fn, 0);\n    }\n\n    function wrap(defer) {\n        return rest(function (fn, args) {\n            defer(function () {\n                fn.apply(null, args);\n            });\n        });\n    }\n\n    var _defer;\n\n    if (hasSetImmediate) {\n        _defer = setImmediate;\n    } else if (hasNextTick) {\n        _defer = process.nextTick;\n    } else {\n        _defer = fallback;\n    }\n\n    var setImmediate$1 = wrap(_defer);\n\n    // Simple doubly linked list (https://en.wikipedia.org/wiki/Doubly_linked_list) implementation\n    // used for queues. This implementation assumes that the node provided by the user can be modified\n    // to adjust the next and last properties. We implement only the minimal functionality\n    // for queue support.\n    function DLL() {\n        this.head = this.tail = null;\n        this.length = 0;\n    }\n\n    function setInitial(dll, node) {\n        dll.length = 1;\n        dll.head = dll.tail = node;\n    }\n\n    DLL.prototype.removeLink = function (node) {\n        if (node.prev) node.prev.next = node.next;else this.head = node.next;\n        if (node.next) node.next.prev = node.prev;else this.tail = node.prev;\n\n        node.prev = node.next = null;\n        this.length -= 1;\n        return node;\n    };\n\n    DLL.prototype.empty = DLL;\n\n    DLL.prototype.insertAfter = function (node, newNode) {\n        newNode.prev = node;\n        newNode.next = node.next;\n        if (node.next) node.next.prev = newNode;else this.tail = newNode;\n        node.next = newNode;\n        this.length += 1;\n    };\n\n    DLL.prototype.insertBefore = function (node, newNode) {\n        newNode.prev = node.prev;\n        newNode.next = node;\n        if (node.prev) node.prev.next = newNode;else this.head = newNode;\n        node.prev = newNode;\n        this.length += 1;\n    };\n\n    DLL.prototype.unshift = function (node) {\n        if (this.head) this.insertBefore(this.head, node);else setInitial(this, node);\n    };\n\n    DLL.prototype.push = function (node) {\n        if (this.tail) this.insertAfter(this.tail, node);else setInitial(this, node);\n    };\n\n    DLL.prototype.shift = function () {\n        return this.head && this.removeLink(this.head);\n    };\n\n    DLL.prototype.pop = function () {\n        return this.tail && this.removeLink(this.tail);\n    };\n\n    function queue(worker, concurrency, payload) {\n        if (concurrency == null) {\n            concurrency = 1;\n        } else if (concurrency === 0) {\n            throw new Error('Concurrency must not be zero');\n        }\n\n        function _insert(data, insertAtFront, callback) {\n            if (callback != null && typeof callback !== 'function') {\n                throw new Error('task callback must be a function');\n            }\n            q.started = true;\n            if (!isArray(data)) {\n                data = [data];\n            }\n            if (data.length === 0 && q.idle()) {\n                // call drain immediately if there are no tasks\n                return setImmediate$1(function () {\n                    q.drain();\n                });\n            }\n            arrayEach(data, function (task) {\n                var item = {\n                    data: task,\n                    callback: callback || noop\n                };\n\n                if (insertAtFront) {\n                    q._tasks.unshift(item);\n                } else {\n                    q._tasks.push(item);\n                }\n            });\n            setImmediate$1(q.process);\n        }\n\n        function _next(tasks) {\n            return rest(function (args) {\n                workers -= 1;\n\n                arrayEach(tasks, function (task) {\n                    arrayEach(workersList, function (worker, index) {\n                        if (worker === task) {\n                            workersList.splice(index, 1);\n                            return false;\n                        }\n                    });\n\n                    task.callback.apply(task, args);\n\n                    if (args[0] != null) {\n                        q.error(args[0], task.data);\n                    }\n                });\n\n                if (workers <= q.concurrency - q.buffer) {\n                    q.unsaturated();\n                }\n\n                if (q.idle()) {\n                    q.drain();\n                }\n                q.process();\n            });\n        }\n\n        var workers = 0;\n        var workersList = [];\n        var q = {\n            _tasks: new DLL(),\n            concurrency: concurrency,\n            payload: payload,\n            saturated: noop,\n            unsaturated: noop,\n            buffer: concurrency / 4,\n            empty: noop,\n            drain: noop,\n            error: noop,\n            started: false,\n            paused: false,\n            push: function (data, callback) {\n                _insert(data, false, callback);\n            },\n            kill: function () {\n                q.drain = noop;\n                q._tasks.empty();\n            },\n            unshift: function (data, callback) {\n                _insert(data, true, callback);\n            },\n            process: function () {\n                while (!q.paused && workers < q.concurrency && q._tasks.length) {\n                    var tasks = [],\n                        data = [];\n                    var l = q._tasks.length;\n                    if (q.payload) l = Math.min(l, q.payload);\n                    for (var i = 0; i < l; i++) {\n                        var node = q._tasks.shift();\n                        tasks.push(node);\n                        data.push(node.data);\n                    }\n\n                    if (q._tasks.length === 0) {\n                        q.empty();\n                    }\n                    workers += 1;\n                    workersList.push(tasks[0]);\n\n                    if (workers === q.concurrency) {\n                        q.saturated();\n                    }\n\n                    var cb = onlyOnce(_next(tasks));\n                    worker(data, cb);\n                }\n            },\n            length: function () {\n                return q._tasks.length;\n            },\n            running: function () {\n                return workers;\n            },\n            workersList: function () {\n                return workersList;\n            },\n            idle: function () {\n                return q._tasks.length + workers === 0;\n            },\n            pause: function () {\n                q.paused = true;\n            },\n            resume: function () {\n                if (q.paused === false) {\n                    return;\n                }\n                q.paused = false;\n                var resumeCount = Math.min(q.concurrency, q._tasks.length);\n                // Need to call q.process once per concurrent\n                // worker to preserve full concurrency after pause\n                for (var w = 1; w <= resumeCount; w++) {\n                    setImmediate$1(q.process);\n                }\n            }\n        };\n        return q;\n    }\n\n    /**\n     * A cargo of tasks for the worker function to complete. Cargo inherits all of\n     * the same methods and event callbacks as [`queue`]{@link module:ControlFlow.queue}.\n     * @typedef {Object} CargoObject\n     * @memberOf module:ControlFlow\n     * @property {Function} length - A function returning the number of items\n     * waiting to be processed. Invoke like `cargo.length()`.\n     * @property {number} payload - An `integer` for determining how many tasks\n     * should be process per round. This property can be changed after a `cargo` is\n     * created to alter the payload on-the-fly.\n     * @property {Function} push - Adds `task` to the `queue`. The callback is\n     * called once the `worker` has finished processing the task. Instead of a\n     * single task, an array of `tasks` can be submitted. The respective callback is\n     * used for every task in the list. Invoke like `cargo.push(task, [callback])`.\n     * @property {Function} saturated - A callback that is called when the\n     * `queue.length()` hits the concurrency and further tasks will be queued.\n     * @property {Function} empty - A callback that is called when the last item\n     * from the `queue` is given to a `worker`.\n     * @property {Function} drain - A callback that is called when the last item\n     * from the `queue` has returned from the `worker`.\n     * @property {Function} idle - a function returning false if there are items\n     * waiting or being processed, or true if not. Invoke like `cargo.idle()`.\n     * @property {Function} pause - a function that pauses the processing of tasks\n     * until `resume()` is called. Invoke like `cargo.pause()`.\n     * @property {Function} resume - a function that resumes the processing of\n     * queued tasks when the queue is paused. Invoke like `cargo.resume()`.\n     * @property {Function} kill - a function that removes the `drain` callback and\n     * empties remaining tasks from the queue forcing it to go idle. Invoke like `cargo.kill()`.\n     */\n\n    /**\n     * Creates a `cargo` object with the specified payload. Tasks added to the\n     * cargo will be processed altogether (up to the `payload` limit). If the\n     * `worker` is in progress, the task is queued until it becomes available. Once\n     * the `worker` has completed some tasks, each callback of those tasks is\n     * called. Check out [these](https://camo.githubusercontent.com/6bbd36f4cf5b35a0f11a96dcd2e97711ffc2fb37/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130382f62626330636662302d356632392d313165322d393734662d3333393763363464633835382e676966) [animations](https://camo.githubusercontent.com/f4810e00e1c5f5f8addbe3e9f49064fd5d102699/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130312f38346339323036362d356632392d313165322d383134662d3964336430323431336266642e676966)\n     * for how `cargo` and `queue` work.\n     *\n     * While [`queue`]{@link module:ControlFlow.queue} passes only one task to one of a group of workers\n     * at a time, cargo passes an array of tasks to a single worker, repeating\n     * when the worker is finished.\n     *\n     * @name cargo\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @see [async.queue]{@link module:ControlFlow.queue}\n     * @category Control Flow\n     * @param {Function} worker - An asynchronous function for processing an array\n     * of queued tasks, which must call its `callback(err)` argument when finished,\n     * with an optional `err` argument. Invoked with `(tasks, callback)`.\n     * @param {number} [payload=Infinity] - An optional `integer` for determining\n     * how many tasks should be processed per round; if omitted, the default is\n     * unlimited.\n     * @returns {module:ControlFlow.CargoObject} A cargo object to manage the tasks. Callbacks can\n     * attached as certain properties to listen for specific events during the\n     * lifecycle of the cargo and inner queue.\n     * @example\n     *\n     * // create a cargo object with payload 2\n     * var cargo = async.cargo(function(tasks, callback) {\n     *     for (var i=0; i<tasks.length; i++) {\n     *         console.log('hello ' + tasks[i].name);\n     *     }\n     *     callback();\n     * }, 2);\n     *\n     * // add some items\n     * cargo.push({name: 'foo'}, function(err) {\n     *     console.log('finished processing foo');\n     * });\n     * cargo.push({name: 'bar'}, function(err) {\n     *     console.log('finished processing bar');\n     * });\n     * cargo.push({name: 'baz'}, function(err) {\n     *     console.log('finished processing baz');\n     * });\n     */\n    function cargo(worker, payload) {\n      return queue(worker, 1, payload);\n    }\n\n    /**\n     * The same as [`eachOf`]{@link module:Collections.eachOf} but runs only a single async operation at a time.\n     *\n     * @name eachOfSeries\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.eachOf]{@link module:Collections.eachOf}\n     * @alias forEachOfSeries\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A function to apply to each item in `coll`. The\n     * `key` is the item's key, or index in the case of an array. The iteratee is\n     * passed a `callback(err)` which must be called once it has completed. If no\n     * error has occurred, the callback should be run without arguments or with an\n     * explicit `null` argument. Invoked with (item, key, callback).\n     * @param {Function} [callback] - A callback which is called when all `iteratee`\n     * functions have finished, or an error occurs. Invoked with (err).\n     */\n    var eachOfSeries = doLimit(eachOfLimit, 1);\n\n    /**\n     * Reduces `coll` into a single value using an async `iteratee` to return each\n     * successive step. `memo` is the initial state of the reduction. This function\n     * only operates in series.\n     *\n     * For performance reasons, it may make sense to split a call to this function\n     * into a parallel map, and then use the normal `Array.prototype.reduce` on the\n     * results. This function is for situations where each step in the reduction\n     * needs to be async; if you can get the data before reducing it, then it's\n     * probably a good idea to do so.\n     *\n     * @name reduce\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @alias inject\n     * @alias foldl\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {*} memo - The initial state of the reduction.\n     * @param {Function} iteratee - A function applied to each item in the\n     * array to produce the next step in the reduction. The `iteratee` is passed a\n     * `callback(err, reduction)` which accepts an optional error as its first\n     * argument, and the state of the reduction as the second. If an error is\n     * passed to the callback, the reduction is stopped and the main `callback` is\n     * immediately called with the error. Invoked with (memo, item, callback).\n     * @param {Function} [callback] - A callback which is called after all the\n     * `iteratee` functions have finished. Result is the reduced value. Invoked with\n     * (err, result).\n     * @example\n     *\n     * async.reduce([1,2,3], 0, function(memo, item, callback) {\n     *     // pointless async:\n     *     process.nextTick(function() {\n     *         callback(null, memo + item)\n     *     });\n     * }, function(err, result) {\n     *     // result is now equal to the last value of memo, which is 6\n     * });\n     */\n    function reduce(coll, memo, iteratee, callback) {\n        callback = once(callback || noop);\n        eachOfSeries(coll, function (x, i, callback) {\n            iteratee(memo, x, function (err, v) {\n                memo = v;\n                callback(err);\n            });\n        }, function (err) {\n            callback(err, memo);\n        });\n    }\n\n    /**\n     * Version of the compose function that is more natural to read. Each function\n     * consumes the return value of the previous function. It is the equivalent of\n     * [compose]{@link module:ControlFlow.compose} with the arguments reversed.\n     *\n     * Each function is executed with the `this` binding of the composed function.\n     *\n     * @name seq\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @see [async.compose]{@link module:ControlFlow.compose}\n     * @category Control Flow\n     * @param {...Function} functions - the asynchronous functions to compose\n     * @returns {Function} a function that composes the `functions` in order\n     * @example\n     *\n     * // Requires lodash (or underscore), express3 and dresende's orm2.\n     * // Part of an app, that fetches cats of the logged user.\n     * // This example uses `seq` function to avoid overnesting and error\n     * // handling clutter.\n     * app.get('/cats', function(request, response) {\n     *     var User = request.models.User;\n     *     async.seq(\n     *         _.bind(User.get, User),  // 'User.get' has signature (id, callback(err, data))\n     *         function(user, fn) {\n     *             user.getCats(fn);      // 'getCats' has signature (callback(err, data))\n     *         }\n     *     )(req.session.user_id, function (err, cats) {\n     *         if (err) {\n     *             console.error(err);\n     *             response.json({ status: 'error', message: err.message });\n     *         } else {\n     *             response.json({ status: 'ok', message: 'Cats found', data: cats });\n     *         }\n     *     });\n     * });\n     */\n    var seq = rest(function seq(functions) {\n        return rest(function (args) {\n            var that = this;\n\n            var cb = args[args.length - 1];\n            if (typeof cb == 'function') {\n                args.pop();\n            } else {\n                cb = noop;\n            }\n\n            reduce(functions, args, function (newargs, fn, cb) {\n                fn.apply(that, newargs.concat([rest(function (err, nextargs) {\n                    cb(err, nextargs);\n                })]));\n            }, function (err, results) {\n                cb.apply(that, [err].concat(results));\n            });\n        });\n    });\n\n    /**\n     * Creates a function which is a composition of the passed asynchronous\n     * functions. Each function consumes the return value of the function that\n     * follows. Composing functions `f()`, `g()`, and `h()` would produce the result\n     * of `f(g(h()))`, only this version uses callbacks to obtain the return values.\n     *\n     * Each function is executed with the `this` binding of the composed function.\n     *\n     * @name compose\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @category Control Flow\n     * @param {...Function} functions - the asynchronous functions to compose\n     * @returns {Function} an asynchronous function that is the composed\n     * asynchronous `functions`\n     * @example\n     *\n     * function add1(n, callback) {\n     *     setTimeout(function () {\n     *         callback(null, n + 1);\n     *     }, 10);\n     * }\n     *\n     * function mul3(n, callback) {\n     *     setTimeout(function () {\n     *         callback(null, n * 3);\n     *     }, 10);\n     * }\n     *\n     * var add1mul3 = async.compose(mul3, add1);\n     * add1mul3(4, function (err, result) {\n     *     // result now equals 15\n     * });\n     */\n    var compose = rest(function (args) {\n      return seq.apply(null, args.reverse());\n    });\n\n    function concat$1(eachfn, arr, fn, callback) {\n        var result = [];\n        eachfn(arr, function (x, index, cb) {\n            fn(x, function (err, y) {\n                result = result.concat(y || []);\n                cb(err);\n            });\n        }, function (err) {\n            callback(err, result);\n        });\n    }\n\n    /**\n     * Applies `iteratee` to each item in `coll`, concatenating the results. Returns\n     * the concatenated list. The `iteratee`s are called in parallel, and the\n     * results are concatenated as they return. There is no guarantee that the\n     * results array will be returned in the original order of `coll` passed to the\n     * `iteratee` function.\n     *\n     * @name concat\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A function to apply to each item in `coll`.\n     * The iteratee is passed a `callback(err, results)` which must be called once\n     * it has completed with an error (which can be `null`) and an array of results.\n     * Invoked with (item, callback).\n     * @param {Function} [callback(err)] - A callback which is called after all the\n     * `iteratee` functions have finished, or an error occurs. Results is an array\n     * containing the concatenated results of the `iteratee` function. Invoked with\n     * (err, results).\n     * @example\n     *\n     * async.concat(['dir1','dir2','dir3'], fs.readdir, function(err, files) {\n     *     // files is now a list of filenames that exist in the 3 directories\n     * });\n     */\n    var concat = doParallel(concat$1);\n\n    function doSeries(fn) {\n        return function (obj, iteratee, callback) {\n            return fn(eachOfSeries, obj, iteratee, callback);\n        };\n    }\n\n    /**\n     * The same as [`concat`]{@link module:Collections.concat} but runs only a single async operation at a time.\n     *\n     * @name concatSeries\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.concat]{@link module:Collections.concat}\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A function to apply to each item in `coll`.\n     * The iteratee is passed a `callback(err, results)` which must be called once\n     * it has completed with an error (which can be `null`) and an array of results.\n     * Invoked with (item, callback).\n     * @param {Function} [callback(err)] - A callback which is called after all the\n     * `iteratee` functions have finished, or an error occurs. Results is an array\n     * containing the concatenated results of the `iteratee` function. Invoked with\n     * (err, results).\n     */\n    var concatSeries = doSeries(concat$1);\n\n    /**\n     * Returns a function that when called, calls-back with the values provided.\n     * Useful as the first function in a [`waterfall`]{@link module:ControlFlow.waterfall}, or for plugging values in to\n     * [`auto`]{@link module:ControlFlow.auto}.\n     *\n     * @name constant\n     * @static\n     * @memberOf module:Utils\n     * @method\n     * @category Util\n     * @param {...*} arguments... - Any number of arguments to automatically invoke\n     * callback with.\n     * @returns {Function} Returns a function that when invoked, automatically\n     * invokes the callback with the previous given arguments.\n     * @example\n     *\n     * async.waterfall([\n     *     async.constant(42),\n     *     function (value, next) {\n     *         // value === 42\n     *     },\n     *     //...\n     * ], callback);\n     *\n     * async.waterfall([\n     *     async.constant(filename, \"utf8\"),\n     *     fs.readFile,\n     *     function (fileData, next) {\n     *         //...\n     *     }\n     *     //...\n     * ], callback);\n     *\n     * async.auto({\n     *     hostname: async.constant(\"https://server.net/\"),\n     *     port: findFreePort,\n     *     launchServer: [\"hostname\", \"port\", function (options, cb) {\n     *         startServer(options, cb);\n     *     }],\n     *     //...\n     * }, callback);\n     */\n    var constant = rest(function (values) {\n        var args = [null].concat(values);\n        return initialParams(function (ignoredArgs, callback) {\n            return callback.apply(this, args);\n        });\n    });\n\n    /**\n     * This method returns the first argument given to it.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {*} value Any value.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * var object = { 'user': 'fred' };\n     *\n     * console.log(_.identity(object) === object);\n     * // => true\n     */\n    function identity(value) {\n      return value;\n    }\n\n    function _createTester(eachfn, check, getResult) {\n        return function (arr, limit, iteratee, cb) {\n            function done(err) {\n                if (cb) {\n                    if (err) {\n                        cb(err);\n                    } else {\n                        cb(null, getResult(false));\n                    }\n                }\n            }\n            function wrappedIteratee(x, _, callback) {\n                if (!cb) return callback();\n                iteratee(x, function (err, v) {\n                    if (cb) {\n                        if (err) {\n                            cb(err);\n                            cb = iteratee = false;\n                        } else if (check(v)) {\n                            cb(null, getResult(true, x));\n                            cb = iteratee = false;\n                        }\n                    }\n                    callback();\n                });\n            }\n            if (arguments.length > 3) {\n                cb = cb || noop;\n                eachfn(arr, limit, wrappedIteratee, done);\n            } else {\n                cb = iteratee;\n                cb = cb || noop;\n                iteratee = limit;\n                eachfn(arr, wrappedIteratee, done);\n            }\n        };\n    }\n\n    function _findGetResult(v, x) {\n        return x;\n    }\n\n    /**\n     * Returns the first value in `coll` that passes an async truth test. The\n     * `iteratee` is applied in parallel, meaning the first iteratee to return\n     * `true` will fire the detect `callback` with that result. That means the\n     * result might not be the first item in the original `coll` (in terms of order)\n     * that passes the test.\n\n     * If order within the original `coll` is important, then look at\n     * [`detectSeries`]{@link module:Collections.detectSeries}.\n     *\n     * @name detect\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @alias find\n     * @category Collections\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n     * The iteratee is passed a `callback(err, truthValue)` which must be called\n     * with a boolean argument once it has completed. Invoked with (item, callback).\n     * @param {Function} [callback] - A callback which is called as soon as any\n     * iteratee returns `true`, or after all the `iteratee` functions have finished.\n     * Result will be the first item in the array that passes the truth test\n     * (iteratee) or the value `undefined` if none passed. Invoked with\n     * (err, result).\n     * @example\n     *\n     * async.detect(['file1','file2','file3'], function(filePath, callback) {\n     *     fs.access(filePath, function(err) {\n     *         callback(null, !err)\n     *     });\n     * }, function(err, result) {\n     *     // result now equals the first file in the list that exists\n     * });\n     */\n    var detect = _createTester(eachOf, identity, _findGetResult);\n\n    /**\n     * The same as [`detect`]{@link module:Collections.detect} but runs a maximum of `limit` async operations at a\n     * time.\n     *\n     * @name detectLimit\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.detect]{@link module:Collections.detect}\n     * @alias findLimit\n     * @category Collections\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {number} limit - The maximum number of async operations at a time.\n     * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n     * The iteratee is passed a `callback(err, truthValue)` which must be called\n     * with a boolean argument once it has completed. Invoked with (item, callback).\n     * @param {Function} [callback] - A callback which is called as soon as any\n     * iteratee returns `true`, or after all the `iteratee` functions have finished.\n     * Result will be the first item in the array that passes the truth test\n     * (iteratee) or the value `undefined` if none passed. Invoked with\n     * (err, result).\n     */\n    var detectLimit = _createTester(eachOfLimit, identity, _findGetResult);\n\n    /**\n     * The same as [`detect`]{@link module:Collections.detect} but runs only a single async operation at a time.\n     *\n     * @name detectSeries\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.detect]{@link module:Collections.detect}\n     * @alias findSeries\n     * @category Collections\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n     * The iteratee is passed a `callback(err, truthValue)` which must be called\n     * with a boolean argument once it has completed. Invoked with (item, callback).\n     * @param {Function} [callback] - A callback which is called as soon as any\n     * iteratee returns `true`, or after all the `iteratee` functions have finished.\n     * Result will be the first item in the array that passes the truth test\n     * (iteratee) or the value `undefined` if none passed. Invoked with\n     * (err, result).\n     */\n    var detectSeries = _createTester(eachOfSeries, identity, _findGetResult);\n\n    function consoleFunc(name) {\n        return rest(function (fn, args) {\n            fn.apply(null, args.concat([rest(function (err, args) {\n                if (typeof console === 'object') {\n                    if (err) {\n                        if (console.error) {\n                            console.error(err);\n                        }\n                    } else if (console[name]) {\n                        arrayEach(args, function (x) {\n                            console[name](x);\n                        });\n                    }\n                }\n            })]));\n        });\n    }\n\n    /**\n     * Logs the result of an `async` function to the `console` using `console.dir`\n     * to display the properties of the resulting object. Only works in Node.js or\n     * in browsers that support `console.dir` and `console.error` (such as FF and\n     * Chrome). If multiple arguments are returned from the async function,\n     * `console.dir` is called on each argument in order.\n     *\n     * @name dir\n     * @static\n     * @memberOf module:Utils\n     * @method\n     * @category Util\n     * @param {Function} function - The function you want to eventually apply all\n     * arguments to.\n     * @param {...*} arguments... - Any number of arguments to apply to the function.\n     * @example\n     *\n     * // in a module\n     * var hello = function(name, callback) {\n     *     setTimeout(function() {\n     *         callback(null, {hello: name});\n     *     }, 1000);\n     * };\n     *\n     * // in the node repl\n     * node> async.dir(hello, 'world');\n     * {hello: 'world'}\n     */\n    var dir = consoleFunc('dir');\n\n    /**\n     * The post-check version of [`during`]{@link module:ControlFlow.during}. To reflect the difference in\n     * the order of operations, the arguments `test` and `fn` are switched.\n     *\n     * Also a version of [`doWhilst`]{@link module:ControlFlow.doWhilst} with asynchronous `test` function.\n     * @name doDuring\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @see [async.during]{@link module:ControlFlow.during}\n     * @category Control Flow\n     * @param {Function} fn - A function which is called each time `test` passes.\n     * The function is passed a `callback(err)`, which must be called once it has\n     * completed with an optional `err` argument. Invoked with (callback).\n     * @param {Function} test - asynchronous truth test to perform before each\n     * execution of `fn`. Invoked with (...args, callback), where `...args` are the\n     * non-error args from the previous callback of `fn`.\n     * @param {Function} [callback] - A callback which is called after the test\n     * function has failed and repeated execution of `fn` has stopped. `callback`\n     * will be passed an error if one occured, otherwise `null`.\n     */\n    function doDuring(fn, test, callback) {\n        callback = onlyOnce(callback || noop);\n\n        var next = rest(function (err, args) {\n            if (err) return callback(err);\n            args.push(check);\n            test.apply(this, args);\n        });\n\n        function check(err, truth) {\n            if (err) return callback(err);\n            if (!truth) return callback(null);\n            fn(next);\n        }\n\n        check(null, true);\n    }\n\n    /**\n     * The post-check version of [`whilst`]{@link module:ControlFlow.whilst}. To reflect the difference in\n     * the order of operations, the arguments `test` and `iteratee` are switched.\n     *\n     * `doWhilst` is to `whilst` as `do while` is to `while` in plain JavaScript.\n     *\n     * @name doWhilst\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @see [async.whilst]{@link module:ControlFlow.whilst}\n     * @category Control Flow\n     * @param {Function} iteratee - A function which is called each time `test`\n     * passes. The function is passed a `callback(err)`, which must be called once\n     * it has completed with an optional `err` argument. Invoked with (callback).\n     * @param {Function} test - synchronous truth test to perform after each\n     * execution of `iteratee`. Invoked with Invoked with the non-error callback\n     * results of `iteratee`.\n     * @param {Function} [callback] - A callback which is called after the test\n     * function has failed and repeated execution of `iteratee` has stopped.\n     * `callback` will be passed an error and any arguments passed to the final\n     * `iteratee`'s callback. Invoked with (err, [results]);\n     */\n    function doWhilst(iteratee, test, callback) {\n        callback = onlyOnce(callback || noop);\n        var next = rest(function (err, args) {\n            if (err) return callback(err);\n            if (test.apply(this, args)) return iteratee(next);\n            callback.apply(null, [null].concat(args));\n        });\n        iteratee(next);\n    }\n\n    /**\n     * Like ['doWhilst']{@link module:ControlFlow.doWhilst}, except the `test` is inverted. Note the\n     * argument ordering differs from `until`.\n     *\n     * @name doUntil\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @see [async.doWhilst]{@link module:ControlFlow.doWhilst}\n     * @category Control Flow\n     * @param {Function} fn - A function which is called each time `test` fails.\n     * The function is passed a `callback(err)`, which must be called once it has\n     * completed with an optional `err` argument. Invoked with (callback).\n     * @param {Function} test - synchronous truth test to perform after each\n     * execution of `fn`. Invoked with the non-error callback results of `fn`.\n     * @param {Function} [callback] - A callback which is called after the test\n     * function has passed and repeated execution of `fn` has stopped. `callback`\n     * will be passed an error and any arguments passed to the final `fn`'s\n     * callback. Invoked with (err, [results]);\n     */\n    function doUntil(fn, test, callback) {\n        doWhilst(fn, function () {\n            return !test.apply(this, arguments);\n        }, callback);\n    }\n\n    /**\n     * Like [`whilst`]{@link module:ControlFlow.whilst}, except the `test` is an asynchronous function that\n     * is passed a callback in the form of `function (err, truth)`. If error is\n     * passed to `test` or `fn`, the main callback is immediately called with the\n     * value of the error.\n     *\n     * @name during\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @see [async.whilst]{@link module:ControlFlow.whilst}\n     * @category Control Flow\n     * @param {Function} test - asynchronous truth test to perform before each\n     * execution of `fn`. Invoked with (callback).\n     * @param {Function} fn - A function which is called each time `test` passes.\n     * The function is passed a `callback(err)`, which must be called once it has\n     * completed with an optional `err` argument. Invoked with (callback).\n     * @param {Function} [callback] - A callback which is called after the test\n     * function has failed and repeated execution of `fn` has stopped. `callback`\n     * will be passed an error, if one occured, otherwise `null`.\n     * @example\n     *\n     * var count = 0;\n     *\n     * async.during(\n     *     function (callback) {\n     *         return callback(null, count < 5);\n     *     },\n     *     function (callback) {\n     *         count++;\n     *         setTimeout(callback, 1000);\n     *     },\n     *     function (err) {\n     *         // 5 seconds have passed\n     *     }\n     * );\n     */\n    function during(test, fn, callback) {\n        callback = onlyOnce(callback || noop);\n\n        function next(err) {\n            if (err) return callback(err);\n            test(check);\n        }\n\n        function check(err, truth) {\n            if (err) return callback(err);\n            if (!truth) return callback(null);\n            fn(next);\n        }\n\n        test(check);\n    }\n\n    function _withoutIndex(iteratee) {\n        return function (value, index, callback) {\n            return iteratee(value, callback);\n        };\n    }\n\n    /**\n     * Applies the function `iteratee` to each item in `coll`, in parallel.\n     * The `iteratee` is called with an item from the list, and a callback for when\n     * it has finished. If the `iteratee` passes an error to its `callback`, the\n     * main `callback` (for the `each` function) is immediately called with the\n     * error.\n     *\n     * Note, that since this function applies `iteratee` to each item in parallel,\n     * there is no guarantee that the iteratee functions will complete in order.\n     *\n     * @name each\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @alias forEach\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A function to apply to each item\n     * in `coll`. The iteratee is passed a `callback(err)` which must be called once\n     * it has completed. If no error has occurred, the `callback` should be run\n     * without arguments or with an explicit `null` argument. The array index is not\n     * passed to the iteratee. Invoked with (item, callback). If you need the index,\n     * use `eachOf`.\n     * @param {Function} [callback] - A callback which is called when all\n     * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n     * @example\n     *\n     * // assuming openFiles is an array of file names and saveFile is a function\n     * // to save the modified contents of that file:\n     *\n     * async.each(openFiles, saveFile, function(err){\n     *   // if any of the saves produced an error, err would equal that error\n     * });\n     *\n     * // assuming openFiles is an array of file names\n     * async.each(openFiles, function(file, callback) {\n     *\n     *     // Perform operation on file here.\n     *     console.log('Processing file ' + file);\n     *\n     *     if( file.length > 32 ) {\n     *       console.log('This file name is too long');\n     *       callback('File name too long');\n     *     } else {\n     *       // Do work to process file here\n     *       console.log('File processed');\n     *       callback();\n     *     }\n     * }, function(err) {\n     *     // if any of the file processing produced an error, err would equal that error\n     *     if( err ) {\n     *       // One of the iterations produced an error.\n     *       // All processing will now stop.\n     *       console.log('A file failed to process');\n     *     } else {\n     *       console.log('All files have been processed successfully');\n     *     }\n     * });\n     */\n    function eachLimit(coll, iteratee, callback) {\n      eachOf(coll, _withoutIndex(iteratee), callback);\n    }\n\n    /**\n     * The same as [`each`]{@link module:Collections.each} but runs a maximum of `limit` async operations at a time.\n     *\n     * @name eachLimit\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.each]{@link module:Collections.each}\n     * @alias forEachLimit\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A colleciton to iterate over.\n     * @param {number} limit - The maximum number of async operations at a time.\n     * @param {Function} iteratee - A function to apply to each item in `coll`. The\n     * iteratee is passed a `callback(err)` which must be called once it has\n     * completed. If no error has occurred, the `callback` should be run without\n     * arguments or with an explicit `null` argument. The array index is not passed\n     * to the iteratee. Invoked with (item, callback). If you need the index, use\n     * `eachOfLimit`.\n     * @param {Function} [callback] - A callback which is called when all\n     * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n     */\n    function eachLimit$1(coll, limit, iteratee, callback) {\n      _eachOfLimit(limit)(coll, _withoutIndex(iteratee), callback);\n    }\n\n    /**\n     * The same as [`each`]{@link module:Collections.each} but runs only a single async operation at a time.\n     *\n     * @name eachSeries\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.each]{@link module:Collections.each}\n     * @alias forEachSeries\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A function to apply to each\n     * item in `coll`. The iteratee is passed a `callback(err)` which must be called\n     * once it has completed. If no error has occurred, the `callback` should be run\n     * without arguments or with an explicit `null` argument. The array index is\n     * not passed to the iteratee. Invoked with (item, callback). If you need the\n     * index, use `eachOfSeries`.\n     * @param {Function} [callback] - A callback which is called when all\n     * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n     */\n    var eachSeries = doLimit(eachLimit$1, 1);\n\n    /**\n     * Wrap an async function and ensure it calls its callback on a later tick of\n     * the event loop.  If the function already calls its callback on a next tick,\n     * no extra deferral is added. This is useful for preventing stack overflows\n     * (`RangeError: Maximum call stack size exceeded`) and generally keeping\n     * [Zalgo](http://blog.izs.me/post/59142742143/designing-apis-for-asynchrony)\n     * contained.\n     *\n     * @name ensureAsync\n     * @static\n     * @memberOf module:Utils\n     * @method\n     * @category Util\n     * @param {Function} fn - an async function, one that expects a node-style\n     * callback as its last argument.\n     * @returns {Function} Returns a wrapped function with the exact same call\n     * signature as the function passed in.\n     * @example\n     *\n     * function sometimesAsync(arg, callback) {\n     *     if (cache[arg]) {\n     *         return callback(null, cache[arg]); // this would be synchronous!!\n     *     } else {\n     *         doSomeIO(arg, callback); // this IO would be asynchronous\n     *     }\n     * }\n     *\n     * // this has a risk of stack overflows if many results are cached in a row\n     * async.mapSeries(args, sometimesAsync, done);\n     *\n     * // this will defer sometimesAsync's callback if necessary,\n     * // preventing stack overflows\n     * async.mapSeries(args, async.ensureAsync(sometimesAsync), done);\n     */\n    function ensureAsync(fn) {\n        return initialParams(function (args, callback) {\n            var sync = true;\n            args.push(function () {\n                var innerArgs = arguments;\n                if (sync) {\n                    setImmediate$1(function () {\n                        callback.apply(null, innerArgs);\n                    });\n                } else {\n                    callback.apply(null, innerArgs);\n                }\n            });\n            fn.apply(this, args);\n            sync = false;\n        });\n    }\n\n    function notId(v) {\n        return !v;\n    }\n\n    /**\n     * Returns `true` if every element in `coll` satisfies an async test. If any\n     * iteratee call returns `false`, the main `callback` is immediately called.\n     *\n     * @name every\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @alias all\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A truth test to apply to each item in the\n     * collection in parallel. The iteratee is passed a `callback(err, truthValue)`\n     * which must be called with a  boolean argument once it has completed. Invoked\n     * with (item, callback).\n     * @param {Function} [callback] - A callback which is called after all the\n     * `iteratee` functions have finished. Result will be either `true` or `false`\n     * depending on the values of the async tests. Invoked with (err, result).\n     * @example\n     *\n     * async.every(['file1','file2','file3'], function(filePath, callback) {\n     *     fs.access(filePath, function(err) {\n     *         callback(null, !err)\n     *     });\n     * }, function(err, result) {\n     *     // if result is true then every file exists\n     * });\n     */\n    var every = _createTester(eachOf, notId, notId);\n\n    /**\n     * The same as [`every`]{@link module:Collections.every} but runs a maximum of `limit` async operations at a time.\n     *\n     * @name everyLimit\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.every]{@link module:Collections.every}\n     * @alias allLimit\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {number} limit - The maximum number of async operations at a time.\n     * @param {Function} iteratee - A truth test to apply to each item in the\n     * collection in parallel. The iteratee is passed a `callback(err, truthValue)`\n     * which must be called with a  boolean argument once it has completed. Invoked\n     * with (item, callback).\n     * @param {Function} [callback] - A callback which is called after all the\n     * `iteratee` functions have finished. Result will be either `true` or `false`\n     * depending on the values of the async tests. Invoked with (err, result).\n     */\n    var everyLimit = _createTester(eachOfLimit, notId, notId);\n\n    /**\n     * The same as [`every`]{@link module:Collections.every} but runs only a single async operation at a time.\n     *\n     * @name everySeries\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.every]{@link module:Collections.every}\n     * @alias allSeries\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A truth test to apply to each item in the\n     * collection in parallel. The iteratee is passed a `callback(err, truthValue)`\n     * which must be called with a  boolean argument once it has completed. Invoked\n     * with (item, callback).\n     * @param {Function} [callback] - A callback which is called after all the\n     * `iteratee` functions have finished. Result will be either `true` or `false`\n     * depending on the values of the async tests. Invoked with (err, result).\n     */\n    var everySeries = doLimit(everyLimit, 1);\n\n    function _filter(eachfn, arr, iteratee, callback) {\n        callback = once(callback || noop);\n        var results = [];\n        eachfn(arr, function (x, index, callback) {\n            iteratee(x, function (err, v) {\n                if (err) {\n                    callback(err);\n                } else {\n                    if (v) {\n                        results.push({ index: index, value: x });\n                    }\n                    callback();\n                }\n            });\n        }, function (err) {\n            if (err) {\n                callback(err);\n            } else {\n                callback(null, arrayMap(results.sort(function (a, b) {\n                    return a.index - b.index;\n                }), baseProperty('value')));\n            }\n        });\n    }\n\n    /**\n     * Returns a new array of all the values in `coll` which pass an async truth\n     * test. This operation is performed in parallel, but the results array will be\n     * in the same order as the original.\n     *\n     * @name filter\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @alias select\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n     * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n     * with a boolean argument once it has completed. Invoked with (item, callback).\n     * @param {Function} [callback] - A callback which is called after all the\n     * `iteratee` functions have finished. Invoked with (err, results).\n     * @example\n     *\n     * async.filter(['file1','file2','file3'], function(filePath, callback) {\n     *     fs.access(filePath, function(err) {\n     *         callback(null, !err)\n     *     });\n     * }, function(err, results) {\n     *     // results now equals an array of the existing files\n     * });\n     */\n    var filter = doParallel(_filter);\n\n    /**\n     * The same as [`filter`]{@link module:Collections.filter} but runs a maximum of `limit` async operations at a\n     * time.\n     *\n     * @name filterLimit\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.filter]{@link module:Collections.filter}\n     * @alias selectLimit\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {number} limit - The maximum number of async operations at a time.\n     * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n     * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n     * with a boolean argument once it has completed. Invoked with (item, callback).\n     * @param {Function} [callback] - A callback which is called after all the\n     * `iteratee` functions have finished. Invoked with (err, results).\n     */\n    var filterLimit = doParallelLimit(_filter);\n\n    /**\n     * The same as [`filter`]{@link module:Collections.filter} but runs only a single async operation at a time.\n     *\n     * @name filterSeries\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.filter]{@link module:Collections.filter}\n     * @alias selectSeries\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n     * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n     * with a boolean argument once it has completed. Invoked with (item, callback).\n     * @param {Function} [callback] - A callback which is called after all the\n     * `iteratee` functions have finished. Invoked with (err, results)\n     */\n    var filterSeries = doLimit(filterLimit, 1);\n\n    /**\n     * Calls the asynchronous function `fn` with a callback parameter that allows it\n     * to call itself again, in series, indefinitely.\n\n     * If an error is passed to the\n     * callback then `errback` is called with the error, and execution stops,\n     * otherwise it will never be called.\n     *\n     * @name forever\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @category Control Flow\n     * @param {Function} fn - a function to call repeatedly. Invoked with (next).\n     * @param {Function} [errback] - when `fn` passes an error to it's callback,\n     * this function will be called, and execution stops. Invoked with (err).\n     * @example\n     *\n     * async.forever(\n     *     function(next) {\n     *         // next is suitable for passing to things that need a callback(err [, whatever]);\n     *         // it will result in this function being called again.\n     *     },\n     *     function(err) {\n     *         // if next is called with a value in its first parameter, it will appear\n     *         // in here as 'err', and execution will stop.\n     *     }\n     * );\n     */\n    function forever(fn, errback) {\n        var done = onlyOnce(errback || noop);\n        var task = ensureAsync(fn);\n\n        function next(err) {\n            if (err) return done(err);\n            task(next);\n        }\n        next();\n    }\n\n    /**\n     * Logs the result of an `async` function to the `console`. Only works in\n     * Node.js or in browsers that support `console.log` and `console.error` (such\n     * as FF and Chrome). If multiple arguments are returned from the async\n     * function, `console.log` is called on each argument in order.\n     *\n     * @name log\n     * @static\n     * @memberOf module:Utils\n     * @method\n     * @category Util\n     * @param {Function} function - The function you want to eventually apply all\n     * arguments to.\n     * @param {...*} arguments... - Any number of arguments to apply to the function.\n     * @example\n     *\n     * // in a module\n     * var hello = function(name, callback) {\n     *     setTimeout(function() {\n     *         callback(null, 'hello ' + name);\n     *     }, 1000);\n     * };\n     *\n     * // in the node repl\n     * node> async.log(hello, 'world');\n     * 'hello world'\n     */\n    var log = consoleFunc('log');\n\n    /**\n     * The same as [`mapValues`]{@link module:Collections.mapValues} but runs a maximum of `limit` async operations at a\n     * time.\n     *\n     * @name mapValuesLimit\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.mapValues]{@link module:Collections.mapValues}\n     * @category Collection\n     * @param {Object} obj - A collection to iterate over.\n     * @param {number} limit - The maximum number of async operations at a time.\n     * @param {Function} iteratee - A function to apply to each value in `obj`.\n     * The iteratee is passed a `callback(err, transformed)` which must be called\n     * once it has completed with an error (which can be `null`) and a\n     * transformed value. Invoked with (value, key, callback).\n     * @param {Function} [callback] - A callback which is called when all `iteratee`\n     * functions have finished, or an error occurs. Result is an object of the\n     * transformed values from the `obj`. Invoked with (err, result).\n     */\n    function mapValuesLimit(obj, limit, iteratee, callback) {\n        callback = once(callback || noop);\n        var newObj = {};\n        eachOfLimit(obj, limit, function (val, key, next) {\n            iteratee(val, key, function (err, result) {\n                if (err) return next(err);\n                newObj[key] = result;\n                next();\n            });\n        }, function (err) {\n            callback(err, newObj);\n        });\n    }\n\n    /**\n     * A relative of [`map`]{@link module:Collections.map}, designed for use with objects.\n     *\n     * Produces a new Object by mapping each value of `obj` through the `iteratee`\n     * function. The `iteratee` is called each `value` and `key` from `obj` and a\n     * callback for when it has finished processing. Each of these callbacks takes\n     * two arguments: an `error`, and the transformed item from `obj`. If `iteratee`\n     * passes an error to its callback, the main `callback` (for the `mapValues`\n     * function) is immediately called with the error.\n     *\n     * Note, the order of the keys in the result is not guaranteed.  The keys will\n     * be roughly in the order they complete, (but this is very engine-specific)\n     *\n     * @name mapValues\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @category Collection\n     * @param {Object} obj - A collection to iterate over.\n     * @param {Function} iteratee - A function to apply to each value and key in\n     * `coll`. The iteratee is passed a `callback(err, transformed)` which must be\n     * called once it has completed with an error (which can be `null`) and a\n     * transformed value. Invoked with (value, key, callback).\n     * @param {Function} [callback] - A callback which is called when all `iteratee`\n     * functions have finished, or an error occurs. Results is an array of the\n     * transformed items from the `obj`. Invoked with (err, result).\n     * @example\n     *\n     * async.mapValues({\n     *     f1: 'file1',\n     *     f2: 'file2',\n     *     f3: 'file3'\n     * }, function (file, key, callback) {\n     *   fs.stat(file, callback);\n     * }, function(err, result) {\n     *     // results is now a map of stats for each file, e.g.\n     *     // {\n     *     //     f1: [stats for file1],\n     *     //     f2: [stats for file2],\n     *     //     f3: [stats for file3]\n     *     // }\n     * });\n     */\n\n    var mapValues = doLimit(mapValuesLimit, Infinity);\n\n    /**\n     * The same as [`mapValues`]{@link module:Collections.mapValues} but runs only a single async operation at a time.\n     *\n     * @name mapValuesSeries\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.mapValues]{@link module:Collections.mapValues}\n     * @category Collection\n     * @param {Object} obj - A collection to iterate over.\n     * @param {Function} iteratee - A function to apply to each value in `obj`.\n     * The iteratee is passed a `callback(err, transformed)` which must be called\n     * once it has completed with an error (which can be `null`) and a\n     * transformed value. Invoked with (value, key, callback).\n     * @param {Function} [callback] - A callback which is called when all `iteratee`\n     * functions have finished, or an error occurs. Result is an object of the\n     * transformed values from the `obj`. Invoked with (err, result).\n     */\n    var mapValuesSeries = doLimit(mapValuesLimit, 1);\n\n    function has(obj, key) {\n        return key in obj;\n    }\n\n    /**\n     * Caches the results of an `async` function. When creating a hash to store\n     * function results against, the callback is omitted from the hash and an\n     * optional hash function can be used.\n     *\n     * If no hash function is specified, the first argument is used as a hash key,\n     * which may work reasonably if it is a string or a data type that converts to a\n     * distinct string. Note that objects and arrays will not behave reasonably.\n     * Neither will cases where the other arguments are significant. In such cases,\n     * specify your own hash function.\n     *\n     * The cache of results is exposed as the `memo` property of the function\n     * returned by `memoize`.\n     *\n     * @name memoize\n     * @static\n     * @memberOf module:Utils\n     * @method\n     * @category Util\n     * @param {Function} fn - The function to proxy and cache results from.\n     * @param {Function} hasher - An optional function for generating a custom hash\n     * for storing results. It has all the arguments applied to it apart from the\n     * callback, and must be synchronous.\n     * @returns {Function} a memoized version of `fn`\n     * @example\n     *\n     * var slow_fn = function(name, callback) {\n     *     // do something\n     *     callback(null, result);\n     * };\n     * var fn = async.memoize(slow_fn);\n     *\n     * // fn can now be used as if it were slow_fn\n     * fn('some name', function() {\n     *     // callback\n     * });\n     */\n    function memoize(fn, hasher) {\n        var memo = Object.create(null);\n        var queues = Object.create(null);\n        hasher = hasher || identity;\n        var memoized = initialParams(function memoized(args, callback) {\n            var key = hasher.apply(null, args);\n            if (has(memo, key)) {\n                setImmediate$1(function () {\n                    callback.apply(null, memo[key]);\n                });\n            } else if (has(queues, key)) {\n                queues[key].push(callback);\n            } else {\n                queues[key] = [callback];\n                fn.apply(null, args.concat([rest(function (args) {\n                    memo[key] = args;\n                    var q = queues[key];\n                    delete queues[key];\n                    for (var i = 0, l = q.length; i < l; i++) {\n                        q[i].apply(null, args);\n                    }\n                })]));\n            }\n        });\n        memoized.memo = memo;\n        memoized.unmemoized = fn;\n        return memoized;\n    }\n\n    /**\n     * Calls `callback` on a later loop around the event loop. In Node.js this just\n     * calls `setImmediate`.  In the browser it will use `setImmediate` if\n     * available, otherwise `setTimeout(callback, 0)`, which means other higher\n     * priority events may precede the execution of `callback`.\n     *\n     * This is used internally for browser-compatibility purposes.\n     *\n     * @name nextTick\n     * @static\n     * @memberOf module:Utils\n     * @method\n     * @alias setImmediate\n     * @category Util\n     * @param {Function} callback - The function to call on a later loop around\n     * the event loop. Invoked with (args...).\n     * @param {...*} args... - any number of additional arguments to pass to the\n     * callback on the next tick.\n     * @example\n     *\n     * var call_order = [];\n     * async.nextTick(function() {\n     *     call_order.push('two');\n     *     // call_order now equals ['one','two']\n     * });\n     * call_order.push('one');\n     *\n     * async.setImmediate(function (a, b, c) {\n     *     // a, b, and c equal 1, 2, and 3\n     * }, 1, 2, 3);\n     */\n    var _defer$1;\n\n    if (hasNextTick) {\n        _defer$1 = process.nextTick;\n    } else if (hasSetImmediate) {\n        _defer$1 = setImmediate;\n    } else {\n        _defer$1 = fallback;\n    }\n\n    var nextTick = wrap(_defer$1);\n\n    function _parallel(eachfn, tasks, callback) {\n        callback = callback || noop;\n        var results = isArrayLike(tasks) ? [] : {};\n\n        eachfn(tasks, function (task, key, callback) {\n            task(rest(function (err, args) {\n                if (args.length <= 1) {\n                    args = args[0];\n                }\n                results[key] = args;\n                callback(err);\n            }));\n        }, function (err) {\n            callback(err, results);\n        });\n    }\n\n    /**\n     * Run the `tasks` collection of functions in parallel, without waiting until\n     * the previous function has completed. If any of the functions pass an error to\n     * its callback, the main `callback` is immediately called with the value of the\n     * error. Once the `tasks` have completed, the results are passed to the final\n     * `callback` as an array.\n     *\n     * **Note:** `parallel` is about kicking-off I/O tasks in parallel, not about\n     * parallel execution of code.  If your tasks do not use any timers or perform\n     * any I/O, they will actually be executed in series.  Any synchronous setup\n     * sections for each task will happen one after the other.  JavaScript remains\n     * single-threaded.\n     *\n     * It is also possible to use an object instead of an array. Each property will\n     * be run as a function and the results will be passed to the final `callback`\n     * as an object instead of an array. This can be a more readable way of handling\n     * results from {@link async.parallel}.\n     *\n     * @name parallel\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @category Control Flow\n     * @param {Array|Iterable|Object} tasks - A collection containing functions to run.\n     * Each function is passed a `callback(err, result)` which it must call on\n     * completion with an error `err` (which can be `null`) and an optional `result`\n     * value.\n     * @param {Function} [callback] - An optional callback to run once all the\n     * functions have completed successfully. This function gets a results array\n     * (or object) containing all the result arguments passed to the task callbacks.\n     * Invoked with (err, results).\n     * @example\n     * async.parallel([\n     *     function(callback) {\n     *         setTimeout(function() {\n     *             callback(null, 'one');\n     *         }, 200);\n     *     },\n     *     function(callback) {\n     *         setTimeout(function() {\n     *             callback(null, 'two');\n     *         }, 100);\n     *     }\n     * ],\n     * // optional callback\n     * function(err, results) {\n     *     // the results array will equal ['one','two'] even though\n     *     // the second function had a shorter timeout.\n     * });\n     *\n     * // an example using an object instead of an array\n     * async.parallel({\n     *     one: function(callback) {\n     *         setTimeout(function() {\n     *             callback(null, 1);\n     *         }, 200);\n     *     },\n     *     two: function(callback) {\n     *         setTimeout(function() {\n     *             callback(null, 2);\n     *         }, 100);\n     *     }\n     * }, function(err, results) {\n     *     // results is now equals to: {one: 1, two: 2}\n     * });\n     */\n    function parallelLimit(tasks, callback) {\n      _parallel(eachOf, tasks, callback);\n    }\n\n    /**\n     * The same as [`parallel`]{@link module:ControlFlow.parallel} but runs a maximum of `limit` async operations at a\n     * time.\n     *\n     * @name parallelLimit\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @see [async.parallel]{@link module:ControlFlow.parallel}\n     * @category Control Flow\n     * @param {Array|Collection} tasks - A collection containing functions to run.\n     * Each function is passed a `callback(err, result)` which it must call on\n     * completion with an error `err` (which can be `null`) and an optional `result`\n     * value.\n     * @param {number} limit - The maximum number of async operations at a time.\n     * @param {Function} [callback] - An optional callback to run once all the\n     * functions have completed successfully. This function gets a results array\n     * (or object) containing all the result arguments passed to the task callbacks.\n     * Invoked with (err, results).\n     */\n    function parallelLimit$1(tasks, limit, callback) {\n      _parallel(_eachOfLimit(limit), tasks, callback);\n    }\n\n    /**\n     * A queue of tasks for the worker function to complete.\n     * @typedef {Object} QueueObject\n     * @memberOf module:ControlFlow\n     * @property {Function} length - a function returning the number of items\n     * waiting to be processed. Invoke with `queue.length()`.\n     * @property {boolean} started - a boolean indicating whether or not any\n     * items have been pushed and processed by the queue.\n     * @property {Function} running - a function returning the number of items\n     * currently being processed. Invoke with `queue.running()`.\n     * @property {Function} workersList - a function returning the array of items\n     * currently being processed. Invoke with `queue.workersList()`.\n     * @property {Function} idle - a function returning false if there are items\n     * waiting or being processed, or true if not. Invoke with `queue.idle()`.\n     * @property {number} concurrency - an integer for determining how many `worker`\n     * functions should be run in parallel. This property can be changed after a\n     * `queue` is created to alter the concurrency on-the-fly.\n     * @property {Function} push - add a new task to the `queue`. Calls `callback`\n     * once the `worker` has finished processing the task. Instead of a single task,\n     * a `tasks` array can be submitted. The respective callback is used for every\n     * task in the list. Invoke with `queue.push(task, [callback])`,\n     * @property {Function} unshift - add a new task to the front of the `queue`.\n     * Invoke with `queue.unshift(task, [callback])`.\n     * @property {Function} saturated - a callback that is called when the number of\n     * running workers hits the `concurrency` limit, and further tasks will be\n     * queued.\n     * @property {Function} unsaturated - a callback that is called when the number\n     * of running workers is less than the `concurrency` & `buffer` limits, and\n     * further tasks will not be queued.\n     * @property {number} buffer - A minimum threshold buffer in order to say that\n     * the `queue` is `unsaturated`.\n     * @property {Function} empty - a callback that is called when the last item\n     * from the `queue` is given to a `worker`.\n     * @property {Function} drain - a callback that is called when the last item\n     * from the `queue` has returned from the `worker`.\n     * @property {Function} error - a callback that is called when a task errors.\n     * Has the signature `function(error, task)`.\n     * @property {boolean} paused - a boolean for determining whether the queue is\n     * in a paused state.\n     * @property {Function} pause - a function that pauses the processing of tasks\n     * until `resume()` is called. Invoke with `queue.pause()`.\n     * @property {Function} resume - a function that resumes the processing of\n     * queued tasks when the queue is paused. Invoke with `queue.resume()`.\n     * @property {Function} kill - a function that removes the `drain` callback and\n     * empties remaining tasks from the queue forcing it to go idle. Invoke with `queue.kill()`.\n     */\n\n    /**\n     * Creates a `queue` object with the specified `concurrency`. Tasks added to the\n     * `queue` are processed in parallel (up to the `concurrency` limit). If all\n     * `worker`s are in progress, the task is queued until one becomes available.\n     * Once a `worker` completes a `task`, that `task`'s callback is called.\n     *\n     * @name queue\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @category Control Flow\n     * @param {Function} worker - An asynchronous function for processing a queued\n     * task, which must call its `callback(err)` argument when finished, with an\n     * optional `error` as an argument.  If you want to handle errors from an\n     * individual task, pass a callback to `q.push()`. Invoked with\n     * (task, callback).\n     * @param {number} [concurrency=1] - An `integer` for determining how many\n     * `worker` functions should be run in parallel.  If omitted, the concurrency\n     * defaults to `1`.  If the concurrency is `0`, an error is thrown.\n     * @returns {module:ControlFlow.QueueObject} A queue object to manage the tasks. Callbacks can\n     * attached as certain properties to listen for specific events during the\n     * lifecycle of the queue.\n     * @example\n     *\n     * // create a queue object with concurrency 2\n     * var q = async.queue(function(task, callback) {\n     *     console.log('hello ' + task.name);\n     *     callback();\n     * }, 2);\n     *\n     * // assign a callback\n     * q.drain = function() {\n     *     console.log('all items have been processed');\n     * };\n     *\n     * // add some items to the queue\n     * q.push({name: 'foo'}, function(err) {\n     *     console.log('finished processing foo');\n     * });\n     * q.push({name: 'bar'}, function (err) {\n     *     console.log('finished processing bar');\n     * });\n     *\n     * // add some items to the queue (batch-wise)\n     * q.push([{name: 'baz'},{name: 'bay'},{name: 'bax'}], function(err) {\n     *     console.log('finished processing item');\n     * });\n     *\n     * // add some items to the front of the queue\n     * q.unshift({name: 'bar'}, function (err) {\n     *     console.log('finished processing bar');\n     * });\n     */\n    function queue$1 (worker, concurrency) {\n      return queue(function (items, cb) {\n        worker(items[0], cb);\n      }, concurrency, 1);\n    }\n\n    /**\n     * The same as [async.queue]{@link module:ControlFlow.queue} only tasks are assigned a priority and\n     * completed in ascending priority order.\n     *\n     * @name priorityQueue\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @see [async.queue]{@link module:ControlFlow.queue}\n     * @category Control Flow\n     * @param {Function} worker - An asynchronous function for processing a queued\n     * task, which must call its `callback(err)` argument when finished, with an\n     * optional `error` as an argument.  If you want to handle errors from an\n     * individual task, pass a callback to `q.push()`. Invoked with\n     * (task, callback).\n     * @param {number} concurrency - An `integer` for determining how many `worker`\n     * functions should be run in parallel.  If omitted, the concurrency defaults to\n     * `1`.  If the concurrency is `0`, an error is thrown.\n     * @returns {module:ControlFlow.QueueObject} A priorityQueue object to manage the tasks. There are two\n     * differences between `queue` and `priorityQueue` objects:\n     * * `push(task, priority, [callback])` - `priority` should be a number. If an\n     *   array of `tasks` is given, all tasks will be assigned the same priority.\n     * * The `unshift` method was removed.\n     */\n    function priorityQueue (worker, concurrency) {\n        // Start with a normal queue\n        var q = queue$1(worker, concurrency);\n\n        // Override push to accept second parameter representing priority\n        q.push = function (data, priority, callback) {\n            if (callback == null) callback = noop;\n            if (typeof callback !== 'function') {\n                throw new Error('task callback must be a function');\n            }\n            q.started = true;\n            if (!isArray(data)) {\n                data = [data];\n            }\n            if (data.length === 0) {\n                // call drain immediately if there are no tasks\n                return setImmediate$1(function () {\n                    q.drain();\n                });\n            }\n\n            priority = priority || 0;\n            var nextNode = q._tasks.head;\n            while (nextNode && priority >= nextNode.priority) {\n                nextNode = nextNode.next;\n            }\n\n            arrayEach(data, function (task) {\n                var item = {\n                    data: task,\n                    priority: priority,\n                    callback: callback\n                };\n\n                if (nextNode) {\n                    q._tasks.insertBefore(nextNode, item);\n                } else {\n                    q._tasks.push(item);\n                }\n            });\n            setImmediate$1(q.process);\n        };\n\n        // Remove unshift function\n        delete q.unshift;\n\n        return q;\n    }\n\n    /**\n     * Runs the `tasks` array of functions in parallel, without waiting until the\n     * previous function has completed. Once any the `tasks` completed or pass an\n     * error to its callback, the main `callback` is immediately called. It's\n     * equivalent to `Promise.race()`.\n     *\n     * @name race\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @category Control Flow\n     * @param {Array} tasks - An array containing functions to run. Each function\n     * is passed a `callback(err, result)` which it must call on completion with an\n     * error `err` (which can be `null`) and an optional `result` value.\n     * @param {Function} callback - A callback to run once any of the functions have\n     * completed. This function gets an error or result from the first function that\n     * completed. Invoked with (err, result).\n     * @returns undefined\n     * @example\n     *\n     * async.race([\n     *     function(callback) {\n     *         setTimeout(function() {\n     *             callback(null, 'one');\n     *         }, 200);\n     *     },\n     *     function(callback) {\n     *         setTimeout(function() {\n     *             callback(null, 'two');\n     *         }, 100);\n     *     }\n     * ],\n     * // main callback\n     * function(err, result) {\n     *     // the result will be equal to 'two' as it finishes earlier\n     * });\n     */\n    function race(tasks, callback) {\n        callback = once(callback || noop);\n        if (!isArray(tasks)) return callback(new TypeError('First argument to race must be an array of functions'));\n        if (!tasks.length) return callback();\n        arrayEach(tasks, function (task) {\n            task(callback);\n        });\n    }\n\n    var slice = Array.prototype.slice;\n\n    /**\n     * Same as [`reduce`]{@link module:Collections.reduce}, only operates on `array` in reverse order.\n     *\n     * @name reduceRight\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.reduce]{@link module:Collections.reduce}\n     * @alias foldr\n     * @category Collection\n     * @param {Array} array - A collection to iterate over.\n     * @param {*} memo - The initial state of the reduction.\n     * @param {Function} iteratee - A function applied to each item in the\n     * array to produce the next step in the reduction. The `iteratee` is passed a\n     * `callback(err, reduction)` which accepts an optional error as its first\n     * argument, and the state of the reduction as the second. If an error is\n     * passed to the callback, the reduction is stopped and the main `callback` is\n     * immediately called with the error. Invoked with (memo, item, callback).\n     * @param {Function} [callback] - A callback which is called after all the\n     * `iteratee` functions have finished. Result is the reduced value. Invoked with\n     * (err, result).\n     */\n    function reduceRight(array, memo, iteratee, callback) {\n      var reversed = slice.call(array).reverse();\n      reduce(reversed, memo, iteratee, callback);\n    }\n\n    /**\n     * Wraps the function in another function that always returns data even when it\n     * errors.\n     *\n     * The object returned has either the property `error` or `value`.\n     *\n     * @name reflect\n     * @static\n     * @memberOf module:Utils\n     * @method\n     * @category Util\n     * @param {Function} fn - The function you want to wrap\n     * @returns {Function} - A function that always passes null to it's callback as\n     * the error. The second argument to the callback will be an `object` with\n     * either an `error` or a `value` property.\n     * @example\n     *\n     * async.parallel([\n     *     async.reflect(function(callback) {\n     *         // do some stuff ...\n     *         callback(null, 'one');\n     *     }),\n     *     async.reflect(function(callback) {\n     *         // do some more stuff but error ...\n     *         callback('bad stuff happened');\n     *     }),\n     *     async.reflect(function(callback) {\n     *         // do some more stuff ...\n     *         callback(null, 'two');\n     *     })\n     * ],\n     * // optional callback\n     * function(err, results) {\n     *     // values\n     *     // results[0].value = 'one'\n     *     // results[1].error = 'bad stuff happened'\n     *     // results[2].value = 'two'\n     * });\n     */\n    function reflect(fn) {\n        return initialParams(function reflectOn(args, reflectCallback) {\n            args.push(rest(function callback(err, cbArgs) {\n                if (err) {\n                    reflectCallback(null, {\n                        error: err\n                    });\n                } else {\n                    var value = null;\n                    if (cbArgs.length === 1) {\n                        value = cbArgs[0];\n                    } else if (cbArgs.length > 1) {\n                        value = cbArgs;\n                    }\n                    reflectCallback(null, {\n                        value: value\n                    });\n                }\n            }));\n\n            return fn.apply(this, args);\n        });\n    }\n\n    function reject$1(eachfn, arr, iteratee, callback) {\n        _filter(eachfn, arr, function (value, cb) {\n            iteratee(value, function (err, v) {\n                if (err) {\n                    cb(err);\n                } else {\n                    cb(null, !v);\n                }\n            });\n        }, callback);\n    }\n\n    /**\n     * The opposite of [`filter`]{@link module:Collections.filter}. Removes values that pass an `async` truth test.\n     *\n     * @name reject\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.filter]{@link module:Collections.filter}\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n     * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n     * with a boolean argument once it has completed. Invoked with (item, callback).\n     * @param {Function} [callback] - A callback which is called after all the\n     * `iteratee` functions have finished. Invoked with (err, results).\n     * @example\n     *\n     * async.reject(['file1','file2','file3'], function(filePath, callback) {\n     *     fs.access(filePath, function(err) {\n     *         callback(null, !err)\n     *     });\n     * }, function(err, results) {\n     *     // results now equals an array of missing files\n     *     createFiles(results);\n     * });\n     */\n    var reject = doParallel(reject$1);\n\n    /**\n     * A helper function that wraps an array or an object of functions with reflect.\n     *\n     * @name reflectAll\n     * @static\n     * @memberOf module:Utils\n     * @method\n     * @see [async.reflect]{@link module:Utils.reflect}\n     * @category Util\n     * @param {Array} tasks - The array of functions to wrap in `async.reflect`.\n     * @returns {Array} Returns an array of functions, each function wrapped in\n     * `async.reflect`\n     * @example\n     *\n     * let tasks = [\n     *     function(callback) {\n     *         setTimeout(function() {\n     *             callback(null, 'one');\n     *         }, 200);\n     *     },\n     *     function(callback) {\n     *         // do some more stuff but error ...\n     *         callback(new Error('bad stuff happened'));\n     *     },\n     *     function(callback) {\n     *         setTimeout(function() {\n     *             callback(null, 'two');\n     *         }, 100);\n     *     }\n     * ];\n     *\n     * async.parallel(async.reflectAll(tasks),\n     * // optional callback\n     * function(err, results) {\n     *     // values\n     *     // results[0].value = 'one'\n     *     // results[1].error = Error('bad stuff happened')\n     *     // results[2].value = 'two'\n     * });\n     *\n     * // an example using an object instead of an array\n     * let tasks = {\n     *     one: function(callback) {\n     *         setTimeout(function() {\n     *             callback(null, 'one');\n     *         }, 200);\n     *     },\n     *     two: function(callback) {\n     *         callback('two');\n     *     },\n     *     three: function(callback) {\n     *         setTimeout(function() {\n     *             callback(null, 'three');\n     *         }, 100);\n     *     }\n     * };\n     *\n     * async.parallel(async.reflectAll(tasks),\n     * // optional callback\n     * function(err, results) {\n     *     // values\n     *     // results.one.value = 'one'\n     *     // results.two.error = 'two'\n     *     // results.three.value = 'three'\n     * });\n     */\n    function reflectAll(tasks) {\n        var results;\n        if (isArray(tasks)) {\n            results = arrayMap(tasks, reflect);\n        } else {\n            results = {};\n            baseForOwn(tasks, function (task, key) {\n                results[key] = reflect.call(this, task);\n            });\n        }\n        return results;\n    }\n\n    /**\n     * The same as [`reject`]{@link module:Collections.reject} but runs a maximum of `limit` async operations at a\n     * time.\n     *\n     * @name rejectLimit\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.reject]{@link module:Collections.reject}\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {number} limit - The maximum number of async operations at a time.\n     * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n     * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n     * with a boolean argument once it has completed. Invoked with (item, callback).\n     * @param {Function} [callback] - A callback which is called after all the\n     * `iteratee` functions have finished. Invoked with (err, results).\n     */\n    var rejectLimit = doParallelLimit(reject$1);\n\n    /**\n     * The same as [`reject`]{@link module:Collections.reject} but runs only a single async operation at a time.\n     *\n     * @name rejectSeries\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.reject]{@link module:Collections.reject}\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n     * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n     * with a boolean argument once it has completed. Invoked with (item, callback).\n     * @param {Function} [callback] - A callback which is called after all the\n     * `iteratee` functions have finished. Invoked with (err, results).\n     */\n    var rejectSeries = doLimit(rejectLimit, 1);\n\n    /**\n     * Creates a function that returns `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {*} value The value to return from the new function.\n     * @returns {Function} Returns the new constant function.\n     * @example\n     *\n     * var objects = _.times(2, _.constant({ 'a': 1 }));\n     *\n     * console.log(objects);\n     * // => [{ 'a': 1 }, { 'a': 1 }]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => true\n     */\n    function constant$1(value) {\n      return function() {\n        return value;\n      };\n    }\n\n    /**\n     * Attempts to get a successful response from `task` no more than `times` times\n     * before returning an error. If the task is successful, the `callback` will be\n     * passed the result of the successful task. If all attempts fail, the callback\n     * will be passed the error and result (if any) of the final attempt.\n     *\n     * @name retry\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @category Control Flow\n     * @param {Object|number} [opts = {times: 5, interval: 0}| 5] - Can be either an\n     * object with `times` and `interval` or a number.\n     * * `times` - The number of attempts to make before giving up.  The default\n     *   is `5`.\n     * * `interval` - The time to wait between retries, in milliseconds.  The\n     *   default is `0`. The interval may also be specified as a function of the\n     *   retry count (see example).\n     * * If `opts` is a number, the number specifies the number of times to retry,\n     *   with the default interval of `0`.\n     * @param {Function} task - A function which receives two arguments: (1) a\n     * `callback(err, result)` which must be called when finished, passing `err`\n     * (which can be `null`) and the `result` of the function's execution, and (2)\n     * a `results` object, containing the results of the previously executed\n     * functions (if nested inside another control flow). Invoked with\n     * (callback, results).\n     * @param {Function} [callback] - An optional callback which is called when the\n     * task has succeeded, or after the final failed attempt. It receives the `err`\n     * and `result` arguments of the last attempt at completing the `task`. Invoked\n     * with (err, results).\n     * @example\n     *\n     * // The `retry` function can be used as a stand-alone control flow by passing\n     * // a callback, as shown below:\n     *\n     * // try calling apiMethod 3 times\n     * async.retry(3, apiMethod, function(err, result) {\n     *     // do something with the result\n     * });\n     *\n     * // try calling apiMethod 3 times, waiting 200 ms between each retry\n     * async.retry({times: 3, interval: 200}, apiMethod, function(err, result) {\n     *     // do something with the result\n     * });\n     *\n     * // try calling apiMethod 10 times with exponential backoff\n     * // (i.e. intervals of 100, 200, 400, 800, 1600, ... milliseconds)\n     * async.retry({\n     *   times: 10,\n     *   interval: function(retryCount) {\n     *     return 50 * Math.pow(2, retryCount);\n     *   }\n     * }, apiMethod, function(err, result) {\n     *     // do something with the result\n     * });\n     *\n     * // try calling apiMethod the default 5 times no delay between each retry\n     * async.retry(apiMethod, function(err, result) {\n     *     // do something with the result\n     * });\n     *\n     * // It can also be embedded within other control flow functions to retry\n     * // individual methods that are not as reliable, like this:\n     * async.auto({\n     *     users: api.getUsers.bind(api),\n     *     payments: async.retry(3, api.getPayments.bind(api))\n     * }, function(err, results) {\n     *     // do something with the results\n     * });\n     */\n    function retry(opts, task, callback) {\n        var DEFAULT_TIMES = 5;\n        var DEFAULT_INTERVAL = 0;\n\n        var options = {\n            times: DEFAULT_TIMES,\n            intervalFunc: constant$1(DEFAULT_INTERVAL)\n        };\n\n        function parseTimes(acc, t) {\n            if (typeof t === 'object') {\n                acc.times = +t.times || DEFAULT_TIMES;\n\n                acc.intervalFunc = typeof t.interval === 'function' ? t.interval : constant$1(+t.interval || DEFAULT_INTERVAL);\n            } else if (typeof t === 'number' || typeof t === 'string') {\n                acc.times = +t || DEFAULT_TIMES;\n            } else {\n                throw new Error(\"Invalid arguments for async.retry\");\n            }\n        }\n\n        if (arguments.length < 3 && typeof opts === 'function') {\n            callback = task || noop;\n            task = opts;\n        } else {\n            parseTimes(options, opts);\n            callback = callback || noop;\n        }\n\n        if (typeof task !== 'function') {\n            throw new Error(\"Invalid arguments for async.retry\");\n        }\n\n        var attempt = 1;\n        function retryAttempt() {\n            task(function (err) {\n                if (err && attempt++ < options.times) {\n                    setTimeout(retryAttempt, options.intervalFunc(attempt));\n                } else {\n                    callback.apply(null, arguments);\n                }\n            });\n        }\n\n        retryAttempt();\n    }\n\n    /**\n     * A close relative of [`retry`]{@link module:ControlFlow.retry}.  This method wraps a task and makes it\n     * retryable, rather than immediately calling it with retries.\n     *\n     * @name retryable\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @see [async.retry]{@link module:ControlFlow.retry}\n     * @category Control Flow\n     * @param {Object|number} [opts = {times: 5, interval: 0}| 5] - optional\n     * options, exactly the same as from `retry`\n     * @param {Function} task - the asynchronous function to wrap\n     * @returns {Functions} The wrapped function, which when invoked, will retry on\n     * an error, based on the parameters specified in `opts`.\n     * @example\n     *\n     * async.auto({\n     *     dep1: async.retryable(3, getFromFlakyService),\n     *     process: [\"dep1\", async.retryable(3, function (results, cb) {\n     *         maybeProcessData(results.dep1, cb);\n     *     })]\n     * }, callback);\n     */\n    function retryable (opts, task) {\n        if (!task) {\n            task = opts;\n            opts = null;\n        }\n        return initialParams(function (args, callback) {\n            function taskFn(cb) {\n                task.apply(null, args.concat([cb]));\n            }\n\n            if (opts) retry(opts, taskFn, callback);else retry(taskFn, callback);\n        });\n    }\n\n    /**\n     * Run the functions in the `tasks` collection in series, each one running once\n     * the previous function has completed. If any functions in the series pass an\n     * error to its callback, no more functions are run, and `callback` is\n     * immediately called with the value of the error. Otherwise, `callback`\n     * receives an array of results when `tasks` have completed.\n     *\n     * It is also possible to use an object instead of an array. Each property will\n     * be run as a function, and the results will be passed to the final `callback`\n     * as an object instead of an array. This can be a more readable way of handling\n     *  results from {@link async.series}.\n     *\n     * **Note** that while many implementations preserve the order of object\n     * properties, the [ECMAScript Language Specification](http://www.ecma-international.org/ecma-262/5.1/#sec-8.6)\n     * explicitly states that\n     *\n     * > The mechanics and order of enumerating the properties is not specified.\n     *\n     * So if you rely on the order in which your series of functions are executed,\n     * and want this to work on all platforms, consider using an array.\n     *\n     * @name series\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @category Control Flow\n     * @param {Array|Iterable|Object} tasks - A collection containing functions to run, each\n     * function is passed a `callback(err, result)` it must call on completion with\n     * an error `err` (which can be `null`) and an optional `result` value.\n     * @param {Function} [callback] - An optional callback to run once all the\n     * functions have completed. This function gets a results array (or object)\n     * containing all the result arguments passed to the `task` callbacks. Invoked\n     * with (err, result).\n     * @example\n     * async.series([\n     *     function(callback) {\n     *         // do some stuff ...\n     *         callback(null, 'one');\n     *     },\n     *     function(callback) {\n     *         // do some more stuff ...\n     *         callback(null, 'two');\n     *     }\n     * ],\n     * // optional callback\n     * function(err, results) {\n     *     // results is now equal to ['one', 'two']\n     * });\n     *\n     * async.series({\n     *     one: function(callback) {\n     *         setTimeout(function() {\n     *             callback(null, 1);\n     *         }, 200);\n     *     },\n     *     two: function(callback){\n     *         setTimeout(function() {\n     *             callback(null, 2);\n     *         }, 100);\n     *     }\n     * }, function(err, results) {\n     *     // results is now equal to: {one: 1, two: 2}\n     * });\n     */\n    function series(tasks, callback) {\n      _parallel(eachOfSeries, tasks, callback);\n    }\n\n    /**\n     * Returns `true` if at least one element in the `coll` satisfies an async test.\n     * If any iteratee call returns `true`, the main `callback` is immediately\n     * called.\n     *\n     * @name some\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @alias any\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A truth test to apply to each item in the array\n     * in parallel. The iteratee is passed a `callback(err, truthValue)` which must\n     * be called with a boolean argument once it has completed. Invoked with\n     * (item, callback).\n     * @param {Function} [callback] - A callback which is called as soon as any\n     * iteratee returns `true`, or after all the iteratee functions have finished.\n     * Result will be either `true` or `false` depending on the values of the async\n     * tests. Invoked with (err, result).\n     * @example\n     *\n     * async.some(['file1','file2','file3'], function(filePath, callback) {\n     *     fs.access(filePath, function(err) {\n     *         callback(null, !err)\n     *     });\n     * }, function(err, result) {\n     *     // if result is true then at least one of the files exists\n     * });\n     */\n    var some = _createTester(eachOf, Boolean, identity);\n\n    /**\n     * The same as [`some`]{@link module:Collections.some} but runs a maximum of `limit` async operations at a time.\n     *\n     * @name someLimit\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.some]{@link module:Collections.some}\n     * @alias anyLimit\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {number} limit - The maximum number of async operations at a time.\n     * @param {Function} iteratee - A truth test to apply to each item in the array\n     * in parallel. The iteratee is passed a `callback(err, truthValue)` which must\n     * be called with a boolean argument once it has completed. Invoked with\n     * (item, callback).\n     * @param {Function} [callback] - A callback which is called as soon as any\n     * iteratee returns `true`, or after all the iteratee functions have finished.\n     * Result will be either `true` or `false` depending on the values of the async\n     * tests. Invoked with (err, result).\n     */\n    var someLimit = _createTester(eachOfLimit, Boolean, identity);\n\n    /**\n     * The same as [`some`]{@link module:Collections.some} but runs only a single async operation at a time.\n     *\n     * @name someSeries\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @see [async.some]{@link module:Collections.some}\n     * @alias anySeries\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A truth test to apply to each item in the array\n     * in parallel. The iteratee is passed a `callback(err, truthValue)` which must\n     * be called with a boolean argument once it has completed. Invoked with\n     * (item, callback).\n     * @param {Function} [callback] - A callback which is called as soon as any\n     * iteratee returns `true`, or after all the iteratee functions have finished.\n     * Result will be either `true` or `false` depending on the values of the async\n     * tests. Invoked with (err, result).\n     */\n    var someSeries = doLimit(someLimit, 1);\n\n    /**\n     * Sorts a list by the results of running each `coll` value through an async\n     * `iteratee`.\n     *\n     * @name sortBy\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {Function} iteratee - A function to apply to each item in `coll`.\n     * The iteratee is passed a `callback(err, sortValue)` which must be called once\n     * it has completed with an error (which can be `null`) and a value to use as\n     * the sort criteria. Invoked with (item, callback).\n     * @param {Function} callback - A callback which is called after all the\n     * `iteratee` functions have finished, or an error occurs. Results is the items\n     * from the original `coll` sorted by the values returned by the `iteratee`\n     * calls. Invoked with (err, results).\n     * @example\n     *\n     * async.sortBy(['file1','file2','file3'], function(file, callback) {\n     *     fs.stat(file, function(err, stats) {\n     *         callback(err, stats.mtime);\n     *     });\n     * }, function(err, results) {\n     *     // results is now the original array of files sorted by\n     *     // modified date\n     * });\n     *\n     * // By modifying the callback parameter the\n     * // sorting order can be influenced:\n     *\n     * // ascending order\n     * async.sortBy([1,9,3,5], function(x, callback) {\n     *     callback(null, x);\n     * }, function(err,result) {\n     *     // result callback\n     * });\n     *\n     * // descending order\n     * async.sortBy([1,9,3,5], function(x, callback) {\n     *     callback(null, x*-1);    //<- x*-1 instead of x, turns the order around\n     * }, function(err,result) {\n     *     // result callback\n     * });\n     */\n    function sortBy(coll, iteratee, callback) {\n        map(coll, function (x, callback) {\n            iteratee(x, function (err, criteria) {\n                if (err) return callback(err);\n                callback(null, { value: x, criteria: criteria });\n            });\n        }, function (err, results) {\n            if (err) return callback(err);\n            callback(null, arrayMap(results.sort(comparator), baseProperty('value')));\n        });\n\n        function comparator(left, right) {\n            var a = left.criteria,\n                b = right.criteria;\n            return a < b ? -1 : a > b ? 1 : 0;\n        }\n    }\n\n    /**\n     * Sets a time limit on an asynchronous function. If the function does not call\n     * its callback within the specified milliseconds, it will be called with a\n     * timeout error. The code property for the error object will be `'ETIMEDOUT'`.\n     *\n     * @name timeout\n     * @static\n     * @memberOf module:Utils\n     * @method\n     * @category Util\n     * @param {Function} asyncFn - The asynchronous function you want to set the\n     * time limit.\n     * @param {number} milliseconds - The specified time limit.\n     * @param {*} [info] - Any variable you want attached (`string`, `object`, etc)\n     * to timeout Error for more information..\n     * @returns {Function} Returns a wrapped function that can be used with any of\n     * the control flow functions.\n     * @example\n     *\n     * async.timeout(function(callback) {\n     *     doAsyncTask(callback);\n     * }, 1000);\n     */\n    function timeout(asyncFn, milliseconds, info) {\n        var originalCallback, timer;\n        var timedOut = false;\n\n        function injectedCallback() {\n            if (!timedOut) {\n                originalCallback.apply(null, arguments);\n                clearTimeout(timer);\n            }\n        }\n\n        function timeoutCallback() {\n            var name = asyncFn.name || 'anonymous';\n            var error = new Error('Callback function \"' + name + '\" timed out.');\n            error.code = 'ETIMEDOUT';\n            if (info) {\n                error.info = info;\n            }\n            timedOut = true;\n            originalCallback(error);\n        }\n\n        return initialParams(function (args, origCallback) {\n            originalCallback = origCallback;\n            // setup timer and call original function\n            timer = setTimeout(timeoutCallback, milliseconds);\n            asyncFn.apply(null, args.concat(injectedCallback));\n        });\n    }\n\n    /* Built-in method references for those with the same name as other `lodash` methods. */\n    var nativeCeil = Math.ceil;\n    var nativeMax$1 = Math.max;\n    /**\n     * The base implementation of `_.range` and `_.rangeRight` which doesn't\n     * coerce arguments to numbers.\n     *\n     * @private\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} step The value to increment or decrement by.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the range of numbers.\n     */\n    function baseRange(start, end, step, fromRight) {\n      var index = -1,\n          length = nativeMax$1(nativeCeil((end - start) / (step || 1)), 0),\n          result = Array(length);\n\n      while (length--) {\n        result[fromRight ? length : ++index] = start;\n        start += step;\n      }\n      return result;\n    }\n\n    /**\n     * The same as [times]{@link module:ControlFlow.times} but runs a maximum of `limit` async operations at a\n     * time.\n     *\n     * @name timesLimit\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @see [async.times]{@link module:ControlFlow.times}\n     * @category Control Flow\n     * @param {number} count - The number of times to run the function.\n     * @param {number} limit - The maximum number of async operations at a time.\n     * @param {Function} iteratee - The function to call `n` times. Invoked with the\n     * iteration index and a callback (n, next).\n     * @param {Function} callback - see [async.map]{@link module:Collections.map}.\n     */\n    function timeLimit(count, limit, iteratee, callback) {\n      mapLimit(baseRange(0, count, 1), limit, iteratee, callback);\n    }\n\n    /**\n     * Calls the `iteratee` function `n` times, and accumulates results in the same\n     * manner you would use with [map]{@link module:Collections.map}.\n     *\n     * @name times\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @see [async.map]{@link module:Collections.map}\n     * @category Control Flow\n     * @param {number} n - The number of times to run the function.\n     * @param {Function} iteratee - The function to call `n` times. Invoked with the\n     * iteration index and a callback (n, next).\n     * @param {Function} callback - see {@link module:Collections.map}.\n     * @example\n     *\n     * // Pretend this is some complicated async factory\n     * var createUser = function(id, callback) {\n     *     callback(null, {\n     *         id: 'user' + id\n     *     });\n     * };\n     *\n     * // generate 5 users\n     * async.times(5, function(n, next) {\n     *     createUser(n, function(err, user) {\n     *         next(err, user);\n     *     });\n     * }, function(err, users) {\n     *     // we should now have 5 users\n     * });\n     */\n    var times = doLimit(timeLimit, Infinity);\n\n    /**\n     * The same as [times]{@link module:ControlFlow.times} but runs only a single async operation at a time.\n     *\n     * @name timesSeries\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @see [async.times]{@link module:ControlFlow.times}\n     * @category Control Flow\n     * @param {number} n - The number of times to run the function.\n     * @param {Function} iteratee - The function to call `n` times. Invoked with the\n     * iteration index and a callback (n, next).\n     * @param {Function} callback - see {@link module:Collections.map}.\n     */\n    var timesSeries = doLimit(timeLimit, 1);\n\n    /**\n     * A relative of `reduce`.  Takes an Object or Array, and iterates over each\n     * element in series, each step potentially mutating an `accumulator` value.\n     * The type of the accumulator defaults to the type of collection passed in.\n     *\n     * @name transform\n     * @static\n     * @memberOf module:Collections\n     * @method\n     * @category Collection\n     * @param {Array|Iterable|Object} coll - A collection to iterate over.\n     * @param {*} [accumulator] - The initial state of the transform.  If omitted,\n     * it will default to an empty Object or Array, depending on the type of `coll`\n     * @param {Function} iteratee - A function applied to each item in the\n     * collection that potentially modifies the accumulator. The `iteratee` is\n     * passed a `callback(err)` which accepts an optional error as its first\n     * argument. If an error is passed to the callback, the transform is stopped\n     * and the main `callback` is immediately called with the error.\n     * Invoked with (accumulator, item, key, callback).\n     * @param {Function} [callback] - A callback which is called after all the\n     * `iteratee` functions have finished. Result is the transformed accumulator.\n     * Invoked with (err, result).\n     * @example\n     *\n     * async.transform([1,2,3], function(acc, item, index, callback) {\n     *     // pointless async:\n     *     process.nextTick(function() {\n     *         acc.push(item * 2)\n     *         callback(null)\n     *     });\n     * }, function(err, result) {\n     *     // result is now equal to [2, 4, 6]\n     * });\n     *\n     * @example\n     *\n     * async.transform({a: 1, b: 2, c: 3}, function (obj, val, key, callback) {\n     *     setImmediate(function () {\n     *         obj[key] = val * 2;\n     *         callback();\n     *     })\n     * }, function (err, result) {\n     *     // result is equal to {a: 2, b: 4, c: 6}\n     * })\n     */\n    function transform(coll, accumulator, iteratee, callback) {\n        if (arguments.length === 3) {\n            callback = iteratee;\n            iteratee = accumulator;\n            accumulator = isArray(coll) ? [] : {};\n        }\n        callback = once(callback || noop);\n\n        eachOf(coll, function (v, k, cb) {\n            iteratee(accumulator, v, k, cb);\n        }, function (err) {\n            callback(err, accumulator);\n        });\n    }\n\n    /**\n     * Undoes a [memoize]{@link module:Utils.memoize}d function, reverting it to the original,\n     * unmemoized form. Handy for testing.\n     *\n     * @name unmemoize\n     * @static\n     * @memberOf module:Utils\n     * @method\n     * @see [async.memoize]{@link module:Utils.memoize}\n     * @category Util\n     * @param {Function} fn - the memoized function\n     * @returns {Function} a function that calls the original unmemoized function\n     */\n    function unmemoize(fn) {\n        return function () {\n            return (fn.unmemoized || fn).apply(null, arguments);\n        };\n    }\n\n    /**\n     * Repeatedly call `fn`, while `test` returns `true`. Calls `callback` when\n     * stopped, or an error occurs.\n     *\n     * @name whilst\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @category Control Flow\n     * @param {Function} test - synchronous truth test to perform before each\n     * execution of `fn`. Invoked with ().\n     * @param {Function} iteratee - A function which is called each time `test` passes.\n     * The function is passed a `callback(err)`, which must be called once it has\n     * completed with an optional `err` argument. Invoked with (callback).\n     * @param {Function} [callback] - A callback which is called after the test\n     * function has failed and repeated execution of `fn` has stopped. `callback`\n     * will be passed an error and any arguments passed to the final `fn`'s\n     * callback. Invoked with (err, [results]);\n     * @returns undefined\n     * @example\n     *\n     * var count = 0;\n     * async.whilst(\n     *     function() { return count < 5; },\n     *     function(callback) {\n     *         count++;\n     *         setTimeout(function() {\n     *             callback(null, count);\n     *         }, 1000);\n     *     },\n     *     function (err, n) {\n     *         // 5 seconds have passed, n = 5\n     *     }\n     * );\n     */\n    function whilst(test, iteratee, callback) {\n        callback = onlyOnce(callback || noop);\n        if (!test()) return callback(null);\n        var next = rest(function (err, args) {\n            if (err) return callback(err);\n            if (test()) return iteratee(next);\n            callback.apply(null, [null].concat(args));\n        });\n        iteratee(next);\n    }\n\n    /**\n     * Repeatedly call `fn` until `test` returns `true`. Calls `callback` when\n     * stopped, or an error occurs. `callback` will be passed an error and any\n     * arguments passed to the final `fn`'s callback.\n     *\n     * The inverse of [whilst]{@link module:ControlFlow.whilst}.\n     *\n     * @name until\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @see [async.whilst]{@link module:ControlFlow.whilst}\n     * @category Control Flow\n     * @param {Function} test - synchronous truth test to perform before each\n     * execution of `fn`. Invoked with ().\n     * @param {Function} fn - A function which is called each time `test` fails.\n     * The function is passed a `callback(err)`, which must be called once it has\n     * completed with an optional `err` argument. Invoked with (callback).\n     * @param {Function} [callback] - A callback which is called after the test\n     * function has passed and repeated execution of `fn` has stopped. `callback`\n     * will be passed an error and any arguments passed to the final `fn`'s\n     * callback. Invoked with (err, [results]);\n     */\n    function until(test, fn, callback) {\n        whilst(function () {\n            return !test.apply(this, arguments);\n        }, fn, callback);\n    }\n\n    /**\n     * Runs the `tasks` array of functions in series, each passing their results to\n     * the next in the array. However, if any of the `tasks` pass an error to their\n     * own callback, the next function is not executed, and the main `callback` is\n     * immediately called with the error.\n     *\n     * @name waterfall\n     * @static\n     * @memberOf module:ControlFlow\n     * @method\n     * @category Control Flow\n     * @param {Array} tasks - An array of functions to run, each function is passed\n     * a `callback(err, result1, result2, ...)` it must call on completion. The\n     * first argument is an error (which can be `null`) and any further arguments\n     * will be passed as arguments in order to the next task.\n     * @param {Function} [callback] - An optional callback to run once all the\n     * functions have completed. This will be passed the results of the last task's\n     * callback. Invoked with (err, [results]).\n     * @returns undefined\n     * @example\n     *\n     * async.waterfall([\n     *     function(callback) {\n     *         callback(null, 'one', 'two');\n     *     },\n     *     function(arg1, arg2, callback) {\n     *         // arg1 now equals 'one' and arg2 now equals 'two'\n     *         callback(null, 'three');\n     *     },\n     *     function(arg1, callback) {\n     *         // arg1 now equals 'three'\n     *         callback(null, 'done');\n     *     }\n     * ], function (err, result) {\n     *     // result now equals 'done'\n     * });\n     *\n     * // Or, with named functions:\n     * async.waterfall([\n     *     myFirstFunction,\n     *     mySecondFunction,\n     *     myLastFunction,\n     * ], function (err, result) {\n     *     // result now equals 'done'\n     * });\n     * function myFirstFunction(callback) {\n     *     callback(null, 'one', 'two');\n     * }\n     * function mySecondFunction(arg1, arg2, callback) {\n     *     // arg1 now equals 'one' and arg2 now equals 'two'\n     *     callback(null, 'three');\n     * }\n     * function myLastFunction(arg1, callback) {\n     *     // arg1 now equals 'three'\n     *     callback(null, 'done');\n     * }\n     */\n    function waterfall (tasks, callback) {\n        callback = once(callback || noop);\n        if (!isArray(tasks)) return callback(new Error('First argument to waterfall must be an array of functions'));\n        if (!tasks.length) return callback();\n        var taskIndex = 0;\n\n        function nextTask(args) {\n            if (taskIndex === tasks.length) {\n                return callback.apply(null, [null].concat(args));\n            }\n\n            var taskCallback = onlyOnce(rest(function (err, args) {\n                if (err) {\n                    return callback.apply(null, [err].concat(args));\n                }\n                nextTask(args);\n            }));\n\n            args.push(taskCallback);\n\n            var task = tasks[taskIndex++];\n            task.apply(null, args);\n        }\n\n        nextTask([]);\n    }\n\n    var index = {\n      applyEach: applyEach,\n      applyEachSeries: applyEachSeries,\n      apply: apply$1,\n      asyncify: asyncify,\n      auto: auto,\n      autoInject: autoInject,\n      cargo: cargo,\n      compose: compose,\n      concat: concat,\n      concatSeries: concatSeries,\n      constant: constant,\n      detect: detect,\n      detectLimit: detectLimit,\n      detectSeries: detectSeries,\n      dir: dir,\n      doDuring: doDuring,\n      doUntil: doUntil,\n      doWhilst: doWhilst,\n      during: during,\n      each: eachLimit,\n      eachLimit: eachLimit$1,\n      eachOf: eachOf,\n      eachOfLimit: eachOfLimit,\n      eachOfSeries: eachOfSeries,\n      eachSeries: eachSeries,\n      ensureAsync: ensureAsync,\n      every: every,\n      everyLimit: everyLimit,\n      everySeries: everySeries,\n      filter: filter,\n      filterLimit: filterLimit,\n      filterSeries: filterSeries,\n      forever: forever,\n      log: log,\n      map: map,\n      mapLimit: mapLimit,\n      mapSeries: mapSeries,\n      mapValues: mapValues,\n      mapValuesLimit: mapValuesLimit,\n      mapValuesSeries: mapValuesSeries,\n      memoize: memoize,\n      nextTick: nextTick,\n      parallel: parallelLimit,\n      parallelLimit: parallelLimit$1,\n      priorityQueue: priorityQueue,\n      queue: queue$1,\n      race: race,\n      reduce: reduce,\n      reduceRight: reduceRight,\n      reflect: reflect,\n      reflectAll: reflectAll,\n      reject: reject,\n      rejectLimit: rejectLimit,\n      rejectSeries: rejectSeries,\n      retry: retry,\n      retryable: retryable,\n      seq: seq,\n      series: series,\n      setImmediate: setImmediate$1,\n      some: some,\n      someLimit: someLimit,\n      someSeries: someSeries,\n      sortBy: sortBy,\n      timeout: timeout,\n      times: times,\n      timesLimit: timeLimit,\n      timesSeries: timesSeries,\n      transform: transform,\n      unmemoize: unmemoize,\n      until: until,\n      waterfall: waterfall,\n      whilst: whilst,\n\n      // aliases\n      all: every,\n      any: some,\n      forEach: eachLimit,\n      forEachSeries: eachSeries,\n      forEachLimit: eachLimit$1,\n      forEachOf: eachOf,\n      forEachOfSeries: eachOfSeries,\n      forEachOfLimit: eachOfLimit,\n      inject: reduce,\n      foldl: reduce,\n      foldr: reduceRight,\n      select: filter,\n      selectLimit: filterLimit,\n      selectSeries: filterSeries,\n      wrapSync: asyncify\n    };\n\n    exports['default'] = index;\n    exports.applyEach = applyEach;\n    exports.applyEachSeries = applyEachSeries;\n    exports.apply = apply$1;\n    exports.asyncify = asyncify;\n    exports.auto = auto;\n    exports.autoInject = autoInject;\n    exports.cargo = cargo;\n    exports.compose = compose;\n    exports.concat = concat;\n    exports.concatSeries = concatSeries;\n    exports.constant = constant;\n    exports.detect = detect;\n    exports.detectLimit = detectLimit;\n    exports.detectSeries = detectSeries;\n    exports.dir = dir;\n    exports.doDuring = doDuring;\n    exports.doUntil = doUntil;\n    exports.doWhilst = doWhilst;\n    exports.during = during;\n    exports.each = eachLimit;\n    exports.eachLimit = eachLimit$1;\n    exports.eachOf = eachOf;\n    exports.eachOfLimit = eachOfLimit;\n    exports.eachOfSeries = eachOfSeries;\n    exports.eachSeries = eachSeries;\n    exports.ensureAsync = ensureAsync;\n    exports.every = every;\n    exports.everyLimit = everyLimit;\n    exports.everySeries = everySeries;\n    exports.filter = filter;\n    exports.filterLimit = filterLimit;\n    exports.filterSeries = filterSeries;\n    exports.forever = forever;\n    exports.log = log;\n    exports.map = map;\n    exports.mapLimit = mapLimit;\n    exports.mapSeries = mapSeries;\n    exports.mapValues = mapValues;\n    exports.mapValuesLimit = mapValuesLimit;\n    exports.mapValuesSeries = mapValuesSeries;\n    exports.memoize = memoize;\n    exports.nextTick = nextTick;\n    exports.parallel = parallelLimit;\n    exports.parallelLimit = parallelLimit$1;\n    exports.priorityQueue = priorityQueue;\n    exports.queue = queue$1;\n    exports.race = race;\n    exports.reduce = reduce;\n    exports.reduceRight = reduceRight;\n    exports.reflect = reflect;\n    exports.reflectAll = reflectAll;\n    exports.reject = reject;\n    exports.rejectLimit = rejectLimit;\n    exports.rejectSeries = rejectSeries;\n    exports.retry = retry;\n    exports.retryable = retryable;\n    exports.seq = seq;\n    exports.series = series;\n    exports.setImmediate = setImmediate$1;\n    exports.some = some;\n    exports.someLimit = someLimit;\n    exports.someSeries = someSeries;\n    exports.sortBy = sortBy;\n    exports.timeout = timeout;\n    exports.times = times;\n    exports.timesLimit = timeLimit;\n    exports.timesSeries = timesSeries;\n    exports.transform = transform;\n    exports.unmemoize = unmemoize;\n    exports.until = until;\n    exports.waterfall = waterfall;\n    exports.whilst = whilst;\n    exports.all = every;\n    exports.allLimit = everyLimit;\n    exports.allSeries = everySeries;\n    exports.any = some;\n    exports.anyLimit = someLimit;\n    exports.anySeries = someSeries;\n    exports.find = detect;\n    exports.findLimit = detectLimit;\n    exports.findSeries = detectSeries;\n    exports.forEach = eachLimit;\n    exports.forEachSeries = eachSeries;\n    exports.forEachLimit = eachLimit$1;\n    exports.forEachOf = eachOf;\n    exports.forEachOfSeries = eachOfSeries;\n    exports.forEachOfLimit = eachOfLimit;\n    exports.inject = reduce;\n    exports.foldl = reduce;\n    exports.foldr = reduceRight;\n    exports.select = filter;\n    exports.selectLimit = filterLimit;\n    exports.selectSeries = filterSeries;\n    exports.wrapSync = asyncify;\n\n}));","/**\n * Buffer module. Exports an appropriate version of Buffer for the current\n * platform.\n */\nimport buffer_core = require('./buffer_core');\nimport BufferCoreArray = require('./buffer_core_array');\nimport BufferCoreArrayBuffer = require('./buffer_core_arraybuffer');\nimport BufferCoreImageData = require('./buffer_core_imagedata');\nimport {StringUtil, FindUtil} from './string_util';\nimport {isArrayBuffer, isArrayBufferView} from './util';\n\n// BC implementations earlier in the array are preferred.\nvar BufferCorePreferences: buffer_core.BufferCoreImplementation[] = [\n  BufferCoreArrayBuffer,\n  BufferCoreImageData,\n  BufferCoreArray\n];\n\nvar PreferredBufferCore: buffer_core.BufferCoreImplementation = (function(): buffer_core.BufferCoreImplementation {\n  var i: number, bci: buffer_core.BufferCoreImplementation;\n  for (i = 0; i < BufferCorePreferences.length; i++) {\n    bci = BufferCorePreferences[i];\n    if (bci.isAvailable()) return bci;\n  }\n  // Should never happen; Array works in all browsers.\n  throw new Error(\"This browser does not support any available BufferCore implementations.\");\n})();\n\n/**\n * Checks integer writes.\n */\nfunction checkInt(buffer: NodeBuffer, value: number, offset: number, ext: number, max: number, min: number) {\n  if (value > max || value < min) {\n    throw new TypeError('value is out of bounds');\n  } else if (offset + ext > buffer.length) {\n    throw new RangeError('index out of range');\n  }\n}\n\n/**\n * Checks floating point writes.\n */\nfunction checkFloat(buffer: NodeBuffer, value: number, offset: number, ext: number) {\n  if (offset + ext > buffer.length) {\n    throw new RangeError('index out of range');\n  }\n}\n\n/**\n * Check offset into buffer.\n */\nfunction checkOffset(offset: number, ext: number, length: number): void {\n  if (offset + ext > length) {\n    throw new RangeError('index out of range');\n  }\n}\n\n/**\n * MAX_INT for various byte sizes.\n */\nconst enum MaxInt {\n  INT0 = 0,\n  INT8 = 0x7F,\n  INT16 = 0x7FFF,\n  INT24 = 0x7FFFFF,\n  INT32 = 0x7FFFFFFF,\n  INT40 = 0x7FFFFFFFFF,\n  INT48 = 0x7FFFFFFFFFFF\n}\n\n/**\n * MIN_INT for various byte sizes.\n */\nconst enum MinInt {\n  INT0 = 0,\n  INT8 = -0x80,\n  INT16 = -0x8000,\n  INT24 = -0x800000,\n  INT32 = -0x80000000,\n  INT40 = -0x8000000000,\n  INT48 = -0x800000000000\n}\n\n/**\n * MAX_UINT for various sizes.\n */\nconst enum MaxUInt {\n  INT0 = 0,\n  INT8 = 0xFF,\n  INT16 = 0xFFFF,\n  INT24 = 0xFFFFFF,\n  INT32 = 0xFFFFFFFF,\n  INT40 = 0xFFFFFFFFFF,\n  INT48 = 0xFFFFFFFFFFFF\n}\n\nvar byte2maxint: {[byte: number]: number} = {};\nbyte2maxint[0] = MaxInt.INT0;\nbyte2maxint[1] = MaxInt.INT8;\nbyte2maxint[2] = MaxInt.INT16;\nbyte2maxint[3] = MaxInt.INT24;\nbyte2maxint[4] = MaxInt.INT32;\nbyte2maxint[5] = MaxInt.INT40;\nbyte2maxint[6] = MaxInt.INT48;\nvar byte2minint: {[byte: number]: number} = {};\nbyte2minint[0] = MinInt.INT0;\nbyte2minint[1] = MinInt.INT8;\nbyte2minint[2] = MinInt.INT16;\nbyte2minint[3] = MinInt.INT24;\nbyte2minint[4] = MinInt.INT32;\nbyte2minint[5] = MinInt.INT40;\nbyte2minint[6] = MinInt.INT48;\nvar byte2maxuint: {[byte: number]: number} = {};\nbyte2maxuint[0] = MaxUInt.INT0;\nbyte2maxuint[1] = MaxUInt.INT8;\nbyte2maxuint[2] = MaxUInt.INT16;\nbyte2maxuint[3] = MaxUInt.INT24;\nbyte2maxuint[4] = MaxUInt.INT32;\nbyte2maxuint[5] = MaxUInt.INT40;\nbyte2maxuint[6] = MaxUInt.INT48;\n\n/**\n * We extend Node's buffer interface to account for differences in the browser\n * environment.\n */\nexport interface BFSBuffer extends NodeBuffer {\n  // It's not tractable to emulate array indexing by defining numeric properties\n  // for each index of the buffer, so we have getters/setters.\n  get(index: number): number;\n  set(index: number, value: number): void;\n  // Used by backends to get the backing data.\n  getBufferCore(): buffer_core.BufferCore;\n  // Used by backends in conjunction with getBufferCore() and the length\n  // property to determine which segment of the backing memory is applicable\n  // for a given operation.\n  getOffset(): number;\n  // Like Buffer.slice, but copies the Buffer contents.\n  sliceCopy(start?: number, end?: number): NodeBuffer\n}\n\n/**\n * Superset of the Buffer singleton described in node.d.ts.\n */\nexport interface BFSBufferImplementation {\n  new (ab: ArrayBuffer): NodeBuffer;\n  new (str: string, encoding?: string): NodeBuffer;\n  new (size: number): NodeBuffer;\n  new (array: any[]): NodeBuffer;\n  isBuffer(obj: any): obj is NodeBuffer;\n  byteLength(string: string, encoding?: string): number;\n  concat(list: NodeBuffer[], totalLength?: number): NodeBuffer;\n}\n\n/**\n * A JSONified Buffer object.\n */\nexport interface JSONBufferObject {\n  type: string;\n  data: number[];\n}\n\n/**\n * Emulates Node's Buffer API. Wraps a BufferCore object that is responsible\n * for actually writing/reading data from some data representation in memory.\n */\nexport class Buffer implements BFSBuffer {\n  // Note: This array property is *not* true, but it's required to satisfy\n  //       TypeScript typings.\n  // Note: DO NOT initialize any member properties up here! It will prevent\n  //       users from calling Buffer w/o `new`.\n  [idx: number]: number;\n  private data: buffer_core.BufferCore;\n  private offset: number;\n  public length: number;\n\n  /**\n   * Constructs a buffer.\n   * @param arg1 - Instantiate a buffer of the indicated size, or\n   *   from the indicated Array or String.\n   * @param [arg2=\"utf8\"] - Encoding to use if arg1 is a string\n   */\n  constructor (size: number);\n  constructor (data: any[]);\n  constructor (data: ArrayBufferView);\n  constructor (data: ArrayBuffer);\n  constructor (data: NodeBuffer);\n  constructor (data: JSONBufferObject);\n  constructor (data: string, encoding?: string);\n  constructor (data: buffer_core.BufferCore, start?: number, end?: number);\n  constructor (arg1: any, arg2: any = 'utf8', arg3?: number) {\n    var i: number;\n    // Node apparently allows you to construct buffers w/o 'new'.\n    if (!(this instanceof Buffer)) {\n      return new Buffer(arg1, arg2);\n    }\n    this.offset = 0;\n\n    if (arg1 instanceof buffer_core.BufferCoreCommon) {\n      // constructor (data: buffer_core.BufferCore, start?: number, end?: number)\n      this.data = <buffer_core.BufferCore> arg1;\n      var start = typeof arg2 === 'number' ? <number><any> arg2 : 0;\n      var end = typeof arg3 === 'number' ? <number> arg3 : this.data.getLength();\n      this.offset = start;\n      this.length = end - start;\n    } else if (typeof arg1 === 'number') {\n      // constructor (size: number);\n      if (arg1 !== (arg1 >>> 0)) {\n        throw new RangeError('Buffer size must be a uint32.');\n      }\n      this.length = arg1;\n      this.data = new PreferredBufferCore(arg1);\n    } else if (isArrayBufferView(arg1)) {\n      // constructor (data: ArrayBufferView);\n      this.data = new BufferCoreArrayBuffer(arg1);\n      this.length = arg1.byteLength;\n    } else if (isArrayBuffer(arg1)) {\n      // constructor (data: ArrayBuffer);\n      // Note: Can't do 'instanceof ArrayBuffer' in Safari in some cases. :|\n      this.data = new BufferCoreArrayBuffer(<ArrayBuffer> arg1);\n      this.length = arg1.byteLength;\n    } else if (arg1 instanceof Buffer) {\n      // constructor (data: Buffer);\n      var argBuff = <Buffer> arg1;\n      this.data = new PreferredBufferCore(arg1.length);\n      this.length = arg1.length;\n      argBuff.copy(this);\n    } else if (Array.isArray(arg1) || (arg1 != null && typeof arg1 === 'object' && typeof arg1[0] === 'number')) {\n      // constructor (data: number[]);\n      this.data = new PreferredBufferCore(arg1.length);\n      for (i = 0; i < arg1.length; i++) {\n        this.data.writeUInt8(i, arg1[i]);\n      }\n      this.length = arg1.length;\n    } else if (typeof arg1 === 'string') {\n      // constructor (data: string, encoding?: string);\n      this.length = Buffer.byteLength(arg1, arg2);\n      this.data = new PreferredBufferCore(this.length);\n      this.write(arg1, 0, this.length, arg2);\n    } else {\n      // constructor (data: {type: string; data: number[]}, encoding?: string)\n      if (arg1['type'] === 'Buffer' && Array.isArray(arg1['data'])) {\n        this.data = new PreferredBufferCore(arg1.data.length);\n        for (i = 0; i < arg1.data.length; i++) {\n          this.data.writeUInt8(i, arg1.data[i]);\n        }\n        this.length = arg1.data.length;\n      } else {\n        throw new Error(\"Invalid argument to Buffer constructor: \" + arg1);\n      }\n    }\n  }\n\n  /* TEST METHODS BEGIN */\n\n  public static getAvailableBufferCores(): buffer_core.BufferCoreImplementation[] {\n    return BufferCorePreferences.filter((bci) => bci.isAvailable());\n  }\n\n  public static getPreferredBufferCore(): buffer_core.BufferCoreImplementation {\n    return PreferredBufferCore;\n  }\n\n  public static setPreferredBufferCore(bci: buffer_core.BufferCoreImplementation) {\n    PreferredBufferCore = bci;\n  }\n\n  /* TEST METHODS END */\n\n  public getBufferCore(): buffer_core.BufferCore {\n    return this.data;\n  }\n\n  public getOffset(): number {\n    return this.offset;\n  }\n\n  /**\n   * **NONSTANDARD**: Set the octet at index. Emulates NodeJS buffer's index\n   * operation. Octet can be signed or unsigned.\n   * @param {number} index - the index to set the value at\n   * @param {number} value - the value to set at the given index\n   */\n  public set(index: number, value: number): number {\n    // In Node, the following happens:\n    // buffer[0] = -1;\n    // buffer[0]; // 255\n    if (value < 0) {\n      return this.writeInt8(value, index);\n    } else {\n      return this.writeUInt8(value, index);\n    }\n  }\n\n  /**\n   * **NONSTANDARD**: Get the octet at index.\n   * @param {number} index - index to fetch the value at\n   * @return {number} the value at the given index\n   */\n  public get(index: number): number {\n    return this.readUInt8(index);\n  }\n\n  /**\n   * Writes string to the buffer at offset using the given encoding.\n   * If buffer did not contain enough space to fit the entire string, it will\n   * write a partial amount of the string.\n   * @param {string} str - Data to be written to buffer\n   * @param {number} [offset=0] - Offset in the buffer to write to\n   * @param {number} [length=this.length] - Number of bytes to write\n   * @param {string} [encoding=utf8] - Character encoding\n   * @return {number} Number of octets written.\n   */\n  public write(str: string, offset = 0, length = this.length, encoding = 'utf8'): number {\n    // I hate Node's optional arguments.\n    if (typeof offset === 'string') {\n      // 'str' and 'encoding' specified\n      encoding = \"\" + offset;\n      offset = 0;\n      length = this.length;\n    } else if (typeof length === 'string') {\n      // 'str', 'offset', and 'encoding' specified\n      encoding = \"\" + length;\n      length = this.length;\n    }\n    // Check for invalid offsets.\n    if (offset > this.length || offset < 0) {\n      throw new RangeError(\"Invalid offset.\");\n    }\n    var strUtil = FindUtil(encoding);\n    // Are we trying to write past the buffer?\n    length = length + offset > this.length ? this.length - offset : length;\n    offset += this.offset;\n    return strUtil.str2byte(str,\n      // Avoid creating a slice unless it's needed.\n      offset === 0 && length === this.length ? this : new Buffer(this.data, offset, length + offset));\n  }\n\n  /**\n   * Decodes a portion of the Buffer into a String.\n   * @param {string} encoding - Character encoding to decode to\n   * @param {number} [start=0] - Start position in the buffer\n   * @param {number} [end=this.length] - Ending position in the buffer\n   * @return {string} A string from buffer data encoded with encoding, beginning\n   *   at start, and ending at end.\n   */\n  public toString(encoding = 'utf8', start = 0, end = this.length): string {\n    if (!(start <= end)) {\n      throw new Error(\"Invalid start/end positions: \" + start + \" - \" + end);\n    }\n    if (start === end) {\n      return '';\n    }\n    if (end > this.length) {\n      end = this.length;\n    }\n    var strUtil = FindUtil(encoding);\n    // Get the string representation of the given slice. Create a new buffer\n    // if need be.\n    return strUtil.byte2str(start === 0 && end === this.length ? this : new Buffer(this.data, start + this.offset, end + this.offset));\n  }\n\n  /**\n   * Returns a JSON-representation of the Buffer instance, which is identical to\n   * the output for JSON Arrays. JSON.stringify implicitly calls this function\n   * when stringifying a Buffer instance.\n   * @return {object} An object that can be used for JSON stringification.\n   */\n  public toJSON(): JSONBufferObject {\n    // Construct a byte array for the JSON 'data'.\n    var len = this.length;\n    var byteArr = new Array(len);\n    for (var i = 0; i < len; i++) {\n      byteArr[i] = this.readUInt8(i);\n    }\n    return {\n      type: 'Buffer',\n      data: byteArr\n    };\n  }\n\n  /**\n   * Returns a string with the first 50 hexadecimal values of the Buffer.\n   */\n  public inspect(): string {\n    var digits: string[] = [], i: number, len = this.length < INSPECT_MAX_BYTES ? this.length : INSPECT_MAX_BYTES;\n    for (i = 0; i < len; i++) {\n      digits.push(this.readUInt8(i).toString(16));\n    }\n    return `<Buffer ${digits.join(\" \")}${this.length > len ? \" ... \" : \"\"}>`;\n  }\n\n  /**\n   * Converts the buffer into an ArrayBuffer. Will attempt to use an underlying\n   * ArrayBuffer, but will need to copy the data if the underlaying object is an\n   * ArrayBufferView or not an ArrayBuffer.\n   */\n  public toArrayBuffer(): ArrayBuffer {\n    var buffCore = this.getBufferCore();\n    if (buffCore instanceof BufferCoreArrayBuffer) {\n      var dv = buffCore.getDataView(),\n        ab = dv.buffer;\n      // Ensure 1-1 mapping from AB to Buffer.\n      if (this.offset === 0 && dv.byteOffset === 0 && dv.byteLength === ab.byteLength && this.length === dv.byteLength) {\n        return ab;\n      } else {\n        return ab.slice(this.offset + dv.byteOffset, this.length);\n      }\n    } else {\n      var ab = new ArrayBuffer(this.length),\n        newBuff = new Buffer(ab);\n      this.copy(newBuff, 0, 0, this.length);\n      return ab;\n    }\n  }\n\n  /**\n   * Converts the buffer into a Uint8Array. Will attempt to use an underlying\n   * ArrayBuffer, but will need to copy the data if the Buffer is not backed\n   * by an ArrayBuffer.\n   */\n  public toUint8Array(): Uint8Array {\n    var buffCore = this.getBufferCore();\n    if (buffCore instanceof BufferCoreArrayBuffer) {\n      var dv = buffCore.getDataView(),\n        ab = dv.buffer,\n        offset = this.offset + dv.byteOffset,\n        length = this.length;\n\n      return new Uint8Array(ab).subarray(offset, offset + length);\n    } else {\n      var ab = new ArrayBuffer(this.length),\n        newBuff = new Buffer(ab);\n      this.copy(newBuff, 0, 0, this.length);\n      return new Uint8Array(ab);\n    }\n  }\n\n  /**\n   * Operates similar to Array#indexOf(). Accepts a String, Buffer or Number.\n   * Strings are interpreted as UTF8. Buffers will use the entire buffer. So in order\n   * to compare a partial Buffer use Buffer#slice(). Numbers can range from 0 to 255.\n   */\n  public indexOf(value: string | NodeBuffer | number, byteOffset: number = 0): number {\n    var normalizedValue: NodeBuffer;\n    if (typeof(value) === 'string') {\n      normalizedValue = new Buffer(<string> value, 'utf8');\n    } else if (Buffer.isBuffer(value)) {\n      normalizedValue = value;\n    } else if (typeof(value) === 'number') {\n      normalizedValue = new Buffer([<number> value]);\n    } else {\n      throw new TypeError(`indexOf only operates on strings, buffers, and numbers.`);\n    }\n\n    // Node's normalization code.\n    if (byteOffset > 0x7fffffff) {\n      byteOffset = 0x7fffffff;\n    } else if (byteOffset < -0x80000000) {\n      byteOffset = -0x80000000;\n    }\n    byteOffset >>= 0;\n\n    // Negative offsets are from the end of the array.\n    if (byteOffset < 0) {\n      byteOffset = this.length + byteOffset;\n      if (byteOffset < 0) {\n        // If the calculated index is less than 0, then the whole array will be searched.\n        byteOffset = 0;\n      }\n    }\n\n    var valOffset = 0, currentVal: number, valLen = normalizedValue.length,\n      bufLen = this.length;\n    // Edge-case: Can't indexOf with zero-length data.\n    if (valLen === 0) {\n      return -1;\n    }\n\n    while (valOffset < valLen && byteOffset < bufLen) {\n      if (normalizedValue.readUInt8(valOffset) == this.readUInt8(byteOffset)) {\n        valOffset++;\n      } else {\n        // Doesn't match. Restart search.\n        valOffset = 0;\n      }\n      byteOffset++;\n    }\n\n    if (valOffset == valLen) {\n      return byteOffset - valLen;\n    } else {\n      return -1;\n    }\n  }\n\n  /**\n   * Does copy between buffers. The source and target regions can be overlapped.\n   * All values passed that are undefined/NaN or are out of bounds are set equal\n   * to their respective defaults.\n   * @param {Buffer} target - Buffer to copy into\n   * @param {number} [targetStart=0] - Index to start copying to in the targetBuffer\n   * @param {number} [sourceStart=0] - Index in this buffer to start copying from\n   * @param {number} [sourceEnd=this.length] - Index in this buffer stop copying at\n   * @return {number} The number of bytes copied into the target buffer.\n   */\n  public copy(target: NodeBuffer, targetStart = 0, sourceStart = 0, sourceEnd = this.length): number {\n    if (sourceStart < 0) {\n      throw new RangeError('sourceStart out of bounds');\n    }\n    if (sourceEnd < 0) {\n      throw new RangeError('sourceEnd out of bounds');\n    }\n    if (targetStart < 0) {\n      throw new RangeError(\"targetStart out of bounds\");\n    }\n\n    if (sourceEnd <= sourceStart || sourceStart >= this.length || targetStart > target.length) {\n      return 0;\n    }\n\n    var bytesCopied = Math.min(sourceEnd - sourceStart, target.length - targetStart, this.length - sourceStart);\n\n    // Fast path.\n    if (target instanceof Buffer && this.data instanceof BufferCoreArrayBuffer) {\n      let targetCore = target.getBufferCore();\n      if (targetCore instanceof BufferCoreArrayBuffer) {\n        return (<BufferCoreArrayBuffer> this.data).copyTo(targetCore, targetStart + target.offset, sourceStart + this.offset, sourceStart + bytesCopied + this.offset);\n      }\n    }\n\n    // Copy as many 32-bit chunks as possible.\n    // TODO: Alignment.\n    for (let i = 0; i < bytesCopied - 3; i += 4) {\n      target.writeInt32LE(this.readInt32LE(sourceStart + i), targetStart + i);\n    }\n    // Copy any remaining bytes, if applicable\n    for (let i = bytesCopied & 0xFFFFFFFC; i < bytesCopied; i++) {\n      target.writeUInt8(this.readUInt8(sourceStart + i), targetStart + i);\n    }\n    return bytesCopied;\n  }\n\n  /**\n   * Returns a slice of this buffer.\n   * @param {number} [start=0] - Index to start slicing from\n   * @param {number} [end=this.length] - Index to stop slicing at\n   * @return {Buffer} A new buffer which references the same\n   *   memory as the old, but offset and cropped by the start (defaults to 0) and\n   *   end (defaults to buffer.length) indexes. Negative indexes start from the end\n   *   of the buffer.\n   */\n  public slice(start = 0, end = this.length): NodeBuffer {\n    start = start >> 0;\n    end = end >> 0;\n    // Translate negative indices to positive ones.\n    if (start < 0) {\n      start += this.length;\n      if (start < 0) {\n        start = 0;\n      }\n    }\n    if (end < 0) {\n      end += this.length;\n      if (end < 0) {\n        end = 0;\n      }\n    }\n    if (end > this.length) {\n      end = this.length;\n    }\n    if (start > end) {\n      start = end;\n    }\n\n    // Sanity check.\n    if (start < 0 || end < 0 || start > this.length || end > this.length) {\n      throw new Error(\"Invalid slice indices.\");\n    }\n    // Create a new buffer backed by the same BufferCore.\n    return new Buffer(this.data, start + this.offset, end + this.offset);\n  }\n\n  /**\n   * [NONSTANDARD] A copy-based version of Buffer.slice.\n   */\n  public sliceCopy(start: number = 0, end: number = this.length): NodeBuffer {\n    // Translate negative indices to positive ones.\n    if (start < 0) {\n      start += this.length;\n      if (start < 0) {\n        start = 0;\n      }\n    }\n    if (end < 0) {\n      end += this.length;\n      if (end < 0) {\n        end = 0;\n      }\n    }\n    if (end > this.length) {\n      end = this.length;\n    }\n    if (start > end) {\n      start = end;\n    }\n\n    // Sanity check.\n    if (start < 0 || end < 0 || start >= this.length || end > this.length) {\n      throw new Error(\"Invalid slice indices.\");\n    }\n\n    // Copy the BufferCore.\n    return new Buffer(this.data.copy(start + this.offset, end + this.offset));\n  }\n\n  /**\n   * Fills the buffer with the specified value. If the offset and end are not\n   * given it will fill the entire buffer.\n   * @param {(string|number)} value - The value to fill the buffer with\n   * @param {number} [offset=0]\n   * @param {number} [end=this.length]\n   */\n  public fill(value: any, offset = 0, end = this.length): NodeBuffer {\n    var i: number;\n    offset = offset >> 0;\n    end = end >> 0;\n\n    if (offset < 0 || end > this.length) {\n      throw new RangeError('out of range index');\n    } else if (end <= offset) {\n      return this;\n    }\n\n    if (typeof value !== 'string') {\n      // Coerces various things to numbers. Node does this.\n      value = value >>> 0;\n    } else if (value.length === 1) {\n      var code = value.charCodeAt(0);\n      if (code < 256) {\n        value = code;\n      }\n    }\n\n    if (typeof value === 'number') {\n      offset += this.offset;\n      end += this.offset;\n      this.data.fill(value, offset, end);\n    } else if (value.length > 0) {\n      var byteLen = Buffer.byteLength(value, 'utf8'),\n        lastBulkWrite = end - byteLen;\n      while (offset < lastBulkWrite) {\n        this.write(value, offset, byteLen, 'utf8');\n        offset += byteLen;\n      }\n      if (offset < end) {\n        this.write(value, offset, end - offset, 'utf8');\n      }\n    }\n    return this;\n  }\n\n  public readUIntLE(offset: number, byteLength: number, noAssert = false): number {\n    offset = offset >>> 0;\n    byteLength = byteLength >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, byteLength, this.length);\n    }\n    offset += this.offset;\n    var value: number = 0;\n    switch (byteLength) {\n      case 1:\n        return this.data.readUInt8(offset);\n      case 2:\n        return this.data.readUInt16LE(offset);\n      case 3:\n        return this.data.readUInt8(offset) | (this.data.readUInt16LE(offset + 1) << 8);\n      case 4:\n        return this.data.readUInt32LE(offset);\n      case 6:\n        // Shift right by 40 bits.\n        // (Note: We shift by 23 to avoid introducing a sign bit!)\n        value += (this.data.readUInt8(offset + 5) << 23) * 0x20000;\n        // FALL-THRU\n      case 5:\n        // Shift right by 32 bits.\n        value += (this.data.readUInt8(offset + 4) << 23) * 0x200;\n        return value + this.data.readUInt32LE(offset);\n      default:\n        throw new Error(`Invalid byteLength: ${byteLength}`);\n    }\n  }\n\n  public readUIntBE(offset: number, byteLength: number, noAssert = false): number {\n    offset = offset >>> 0;\n    byteLength = byteLength >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, byteLength, this.length);\n    }\n    offset += this.offset;\n    var value: number = 0;\n    switch (byteLength) {\n      case 1:\n        return this.data.readUInt8(offset);\n      case 2:\n        return this.data.readUInt16BE(offset);\n      case 3:\n        return this.data.readUInt8(offset + 2) | (this.data.readUInt16BE(offset) << 8);\n      case 4:\n        return this.data.readUInt32BE(offset);\n      case 6:\n        // Shift right by 40 bits.\n        // (Note: We shift by 23 to avoid introducing a sign bit!)\n        value += (this.data.readUInt8(offset) << 23) * 0x20000;\n        offset++;\n        // FALL-THRU\n      case 5:\n        // Shift right by 32 bits.\n        value += (this.data.readUInt8(offset) << 23) * 0x200;\n        return value + this.data.readUInt32BE(offset + 1);\n      default:\n        throw new Error(`Invalid byteLength: ${byteLength}`);\n    }\n  }\n\n  public readIntLE(offset: number, byteLength: number, noAssert = false): number {\n    offset = offset >>> 0;\n    byteLength = byteLength >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, byteLength, this.length);\n    }\n    offset += this.offset;\n    switch (byteLength) {\n      case 1:\n        return this.data.readInt8(offset);\n      case 2:\n        return this.data.readInt16LE(offset);\n      case 3:\n        return this.data.readUInt8(offset) | (this.data.readInt16LE(offset + 1) << 8);\n      case 4:\n        return this.data.readInt32LE(offset);\n      case 6:\n        // Shift right by 40 bits.\n        // (Note: We shift by 23 to avoid introducing a sign bit!)\n        return ((this.data.readInt8(offset + 5) << 23) * 0x20000) + this.readUIntLE(offset - this.offset, 5, noAssert);\n      case 5:\n        // Shift right by 32 bits.\n        return ((this.data.readInt8(offset + 4) << 23) * 0x200) + this.data.readUInt32LE(offset);\n      default:\n        throw new Error(`Invalid byteLength: ${byteLength}`);\n    }\n  }\n\n  public readIntBE(offset: number, byteLength: number, noAssert = false): number {\n    offset = offset >>> 0;\n    byteLength = byteLength >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, byteLength, this.length);\n    }\n    offset += this.offset;\n    switch (byteLength) {\n      case 1:\n        return this.data.readInt8(offset);\n      case 2:\n        return this.data.readInt16BE(offset);\n      case 3:\n        return this.data.readUInt8(offset + 2) | (this.data.readInt16BE(offset) << 8);\n      case 4:\n        return this.data.readInt32BE(offset);\n      case 6:\n        // Shift right by 40 bits.\n        // (Note: We shift by 23 to avoid introducing a sign bit!)\n        return ((this.data.readInt8(offset) << 23) * 0x20000) + this.readUIntBE(offset - this.offset + 1, 5, noAssert);\n      case 5:\n        // Shift right by 32 bits.\n        return ((this.data.readInt8(offset) << 23) * 0x200) + this.data.readUInt32BE(offset + 1);\n      default:\n        throw new Error(`Invalid byteLength: ${byteLength}`);\n    }\n  }\n\n  public readUInt8(offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, 1, this.length);\n    }\n    offset += this.offset;\n    return this.data.readUInt8(offset);\n  }\n\n  public readUInt16LE(offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, 2, this.length);\n    }\n    offset += this.offset;\n    return this.data.readUInt16LE(offset);\n  }\n\n  public readUInt16BE(offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, 2, this.length);\n    }\n    offset += this.offset;\n    return this.data.readUInt16BE(offset);\n  }\n\n  public readUInt32LE(offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, 4, this.length);\n    }\n    offset += this.offset;\n    return this.data.readUInt32LE(offset);\n  }\n\n  public readUInt32BE(offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, 4, this.length);\n    }\n    offset += this.offset;\n    return this.data.readUInt32BE(offset);\n  }\n\n  public readInt8(offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, 1, this.length);\n    }\n    offset += this.offset;\n    return this.data.readInt8(offset);\n  }\n\n  public readInt16LE(offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, 2, this.length);\n    }\n    offset += this.offset;\n    return this.data.readInt16LE(offset);\n  }\n\n  public readInt16BE(offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, 2, this.length);\n    }\n    offset += this.offset;\n    return this.data.readInt16BE(offset);\n  }\n\n  public readInt32LE(offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, 4, this.length);\n    }\n    offset += this.offset;\n    return this.data.readInt32LE(offset);\n  }\n\n  public readInt32BE(offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, 4, this.length);\n    }\n    offset += this.offset;\n    return this.data.readInt32BE(offset);\n  }\n\n  public readFloatLE(offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, 4, this.length);\n    }\n    offset += this.offset;\n    return this.data.readFloatLE(offset);\n  }\n\n  public readFloatBE(offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, 4, this.length);\n    }\n    offset += this.offset;\n    return this.data.readFloatBE(offset);\n  }\n\n  public readDoubleLE(offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, 8, this.length);\n    }\n    offset += this.offset;\n    return this.data.readDoubleLE(offset);\n  }\n\n  public readDoubleBE(offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, 8, this.length);\n    }\n    offset += this.offset;\n    return this.data.readDoubleBE(offset);\n  }\n\n  public writeUIntLE(value: number, offset: number, byteLength: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkInt(this, value, offset, byteLength, byte2maxuint[byteLength], 0);\n    }\n    var rv = offset + byteLength;\n    offset += this.offset;\n    switch (byteLength) {\n      case 1:\n        this.data.writeUInt8(offset, value);\n        break;\n      case 2:\n        this.data.writeUInt16LE(offset, value);\n        break;\n      case 3:\n        this.data.writeUInt8(offset, value & 0xFF);\n        this.data.writeUInt16LE(offset + 1, value >> 8);\n        break;\n      case 4:\n        this.data.writeUInt32LE(offset, value);\n        break;\n      case 6:\n        this.data.writeUInt8(offset, value & 0xFF);\n        // \"Bit shift\", since we're over 32-bits.\n        value = Math.floor(value / 256);\n        offset++;\n        // FALL-THRU\n      case 5:\n        this.data.writeUInt8(offset, value & 0xFF);\n        // \"Bit shift\", since we're over 32-bits.\n        value = Math.floor(value / 256);\n        this.data.writeUInt32LE(offset + 1, value);\n        break;\n      default:\n        throw new Error(`Invalid byteLength: ${byteLength}`);\n    }\n    return rv;\n  }\n\n  public writeUIntBE(value: number, offset: number, byteLength: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkInt(this, value, offset, byteLength, byte2maxuint[byteLength], 0);\n    }\n    var rv = offset + byteLength;\n    offset += this.offset;\n    switch (byteLength) {\n      case 1:\n        this.data.writeUInt8(offset, value);\n        break;\n      case 2:\n        this.data.writeUInt16BE(offset, value);\n        break;\n      case 3:\n        this.data.writeUInt8(offset + 2, value & 0xFF);\n        this.data.writeUInt16BE(offset, value >> 8);\n        break;\n      case 4:\n        this.data.writeUInt32BE(offset, value);\n        break;\n      case 6:\n        this.data.writeUInt8(offset + 5, value & 0xFF);\n        // \"Bit shift\", since we're over 32-bits.\n        value = Math.floor(value / 256);\n        // FALL-THRU\n      case 5:\n        this.data.writeUInt8(offset + 4, value & 0xFF);\n        // \"Bit shift\", since we're over 32-bits.\n        value = Math.floor(value / 256);\n        this.data.writeUInt32BE(offset, value);\n        break;\n      default:\n        throw new Error(`Invalid byteLength: ${byteLength}`);\n    }\n    return rv;\n  }\n\n  public writeIntLE(value: number, offset: number, byteLength: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkInt(this, value, offset, byteLength, byte2maxint[byteLength], byte2minint[byteLength]);\n    }\n    var rv = offset + byteLength;\n    offset += this.offset;\n    switch (byteLength) {\n      case 1:\n        this.data.writeInt8(offset, value);\n        break;\n      case 2:\n        this.data.writeInt16LE(offset, value);\n        break;\n      case 3:\n        this.data.writeUInt8(offset, value & 0xFF);\n        this.data.writeInt16LE(offset + 1, value >> 8);\n        break;\n      case 4:\n        this.data.writeInt32LE(offset, value);\n        break;\n      case 6:\n        this.data.writeUInt8(offset, value & 0xFF);\n        // \"Bit shift\", since we're over 32-bits.\n        value = Math.floor(value / 256);\n        offset++;\n        // FALL-THRU\n      case 5:\n        this.data.writeUInt8(offset, value & 0xFF);\n        // \"Bit shift\", since we're over 32-bits.\n        value = Math.floor(value / 256);\n        this.data.writeInt32LE(offset + 1, value);\n        break;\n      default:\n        throw new Error(`Invalid byteLength: ${byteLength}`);\n    }\n    return rv;\n  }\n\n  public writeIntBE(value: number, offset: number, byteLength: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkInt(this, value, offset, byteLength, byte2maxint[byteLength], byte2minint[byteLength]);\n    }\n    var rv = offset + byteLength;\n    offset += this.offset;\n    switch (byteLength) {\n      case 1:\n        this.data.writeInt8(offset, value);\n        break;\n      case 2:\n        this.data.writeInt16BE(offset, value);\n        break;\n      case 3:\n        this.data.writeUInt8(offset + 2, value & 0xFF);\n        this.data.writeInt16BE(offset, value >> 8);\n        break;\n      case 4:\n        this.data.writeInt32BE(offset, value);\n        break;\n      case 6:\n        this.data.writeUInt8(offset + 5, value & 0xFF);\n        // \"Bit shift\", since we're over 32-bits.\n        value = Math.floor(value / 256);\n        // FALL-THRU\n      case 5:\n        this.data.writeUInt8(offset + 4, value & 0xFF);\n        // \"Bit shift\", since we're over 32-bits.\n        value = Math.floor(value / 256);\n        this.data.writeInt32BE(offset, value);\n        break;\n      default:\n        throw new Error(`Invalid byteLength: ${byteLength}`);\n    }\n    return rv;\n  }\n\n  public writeUInt8(value: number, offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkInt(this, value, offset, 1, MaxUInt.INT8, 0);\n    }\n    this.data.writeUInt8(offset + this.offset, value);\n    return offset + 1;\n  }\n\n  public writeUInt16LE(value: number, offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkInt(this, value, offset, 2, MaxUInt.INT16, 0);\n    }\n    this.data.writeUInt16LE(offset + this.offset, value);\n    return offset + 2;\n  }\n\n  public writeUInt16BE(value: number, offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkInt(this, value, offset, 2, MaxUInt.INT16, 0);\n    }\n    this.data.writeUInt16BE(offset + this.offset, value);\n    return offset + 2;\n  }\n\n  public writeUInt32LE(value: number, offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkInt(this, value, offset, 4, MaxUInt.INT32, 0);\n    }\n    this.data.writeUInt32LE(offset + this.offset, value);\n    return offset + 4;\n  }\n\n  public writeUInt32BE(value: number, offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkInt(this, value, offset, 4, MaxUInt.INT32, 0);\n    }\n    this.data.writeUInt32BE(offset + this.offset, value);\n    return offset + 4;\n  }\n\n  public writeInt8(value: number, offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkInt(this, value, offset, 1, MaxInt.INT8, MinInt.INT8);\n    }\n    this.data.writeInt8(offset + this.offset, value);\n    return offset + 1;\n  }\n\n  public writeInt16LE(value: number, offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkInt(this, value, offset, 2, MaxInt.INT16, MinInt.INT16);\n    }\n    this.data.writeInt16LE(offset + this.offset, value);\n    return offset + 2;\n  }\n\n  public writeInt16BE(value: number, offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkInt(this, value, offset, 2, MaxInt.INT16, MinInt.INT16);\n    }\n    this.data.writeInt16BE(offset + this.offset, value);\n    return offset + 2;\n  }\n\n  public writeInt32LE(value: number, offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkInt(this, value, offset, 4, MaxInt.INT32, MinInt.INT32);\n    }\n    this.data.writeInt32LE(offset + this.offset, value);\n    return offset + 4;\n  }\n\n  public writeInt32BE(value: number, offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkInt(this, value, offset, 4, MaxInt.INT32, MinInt.INT32);\n    }\n    this.data.writeInt32BE(offset + this.offset, value);\n    return offset + 4;\n  }\n\n  public writeFloatLE(value: number, offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkFloat(this, value, offset, 4);\n    }\n    this.data.writeFloatLE(offset + this.offset, value);\n    return offset + 4;\n  }\n\n  public writeFloatBE(value: number, offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkFloat(this, value, offset, 4);\n    }\n    this.data.writeFloatBE(offset + this.offset, value);\n    return offset + 4;\n  }\n\n  public writeDoubleLE(value: number, offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkFloat(this, value, offset, 8);\n    }\n    this.data.writeDoubleLE(offset + this.offset, value);\n    return offset + 8;\n  }\n\n  public writeDoubleBE(value: number, offset: number, noAssert = false): number {\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkFloat(this, value, offset, 8);\n    }\n    this.data.writeDoubleBE(offset + this.offset, value);\n    return offset + 8;\n  }\n\n  ///**************************STATIC METHODS********************************///\n\n  /**\n   * Checks if enc is a valid string encoding type.\n   * @param {string} enc - Name of a string encoding type.\n   * @return {boolean} Whether or not enc is a valid encoding type.\n   */\n  public static isEncoding(enc: string): boolean {\n    try {\n      FindUtil(enc);\n    } catch (e) {\n      return false;\n    }\n    return true;\n  }\n\n  public static compare(a: NodeBuffer, b: NodeBuffer): number {\n    if (a === b) {\n      return 0;\n    } else {\n      var i: number,\n        aLen = a.length,\n        bLen = b.length,\n        cmpLength = Math.min(aLen, bLen),\n        u1: number, u2: number;\n      for (i = 0; i < cmpLength; i++) {\n        u1 = a.readUInt8(i);\n        u2 = b.readUInt8(i);\n        if (u1 !== u2) {\n          return u1 > u2 ? 1 : -1;\n        }\n      }\n      if (aLen === bLen) {\n        return 0;\n      } else {\n        return aLen > bLen ? 1 : -1;\n      }\n    }\n  }\n\n  /**\n   * Tests if obj is a Buffer.\n   * @param {object} obj - An arbitrary object\n   * @return {boolean} True if this object is a Buffer.\n   */\n  public static isBuffer(obj: any): obj is NodeBuffer {\n    return obj instanceof Buffer;\n  }\n\n  /**\n   * Gives the actual byte length of a string. This is not the same as\n   * String.prototype.length since that returns the number of characters in a\n   * string.\n   * @param {string} str - The string to get the byte length of\n   * @param {string} [encoding=utf8] - Character encoding of the string\n   * @return {number} The number of bytes in the string\n   */\n  public static byteLength(str: string, encoding: string = 'utf8'): number {\n    var strUtil: StringUtil;\n    try {\n      strUtil = FindUtil(encoding);\n    } catch (e) {\n      // Default to UTF8.\n      strUtil = FindUtil('utf8');\n    }\n    if (typeof(str) !== 'string') {\n      str = \"\" + str;\n    }\n    return strUtil.byteLength(str);\n  }\n\n  /**\n   * Returns a buffer which is the result of concatenating all the buffers in the\n   * list together.\n   * If the list has no items, or if the totalLength is 0, then it returns a\n   * zero-length buffer.\n   * If the list has exactly one item, then the first item of the list is\n   * returned.\n   * If the list has more than one item, then a new Buffer is created.\n   * If totalLength is not provided, it is read from the buffers in the list.\n   * However, this adds an additional loop to the function, so it is faster to\n   * provide the length explicitly.\n   * @param {Buffer[]} list - List of Buffer objects to concat\n   * @param {number} [totalLength] - Total length of the buffers when concatenated\n   * @return {Buffer}\n   */\n  public static concat(list: NodeBuffer[], totalLength?: number): NodeBuffer {\n    var item: NodeBuffer;\n    if (list.length === 0 || totalLength === 0) {\n      return new Buffer(0);\n    } else {\n      if (totalLength === undefined) {\n        // Calculate totalLength\n        totalLength = 0;\n        for (var i = 0; i < list.length; i++) {\n          item = list[i];\n          if (!Buffer.isBuffer(item)) {\n            throw new TypeError(`Concat only operates on Buffer objects.`);\n          }\n          totalLength += item.length;\n        }\n      }\n      var buf = new Buffer(totalLength);\n      var curPos = 0;\n      for (var j = 0; j < list.length; j++) {\n        item = list[j];\n        if (!Buffer.isBuffer(item)) {\n          throw new TypeError(`Concat only operates on Buffer objects.`);\n        }\n        curPos += item.copy(buf, curPos);\n      }\n      return buf;\n    }\n  }\n\n  /**\n   * Returns a boolean of whether this and otherBuffer have the same bytes.\n   */\n  public equals(buffer: NodeBuffer): boolean {\n    if (Buffer.isBuffer(buffer)) {\n      var i: number;\n      if (buffer.length !== this.length) {\n        return false;\n      } else {\n        // TODO: Bigger strides.\n        for (i = 0; i < this.length; i++) {\n          if (this.readUInt8(i) !== buffer.readUInt8(i)) {\n            return false;\n          }\n        }\n        return true;\n      }\n    } else {\n      throw new TypeError(`Argument must be a buffer.`);\n    }\n  }\n\n  /**\n   * Returns a number indicating whether this comes before or after or is\n   * the same as the otherBuffer in sort order.\n   */\n  public compare(buffer: NodeBuffer): number {\n    return Buffer.compare(this, buffer);\n  }\n}\n\n// Type-check the class.\nvar _: BFSBufferImplementation = Buffer;\n\n/**\n * Emulation of Node's SlowBuffer. We don't differentiate between the two.\n */\nexport class SlowBuffer extends Buffer implements NodeBuffer {\n  constructor (length: any, arg2?: any, arg3?: number) {\n    // Logic copied from Node; its constructor is simpler.\n    super(+length != length ? 0 : +length);\n    // Node apparently allows you to construct buffers w/o 'new'.\n    if (!(this instanceof SlowBuffer)) {\n      return new SlowBuffer(length, arg2, arg3);\n    }\n  }\n\n  public static isBuffer(obj: any): obj is NodeBuffer {\n    return Buffer.isBuffer(obj);\n  }\n\n  public static byteLength(str: string, encoding?: string): number {\n    return Buffer.byteLength(str, encoding);\n  }\n\n  public static concat(list: NodeBuffer[], totalLength?: number): NodeBuffer {\n    return Buffer.concat(list, totalLength);\n  }\n}\n// Type-check the class.\n_ = SlowBuffer;\n\n/**\n * Determines how many bytes to print via inspect().\n */\nexport var INSPECT_MAX_BYTES: number = 50;\n","/**\n * !!!NOTE: This file should not depend on any other file!!!\n *\n * Buffers are referenced everywhere, so it can cause a circular dependency.\n */\n\nvar FLOAT_POS_INFINITY = Math.pow(2, 128);\nvar FLOAT_NEG_INFINITY = -1 * FLOAT_POS_INFINITY;\nvar FLOAT_POS_INFINITY_AS_INT = 0x7F800000;\nvar FLOAT_NEG_INFINITY_AS_INT = -8388608;\nvar FLOAT_NaN_AS_INT = 0x7fc00000;\n\n/**\n * The core data-writing and reading methods of any buffer.\n */\nexport interface BufferCore {\n  /**\n   * Get the size of this buffer core, in bytes.\n   */\n  getLength(): number;\n  /**\n   * Writes bottom 8 bits of the given integer at the provided index.\n   */\n  writeInt8(i: number, data: number): void;\n  /**\n   * Writes bottom 16 bits of the given integer at the provided index.\n   * Little endian.\n   */\n  writeInt16LE(i: number, data: number): void;\n  /**\n   * Writes bottom 16 bits of the given integer at the provided index.\n   * Big endian.\n   */\n  writeInt16BE(i: number, data: number): void;\n  /**\n   * Writes all 32 bits of the given integer at the provided index.\n   * Little endian.\n   */\n  writeInt32LE(i: number, data: number): void;\n  /**\n   * Writes all 32 bits of the given integer at the provided index.\n   * Big endian.\n   */\n  writeInt32BE(i: number, data: number): void;\n  /**\n   * Writes the number as an 8 bit unsigned integer.\n   */\n  writeUInt8(i: number, data: number): void;\n  /**\n   * Writes the number as a 16 bit unsigned integer.\n   * Little endian.\n   */\n  writeUInt16LE(i: number, data: number): void;\n  /**\n   * Writes the number as a 16 bit unsigned integer.\n   * Big endian.\n   */\n  writeUInt16BE(i: number, data: number): void;\n  /**\n   * Writes the number as a 32 bit unsigned integer.\n   * Little endian.\n   */\n  writeUInt32LE(i: number, data: number): void;\n  /**\n   * Writes the number as a 32 bit unsigned integer.\n   * Big endian.\n   */\n  writeUInt32BE(i: number, data: number): void;\n  /**\n   * Writes the number as a 32-bit float.\n   * Little endian.\n   */\n  writeFloatLE(i: number, data: number): void;\n  /**\n   * Writes the number as a 32-bit float.\n   * Big endian.\n   */\n  writeFloatBE(i: number, data: number): void;\n  /**\n   * Writes the number as a 64-bit float.\n   * Little endian.\n   */\n  writeDoubleLE(i: number, data: number): void;\n  /**\n   * Writes the number as a 64-bit float.\n   * Big endian.\n   */\n  writeDoubleBE(i: number, data: number): void;\n  /**\n   * Reads the byte at the given index.\n   */\n  readInt8(i: number): number;\n  /**\n   * Reads the two bytes at the given index (little endian).\n   */\n  readInt16LE(i: number): number;\n  /**\n   * Reads the two bytes at the given index (big endian).\n   */\n  readInt16BE(i: number): number;\n  /**\n   * Reads the four bytes at the given index (little endian).\n   */\n  readInt32LE(i: number): number;\n  /**\n   * Reads the four bytes at the given index (big endian).\n   */\n  readInt32BE(i: number): number;\n  /**\n   * Reads the byte at the given index as an unsigned integer.\n   */\n  readUInt8(i: number): number;\n  /**\n   * Reads the two bytes at the given index as an unsigned integer (little endian).\n   */\n  readUInt16LE(i: number): number;\n  /**\n   * Reads the two bytes at the given index as an unsigned integer (big endian).\n   */\n  readUInt16BE(i: number): number;\n  /**\n   * Reads the four bytes at the given index as an unsigned integer (little endian).\n   */\n  readUInt32LE(i: number): number;\n  /**\n   * Reads the four bytes at the given index as an unsigned integer (big endian).\n   */\n  readUInt32BE(i: number): number;\n  /**\n   * Reads a 32-bit floating point number at the given index (little endian).\n   */\n  readFloatLE(i: number): number;\n  /**\n   * Reads a 32-bit floating point number at the given index (big endian).\n   */\n  readFloatBE(i: number): number;\n  /**\n   * Reads a 64-bit floating point number at the given index (little endian).\n   */\n  readDoubleLE(i: number): number;\n  /**\n   * Reads a 64-bit floating point number at the given index (big endian).\n   */\n  readDoubleBE(i: number): number;\n  /**\n   * Copies the contents of the buffer core, from start to end, into a new\n   * BufferCore.\n   * (the interval [start, end)).\n   */\n  copy(start: number, end: number): BufferCore;\n  /**\n   * Fills [start, end) with the given byte value.\n   */\n  fill(value: number, start: number, end: number): void;\n}\n\nexport interface BufferCoreImplementation {\n  /**\n   * The common constructor that all BufferCores need to support.\n   */\n  new(length: number): BufferCore;\n  /**\n   * Returns 'true' if the BufferCore is available in the current environment.\n   */\n  isAvailable(): boolean;\n  /**\n   * The name of this particular implementation. Used for unit testing purposes.\n   */\n  bufferType: string;\n}\n\n/**\n * Contains common definitions for most of the BufferCore classes.\n * Subclasses only need to implement write/readUInt8 for full functionality.\n */\nexport class BufferCoreCommon {\n  public getLength(): number {\n    throw new Error('BufferCore implementations should implement getLength.');\n  }\n  public writeInt8(i: number, data: number): void {\n    // Pack the sign bit as the highest bit.\n    // Note that we keep the highest bit in the value byte as the sign bit if it\n    // exists.\n    this.writeUInt8(i, (data & 0xFF) | ((data & 0x80000000) >>> 24));\n  }\n  public writeInt16LE(i: number, data: number): void {\n    this.writeUInt8(i, data & 0xFF);\n    // Pack the sign bit as the highest bit.\n    // Note that we keep the highest bit in the value byte as the sign bit if it\n    // exists.\n    this.writeUInt8(i+1, ((data >>> 8) & 0xFF) | ((data & 0x80000000) >>> 24));\n  }\n  public writeInt16BE(i: number, data: number): void {\n    this.writeUInt8(i+1, data & 0xFF);\n    // Pack the sign bit as the highest bit.\n    // Note that we keep the highest bit in the value byte as the sign bit if it\n    // exists.\n    this.writeUInt8(i, ((data >>> 8) & 0xFF) | ((data & 0x80000000) >>> 24));\n  }\n  public writeInt32LE(i: number, data: number): void {\n    this.writeUInt8(i, data & 0xFF);\n    this.writeUInt8(i+1, (data >>> 8) & 0xFF);\n    this.writeUInt8(i+2, (data >>> 16) & 0xFF);\n    this.writeUInt8(i+3, (data >>> 24) & 0xFF);\n  }\n  public writeInt32BE(i: number, data: number): void {\n    this.writeUInt8(i+3, data & 0xFF);\n    this.writeUInt8(i+2, (data >>> 8) & 0xFF);\n    this.writeUInt8(i+1, (data >>> 16) & 0xFF);\n    this.writeUInt8(i, (data >>> 24) & 0xFF);\n  }\n  public writeUInt8(i: number, data: number): void {\n    throw new Error('BufferCore implementations should implement writeUInt8.');\n  }\n  public writeUInt16LE(i: number, data: number): void {\n    this.writeUInt8(i, data & 0xFF);\n    this.writeUInt8(i+1, (data >> 8) & 0xFF);\n  }\n  public writeUInt16BE(i: number, data: number): void {\n    this.writeUInt8(i+1, data & 0xFF);\n    this.writeUInt8(i, (data >> 8) & 0xFF);\n  }\n  public writeUInt32LE(i: number, data: number): void {\n    this.writeInt32LE(i, data|0);\n  }\n  public writeUInt32BE(i: number, data: number): void {\n    this.writeInt32BE(i, data|0);\n  }\n  public writeFloatLE(i: number, data: number): void {\n    this.writeInt32LE(i, this.float2intbits(data));\n  }\n  public writeFloatBE(i: number, data: number): void {\n    this.writeInt32BE(i, this.float2intbits(data));\n  }\n  public writeDoubleLE(i: number, data: number): void {\n    var doubleBits = this.double2longbits(data);\n    this.writeInt32LE(i, doubleBits[0]);\n    this.writeInt32LE(i+4, doubleBits[1]);\n  }\n  public writeDoubleBE(i: number, data: number): void {\n    var doubleBits = this.double2longbits(data);\n    this.writeInt32BE(i+4, doubleBits[0]);\n    this.writeInt32BE(i, doubleBits[1]);\n  }\n  public readInt8(i: number): number {\n    var val = this.readUInt8(i);\n    if (val & 0x80) {\n      // Sign bit is set, so perform sign extension.\n      return val | 0xFFFFFF80;\n    } else {\n      return val;\n    }\n  }\n  public readInt16LE(i: number): number {\n    var val = this.readUInt16LE(i);\n    if (val & 0x8000) {\n      // Sign bit is set, so perform sign extension.\n      return val | 0xFFFF8000;\n    } else {\n      return val;\n    }\n  }\n  public readInt16BE(i: number): number {\n    var val = this.readUInt16BE(i);\n    if (val & 0x8000) {\n      // Sign bit is set, so perform sign extension.\n      return val | 0xFFFF8000;\n    } else {\n      return val;\n    }\n  }\n  public readInt32LE(i: number): number {\n    return this.readUInt32LE(i) | 0;\n  }\n  public readInt32BE(i: number): number {\n    return this.readUInt32BE(i) | 0;\n  }\n  public readUInt8(i: number): number {\n    throw new Error('BufferCore implementations should implement readUInt8.');\n  }\n  public readUInt16LE(i: number): number {\n    return (this.readUInt8(i+1) << 8) | this.readUInt8(i);\n  }\n  public readUInt16BE(i: number): number {\n    return (this.readUInt8(i) << 8) | this.readUInt8(i+1);\n  }\n  public readUInt32LE(i: number): number {\n    return ((this.readUInt8(i+3) << 24) | (this.readUInt8(i+2) << 16) | (this.readUInt8(i+1) << 8) | this.readUInt8(i)) >>> 0;\n  }\n  public readUInt32BE(i: number): number {\n    return ((this.readUInt8(i) << 24) | (this.readUInt8(i+1) << 16) | (this.readUInt8(i+2) << 8) | this.readUInt8(i+3)) >>> 0;\n  }\n  public readFloatLE(i: number): number {\n    return this.intbits2float(this.readInt32LE(i));\n  }\n  public readFloatBE(i: number): number {\n    return this.intbits2float(this.readInt32BE(i));\n  }\n  public readDoubleLE(i: number): number {\n    return this.longbits2double(this.readInt32LE(i+4), this.readInt32LE(i));\n  }\n  public readDoubleBE(i: number): number {\n    return this.longbits2double(this.readInt32BE(i), this.readInt32BE(i+4));\n  }\n  public copy(start: number, end: number): BufferCore {\n    throw new Error('BufferCore implementations should implement copy.');\n  }\n  public fill(value: number, start: number, end: number): void {\n    // Stupid unoptimized fill: Byte-by-byte.\n    for (var i = start; i < end; i++) {\n      this.writeUInt8(i, value);\n    }\n  }\n\n  private float2intbits(f_val: number) : number {\n    var exp: number, f_view: number, i_view: number, sig: number, sign: number;\n\n    // Special cases!\n    if (f_val === 0) {\n      return 0;\n    }\n    // We map the infinities to JavaScript infinities. Map them back.\n    if (f_val === Number.POSITIVE_INFINITY) {\n      return FLOAT_POS_INFINITY_AS_INT;\n    }\n    if (f_val === Number.NEGATIVE_INFINITY) {\n      return FLOAT_NEG_INFINITY_AS_INT;\n    }\n    // Convert JavaScript NaN to Float NaN value.\n    if (isNaN(f_val)) {\n      return FLOAT_NaN_AS_INT;\n    }\n\n    // We have more bits of precision than a float, so below we round to\n    // the nearest significand. This appears to be what the x86\n    // Java does for normal floating point operations.\n\n    sign = f_val < 0 ? 1 : 0;\n    f_val = Math.abs(f_val);\n    // Subnormal zone!\n    // (−1)^signbits×2^−126×0.significandbits\n    // Largest subnormal magnitude:\n    // 0000 0000 0111 1111 1111 1111 1111 1111\n    // Smallest subnormal magnitude:\n    // 0000 0000 0000 0000 0000 0000 0000 0001\n    if (f_val <= 1.1754942106924411e-38 && f_val >= 1.4012984643248170e-45) {\n      exp = 0;\n      sig = Math.round((f_val / Math.pow(2, -126)) * Math.pow(2, 23));\n      return (sign << 31) | (exp << 23) | sig;\n    } else {\n      // Regular FP numbers\n      exp = Math.floor(Math.log(f_val) / Math.LN2);\n      sig = Math.round((f_val / Math.pow(2, exp) - 1) * Math.pow(2, 23));\n      return (sign << 31) | ((exp + 127) << 23) | sig;\n    }\n  }\n\n  private double2longbits(d_val: number): number[] {\n    var d_view: number, exp: number, high_bits: number, i_view: number, sig: number, sign: number;\n\n    // Special cases\n    if (d_val === 0) {\n      return [0, 0];\n    }\n    if (d_val === Number.POSITIVE_INFINITY) {\n      // High bits: 0111 1111 1111 0000 0000 0000 0000 0000\n      //  Low bits: 0000 0000 0000 0000 0000 0000 0000 0000\n      return [0, 2146435072];\n    } else if (d_val === Number.NEGATIVE_INFINITY) {\n      // High bits: 1111 1111 1111 0000 0000 0000 0000 0000\n      //  Low bits: 0000 0000 0000 0000 0000 0000 0000 0000\n      return [0, -1048576];\n    } else if (isNaN(d_val)) {\n      // High bits: 0111 1111 1111 1000 0000 0000 0000 0000\n      //  Low bits: 0000 0000 0000 0000 0000 0000 0000 0000\n      return [0, 2146959360];\n    }\n    sign = d_val < 0 ? 1 << 31 : 0;\n    d_val = Math.abs(d_val);\n\n    // Check if it is a subnormal number.\n    // (-1)s × 0.f × 2-1022\n    // Largest subnormal magnitude:\n    // 0000 0000 0000 1111 1111 1111 1111 1111\n    // 1111 1111 1111 1111 1111 1111 1111 1111\n    // Smallest subnormal magnitude:\n    // 0000 0000 0000 0000 0000 0000 0000 0000\n    // 0000 0000 0000 0000 0000 0000 0000 0001\n    if (d_val <= 2.2250738585072010e-308 && d_val >= 5.0000000000000000e-324) {\n      exp = 0;\n      sig = (d_val / Math.pow(2, -1022)) * Math.pow(2, 52);\n    } else {\n      exp = Math.floor(Math.log(d_val) / Math.LN2);\n      // If d_val is close to a power of two, there's a chance that exp\n      // will be 1 greater than it should due to loss of accuracy in the\n      // log result.\n      if (d_val < Math.pow(2, exp)) {\n        exp = exp - 1;\n      }\n      sig = (d_val / Math.pow(2, exp) - 1) * Math.pow(2, 52);\n      exp = (exp + 1023) << 20;\n    }\n\n    // Simulate >> 32\n    high_bits = ((sig * Math.pow(2, -32)) | 0) | sign | exp;\n    return [sig & 0xFFFF, high_bits];\n  }\n\n  private intbits2float(int32: number) {\n    // Map +/- infinity to JavaScript equivalents\n    if (int32 === FLOAT_POS_INFINITY_AS_INT) {\n      return Number.POSITIVE_INFINITY;\n    } else if (int32 === FLOAT_NEG_INFINITY_AS_INT) {\n      return Number.NEGATIVE_INFINITY;\n    }\n    var sign = (int32 & 0x80000000) >>> 31;\n    var exponent = (int32 & 0x7F800000) >>> 23;\n    var significand = int32 & 0x007FFFFF;\n    var value : number;\n    if (exponent === 0) {  // we must denormalize!\n      value = Math.pow(-1, sign) * significand * Math.pow(2, -149);\n    } else {\n      value = Math.pow(-1, sign) * (1 + significand * Math.pow(2, -23)) * Math.pow(2, exponent - 127);\n    }\n    // NaN check\n    if (value < FLOAT_NEG_INFINITY || value > FLOAT_POS_INFINITY) {\n      value = NaN;\n    }\n    return value;\n  }\n\n  private longbits2double(uint32_a: number, uint32_b: number): number {\n    var sign = (uint32_a & 0x80000000) >>> 31;\n    var exponent = (uint32_a & 0x7FF00000) >>> 20;\n    var significand = ((uint32_a & 0x000FFFFF) * Math.pow(2, 32)) + uint32_b;\n\n    // Special values!\n    if (exponent === 0 && significand === 0) {\n      return 0;\n    }\n    if (exponent === 2047) {\n      if (significand === 0) {\n        if (sign === 1) {\n          return Number.NEGATIVE_INFINITY;\n        }\n        return Number.POSITIVE_INFINITY;\n      } else {\n        return NaN;\n      }\n    }\n    if (exponent === 0)  // we must denormalize!\n      return Math.pow(-1, sign) * significand * Math.pow(2, -1074);\n    return Math.pow(-1, sign) * (1 + significand * Math.pow(2, -52)) * Math.pow(2, exponent - 1023);\n  }\n}\n","import {BufferCoreCommon, BufferCore, BufferCoreImplementation} from './buffer_core';\n\n// Used to clear segments of an array index.\nvar clearMasks: number[] = [0xFFFFFF00, 0xFFFF00FF, 0xFF00FFFF, 0x00FFFFFF];\n\n/**\n * Implementation of BufferCore that is backed by an array of 32-bit ints.\n * Data is stored little endian.\n * Example: Bytes 0 through 3 are present in the first int:\n *  BYTE 3      BYTE 2      BYTE 1      BYTE 0\n * 0000 0000 | 0000 0000 | 0000 0000 | 0000 0000\n */\nclass BufferCoreArray extends BufferCoreCommon implements BufferCore {\n  public static isAvailable(): boolean {\n    return true;\n  }\n\n  public static bufferType = \"Array\";\n\n  private buff: number[];\n  private length: number;\n  constructor(length: number) {\n    super();\n    this.length = length;\n    this.buff = new Array(Math.ceil(length/4));\n    // Zero-fill the array.\n    var bufflen = this.buff.length;\n    for (var i = 0; i < bufflen; i++) {\n      this.buff[i] = 0;\n    }\n  }\n  public getLength(): number {\n    return this.length;\n  }\n  public writeUInt8(i: number, data: number): void {\n    data &= 0xFF;\n    // Which int? (Equivalent to (i/4)|0)\n    var arrIdx = i >> 2;\n    // Which offset? (Equivalent to i - arrIdx*4)\n    var intIdx = i & 3;\n    this.buff[arrIdx] = this.buff[arrIdx] & clearMasks[intIdx];\n    this.buff[arrIdx] = this.buff[arrIdx] | (data << (intIdx << 3));\n  }\n  public readUInt8(i: number): number {\n    // Which int?\n    var arrIdx = i >> 2;\n    // Which offset?\n    var intIdx = i & 3;\n    // Bring the data we want into the lowest 8 bits, and truncate.\n    return (this.buff[arrIdx] >> (intIdx << 3)) & 0xFF;\n  }\n  public copy(start: number, end: number): BufferCore {\n    // Stupid unoptimized copy. Later, we could do optimizations when aligned.\n    var newBC = new BufferCoreArray(end - start);\n    for (var i = start; i < end; i++) {\n      newBC.writeUInt8(i - start, this.readUInt8(i));\n    }\n    return newBC;\n  }\n}\n\n// Type-check the class.\nvar _: BufferCoreImplementation = BufferCoreArray;\n\nexport = BufferCoreArray;\n","import {BufferCoreCommon, BufferCore, BufferCoreImplementation} from './buffer_core';\nimport {isArrayBuffer, isArrayBufferView} from './util';\n\n/**\n * Represents data using an ArrayBuffer.\n */\nclass BufferCoreArrayBuffer extends BufferCoreCommon implements BufferCore {\n  public static isAvailable(): boolean {\n    return typeof DataView !== 'undefined';\n  }\n\n  public static bufferType = \"ArrayBuffer\";\n\n  private buff: DataView;\n  private length: number;\n  constructor(length: number);\n  constructor(buff: ArrayBufferView);\n  constructor(buff: ArrayBuffer);\n  constructor(arg1: number | ArrayBufferView | ArrayBuffer) {\n    super();\n    if (typeof arg1 === 'number') {\n      this.buff = new DataView(new ArrayBuffer(arg1));\n    } else if (arg1 instanceof DataView) {\n      this.buff = arg1;\n    } else if (isArrayBufferView(arg1)) {\n      this.buff = new DataView(arg1.buffer, arg1.byteOffset, arg1.byteLength);\n    } else if (isArrayBuffer(arg1)) {\n      this.buff = new DataView(<ArrayBuffer> arg1);\n    } else {\n      throw new TypeError(\"Invalid argument.\");\n    }\n    this.length = this.buff.byteLength;\n  }\n  public getLength(): number {\n    return this.length;\n  }\n  public writeInt8(i: number, data: number): void {\n    this.buff.setInt8(i, data);\n  }\n  public writeInt16LE(i: number, data: number): void {\n    this.buff.setInt16(i, data, true);\n  }\n  public writeInt16BE(i: number, data: number): void {\n    this.buff.setInt16(i, data, false);\n  }\n  public writeInt32LE(i: number, data: number): void {\n    this.buff.setInt32(i, data, true);\n  }\n  public writeInt32BE(i: number, data: number): void {\n    this.buff.setInt32(i, data, false);\n  }\n  public writeUInt8(i: number, data: number): void {\n    this.buff.setUint8(i, data);\n  }\n  public writeUInt16LE(i: number, data: number): void {\n    this.buff.setUint16(i, data, true);\n  }\n  public writeUInt16BE(i: number, data: number): void {\n    this.buff.setUint16(i, data, false);\n  }\n  public writeUInt32LE(i: number, data: number): void {\n    this.buff.setUint32(i, data, true);\n  }\n  public writeUInt32BE(i: number, data: number): void {\n    this.buff.setUint32(i, data, false);\n  }\n  public writeFloatLE(i: number, data: number): void {\n    this.buff.setFloat32(i, data, true);\n  }\n  public writeFloatBE(i: number, data: number): void {\n    this.buff.setFloat32(i, data, false);\n  }\n  public writeDoubleLE(i: number, data: number): void {\n    this.buff.setFloat64(i, data, true);\n  }\n  public writeDoubleBE(i: number, data: number): void {\n    this.buff.setFloat64(i, data, false);\n  }\n  public readInt8(i: number): number {\n    return this.buff.getInt8(i);\n  }\n  public readInt16LE(i: number): number {\n    return this.buff.getInt16(i, true);\n  }\n  public readInt16BE(i: number): number {\n    return this.buff.getInt16(i, false);\n  }\n  public readInt32LE(i: number): number {\n    return this.buff.getInt32(i, true);\n  }\n  public readInt32BE(i: number): number {\n    return this.buff.getInt32(i, false);\n  }\n  public readUInt8(i: number): number {\n    return this.buff.getUint8(i);\n  }\n  public readUInt16LE(i: number): number {\n    return this.buff.getUint16(i, true);\n  }\n  public readUInt16BE(i: number): number {\n    return this.buff.getUint16(i, false);\n  }\n  public readUInt32LE(i: number): number {\n    return this.buff.getUint32(i, true);\n  }\n  public readUInt32BE(i: number): number {\n    return this.buff.getUint32(i, false);\n  }\n  public readFloatLE(i: number): number {\n    return this.buff.getFloat32(i, true);\n  }\n  public readFloatBE(i: number): number {\n    return this.buff.getFloat32(i, false);\n  }\n  public readDoubleLE(i: number): number {\n    return this.buff.getFloat64(i, true);\n  }\n  public readDoubleBE(i: number): number {\n    return this.buff.getFloat64(i, false);\n  }\n  public copy(start: number, end: number): BufferCore {\n    let aBuff = this.buff.buffer;\n    let aBuffOff = this.buff.byteOffset;\n    let newBuff: ArrayBuffer;\n    // Some ArrayBuffer implementations (IE10) do not have 'slice'.\n    if (ArrayBuffer.prototype.slice) {\n      // ArrayBuffer.slice is copying; exactly what we want.\n      newBuff = aBuff.slice(aBuffOff + start, aBuffOff + end);\n    } else {\n      var len = end - start;\n      newBuff = new ArrayBuffer(len);\n      // Copy the old contents in.\n      var newUintArray = new Uint8Array(newBuff);\n      var oldUintArray = new Uint8Array(aBuff, aBuffOff);\n      newUintArray.set(oldUintArray.subarray(start, end));\n    }\n    return new BufferCoreArrayBuffer(newBuff);\n  }\n  /**\n   * (Nonstandard) Copy [start, end) to [offset+start, offset+end) in target.\n   */\n  public copyTo(target: BufferCoreArrayBuffer, offset: number, start: number, end: number): number {\n    let targetU8 = new Uint8Array(target.buff.buffer, target.buff.byteOffset);\n    let sourceU8 = new Uint8Array(this.buff.buffer, this.buff.byteOffset + start, end - start);\n    targetU8.set(sourceU8, offset);\n    return end - start;\n  }\n  public fill(value: number, start: number, end: number): void {\n    // Value must be a byte wide.\n    value = value & 0xFF;\n    var i: number;\n    var len = end - start;\n    var intBytes = (((len)/4)|0)*4;\n    // Optimization: Write 4 bytes at a time.\n    // TODO: Could we copy 8 bytes at a time using Float64, or could we\n    //       lose precision?\n    var intVal = (value << 24) | (value << 16) | (value << 8) | value\n    for (i = 0; i < intBytes; i += 4) {\n      this.writeInt32LE(i + start, intVal);\n    }\n    for (i = intBytes; i < len; i++) {\n      this.writeUInt8(i + start, value);\n    }\n  }\n\n  /**\n   * Custom method for this buffer core. Get the backing object.\n   */\n  public getDataView(): DataView {\n    return this.buff;\n  }\n}\n\n// Type-check the class.\nvar _: BufferCoreImplementation = BufferCoreArrayBuffer;\n\nexport = BufferCoreArrayBuffer;\n","import {BufferCoreCommon, BufferCore, BufferCoreImplementation} from './buffer_core';\n\n/**\n * Deprecated type, so it is not present in TypeScript's lib.d.ts.\n */\ninterface CanvasPixelArray {\n  // Values are [0,255].\n  [index: number]: number;\n  length: number;\n}\ndeclare var CanvasPixelArray: CanvasPixelArray;\n\n/**\n * Implementation of BufferCore that is backed by an ImageData object.\n * Useful in browsers with HTML5 canvas support, but no TypedArray support\n * (IE9).\n */\nclass BufferCoreImageData extends BufferCoreCommon implements BufferCore {\n  private static imageDataFactory: CanvasRenderingContext2D;\n  /**\n   * Constructs a CanvasPixelArray that represents the given amount of bytes.\n   */\n  private static getCanvasPixelArray(bytes: number): CanvasPixelArray {\n    var ctx: CanvasRenderingContext2D = BufferCoreImageData.imageDataFactory;\n    // Lazily initialize, otherwise every browser (even those that will never\n    // use this code) will create a canvas on script load.\n    if (ctx === undefined) {\n      BufferCoreImageData.imageDataFactory = ctx = document.createElement('canvas').getContext('2d');\n    }\n    // You cannot create image data with size 0, so up it to size 1.\n    if (bytes === 0) bytes = 1;\n    return ctx.createImageData(Math.ceil(bytes / 4), 1).data;\n  }\n  public static isAvailable(): boolean {\n    // Modern browsers have removed this deprecated API, so it is not always around.\n    // NOTE: IE11 in IE8 compat. mode has CanvasPixelArray defined, but you can't\n    // use it! Hence the check for getContext.\n    return typeof(CanvasPixelArray) !== 'undefined' && document.createElement('canvas')['getContext'] !== undefined;\n  }\n  public static bufferType = \"ImageData\";\n\n  private buff: CanvasPixelArray;\n  private length: number;\n  constructor(length: number) {\n    super();\n    this.length = length;\n    this.buff = BufferCoreImageData.getCanvasPixelArray(length);\n  }\n  public getLength(): number {\n    return this.length;\n  }\n  public writeUInt8(i: number, data: number): void {\n    this.buff[i] = data;\n  }\n  public readUInt8(i: number): number {\n    return this.buff[i];\n  }\n  public copy(start: number, end: number): BufferCore {\n    // AFAIK, there's no efficient way to clone ImageData.\n    var newBC = new BufferCoreImageData(end - start);\n    for (var i = start; i < end; i++) {\n      newBC.writeUInt8(i - start, this.buff[i]);\n    }\n    return newBC;\n  }\n}\n\n// Type-check the class.\nvar _: BufferCoreImplementation = BufferCoreImageData;\n\nexport = BufferCoreImageData;\n","/**\n * (Nonstandard) String utility function for 8-bit ASCII with the extended\n * character set. Unlike the ASCII above, we do not mask the high bits.\n *\n * Placed into a separate file so it can be used with other Buffer implementations.\n * @see http://en.wikipedia.org/wiki/Extended_ASCII\n */\nexport default class ExtendedASCII {\n  private static extendedChars = [ '\\u00C7', '\\u00FC', '\\u00E9', '\\u00E2', '\\u00E4',\n    '\\u00E0', '\\u00E5', '\\u00E7', '\\u00EA', '\\u00EB', '\\u00E8', '\\u00EF',\n    '\\u00EE', '\\u00EC', '\\u00C4', '\\u00C5', '\\u00C9', '\\u00E6', '\\u00C6',\n    '\\u00F4', '\\u00F6', '\\u00F2', '\\u00FB', '\\u00F9', '\\u00FF', '\\u00D6',\n    '\\u00DC', '\\u00F8', '\\u00A3', '\\u00D8', '\\u00D7', '\\u0192', '\\u00E1',\n    '\\u00ED', '\\u00F3', '\\u00FA', '\\u00F1', '\\u00D1', '\\u00AA', '\\u00BA',\n    '\\u00BF', '\\u00AE', '\\u00AC', '\\u00BD', '\\u00BC', '\\u00A1', '\\u00AB',\n    '\\u00BB', '_', '_', '_', '\\u00A6', '\\u00A6', '\\u00C1', '\\u00C2', '\\u00C0',\n    '\\u00A9', '\\u00A6', '\\u00A6', '+', '+', '\\u00A2', '\\u00A5', '+', '+', '-',\n    '-', '+', '-', '+', '\\u00E3', '\\u00C3', '+', '+', '-', '-', '\\u00A6', '-',\n    '+', '\\u00A4', '\\u00F0', '\\u00D0', '\\u00CA', '\\u00CB', '\\u00C8', 'i',\n    '\\u00CD', '\\u00CE', '\\u00CF', '+', '+', '_', '_', '\\u00A6', '\\u00CC', '_',\n    '\\u00D3', '\\u00DF', '\\u00D4', '\\u00D2', '\\u00F5', '\\u00D5', '\\u00B5',\n    '\\u00FE', '\\u00DE', '\\u00DA', '\\u00DB', '\\u00D9', '\\u00FD', '\\u00DD',\n    '\\u00AF', '\\u00B4', '\\u00AD', '\\u00B1', '_', '\\u00BE', '\\u00B6', '\\u00A7',\n    '\\u00F7', '\\u00B8', '\\u00B0', '\\u00A8', '\\u00B7', '\\u00B9', '\\u00B3',\n    '\\u00B2', '_', ' ' ];\n\n  public static str2byte(str: string, buf: NodeBuffer): number {\n    var length = str.length > buf.length ? buf.length : str.length;\n    for (var i = 0; i < length; i++) {\n      var charCode = str.charCodeAt(i);\n      if (charCode > 0x7F) {\n        // Check if extended ASCII.\n        var charIdx = ExtendedASCII.extendedChars.indexOf(str.charAt(i));\n        if (charIdx > -1) {\n          charCode = charIdx + 0x80;\n        }\n        // Otherwise, keep it as-is.\n      }\n      buf.writeUInt8(charCode, i);\n    }\n    return length;\n  }\n\n  public static byte2str(buff: NodeBuffer): string {\n    var chars = new Array(buff.length);\n    for (var i = 0; i < buff.length; i++) {\n      var charCode = buff.readUInt8(i);\n      if (charCode > 0x7F) {\n        chars[i] = ExtendedASCII.extendedChars[charCode - 128]\n      } else {\n        chars[i] = String.fromCharCode(charCode);\n      }\n    }\n    return chars.join('');\n  }\n\n  public static byteLength(str: string): number { return str.length; }\n}\n","import buffer = require(\"./buffer\");\nimport ExtendedASCII from './extended_ascii';\n\nvar fromCharCode = String.fromCharCode;\n\n/**\n * Efficiently converts an array of character codes into a JS string.\n * Avoids an issue with String.fromCharCode when the number of arguments is too large.\n */\nexport function fromCharCodes(charCodes: number[]): string {\n  // 8K blocks.\n  var numChars = charCodes.length,\n    numChunks = ((numChars - 1) >> 13) + 1,\n    chunks: string[] = new Array<string>(numChunks), i: number;\n  for (i = 0; i < numChunks; i++) {\n    chunks[i] = fromCharCode.apply(String, charCodes.slice(i * 0x2000, (i + 1) * 0x2000));\n  }\n  return chunks.join(\"\");\n}\n\n/**\n * Contains string utility functions, mainly for converting between JavaScript\n * strings and binary buffers of arbitrary encoding types.\n */\n\n/**\n * Encapsulates utility functions for a particular string encoding.\n */\nexport interface StringUtil {\n  /**\n   * Converts the string into its binary representation, and then writes the\n   * binary representation into the buffer at the given offset.\n   *\n   * We assume that the offset / length is pre-validated.\n   * @param [BrowserFS.node.Buffer] buf the buffer to write into\n   * @param [String] str the string that will be converted\n   * @param [Number] offset the offset to start writing into the buffer at\n   * @param [Number] length an upper bound on the length of the string that we\n   *   can write\n   * @return [Number] number of bytes written into the buffer\n   */\n  str2byte(str: string, buf: NodeBuffer): number;\n  /**\n   * Converts the data in the byte array into a string.\n   * @todo Is this the best API? Are we doing needless copying?\n   * @param [Array] byteArray an array of bytes\n   * @return [String] the array interpreted as a binary string\n   */\n  byte2str(buf: NodeBuffer): string;\n  /**\n   * Returns the number of bytes that the string will take up using the given\n   * encoding.\n   * @param [String] str the string to get the byte length for\n   * @return [Number] the number of bytes that the string will take up using the\n   * given encoding.\n   */\n  byteLength(str: string): number;\n}\n\n/**\n * Find the 'utility' object for the given string encoding. Throws an exception\n * if the encoding is invalid.\n * @param [String] encoding a string encoding\n * @return [BrowserFS.StringUtil.*] The StringUtil object for the given encoding\n */\nexport function FindUtil(encoding: string): StringUtil {\n  encoding = (function() {\n    switch (typeof encoding) {\n      case 'object':\n        return \"\" + encoding; // Implicitly calls toString on any object (Node does this)\n      case 'string':\n        return encoding; // No transformation needed.\n      default:\n        throw new TypeError('Invalid encoding argument specified');\n    }\n  })();\n  encoding = encoding.toLowerCase();\n  // This is the same logic as Node's source code.\n  switch (encoding) {\n    case 'utf8':\n    case 'utf-8':\n      return UTF8;\n    case 'ascii':\n      return ASCII;\n    case 'binary':\n      return BINARY;\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return UCS2;\n    case 'hex':\n      return HEX;\n    case 'base64':\n      return BASE64;\n    // Custom BFS: For efficiently representing data as JavaScript UTF-16\n    // strings.\n    case 'binary_string':\n      return BINSTR;\n    case 'binary_string_ie':\n      return BINSTRIE;\n    case 'extended_ascii':\n      return ExtendedASCII;\n    default:\n      throw new TypeError(`Unknown encoding: ${encoding}`);\n  }\n}\n\n/**\n * String utility functions for UTF-8. Note that some UTF-8 strings *cannot* be\n * expressed in terms of JavaScript UTF-16 strings.\n * @see http://en.wikipedia.org/wiki/UTF-8\n */\nexport class UTF8 {\n  public static str2byte(str: string, buf: NodeBuffer): number {\n    var maxJ = buf.length,\n      i = 0,\n      j = 0,\n      strLen = str.length;\n    while (i < strLen && j < maxJ) {\n      var code = str.charCodeAt(i++);\n      if (0xD800 <= code && code <= 0xDBFF) {\n        // 4 bytes: Surrogate pairs! UTF-16 fun time.\n        if (j + 3 >= maxJ || i >= strLen) {\n          break;\n        }\n\n        // Get the next UTF16 character.\n        var next = str.charCodeAt(i);\n        if (0xDC00 <= next && next <= 0xDFFF) {\n          // First pair: 10 bits of data, with an implicitly set 11th bit\n          // Second pair: 10 bits of data\n          var codePoint = (((code & 0x3FF) | 0x400) << 10) | (next & 0x3FF);\n          // Highest 3 bits in first byte\n          buf.writeUInt8((codePoint >> 18) | 0xF0, j++);\n          // Rest are all 6 bits\n          buf.writeUInt8(((codePoint >> 12) & 0x3F) | 0x80, j++);\n          buf.writeUInt8(((codePoint >> 6) & 0x3F) | 0x80, j++);\n          buf.writeUInt8((codePoint & 0x3F) | 0x80, j++);\n          i++;\n        } else {\n          // This surrogate pair is missing a friend!\n          // Write unicode replacement character.\n          buf.writeUInt8(0xef, j++);\n          buf.writeUInt8(0xbf, j++);\n          buf.writeUInt8(0xbd, j++);\n        }\n      } else if (0xDC00 <= code && code <= 0xDFFF) {\n        // Unmatched second surrogate!\n        // Write unicode replacement character.\n        buf.writeUInt8(0xef, j++);\n        buf.writeUInt8(0xbf, j++);\n        buf.writeUInt8(0xbd, j++);\n      } else if (code < 0x80) {\n        // One byte\n        buf.writeUInt8(code, j++);\n      } else if (code < 0x800) {\n        // Two bytes\n        if (j + 1 >= maxJ) {\n          break;\n        }\n        // Highest 5 bits in first byte\n        buf.writeUInt8((code >> 6) | 0xC0, j++);\n        // Lower 6 bits in second byte\n        buf.writeUInt8((code & 0x3F) | 0x80, j++);\n      } else if (code < 0x10000) {\n        // Three bytes\n        if (j + 2 >= maxJ) {\n          break;\n        }\n        // Highest 4 bits in first byte\n        buf.writeUInt8((code >> 12) | 0xE0, j++);\n        // Middle 6 bits in second byte\n        buf.writeUInt8(((code >> 6) & 0x3F) | 0x80, j++);\n        // Lowest 6 bits in third byte\n        buf.writeUInt8((code & 0x3F) | 0x80, j++);\n      }\n    }\n    return j;\n  }\n\n  public static byte2str(buff: NodeBuffer): string {\n    var chars: number[] = [];\n    var i = 0;\n    while (i < buff.length) {\n      var code = buff.readUInt8(i++);\n      if (code < 0x80) {\n        chars.push(code);\n      } else if (code < 0xC0) {\n        // This is the second byte of a multibyte character. This shouldn't be\n        // possible.\n        throw new Error('Found incomplete part of character in string.');\n      } else if (code < 0xE0) {\n        // 2 bytes: 5 and 6 bits\n        chars.push(((code & 0x1F) << 6) | (buff.readUInt8(i++) & 0x3F));\n      } else if (code < 0xF0) {\n        // 3 bytes: 4, 6, and 6 bits\n        chars.push(((code & 0xF) << 12) | ((buff.readUInt8(i++) & 0x3F) << 6) | (buff.readUInt8(i++) & 0x3F));\n      } else if (code < 0xF8) {\n        // 4 bytes: 3, 6, 6, 6 bits; surrogate pairs time!\n        // First 11 bits; remove 11th bit as per UTF-16 standard\n        var byte3 = buff.readUInt8(i + 2);\n        chars.push(((((code & 0x7) << 8) | ((buff.readUInt8(i++) & 0x3F) << 2) | ((buff.readUInt8(i++) & 0x3F) >> 4)) & 0x3FF) | 0xD800);\n        // Final 10 bits\n        chars.push((((byte3 & 0xF) << 6) | (buff.readUInt8(i++) & 0x3F)) | 0xDC00);\n      } else {\n        throw new Error('Unable to represent UTF-8 string as UTF-16 JavaScript string.');\n      }\n    }\n    return fromCharCodes(chars);\n  }\n\n  // From http://stackoverflow.com/a/23329386\n  public static byteLength(str: string): number {\n    var s = str.length;\n    for (var i=str.length-1; i>=0; i--) {\n      var code = str.charCodeAt(i);\n      if (code > 0x7f && code <= 0x7ff) s++;\n      else if (code > 0x7ff && code <= 0xffff) s+=2;\n      if (code >= 0xDC00 && code <= 0xDFFF) i--; //trail surrogate\n    }\n    return s;\n  }\n}\n\n/**\n * String utility functions for 8-bit ASCII. Like Node, we mask the high bits of\n * characters in JavaScript UTF-16 strings.\n * @see http://en.wikipedia.org/wiki/ASCII\n */\nexport class ASCII {\n  public static str2byte(str: string, buf: NodeBuffer): number {\n    var length = str.length > buf.length ? buf.length : str.length;\n    for (var i = 0; i < length; i++) {\n      buf.writeUInt8(str.charCodeAt(i) % 256, i);\n    }\n    return length;\n  }\n\n  public static byte2str(buff: NodeBuffer): string {\n    var chars = new Array<number>(buff.length);\n    for (var i = 0; i < buff.length; i++) {\n      chars[i] = buff.readUInt8(i) & 0x7F;\n    }\n    return fromCharCodes(chars);\n  }\n\n  public static byteLength(str: string): number { return str.length; }\n}\n\n/**\n * String utility functions for Node's BINARY strings, which represent a single\n * byte per character.\n */\nexport class BINARY {\n  public static str2byte(str: string, buf: NodeBuffer): number {\n    var length = str.length > buf.length ? buf.length : str.length;\n    for (var i = 0; i < length; i++) {\n      buf.writeUInt8(str.charCodeAt(i) & 0xFF, i);\n    }\n    return length;\n  }\n\n  public static byte2str(buff: NodeBuffer): string {\n    var chars = new Array<number>(buff.length);\n    for (var i = 0; i < buff.length; i++) {\n      chars[i] = buff.readUInt8(i) & 0xFF;\n    }\n    return fromCharCodes(chars);\n  }\n\n  public static byteLength(str: string): number { return str.length; }\n}\n\n/**\n * Contains string utility functions for base-64 encoding.\n *\n * Adapted from the StackOverflow comment linked below.\n * @see http://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript#246813\n * @see http://en.wikipedia.org/wiki/Base64\n * @todo Bake in support for btoa() and atob() if available.\n */\nexport class BASE64 {\n  private static b64chars = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+', '/', '='];\n  private static num2b64: string[] = (function() {\n    var obj = new Array(BASE64.b64chars.length);\n    for (var idx = 0; idx < BASE64.b64chars.length; idx++) {\n      var i = BASE64.b64chars[idx];\n      obj[idx] = i;\n    }\n    return obj;\n  })();\n\n  private static b642num: {[chr: string]: number} = (function(): {[chr: string]: number} {\n    var obj: {[chr: string]: number} = {};\n    for (var idx = 0; idx < BASE64.b64chars.length; idx++) {\n      var i = BASE64.b64chars[idx];\n      obj[i] = idx;\n    }\n    obj['-'] = 62;\n    obj['_'] = 63;\n    return obj;\n  })();\n\n  public static byte2str(buff: NodeBuffer): string {\n    var output = '';\n    var i = 0;\n    while (i < buff.length) {\n      var chr1 = buff.readUInt8(i++);\n      var chr2 = i < buff.length ? buff.readUInt8(i++) : NaN;\n      var chr3 = i < buff.length ? buff.readUInt8(i++) : NaN;\n      var enc1 = chr1 >> 2;\n      var enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n      var enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n      var enc4 = chr3 & 63;\n      if (isNaN(chr2)) {\n        enc3 = enc4 = 64;\n      } else if (isNaN(chr3)) {\n        enc4 = 64;\n      }\n      output = output + BASE64.num2b64[enc1] + BASE64.num2b64[enc2] + BASE64.num2b64[enc3] + BASE64.num2b64[enc4];\n    }\n    return output;\n  }\n\n  public static str2byte(str: string, buf: NodeBuffer): number {\n    var length = buf.length;\n    var output = '';\n    var i = 0;\n    str = str.replace(/[^A-Za-z0-9\\+\\/\\=\\-\\_]/g, '');\n    var j = 0;\n    while (i < str.length && j < buf.length) {\n      var enc1 = BASE64.b642num[str.charAt(i++)];\n      var enc2 = BASE64.b642num[str.charAt(i++)];\n      var enc3 = BASE64.b642num[str.charAt(i++)];\n      var enc4 = BASE64.b642num[str.charAt(i++)];\n      var chr1 = (enc1 << 2) | (enc2 >> 4);\n      var chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n      var chr3 = ((enc3 & 3) << 6) | enc4;\n      buf.writeUInt8(chr1, j++);\n      if (j === length) {\n        break;\n      }\n      if (enc3 !== 64) {\n        output += buf.writeUInt8(chr2, j++);\n      }\n      if (j === length) {\n        break;\n      }\n      if (enc4 !== 64) {\n        output += buf.writeUInt8(chr3, j++);\n      }\n      if (j === length) {\n        break;\n      }\n    }\n    return j;\n  }\n\n  public static byteLength(str: string): number {\n    return Math.floor(((str.replace(/[^A-Za-z0-9\\+\\/\\-\\_]/g, '')).length * 6) / 8);\n  }\n}\n\n/**\n * String utility functions for the UCS-2 encoding. Note that our UCS-2 handling\n * is identical to our UTF-16 handling.\n *\n * Note: UCS-2 handling is identical to UTF-16.\n * @see http://en.wikipedia.org/wiki/UCS2\n */\nexport class UCS2 {\n  public static str2byte(str: string, buf: NodeBuffer): number {\n    var len = str.length;\n    // Clip length to longest string of valid characters that can fit in the\n    // byte range.\n    if (len * 2 > buf.length) {\n      len = buf.length % 2 === 1 ? (buf.length - 1) / 2 : buf.length / 2;\n    }\n    for (var i = 0; i < len; i++) {\n      buf.writeUInt16LE(str.charCodeAt(i), i * 2);\n    }\n    return len * 2;\n  }\n\n  public static byte2str(buff: NodeBuffer): string {\n    if (buff.length % 2 !== 0) {\n      throw new Error('Invalid UCS2 byte array.');\n    }\n    var chars = new Array(buff.length / 2);\n    for (var i = 0; i < buff.length; i += 2) {\n      chars[i / 2] = String.fromCharCode(buff.readUInt8(i) | (buff.readUInt8(i + 1) << 8));\n    }\n    return chars.join('');\n  }\n\n  public static byteLength(str: string): number {\n    return str.length * 2;\n  }\n}\n\n/**\n * Contains string utility functions for hex encoding.\n * @see http://en.wikipedia.org/wiki/Hexadecimal\n */\nexport class HEX {\n  private static HEXCHARS = '0123456789abcdef';\n\n  private static num2hex: string[] = (function() {\n    var obj = new Array(HEX.HEXCHARS.length);\n    for (var idx = 0; idx < HEX.HEXCHARS.length; idx++) {\n      var i = HEX.HEXCHARS[idx];\n      obj[idx] = i;\n    }\n    return obj;\n  })();\n\n  private static hex2num: {[chr: string]: number} = (function(): {[chr: string]: number} {\n    var idx: number, i: string;\n    var obj: {[chr: string]: number} = {};\n    for (idx = 0; idx < HEX.HEXCHARS.length; idx++) {\n      i = HEX.HEXCHARS[idx];\n      obj[i] = idx;\n    }\n    var capitals = 'ABCDEF';\n    for (idx = 0; idx < capitals.length; idx++) {\n      i = capitals[idx];\n      obj[i] = idx + 10;\n    }\n    return obj;\n  })();\n\n  public static str2byte(str: string, buf: NodeBuffer): number {\n    if (str.length % 2 === 1) {\n      throw new Error('Invalid hex string');\n    }\n    // Each character is 1 byte encoded as two hex characters; so 1 byte becomes\n    // 2 bytes.\n    var numBytes = str.length >> 1;\n    if (numBytes > buf.length) {\n      numBytes = buf.length;\n    }\n    for (var i = 0; i < numBytes; i++) {\n      var char1 = this.hex2num[str.charAt(i << 1)];\n      var char2 = this.hex2num[str.charAt((i << 1) + 1)];\n      buf.writeUInt8((char1 << 4) | char2, i);\n    }\n    return numBytes;\n  }\n\n  public static byte2str(buff: NodeBuffer): string {\n    var len = buff.length;\n    var chars = new Array(len << 1);\n    var j = 0;\n    for (var i = 0; i < len; i++) {\n      var hex2 = buff.readUInt8(i) & 0xF;\n      var hex1 = buff.readUInt8(i) >> 4;\n      chars[j++] = this.num2hex[hex1];\n      chars[j++] = this.num2hex[hex2];\n    }\n    return chars.join('');\n  }\n\n  public static byteLength(str: string): number {\n    // Assuming a valid string.\n    return str.length >> 1;\n  }\n}\n\n/**\n * Contains string utility functions for binary string encoding. This is where we\n * pack arbitrary binary data as a UTF-16 string.\n *\n * Each character in the string is two bytes. The first character in the string\n * is special: The first byte specifies if the binary data is of odd byte length.\n * If it is, then it is a 1 and the second byte is the first byte of data; if\n * not, it is a 0 and the second byte is 0.\n *\n * Everything is little endian.\n */\nexport class BINSTR {\n  public static str2byte(str: string, buf: NodeBuffer): number {\n    // Special case: Empty string\n    if (str.length === 0) {\n      return 0;\n    }\n    var numBytes = BINSTR.byteLength(str);\n    if (numBytes > buf.length) {\n      numBytes = buf.length;\n    }\n    var j = 0;\n    var startByte = 0;\n    var endByte = startByte + numBytes;\n    // Handle first character separately\n    var firstChar = str.charCodeAt(j++);\n    if (firstChar !== 0) {\n      buf.writeUInt8(firstChar & 0xFF, 0);\n      startByte = 1;\n    }\n    for (var i = startByte; i < endByte; i += 2) {\n      var chr = str.charCodeAt(j++);\n      if (endByte - i === 1) {\n        // Write first byte of character\n        buf.writeUInt8(chr >> 8, i);\n      }\n      if (endByte - i >= 2) {\n        // Write both bytes in character\n        buf.writeUInt16BE(chr, i);\n      }\n    }\n    return numBytes;\n  }\n\n  public static byte2str(buff: NodeBuffer): string {\n    var len = buff.length;\n    // Special case: Empty string\n    if (len === 0) {\n      return '';\n    }\n    var charLen = (len >> 1) + 1,\n      chars = new Array<number>(charLen),\n      j = 0, i: number;\n\n    // Even or odd length?\n    if ((len & 1) === 1) {\n      chars[0] = 0x100 | buff.readUInt8(j++);\n    } else {\n      chars[0] = 0;\n    }\n\n    for (i = 1; i < charLen; i++) {\n      chars[i] = buff.readUInt16BE(j);\n      j += 2;\n    }\n    return fromCharCodes(chars);\n  }\n\n  public static byteLength(str: string): number {\n    if (str.length === 0) {\n      // Special case: Empty string.\n      return 0;\n    }\n    var firstChar = str.charCodeAt(0);\n    var bytelen = (str.length - 1) << 1;\n    if (firstChar !== 0) {\n      bytelen++;\n    }\n    return bytelen;\n  }\n}\n\n/**\n * IE/older FF version of binary string. One byte per character, offset by 0x20.\n */\nexport class BINSTRIE {\n  public static str2byte(str: string, buf: NodeBuffer): number {\n    var length = str.length > buf.length ? buf.length : str.length;\n    for (var i = 0; i < length; i++) {\n      buf.writeUInt8(str.charCodeAt(i) - 0x20, i);\n    }\n    return length;\n  }\n\n  public static byte2str(buff: NodeBuffer): string {\n    var chars = new Array(buff.length);\n    for (var i = 0; i < buff.length; i++) {\n      chars[i] = String.fromCharCode(buff.readUInt8(i) + 0x20);\n    }\n    return chars.join('');\n  }\n\n  public static byteLength(str: string): number {\n    return str.length;\n  }\n}\n","/**\n * Check if the input is an array buffer view.\n */\nexport var isArrayBufferView: (ab: any) => ab is ArrayBufferView;\n/**\n * Check if the input is an array buffer.\n * (Note: Must check if ab is null / an object first.)\n */\nexport var isArrayBuffer: (ab: any) => ab is ArrayBuffer;\n\nif (typeof(ArrayBuffer) === 'undefined') {\n  isArrayBufferView = (ab: any): ab is ArrayBufferView => false;\n  isArrayBuffer = (ab: any): ab is ArrayBuffer => false;\n} else {\n  isArrayBuffer = function(ab: any): ab is ArrayBuffer {\n    return typeof ab.byteLength === 'number';\n  };\n  if (ArrayBuffer['isView']) {\n    isArrayBufferView = function(ab: any): ab is ArrayBufferView {\n      return ArrayBuffer.isView(ab);\n    };\n  } else {\n    isArrayBufferView = function(ab: any): ab is ArrayBufferView {\n      return isArrayBuffer(ab['buffer']);\n    }\n  }\n}","// Type information only.\nimport _path = require('path');\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe = /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nfunction posixSplitPath(filename: string): string[] {\n  var out = splitPathRe.exec(filename);\n  out.shift();\n  return out;\n}\n\n/**\n * Emulates Node's `path` module. This module contains utilities for handling and\n * transforming file paths. **All** of these methods perform only string\n * transformations. The file system is not consulted to check whether paths are\n * valid.\n * @see http://nodejs.org/api/path.html\n * @class\n */\nclass path {\n  /**\n   * Normalize a string path, taking care of '..' and '.' parts.\n   *\n   * When multiple slashes are found, they're replaced by a single one; when the path contains a trailing slash, it is preserved. On Windows backslashes are used.\n   * @example Usage example\n   *   path.normalize('/foo/bar//baz/asdf/quux/..')\n   *   // returns\n   *   '/foo/bar/baz/asdf'\n   * @param [String] p The path to normalize.\n   * @return [String]\n   */\n  public static normalize(p: string): string {\n    // Special case: '' -> '.'\n    if (p === '') {\n      p = '.';\n    }\n    // It's very important to know if the path is relative or not, since it\n    // changes how we process .. and reconstruct the split string.\n    var absolute = p.charAt(0) === path.sep;\n    // Remove repeated //s\n    p = path._removeDuplicateSeps(p);\n    // Try to remove as many '../' as possible, and remove '.' completely.\n    var components = p.split(path.sep);\n    var goodComponents: string[] = [];\n    for (var idx = 0; idx < components.length; idx++) {\n      var c = components[idx];\n      if (c === '.') {\n        continue;\n      } else if (c === '..' && (absolute || (!absolute && goodComponents.length > 0 && goodComponents[0] !== '..'))) {\n        // In the absolute case: Path is relative to root, so we may pop even if\n        // goodComponents is empty (e.g. /../ => /)\n        // In the relative case: We're getting rid of a directory that preceded\n        // it (e.g. /foo/../bar -> /bar)\n        goodComponents.pop();\n      } else {\n        goodComponents.push(c);\n      }\n    }\n\n    // Add in '.' when it's a relative path with no other nonempty components.\n    // Possible results: '.' and './' (input: [''] or [])\n    // @todo Can probably simplify this logic.\n    if (!absolute && goodComponents.length < 2) {\n      switch (goodComponents.length) {\n        case 1:\n          if (goodComponents[0] === '') {\n            goodComponents.unshift('.');\n          }\n          break;\n        default:\n          goodComponents.push('.');\n      }\n    }\n    p = goodComponents.join(path.sep);\n    if (absolute && p.charAt(0) !== path.sep) {\n      p = path.sep + p;\n    }\n    return p;\n  }\n\n  /**\n   * Join all arguments together and normalize the resulting path.\n   *\n   * Arguments must be strings.\n   * @example Usage\n   *   path.join('/foo', 'bar', 'baz/asdf', 'quux', '..')\n   *   // returns\n   *   '/foo/bar/baz/asdf'\n   *\n   *   path.join('foo', {}, 'bar')\n   *   // throws exception\n   *   TypeError: Arguments to path.join must be strings\n   * @param [String,...] paths Each component of the path\n   * @return [String]\n   */\n  public static join(...paths: any[]): string {\n    // Required: Prune any non-strings from the path. I also prune empty segments\n    // so we can do a simple join of the array.\n    var processed: string[] = [];\n    for (var i = 0; i < paths.length; i++) {\n      var segment = paths[i];\n      if (typeof segment !== 'string') {\n        throw new TypeError(\"Invalid argument type to path.join: \" + (typeof segment));\n      } else if (segment !== '') {\n        processed.push(segment);\n      }\n    }\n    return path.normalize(processed.join(path.sep));\n  }\n\n  /**\n   * Resolves to to an absolute path.\n   *\n   * If to isn't already absolute from arguments are prepended in right to left\n   * order, until an absolute path is found. If after using all from paths still\n   * no absolute path is found, the current working directory is used as well.\n   * The resulting path is normalized, and trailing slashes are removed unless\n   * the path gets resolved to the root directory. Non-string arguments are\n   * ignored.\n   *\n   * Another way to think of it is as a sequence of cd commands in a shell.\n   *\n   *     path.resolve('foo/bar', '/tmp/file/', '..', 'a/../subfile')\n   *\n   * Is similar to:\n   *\n   *     cd foo/bar\n   *     cd /tmp/file/\n   *     cd ..\n   *     cd a/../subfile\n   *     pwd\n   *\n   * The difference is that the different paths don't need to exist and may also\n   * be files.\n   * @example Usage example\n   *   path.resolve('/foo/bar', './baz')\n   *   // returns\n   *   '/foo/bar/baz'\n   *\n   *   path.resolve('/foo/bar', '/tmp/file/')\n   *   // returns\n   *   '/tmp/file'\n   *\n   *   path.resolve('wwwroot', 'static_files/png/', '../gif/image.gif')\n   *   // if currently in /home/myself/node, it returns\n   *   '/home/myself/node/wwwroot/static_files/gif/image.gif'\n   * @param [String,...] paths\n   * @return [String]\n   */\n  public static resolve(...paths: string[]): string {\n    // Monitor for invalid paths, throw out empty paths, and look for the *last*\n    // absolute path that we see.\n    var processed: string[] = [];\n    for (var i = 0; i < paths.length; i++) {\n      var p = paths[i];\n      if (typeof p !== 'string') {\n        throw new TypeError(\"Invalid argument type to path.join: \" + (typeof p));\n      } else if (p !== '') {\n        // Remove anything that has occurred before this absolute path, as it\n        // doesn't matter.\n        if (p.charAt(0) === path.sep) {\n          processed = [];\n        }\n        processed.push(p);\n      }\n    }\n    // Special: Remove trailing slash unless it's the root\n    var resolved = path.normalize(processed.join(path.sep));\n    if (resolved.length > 1 && resolved.charAt(resolved.length - 1) === path.sep) {\n      return resolved.substr(0, resolved.length - 1);\n    }\n    // Special: If it doesn't start with '/', it's relative and we need to append\n    // the current directory.\n    if (resolved.charAt(0) !== path.sep) {\n      // Remove ./, since we're going to append the current directory.\n      if (resolved.charAt(0) === '.' && (resolved.length === 1 || resolved.charAt(1) === path.sep)) {\n        resolved = resolved.length === 1 ? '' : resolved.substr(2);\n      }\n      // Append the current directory, which *must* be an absolute path.\n      var cwd = process.cwd();\n      if (resolved !== '') {\n        // cwd will never end in a /... unless it's the root.\n        resolved = this.normalize(cwd + (cwd !== '/' ? path.sep : '') + resolved);\n      } else {\n        resolved = cwd;\n      }\n    }\n    return resolved;\n  }\n\n  /**\n   * Solve the relative path from from to to.\n   *\n   * At times we have two absolute paths, and we need to derive the relative path\n   * from one to the other. This is actually the reverse transform of\n   * path.resolve, which means we see that:\n   *\n   *    path.resolve(from, path.relative(from, to)) == path.resolve(to)\n   *\n   * @example Usage example\n   *   path.relative('C:\\\\orandea\\\\test\\\\aaa', 'C:\\\\orandea\\\\impl\\\\bbb')\n   *   // returns\n   *   '..\\\\..\\\\impl\\\\bbb'\n   *\n   *   path.relative('/data/orandea/test/aaa', '/data/orandea/impl/bbb')\n   *   // returns\n   *   '../../impl/bbb'\n   * @param [String] from\n   * @param [String] to\n   * @return [String]\n   */\n  public static relative(from: string, to: string): string {\n    var i: number;\n    // Alright. Let's resolve these two to absolute paths and remove any\n    // weirdness.\n    from = path.resolve(from);\n    to = path.resolve(to);\n    var fromSegs = from.split(path.sep);\n    var toSegs = to.split(path.sep);\n    // Remove the first segment on both, as it's '' (both are absolute paths)\n    toSegs.shift();\n    fromSegs.shift();\n    // There are two segments to this path:\n    // * Going *up* the directory hierarchy with '..'\n    // * Going *down* the directory hierarchy with foo/baz/bat.\n    var upCount = 0;\n    var downSegs: string[] = [];\n    // Figure out how many things in 'from' are shared with 'to'.\n    for (i = 0; i < fromSegs.length; i++) {\n      var seg = fromSegs[i];\n      if (seg === toSegs[i]) {\n        continue;\n      }\n      // The rest of 'from', including the current element, indicates how many\n      // directories we need to go up.\n      upCount = fromSegs.length - i;\n      break;\n    }\n    // The rest of 'to' indicates where we need to change to. We place this\n    // outside of the loop, as toSegs.length may be greater than fromSegs.length.\n    downSegs = toSegs.slice(i);\n    // Special case: If 'from' is '/'\n    if (fromSegs.length === 1 && fromSegs[0] === '') {\n      upCount = 0;\n    }\n    // upCount can't be greater than the number of fromSegs\n    // (cd .. from / is still /)\n    if (upCount > fromSegs.length) {\n      upCount = fromSegs.length;\n    }\n    // Create the final string!\n    var rv = '';\n    for (i = 0; i < upCount; i++) {\n      rv += '../';\n    }\n    rv += downSegs.join(path.sep);\n    // Special case: Remove trailing '/'. Happens if it's all up and no down.\n    if (rv.length > 1 && rv.charAt(rv.length - 1) === path.sep) {\n      rv = rv.substr(0, rv.length - 1);\n    }\n    return rv;\n  }\n\n  /**\n   * Return the directory name of a path. Similar to the Unix `dirname` command.\n   *\n   * Note that BrowserFS does not validate if the path is actually a valid\n   * directory.\n   * @example Usage example\n   *   path.dirname('/foo/bar/baz/asdf/quux')\n   *   // returns\n   *   '/foo/bar/baz/asdf'\n   * @param [String] p The path to get the directory name of.\n   * @return [String]\n   */\n  public static dirname(p: string): string {\n    // We get rid of //, but we don't modify anything else (e.g. any extraneous .\n    // and ../ are kept intact)\n    p = path._removeDuplicateSeps(p);\n    var absolute = p.charAt(0) === path.sep;\n    var sections = p.split(path.sep);\n    // Do 1 if it's /foo/bar, 2 if it's /foo/bar/\n    if (sections.pop() === '' && sections.length > 0) {\n      sections.pop();\n    }\n    // # of sections needs to be > 1 if absolute, since the first section is '' for '/'.\n    // If not absolute, the first section is the first part of the path, and is OK\n    // to return.\n    if (sections.length > 1 || (sections.length === 1 && !absolute)) {\n      return sections.join(path.sep);\n    } else if (absolute) {\n      return path.sep;\n    } else {\n      return '.';\n    }\n  }\n\n  /**\n   * Return the last portion of a path. Similar to the Unix basename command.\n   * @example Usage example\n   *   path.basename('/foo/bar/baz/asdf/quux.html')\n   *   // returns\n   *   'quux.html'\n   *\n   *   path.basename('/foo/bar/baz/asdf/quux.html', '.html')\n   *   // returns\n   *   'quux'\n   * @param [String] p\n   * @param [String?] ext\n   * @return [String]\n   */\n  public static basename(p: string, ext: string = \"\"): string {\n    // Special case: Normalize will modify this to '.'\n    if (p === '') {\n      return p;\n    }\n    // Normalize the string first to remove any weirdness.\n    p = path.normalize(p);\n    // Get the last part of the string.\n    var sections = p.split(path.sep);\n    var lastPart = sections[sections.length - 1];\n    // Special case: If it's empty, then we have a string like so: foo/\n    // Meaning, 'foo' is guaranteed to be a directory.\n    if (lastPart === '' && sections.length > 1) {\n      return sections[sections.length - 2];\n    }\n    // Remove the extension, if need be.\n    if (ext.length > 0) {\n      var lastPartExt = lastPart.substr(lastPart.length - ext.length);\n      if (lastPartExt === ext) {\n        return lastPart.substr(0, lastPart.length - ext.length);\n      }\n    }\n    return lastPart;\n  }\n\n  /**\n   * Return the extension of the path, from the last '.' to end of string in the\n   * last portion of the path. If there is no '.' in the last portion of the path\n   * or the first character of it is '.', then it returns an empty string.\n   * @example Usage example\n   *   path.extname('index.html')\n   *   // returns\n   *   '.html'\n   *\n   *   path.extname('index.')\n   *   // returns\n   *   '.'\n   *\n   *   path.extname('index')\n   *   // returns\n   *   ''\n   * @param [String] p\n   * @return [String]\n   */\n  public static extname(p: string): string {\n    p = path.normalize(p);\n    var sections = p.split(path.sep);\n    p = sections.pop();\n    // Special case: foo/file.ext/ should return '.ext'\n    if (p === '' && sections.length > 0) {\n      p = sections.pop();\n    }\n    if (p === '..') {\n      return '';\n    }\n    var i = p.lastIndexOf('.');\n    if (i === -1 || i === 0) {\n      return '';\n    }\n    return p.substr(i);\n  }\n\n  /**\n   * Checks if the given path is an absolute path.\n   *\n   * Despite not being documented, this is a tested part of Node's path API.\n   * @param [String] p\n   * @return [Boolean] True if the path appears to be an absolute path.\n   */\n  public static isAbsolute(p: string): boolean {\n    return p.length > 0 && p.charAt(0) === path.sep;\n  }\n\n  /**\n   * Unknown. Undocumented.\n   */\n  public static _makeLong(p: string): string {\n    return p;\n  }\n\n  /**\n   * Returns an object from a path string.\n   */\n  public static parse(p: string): _path.ParsedPath {\n    var allParts = posixSplitPath(p);\n    return {\n      root: allParts[0],\n      dir: allParts[0] + allParts[1].slice(0, -1),\n      base: allParts[2],\n      ext: allParts[3],\n      name: allParts[2].slice(0, allParts[2].length - allParts[3].length)\n    };\n  }\n\n  public static format(pathObject: _path.ParsedPath): string {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError(`Parameter 'pathObject' must be an object, not ${typeof pathObject}`);\n    }\n\n    var root = pathObject.root || '';\n\n    if (typeof root !== 'string') {\n      throw new TypeError(\n          \"'pathObject.root' must be a string or undefined, not \" +\n          typeof pathObject.root\n      );\n    }\n\n    var dir = pathObject.dir ? pathObject.dir + path.sep : '';\n    var base = pathObject.base || '';\n    return dir + base;\n  }\n\n  // The platform-specific file separator. BrowserFS uses `/`.\n  public static sep: string = '/';\n\n  private static _replaceRegex = new RegExp(\"//+\", 'g');\n\n  private static _removeDuplicateSeps(p: string): string {\n    p = p.replace(this._replaceRegex, this.sep);\n    return p;\n  }\n\n  // The platform-specific path delimiter. BrowserFS uses `:`.\n  public static delimiter = ':';\n\n  public static posix = path;\n  // XXX: Typing hack. We don't actually support win32.\n  public static win32 = path;\n}\n\nvar _: typeof _path = path;\n\nexport = path;\n","import Process = require('./process');\nimport TTD = require('./tty');\n\nvar process = new Process(),\n  processProxy: Process = <any> {};\n\nfunction defineKey(key: string) {\n  if ((<any> processProxy)[key]) {\n    // Probably a builtin Object property we don't care about.\n    return;\n  }\n  if (typeof (<any> process)[key] === 'function') {\n    (<any> processProxy)[key] = function() {\n      return (<Function> (<any> process)[key]).apply(process, arguments);\n    };\n  } else {\n    (<any> processProxy)[key] = (<any> process)[key];\n  }\n}\n\nfor (var key in process) {\n  // Don't check if process.hasOwnProperty; we want to also expose objects\n  // up the prototype hierarchy.\n  defineKey(key);\n}\n\n// Special key: Ensure we update public-facing values of stdin/stdout/stderr.\nprocessProxy.initializeTTYs = function() {\n  if (process.stdin === null) {\n    process.initializeTTYs();\n    processProxy.stdin = process.stdin;\n    processProxy.stdout = process.stdout;\n    processProxy.stderr = process.stderr;\n  }\n};\n\nprocess.nextTick(() => {\n  processProxy.initializeTTYs();\n});\n\nexport = processProxy;\n","// Use path and TTY for type information only. We lazily pull them in\n// to avoid circular dependencies :(\n// (path depends on process for cwd(), TTY depends on streams which depends\n//  on process.nextTick/process.stdout/stderr/stdin).\nimport _path = require('path');\nimport _TTY = require('./tty');\nimport events = require('events');\n\n// Path depends on process. Avoid a circular reference by dynamically including path when we need it.\nvar path: typeof _path = null;\n\nclass Item {\n  private fun: Function;\n  private array: any[];\n  constructor(fun: Function, array: any[]) {\n    this.fun = fun;\n    this.array = array;\n  }\n\n  public run(): void {\n    this.fun.apply(null, this.array);\n  }\n}\n\n/**\n * Contains a queue of Items for process.nextTick.\n * Inspired by node-process: https://github.com/defunctzombie/node-process\n */\nclass NextTickQueue {\n  private _queue: Item[] = [];\n  private _draining = false;\n  // Used/assigned by the drainQueue function.\n  private _currentQueue: Item[] = null;\n  private _queueIndex = -1;\n\n  public push(item: Item): void {\n    if (this._queue.push(item) === 1 && !this._draining) {\n      setTimeout(() => this._drainQueue(), 0);\n    }\n  }\n\n  private _cleanUpNextTick() {\n    this._draining = false;\n    if (this._currentQueue && this._currentQueue.length) {\n      this._queue = this._currentQueue.concat(this._queue);\n    } else {\n      this._queueIndex = -1;\n    }\n    if (this._queue.length) {\n      this._drainQueue();\n    }\n  }\n\n  private _drainQueue() {\n    if (this._draining) {\n      return;\n    }\n    // If an Item throws an unhandled exception, this function will clean things up.\n    var timeout = setTimeout(() => this._cleanUpNextTick());\n    this._draining = true;\n\n    var len = this._queue.length;\n    while(len) {\n      this._currentQueue = this._queue;\n      this._queue = [];\n      while (++this._queueIndex < len) {\n        if (this._currentQueue) {\n          this._currentQueue[this._queueIndex].run();\n        }\n      }\n      this._queueIndex = -1;\n      len = this._queue.length;\n    }\n    this._currentQueue = null;\n    this._draining = false;\n    clearTimeout(timeout);\n  }\n}\n\n/**\n * Partial implementation of Node's `process` module.\n * We implement the portions that are relevant for the filesystem.\n * @see http://nodejs.org/api/process.html\n * @class\n */\nclass Process extends events.EventEmitter implements NodeJS.Process {\n  private startTime = Date.now();\n\n  private _cwd: string = '/';\n  /**\n   * Changes the current working directory.\n   *\n   * **Note**: BrowserFS does not validate that the directory actually exists.\n   *\n   * @example Usage example\n   *   console.log('Starting directory: ' + process.cwd());\n   *   process.chdir('/tmp');\n   *   console.log('New directory: ' + process.cwd());\n   * @param [String] dir The directory to change to.\n   */\n  public chdir(dir: string): void {\n    // XXX: Circular dependency hack.\n    if (path === null) {\n      path = require('path');\n    }\n    this._cwd = path.resolve(dir);\n  }\n  /**\n   * Returns the current working directory.\n   * @example Usage example\n   *   console.log('Current directory: ' + process.cwd());\n   * @return [String] The current working directory.\n   */\n  public cwd(): string {\n    return this._cwd;\n  }\n  /**\n   * Returns what platform you are running on.\n   * @return [String]\n   */\n  public platform: string = 'browser';\n  /**\n   * Number of seconds BrowserFS has been running.\n   * @return [Number]\n   */\n  public uptime(): number {\n    return ((Date.now() - this.startTime) / 1000) | 0;\n  }\n\n  public argv: string[] = [];\n  public execArgv: string[] = [];\n  public stdout: _TTY = null;\n  public stderr: _TTY = null;\n  public stdin: _TTY = null;\n  public domain: NodeJS.Domain = null;\n\n  private _queue: NextTickQueue = new NextTickQueue();\n\n  public nextTick(fun: any, ...args: any[]) {\n    this._queue.push(new Item(fun, args));\n  }\n\n  public execPath = __dirname;\n\n  public abort(): void {\n    this.emit('abort');\n  }\n\n  public env: {[name: string]: string} = {};\n  public exitCode: number = 0;\n  public exit(code: number): void {\n    this.exitCode = code;\n    this.emit('exit', [code]);\n  }\n\n  private _gid: number = 1;\n  public getgid(): number {\n    return this._gid;\n  }\n  public setgid(gid: number | string): void {\n    if (typeof gid === 'number') {\n      this._gid = gid;\n    } else {\n      this._gid = 1;\n    }\n  }\n\n  private _uid: number = 1;\n  public getuid(): number {\n    return this._uid;\n  }\n  public setuid(uid: number | string): void {\n    if (typeof uid === 'number') {\n      this._uid = uid;\n    } else {\n      this._uid = 1;\n    }\n  }\n\n  public version: string = 'v5.0';\n\n  public versions = {\n    http_parser: '0.0',\n    node: '5.0',\n    v8: '0.0',\n    uv: '0.0',\n    zlib: '0.0',\n    ares: '0.0',\n    icu: '0.0',\n    modules: '0',\n    openssl: '0.0'\n  };\n\n  public config = {\n    target_defaults:\n    { cflags: <any[]> [],\n      default_configuration: 'Release',\n      defines: <string[]> [],\n      include_dirs: <string[]> [],\n      libraries: <string[]> [] },\n    variables:\n    { clang: 0,\n      host_arch: 'x32',\n      node_install_npm: false,\n      node_install_waf: false,\n      node_prefix: '',\n      node_shared_cares: false,\n      node_shared_http_parser: false,\n      node_shared_libuv: false,\n      node_shared_zlib: false,\n      node_shared_v8: false,\n      node_use_dtrace: false,\n      node_use_etw: false,\n      node_use_openssl: false,\n      node_shared_openssl: false,\n      strict_aliasing: false,\n      target_arch: 'x32',\n      v8_use_snapshot: false,\n      v8_no_strict_aliasing: 0,\n      visibility: '' } };\n\n  public kill(pid: number, signal?: string): void {\n    this.emit('kill', [pid, signal]);\n  }\n\n  public pid = (Math.random()*1000)|0;\n\n  public title = 'node';\n  public arch = 'x32';\n  public memoryUsage(): {rss: number; heapTotal: number; heapUsed: number;} {\n    return { rss: 0, heapTotal: 0, heapUsed: 0 }\n  }\n\n  private _mask = 18;\n  public umask(mask: number = this._mask): number {\n    let oldMask = this._mask;\n    this._mask = mask;\n    this.emit('umask', [mask]);\n    return oldMask;\n  }\n\n  public hrtime(): [number, number] {\n    let timeinfo: number;\n    if (typeof performance !== 'undefined') {\n      timeinfo = performance.now();\n    } else if (Date['now']) {\n      timeinfo = Date.now();\n    } else {\n      timeinfo = (new Date()).getTime();\n    }\n    let secs = (timeinfo / 1000)|0;\n    timeinfo -= secs * 1000;\n    timeinfo = (timeinfo * 1000000)|0;\n    return [secs, timeinfo];\n  }\n\n  /**\n   * [BFS only] Initialize the TTY devices.\n   */\n  public initializeTTYs(): void {\n    // Guard against multiple invocations.\n    if (this.stdout === null) {\n      let TTY: typeof _TTY = require('./tty');\n      this.stdout = new TTY();\n      this.stderr = new TTY();\n      this.stdin = new TTY();\n    }\n  }\n\n  /**\n   * Worker-only function; irrelevant here.\n   */\n  public disconnect(): void {\n\n  }\n  // Undefined in main thread. Worker-only.\n  public connected: boolean = undefined;\n}\n\nexport = Process;","import stream = require('stream');\n\nclass TTY extends stream.Duplex {\n  public isRaw: boolean = false;\n  public columns: number = 80;\n  public rows: number = 120;\n  public isTTY: boolean = true;\n  private _bufferedWrites: Buffer[] = [];\n  private _waitingForWrites: boolean = false;\n\n  constructor() {\n    super();\n  }\n\n  /**\n   * Toggle raw mode.\n   */\n  public setRawMode(mode: boolean): void {\n    if (this.isRaw !== mode) {\n      this.isRaw = mode;\n      // [BFS] TTY implementations can use this to change their event emitting\n      //       patterns.\n      this.emit('modeChange');\n    }\n  }\n\n  /**\n   * [BFS] Update the number of columns available on the terminal.\n   */\n  public changeColumns(columns: number): void {\n    if (columns !== this.columns) {\n      this.columns = columns;\n      // Resize event.\n      this.emit('resize');\n    }\n  }\n\n  /**\n   * [BFS] Update the number of rows available on the terminal.\n   */\n  public changeRows(rows: number): void {\n    if (rows !== this.rows) {\n      this.rows = rows;\n      // Resize event.\n      this.emit('resize');\n    }\n  }\n\n  /**\n   * Returns 'true' if the given object is a TTY.\n   */\n  public static isatty(fd: any): fd is TTY {\n    return fd && fd instanceof TTY;\n  }\n\n  public _write(chunk: any, encoding: string, cb: Function): void {\n    var error: any;\n    try {\n      var data: Buffer;\n      if (typeof(chunk) === 'string') {\n        data = new Buffer(chunk, encoding);\n      } else {\n        data = chunk;\n      }\n      this._bufferedWrites.push(data);\n      if (this._waitingForWrites) {\n        this._read(1024);\n      }\n    } catch (e) {\n      error = e;\n    } finally {\n      cb(error);\n    }\n  }\n\n  public _read(size: number): void {\n    // Size is advisory -- we can ignore it.\n    if (this._bufferedWrites.length === 0) {\n      this._waitingForWrites = true;\n    } else {\n      while (this._bufferedWrites.length > 0) {\n        this._waitingForWrites = this.push(this._bufferedWrites.shift());\n        if (!this._waitingForWrites) {\n          break;\n        }\n      }\n    }\n  }\n}\n\nexport = TTY;\n","'use strict';\n\nvar buffer = require('buffer');\nvar Buffer = buffer.Buffer;\nvar SlowBuffer = buffer.SlowBuffer;\nvar MAX_LEN = buffer.kMaxLength || 2147483647;\nexports.alloc = function alloc(size, fill, encoding) {\n  if (typeof Buffer.alloc === 'function') {\n    return Buffer.alloc(size, fill, encoding);\n  }\n  if (typeof encoding === 'number') {\n    throw new TypeError('encoding must not be number');\n  }\n  if (typeof size !== 'number') {\n    throw new TypeError('size must be a number');\n  }\n  if (size > MAX_LEN) {\n    throw new RangeError('size is too large');\n  }\n  var enc = encoding;\n  var _fill = fill;\n  if (_fill === undefined) {\n    enc = undefined;\n    _fill = 0;\n  }\n  var buf = new Buffer(size);\n  if (typeof _fill === 'string') {\n    var fillBuf = new Buffer(_fill, enc);\n    var flen = fillBuf.length;\n    var i = -1;\n    while (++i < size) {\n      buf[i] = fillBuf[i % flen];\n    }\n  } else {\n    buf.fill(_fill);\n  }\n  return buf;\n}\nexports.allocUnsafe = function allocUnsafe(size) {\n  if (typeof Buffer.allocUnsafe === 'function') {\n    return Buffer.allocUnsafe(size);\n  }\n  if (typeof size !== 'number') {\n    throw new TypeError('size must be a number');\n  }\n  if (size > MAX_LEN) {\n    throw new RangeError('size is too large');\n  }\n  return new Buffer(size);\n}\nexports.from = function from(value, encodingOrOffset, length) {\n  if (typeof Buffer.from === 'function' && (!global.Uint8Array || Uint8Array.from !== Buffer.from)) {\n    return Buffer.from(value, encodingOrOffset, length);\n  }\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number');\n  }\n  if (typeof value === 'string') {\n    return new Buffer(value, encodingOrOffset);\n  }\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    var offset = encodingOrOffset;\n    if (arguments.length === 1) {\n      return new Buffer(value);\n    }\n    if (typeof offset === 'undefined') {\n      offset = 0;\n    }\n    var len = length;\n    if (typeof len === 'undefined') {\n      len = value.byteLength - offset;\n    }\n    if (offset >= value.byteLength) {\n      throw new RangeError('\\'offset\\' is out of bounds');\n    }\n    if (len > value.byteLength - offset) {\n      throw new RangeError('\\'length\\' is out of bounds');\n    }\n    return new Buffer(value.slice(offset, offset + len));\n  }\n  if (Buffer.isBuffer(value)) {\n    var out = new Buffer(value.length);\n    value.copy(out, 0, 0, value.length);\n    return out;\n  }\n  if (value) {\n    if (Array.isArray(value) || (typeof ArrayBuffer !== 'undefined' && value.buffer instanceof ArrayBuffer) || 'length' in value) {\n      return new Buffer(value);\n    }\n    if (value.type === 'Buffer' && Array.isArray(value.data)) {\n      return new Buffer(value.data);\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ' + 'ArrayBuffer, Array, or array-like object.');\n}\nexports.allocUnsafeSlow = function allocUnsafeSlow(size) {\n  if (typeof Buffer.allocUnsafeSlow === 'function') {\n    return Buffer.allocUnsafeSlow(size);\n  }\n  if (typeof size !== 'number') {\n    throw new TypeError('size must be a number');\n  }\n  if (size >= MAX_LEN) {\n    throw new RangeError('size is too large');\n  }\n  return new SlowBuffer(size);\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n","/* pako 1.0.3 nodeca/pako */\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var t;t=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,t.pako=e()}}(function(){return function e(t,i,n){function a(o,s){if(!i[o]){if(!t[o]){var f=\"function\"==typeof require&&require;if(!s&&f)return f(o,!0);if(r)return r(o,!0);var l=new Error(\"Cannot find module '\"+o+\"'\");throw l.code=\"MODULE_NOT_FOUND\",l}var d=i[o]={exports:{}};t[o][0].call(d.exports,function(e){var i=t[o][1][e];return a(i?i:e)},d,d.exports,e,t,i,n)}return i[o].exports}for(var r=\"function\"==typeof require&&require,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(e,t,i){\"use strict\";var n=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Int32Array;i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if(\"object\"!=typeof i)throw new TypeError(i+\"must be non-object\");for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,i,n,a){if(t.subarray&&e.subarray)return void e.set(t.subarray(i,i+n),a);for(var r=0;r<n;r++)e[a+r]=t[i+r]},flattenChunks:function(e){var t,i,n,a,r,o;for(n=0,t=0,i=e.length;t<i;t++)n+=e[t].length;for(o=new Uint8Array(n),a=0,t=0,i=e.length;t<i;t++)r=e[t],o.set(r,a),a+=r.length;return o}},r={arraySet:function(e,t,i,n,a){for(var r=0;r<n;r++)e[a+r]=t[i+r]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,r))},i.setTyped(n)},{}],2:[function(e,t,i){\"use strict\";function n(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&r))return String.fromCharCode.apply(null,a.shrinkBuf(e,t));for(var i=\"\",n=0;n<t;n++)i+=String.fromCharCode(e[n]);return i}var a=e(\"./common\"),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var s=new a.Buf8(256),f=0;f<256;f++)s[f]=f>=252?6:f>=248?5:f>=240?4:f>=224?3:f>=192?2:1;s[254]=s[254]=1,i.string2buf=function(e){var t,i,n,r,o,s=e.length,f=0;for(r=0;r<s;r++)i=e.charCodeAt(r),55296===(64512&i)&&r+1<s&&(n=e.charCodeAt(r+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),f+=i<128?1:i<2048?2:i<65536?3:4;for(t=new a.Buf8(f),o=0,r=0;o<f;r++)i=e.charCodeAt(r),55296===(64512&i)&&r+1<s&&(n=e.charCodeAt(r+1),56320===(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),r++)),i<128?t[o++]=i:i<2048?(t[o++]=192|i>>>6,t[o++]=128|63&i):i<65536?(t[o++]=224|i>>>12,t[o++]=128|i>>>6&63,t[o++]=128|63&i):(t[o++]=240|i>>>18,t[o++]=128|i>>>12&63,t[o++]=128|i>>>6&63,t[o++]=128|63&i);return t},i.buf2binstring=function(e){return n(e,e.length)},i.binstring2buf=function(e){for(var t=new a.Buf8(e.length),i=0,n=t.length;i<n;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){var i,a,r,o,f=t||e.length,l=new Array(2*f);for(a=0,i=0;i<f;)if(r=e[i++],r<128)l[a++]=r;else if(o=s[r],o>4)l[a++]=65533,i+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&i<f;)r=r<<6|63&e[i++],o--;o>1?l[a++]=65533:r<65536?l[a++]=r:(r-=65536,l[a++]=55296|r>>10&1023,l[a++]=56320|1023&r)}return n(l,a)},i.utf8border=function(e,t){var i;for(t=t||e.length,t>e.length&&(t=e.length),i=t-1;i>=0&&128===(192&e[i]);)i--;return i<0?t:0===i?t:i+s[e[i]]>t?i:t}},{\"./common\":1}],3:[function(e,t,i){\"use strict\";function n(e,t,i,n){for(var a=65535&e|0,r=e>>>16&65535|0,o=0;0!==i;){o=i>2e3?2e3:i,i-=o;do a=a+t[n++]|0,r=r+a|0;while(--o);a%=65521,r%=65521}return a|r<<16|0}t.exports=n},{}],4:[function(e,t,i){\"use strict\";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(e,t,i){\"use strict\";function n(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}function a(e,t,i,n){var a=r,o=n+i;e^=-1;for(var s=n;s<o;s++)e=e>>>8^a[255&(e^t[s])];return e^-1}var r=n();t.exports=a},{}],6:[function(e,t,i){\"use strict\";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1}t.exports=n},{}],7:[function(e,t,i){\"use strict\";var n=30,a=12;t.exports=function(e,t){var i,r,o,s,f,l,d,u,c,h,b,w,m,k,_,g,v,p,x,y,S,E,B,Z,A;i=e.state,r=e.next_in,Z=e.input,o=r+(e.avail_in-5),s=e.next_out,A=e.output,f=s-(t-e.avail_out),l=s+(e.avail_out-257),d=i.dmax,u=i.wsize,c=i.whave,h=i.wnext,b=i.window,w=i.hold,m=i.bits,k=i.lencode,_=i.distcode,g=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;e:do{m<15&&(w+=Z[r++]<<m,m+=8,w+=Z[r++]<<m,m+=8),p=k[w&g];t:for(;;){if(x=p>>>24,w>>>=x,m-=x,x=p>>>16&255,0===x)A[s++]=65535&p;else{if(!(16&x)){if(0===(64&x)){p=k[(65535&p)+(w&(1<<x)-1)];continue t}if(32&x){i.mode=a;break e}e.msg=\"invalid literal/length code\",i.mode=n;break e}y=65535&p,x&=15,x&&(m<x&&(w+=Z[r++]<<m,m+=8),y+=w&(1<<x)-1,w>>>=x,m-=x),m<15&&(w+=Z[r++]<<m,m+=8,w+=Z[r++]<<m,m+=8),p=_[w&v];i:for(;;){if(x=p>>>24,w>>>=x,m-=x,x=p>>>16&255,!(16&x)){if(0===(64&x)){p=_[(65535&p)+(w&(1<<x)-1)];continue i}e.msg=\"invalid distance code\",i.mode=n;break e}if(S=65535&p,x&=15,m<x&&(w+=Z[r++]<<m,m+=8,m<x&&(w+=Z[r++]<<m,m+=8)),S+=w&(1<<x)-1,S>d){e.msg=\"invalid distance too far back\",i.mode=n;break e}if(w>>>=x,m-=x,x=s-f,S>x){if(x=S-x,x>c&&i.sane){e.msg=\"invalid distance too far back\",i.mode=n;break e}if(E=0,B=b,0===h){if(E+=u-x,x<y){y-=x;do A[s++]=b[E++];while(--x);E=s-S,B=A}}else if(h<x){if(E+=u+h-x,x-=h,x<y){y-=x;do A[s++]=b[E++];while(--x);if(E=0,h<y){x=h,y-=x;do A[s++]=b[E++];while(--x);E=s-S,B=A}}}else if(E+=h-x,x<y){y-=x;do A[s++]=b[E++];while(--x);E=s-S,B=A}for(;y>2;)A[s++]=B[E++],A[s++]=B[E++],A[s++]=B[E++],y-=3;y&&(A[s++]=B[E++],y>1&&(A[s++]=B[E++]))}else{E=s-S;do A[s++]=A[E++],A[s++]=A[E++],A[s++]=A[E++],y-=3;while(y>2);y&&(A[s++]=A[E++],y>1&&(A[s++]=A[E++]))}break}}break}}while(r<o&&s<l);y=m>>3,r-=y,m-=y<<3,w&=(1<<m)-1,e.next_in=r,e.next_out=s,e.avail_in=r<o?5+(o-r):5-(r-o),e.avail_out=s<l?257+(l-s):257-(s-l),i.hold=w,i.bits=m}},{}],8:[function(e,t,i){\"use strict\";function n(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function a(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new _.Buf16(320),this.work=new _.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg=\"\",t.wrap&&(e.adler=1&t.wrap),t.mode=D,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new _.Buf32(we),t.distcode=t.distdyn=new _.Buf32(me),t.sane=1,t.back=-1,z):C}function o(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,r(e)):C}function s(e,t){var i,n;return e&&e.state?(n=e.state,t<0?(i=0,t=-t):(i=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?C:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,o(e))):C}function f(e,t){var i,n;return e?(n=new a,e.state=n,n.window=null,i=s(e,t),i!==z&&(e.state=null),i):C}function l(e){return f(e,_e)}function d(e){if(ge){var t;for(m=new _.Buf32(512),k=new _.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(x(S,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;x(E,e.lens,0,32,k,0,e.work,{bits:5}),ge=!1}e.lencode=m,e.lenbits=9,e.distcode=k,e.distbits=5}function u(e,t,i,n){var a,r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new _.Buf8(r.wsize)),n>=r.wsize?(_.arraySet(r.window,t,i-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(a=r.wsize-r.wnext,a>n&&(a=n),_.arraySet(r.window,t,i-n,a,r.wnext),n-=a,n?(_.arraySet(r.window,t,i-n,n,0),r.wnext=n,r.whave=r.wsize):(r.wnext+=a,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=a))),0}function c(e,t){var i,a,r,o,s,f,l,c,h,b,w,m,k,we,me,ke,_e,ge,ve,pe,xe,ye,Se,Ee,Be=0,Ze=new _.Buf8(4),Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return C;i=e.state,i.mode===X&&(i.mode=W),s=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,a=e.input,f=e.avail_in,c=i.hold,h=i.bits,b=f,w=l,ye=z;e:for(;;)switch(i.mode){case D:if(0===i.wrap){i.mode=W;break}for(;h<16;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}if(2&i.wrap&&35615===c){i.check=0,Ze[0]=255&c,Ze[1]=c>>>8&255,i.check=v(i.check,Ze,2,0),c=0,h=0,i.mode=F;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg=\"incorrect header check\",i.mode=ce;break}if((15&c)!==U){e.msg=\"unknown compression method\",i.mode=ce;break}if(c>>>=4,h-=4,xe=(15&c)+8,0===i.wbits)i.wbits=xe;else if(xe>i.wbits){e.msg=\"invalid window size\",i.mode=ce;break}i.dmax=1<<xe,e.adler=i.check=1,i.mode=512&c?q:X,c=0,h=0;break;case F:for(;h<16;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}if(i.flags=c,(255&i.flags)!==U){e.msg=\"unknown compression method\",i.mode=ce;break}if(57344&i.flags){e.msg=\"unknown header flags set\",i.mode=ce;break}i.head&&(i.head.text=c>>8&1),512&i.flags&&(Ze[0]=255&c,Ze[1]=c>>>8&255,i.check=v(i.check,Ze,2,0)),c=0,h=0,i.mode=L;case L:for(;h<32;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}i.head&&(i.head.time=c),512&i.flags&&(Ze[0]=255&c,Ze[1]=c>>>8&255,Ze[2]=c>>>16&255,Ze[3]=c>>>24&255,i.check=v(i.check,Ze,4,0)),c=0,h=0,i.mode=H;case H:for(;h<16;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}i.head&&(i.head.xflags=255&c,i.head.os=c>>8),512&i.flags&&(Ze[0]=255&c,Ze[1]=c>>>8&255,i.check=v(i.check,Ze,2,0)),c=0,h=0,i.mode=M;case M:if(1024&i.flags){for(;h<16;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}i.length=c,i.head&&(i.head.extra_len=c),512&i.flags&&(Ze[0]=255&c,Ze[1]=c>>>8&255,i.check=v(i.check,Ze,2,0)),c=0,h=0}else i.head&&(i.head.extra=null);i.mode=j;case j:if(1024&i.flags&&(m=i.length,m>f&&(m=f),m&&(i.head&&(xe=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),_.arraySet(i.head.extra,a,o,m,xe)),512&i.flags&&(i.check=v(i.check,a,m,o)),f-=m,o+=m,i.length-=m),i.length))break e;i.length=0,i.mode=K;case K:if(2048&i.flags){if(0===f)break e;m=0;do xe=a[o+m++],i.head&&xe&&i.length<65536&&(i.head.name+=String.fromCharCode(xe));while(xe&&m<f);if(512&i.flags&&(i.check=v(i.check,a,m,o)),f-=m,o+=m,xe)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=P;case P:if(4096&i.flags){if(0===f)break e;m=0;do xe=a[o+m++],i.head&&xe&&i.length<65536&&(i.head.comment+=String.fromCharCode(xe));while(xe&&m<f);if(512&i.flags&&(i.check=v(i.check,a,m,o)),f-=m,o+=m,xe)break e}else i.head&&(i.head.comment=null);i.mode=Y;case Y:if(512&i.flags){for(;h<16;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}if(c!==(65535&i.check)){e.msg=\"header crc mismatch\",i.mode=ce;break}c=0,h=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=X;break;case q:for(;h<32;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}e.adler=i.check=n(c),c=0,h=0,i.mode=G;case G:if(0===i.havedict)return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=f,i.hold=c,i.bits=h,N;e.adler=i.check=1,i.mode=X;case X:if(t===Z||t===A)break e;case W:if(i.last){c>>>=7&h,h-=7&h,i.mode=le;break}for(;h<3;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}switch(i.last=1&c,c>>>=1,h-=1,3&c){case 0:i.mode=J;break;case 1:if(d(i),i.mode=ie,t===A){c>>>=2,h-=2;break e}break;case 2:i.mode=$;break;case 3:e.msg=\"invalid block type\",i.mode=ce}c>>>=2,h-=2;break;case J:for(c>>>=7&h,h-=7&h;h<32;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}if((65535&c)!==(c>>>16^65535)){e.msg=\"invalid stored block lengths\",i.mode=ce;break}if(i.length=65535&c,c=0,h=0,i.mode=Q,t===A)break e;case Q:i.mode=V;case V:if(m=i.length){if(m>f&&(m=f),m>l&&(m=l),0===m)break e;_.arraySet(r,a,o,m,s),f-=m,o+=m,l-=m,s+=m,i.length-=m;break}i.mode=X;break;case $:for(;h<14;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}if(i.nlen=(31&c)+257,c>>>=5,h-=5,i.ndist=(31&c)+1,c>>>=5,h-=5,i.ncode=(15&c)+4,c>>>=4,h-=4,i.nlen>286||i.ndist>30){e.msg=\"too many length or distance symbols\",i.mode=ce;break}i.have=0,i.mode=ee;case ee:for(;i.have<i.ncode;){for(;h<3;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}i.lens[Ae[i.have++]]=7&c,c>>>=3,h-=3}for(;i.have<19;)i.lens[Ae[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Se={bits:i.lenbits},ye=x(y,i.lens,0,19,i.lencode,0,i.work,Se),i.lenbits=Se.bits,ye){e.msg=\"invalid code lengths set\",i.mode=ce;break}i.have=0,i.mode=te;case te:for(;i.have<i.nlen+i.ndist;){for(;Be=i.lencode[c&(1<<i.lenbits)-1],me=Be>>>24,ke=Be>>>16&255,_e=65535&Be,!(me<=h);){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}if(_e<16)c>>>=me,h-=me,i.lens[i.have++]=_e;else{if(16===_e){for(Ee=me+2;h<Ee;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}if(c>>>=me,h-=me,0===i.have){e.msg=\"invalid bit length repeat\",i.mode=ce;break}xe=i.lens[i.have-1],m=3+(3&c),c>>>=2,h-=2}else if(17===_e){for(Ee=me+3;h<Ee;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}c>>>=me,h-=me,xe=0,m=3+(7&c),c>>>=3,h-=3}else{for(Ee=me+7;h<Ee;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}c>>>=me,h-=me,xe=0,m=11+(127&c),c>>>=7,h-=7}if(i.have+m>i.nlen+i.ndist){e.msg=\"invalid bit length repeat\",i.mode=ce;break}for(;m--;)i.lens[i.have++]=xe}}if(i.mode===ce)break;if(0===i.lens[256]){e.msg=\"invalid code -- missing end-of-block\",i.mode=ce;break}if(i.lenbits=9,Se={bits:i.lenbits},ye=x(S,i.lens,0,i.nlen,i.lencode,0,i.work,Se),i.lenbits=Se.bits,ye){e.msg=\"invalid literal/lengths set\",i.mode=ce;break}if(i.distbits=6,i.distcode=i.distdyn,Se={bits:i.distbits},ye=x(E,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Se),i.distbits=Se.bits,ye){e.msg=\"invalid distances set\",i.mode=ce;break}if(i.mode=ie,t===A)break e;case ie:i.mode=ne;case ne:if(f>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=f,i.hold=c,i.bits=h,p(e,w),s=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,a=e.input,f=e.avail_in,c=i.hold,h=i.bits,i.mode===X&&(i.back=-1);break}for(i.back=0;Be=i.lencode[c&(1<<i.lenbits)-1],me=Be>>>24,ke=Be>>>16&255,_e=65535&Be,!(me<=h);){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}if(ke&&0===(240&ke)){for(ge=me,ve=ke,pe=_e;Be=i.lencode[pe+((c&(1<<ge+ve)-1)>>ge)],me=Be>>>24,ke=Be>>>16&255,_e=65535&Be,!(ge+me<=h);){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}c>>>=ge,h-=ge,i.back+=ge}if(c>>>=me,h-=me,i.back+=me,i.length=_e,0===ke){i.mode=fe;break}if(32&ke){i.back=-1,i.mode=X;break}if(64&ke){e.msg=\"invalid literal/length code\",i.mode=ce;break}i.extra=15&ke,i.mode=ae;case ae:if(i.extra){for(Ee=i.extra;h<Ee;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}i.length+=c&(1<<i.extra)-1,c>>>=i.extra,h-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=re;case re:for(;Be=i.distcode[c&(1<<i.distbits)-1],me=Be>>>24,ke=Be>>>16&255,_e=65535&Be,!(me<=h);){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}if(0===(240&ke)){for(ge=me,ve=ke,pe=_e;Be=i.distcode[pe+((c&(1<<ge+ve)-1)>>ge)],me=Be>>>24,ke=Be>>>16&255,_e=65535&Be,!(ge+me<=h);){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}c>>>=ge,h-=ge,i.back+=ge}if(c>>>=me,h-=me,i.back+=me,64&ke){e.msg=\"invalid distance code\",i.mode=ce;break}i.offset=_e,i.extra=15&ke,i.mode=oe;case oe:if(i.extra){for(Ee=i.extra;h<Ee;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}i.offset+=c&(1<<i.extra)-1,c>>>=i.extra,h-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg=\"invalid distance too far back\",i.mode=ce;break}i.mode=se;case se:if(0===l)break e;if(m=w-l,i.offset>m){if(m=i.offset-m,m>i.whave&&i.sane){e.msg=\"invalid distance too far back\",i.mode=ce;break}m>i.wnext?(m-=i.wnext,k=i.wsize-m):k=i.wnext-m,m>i.length&&(m=i.length),we=i.window}else we=r,k=s-i.offset,m=i.length;m>l&&(m=l),l-=m,i.length-=m;do r[s++]=we[k++];while(--m);0===i.length&&(i.mode=ne);break;case fe:if(0===l)break e;r[s++]=i.length,l--,i.mode=ne;break;case le:if(i.wrap){for(;h<32;){if(0===f)break e;f--,c|=a[o++]<<h,h+=8}if(w-=l,e.total_out+=w,i.total+=w,w&&(e.adler=i.check=i.flags?v(i.check,r,w,s-w):g(i.check,r,w,s-w)),w=l,(i.flags?c:n(c))!==i.check){e.msg=\"incorrect data check\",i.mode=ce;break}c=0,h=0}i.mode=de;case de:if(i.wrap&&i.flags){for(;h<32;){if(0===f)break e;f--,c+=a[o++]<<h,h+=8}if(c!==(4294967295&i.total)){e.msg=\"incorrect length check\",i.mode=ce;break}c=0,h=0}i.mode=ue;case ue:ye=R;break e;case ce:ye=O;break e;case he:return I;case be:default:return C}return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=f,i.hold=c,i.bits=h,(i.wsize||w!==e.avail_out&&i.mode<ce&&(i.mode<le||t!==B))&&u(e,e.output,e.next_out,w-e.avail_out)?(i.mode=he,I):(b-=e.avail_in,w-=e.avail_out,e.total_in+=b,e.total_out+=w,i.total+=w,i.wrap&&w&&(e.adler=i.check=i.flags?v(i.check,r,w,e.next_out-w):g(i.check,r,w,e.next_out-w)),e.data_type=i.bits+(i.last?64:0)+(i.mode===X?128:0)+(i.mode===ie||i.mode===Q?256:0),(0===b&&0===w||t===B)&&ye===z&&(ye=T),ye)}function h(e){if(!e||!e.state)return C;var t=e.state;return t.window&&(t.window=null),e.state=null,z}function b(e,t){var i;return e&&e.state?(i=e.state,0===(2&i.wrap)?C:(i.head=t,t.done=!1,z)):C}function w(e,t){var i,n,a,r=t.length;return e&&e.state?(i=e.state,0!==i.wrap&&i.mode!==G?C:i.mode===G&&(n=1,n=g(n,t,r,0),n!==i.check)?O:(a=u(e,t,r,r))?(i.mode=he,I):(i.havedict=1,z)):C}var m,k,_=e(\"../utils/common\"),g=e(\"./adler32\"),v=e(\"./crc32\"),p=e(\"./inffast\"),x=e(\"./inftrees\"),y=0,S=1,E=2,B=4,Z=5,A=6,z=0,R=1,N=2,C=-2,O=-3,I=-4,T=-5,U=8,D=1,F=2,L=3,H=4,M=5,j=6,K=7,P=8,Y=9,q=10,G=11,X=12,W=13,J=14,Q=15,V=16,$=17,ee=18,te=19,ie=20,ne=21,ae=22,re=23,oe=24,se=25,fe=26,le=27,de=28,ue=29,ce=30,he=31,be=32,we=852,me=592,ke=15,_e=ke,ge=!0;i.inflateReset=o,i.inflateReset2=s,i.inflateResetKeep=r,i.inflateInit=l,i.inflateInit2=f,i.inflate=c,i.inflateEnd=h,i.inflateGetHeader=b,i.inflateSetDictionary=w,i.inflateInfo=\"pako inflate (from Nodeca project)\"},{\"../utils/common\":1,\"./adler32\":3,\"./crc32\":5,\"./inffast\":7,\"./inftrees\":9}],9:[function(e,t,i){\"use strict\";var n=e(\"../utils/common\"),a=15,r=852,o=592,s=0,f=1,l=2,d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,i,b,w,m,k,_){var g,v,p,x,y,S,E,B,Z,A=_.bits,z=0,R=0,N=0,C=0,O=0,I=0,T=0,U=0,D=0,F=0,L=null,H=0,M=new n.Buf16(a+1),j=new n.Buf16(a+1),K=null,P=0;for(z=0;z<=a;z++)M[z]=0;for(R=0;R<b;R++)M[t[i+R]]++;for(O=A,C=a;C>=1&&0===M[C];C--);if(O>C&&(O=C),0===C)return w[m++]=20971520,w[m++]=20971520,_.bits=1,0;for(N=1;N<C&&0===M[N];N++);for(O<N&&(O=N),U=1,z=1;z<=a;z++)if(U<<=1,U-=M[z],U<0)return-1;if(U>0&&(e===s||1!==C))return-1;for(j[1]=0,z=1;z<a;z++)j[z+1]=j[z]+M[z];for(R=0;R<b;R++)0!==t[i+R]&&(k[j[t[i+R]]++]=R);if(e===s?(L=K=k,S=19):e===f?(L=d,H-=257,K=u,P-=257,S=256):(L=c,K=h,S=-1),F=0,R=0,z=N,y=m,I=O,T=0,p=-1,D=1<<O,x=D-1,e===f&&D>r||e===l&&D>o)return 1;for(var Y=0;;){Y++,E=z-T,k[R]<S?(B=0,Z=k[R]):k[R]>S?(B=K[P+k[R]],Z=L[H+k[R]]):(B=96,Z=0),g=1<<z-T,v=1<<I,N=v;do v-=g,w[y+(F>>T)+v]=E<<24|B<<16|Z|0;while(0!==v);for(g=1<<z-1;F&g;)g>>=1;if(0!==g?(F&=g-1,F+=g):F=0,R++,0===--M[z]){if(z===C)break;z=t[i+k[R]]}if(z>O&&(F&x)!==p){for(0===T&&(T=O),y+=N,I=z-T,U=1<<I;I+T<C&&(U-=M[I+T],!(U<=0));)I++,U<<=1;if(D+=1<<I,e===f&&D>r||e===l&&D>o)return 1;p=F&x,w[p]=O<<24|I<<16|y-m|0}}return 0!==F&&(w[y+F]=z-T<<24|64<<16|0),_.bits=O,0}},{\"../utils/common\":1}],10:[function(e,t,i){\"use strict\";t.exports={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"}},{}],11:[function(e,t,i){\"use strict\";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0}t.exports=n},{}],\"/lib/inflate.js\":[function(e,t,i){\"use strict\";function n(e){if(!(this instanceof n))return new n(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:\"\"},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var i=o.inflateInit2(this.strm,t.windowBits);if(i!==l.Z_OK)throw new Error(d[i]);this.header=new c,o.inflateGetHeader(this.strm,this.header)}function a(e,t){var i=new n(t);if(i.push(e,!0),i.err)throw i.msg;return i.result}function r(e,t){return t=t||{},t.raw=!0,a(e,t)}var o=e(\"./zlib/inflate\"),s=e(\"./utils/common\"),f=e(\"./utils/strings\"),l=e(\"./zlib/constants\"),d=e(\"./zlib/messages\"),u=e(\"./zlib/zstream\"),c=e(\"./zlib/gzheader\"),h=Object.prototype.toString;n.prototype.push=function(e,t){var i,n,a,r,d,u,c=this.strm,b=this.options.chunkSize,w=this.options.dictionary,m=!1;if(this.ended)return!1;n=t===~~t?t:t===!0?l.Z_FINISH:l.Z_NO_FLUSH,\"string\"==typeof e?c.input=f.binstring2buf(e):\"[object ArrayBuffer]\"===h.call(e)?c.input=new Uint8Array(e):c.input=e,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=new s.Buf8(b),c.next_out=0,c.avail_out=b),i=o.inflate(c,l.Z_NO_FLUSH),i===l.Z_NEED_DICT&&w&&(u=\"string\"==typeof w?f.string2buf(w):\"[object ArrayBuffer]\"===h.call(w)?new Uint8Array(w):w,i=o.inflateSetDictionary(this.strm,u)),i===l.Z_BUF_ERROR&&m===!0&&(i=l.Z_OK,m=!1),i!==l.Z_STREAM_END&&i!==l.Z_OK)return this.onEnd(i),this.ended=!0,!1;c.next_out&&(0!==c.avail_out&&i!==l.Z_STREAM_END&&(0!==c.avail_in||n!==l.Z_FINISH&&n!==l.Z_SYNC_FLUSH)||(\"string\"===this.options.to?(a=f.utf8border(c.output,c.next_out),r=c.next_out-a,d=f.buf2string(c.output,a),c.next_out=r,c.avail_out=b-r,r&&s.arraySet(c.output,c.output,a,r,0),this.onData(d)):this.onData(s.shrinkBuf(c.output,c.next_out)))),0===c.avail_in&&0===c.avail_out&&(m=!0)}while((c.avail_in>0||0===c.avail_out)&&i!==l.Z_STREAM_END);return i===l.Z_STREAM_END&&(n=l.Z_FINISH),n===l.Z_FINISH?(i=o.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===l.Z_OK):n!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),c.avail_out=0,!0)},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===l.Z_OK&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=n,i.inflate=a,i.inflateRaw=r,i.ungzip=a},{\"./utils/common\":1,\"./utils/strings\":2,\"./zlib/constants\":4,\"./zlib/gzheader\":6,\"./zlib/inflate\":8,\"./zlib/messages\":10,\"./zlib/zstream\":11}]},{},[])(\"/lib/inflate.js\")});\n","'use strict';\n\nif (!process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = nextTick;\n} else {\n  module.exports = process.nextTick;\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n","module.exports = require(\"./lib/_stream_duplex.js\")\n","// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar processNextTick = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\nvar keys = objectKeys(Writable.prototype);\nfor (var v = 0; v < keys.length; v++) {\n  var method = keys[v];\n  if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  processNextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nfunction forEach(xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}","// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","'use strict';\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar processNextTick = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream;\n(function () {\n  try {\n    Stream = require('st' + 'ream');\n  } catch (_) {} finally {\n    if (!Stream) Stream = require('events').EventEmitter;\n  }\n})();\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\n/*<replacement>*/\nvar bufferShim = require('buffer-shims');\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nfunction prependListener(emitter, event, fn) {\n  if (typeof emitter.prependListener === 'function') {\n    return emitter.prependListener(event, fn);\n  } else {\n    // This is a hack to make sure that our error handler is attached before any\n    // userland ones.  NEVER DO THIS. This is here only because this code needs\n    // to continue to work with older versions of Node.js that do not include\n    // the prependListener() method. The goal is to eventually remove this hack.\n    if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n  }\n}\n\nvar Duplex;\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = ~ ~this.highWaterMark;\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // when piping, we only care about 'readable' events that happen\n  // after read()ing all the bytes and not getting any pushback.\n  this.ranOut = false;\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nvar Duplex;\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options && typeof options.read === 'function') this._read = options.read;\n\n  Stream.call(this);\n}\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n\n  if (!state.objectMode && typeof chunk === 'string') {\n    encoding = encoding || state.defaultEncoding;\n    if (encoding !== state.encoding) {\n      chunk = bufferShim.from(chunk, encoding);\n      encoding = '';\n    }\n  }\n\n  return readableAddChunk(this, state, chunk, encoding, false);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  var state = this._readableState;\n  return readableAddChunk(this, state, chunk, '', true);\n};\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\nfunction readableAddChunk(stream, state, chunk, encoding, addToFront) {\n  var er = chunkInvalid(state, chunk);\n  if (er) {\n    stream.emit('error', er);\n  } else if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else if (state.objectMode || chunk && chunk.length > 0) {\n    if (state.ended && !addToFront) {\n      var e = new Error('stream.push() after EOF');\n      stream.emit('error', e);\n    } else if (state.endEmitted && addToFront) {\n      var _e = new Error('stream.unshift() after end event');\n      stream.emit('error', _e);\n    } else {\n      var skipAdd;\n      if (state.decoder && !addToFront && !encoding) {\n        chunk = state.decoder.write(chunk);\n        skipAdd = !state.objectMode && chunk.length === 0;\n      }\n\n      if (!addToFront) state.reading = false;\n\n      // Don't add to the buffer if we've decoded to an empty string chunk and\n      // we're not in object mode\n      if (!skipAdd) {\n        // if we want the data now, just emit it.\n        if (state.flowing && state.length === 0 && !state.sync) {\n          stream.emit('data', chunk);\n          stream.read(0);\n        } else {\n          // update the buffer info.\n          state.length += state.objectMode ? 1 : chunk.length;\n          if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n          if (state.needReadable) emitReadable(stream);\n        }\n      }\n\n      maybeReadMore(stream, state);\n    }\n  } else if (!addToFront) {\n    state.reading = false;\n  }\n\n  return needMoreData(state);\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction chunkInvalid(state, chunk) {\n  var er = null;\n  if (!Buffer.isBuffer(chunk) && typeof chunk !== 'string' && chunk !== null && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) processNextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    processNextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : cleanup;\n  if (state.endEmitted) processNextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable) {\n    debug('onunpipe');\n    if (readable === src) {\n      cleanup();\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', cleanup);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var _i = 0; _i < len; _i++) {\n      dests[_i].emit('unpipe', this);\n    }return this;\n  }\n\n  // try to find the right one.\n  var i = indexOf(state.pipes, dest);\n  if (i === -1) return this;\n\n  state.pipes.splice(i, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        processNextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this, state);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    processNextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var state = this._readableState;\n  var paused = false;\n\n  var self = this;\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) self.push(chunk);\n    }\n\n    self.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = self.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  var events = ['error', 'close', 'destroy', 'pause', 'resume'];\n  forEach(events, function (ev) {\n    stream.on(ev, self.emit.bind(self, ev));\n  });\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  self._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return self;\n};\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = bufferShim.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    processNextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction forEach(xs, f) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    f(xs[i], i);\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction TransformState(stream) {\n  this.afterTransform = function (er, data) {\n    return afterTransform(stream, er, data);\n  };\n\n  this.needTransform = false;\n  this.transforming = false;\n  this.writecb = null;\n  this.writechunk = null;\n  this.writeencoding = null;\n}\n\nfunction afterTransform(stream, er, data) {\n  var ts = stream._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) return stream.emit('error', new Error('no writecb in Transform class'));\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data !== null && data !== undefined) stream.push(data);\n\n  cb(er);\n\n  var rs = stream._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    stream._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = new TransformState(this);\n\n  // when the writable side finishes, then flush out anything remaining.\n  var stream = this;\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  this.once('prefinish', function () {\n    if (typeof this._flush === 'function') this._flush(function (er) {\n      done(stream, er);\n    });else done(stream);\n  });\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('Not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nfunction done(stream, er) {\n  if (er) return stream.emit('error', er);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  var ws = stream._writableState;\n  var ts = stream._transformState;\n\n  if (ws.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (ts.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}","// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\nmodule.exports = Writable;\n\n/*<replacement>*/\nvar processNextTick = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : processNextTick;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = require('core-util-is');\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream;\n(function () {\n  try {\n    Stream = require('st' + 'ream');\n  } catch (_) {} finally {\n    if (!Stream) Stream = require('events').EventEmitter;\n  }\n})();\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\n/*<replacement>*/\nvar bufferShim = require('buffer-shims');\n/*</replacement>*/\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\nvar Duplex;\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (stream instanceof Duplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n  this.highWaterMark = hwm || hwm === 0 ? hwm : defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = ~ ~this.highWaterMark;\n\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function writableStateGetBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.')\n    });\n  } catch (_) {}\n})();\n\nvar Duplex;\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, though they're not\n  // instanceof Writable, they're instanceof Readable.\n  if (!(this instanceof Writable) && !(this instanceof Duplex)) return new Writable(options);\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  processNextTick(cb, er);\n}\n\n// If we get something that is not a buffer, string, null, or undefined,\n// and we're not in objectMode, then that's an error.\n// Otherwise stream chunks are all considered to be of length=1, and the\n// watermarks determine how many objects to keep in the buffer, rather than\n// how many bytes or characters.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n  // Always throw error if a null is written\n  // if we are not in object mode then throw\n  // if it is not a buffer, string, or undefined.\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (!Buffer.isBuffer(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    processNextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (Buffer.isBuffer(chunk)) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = bufferShim.from(chunk, encoding);\n  }\n  return chunk;\n}\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, chunk, encoding, cb) {\n  chunk = decodeChunk(state, chunk, encoding);\n\n  if (Buffer.isBuffer(chunk)) encoding = 'buffer';\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = new WriteReq(chunk, encoding, cb);\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n  if (sync) processNextTick(cb, er);else cb(er);\n\n  stream._writableState.errorEmitted = true;\n  stream.emit('error', er);\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n        afterWrite(stream, state, finished, cb);\n      }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    while (entry) {\n      buffer[count] = entry;\n      entry = entry.next;\n      count += 1;\n    }\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequestCount = 0;\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\n\nfunction prefinish(stream, state) {\n  if (!state.prefinished) {\n    state.prefinished = true;\n    stream.emit('prefinish');\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    if (state.pendingcb === 0) {\n      prefinish(stream, state);\n      state.finished = true;\n      stream.emit('finish');\n    } else {\n      prefinish(stream, state);\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) processNextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n\n  this.finish = function (err) {\n    var entry = _this.entry;\n    _this.entry = null;\n    while (entry) {\n      var cb = entry.callback;\n      state.pendingcb--;\n      cb(err);\n      entry = entry.next;\n    }\n    if (state.corkedRequestsFree) {\n      state.corkedRequestsFree.next = _this;\n    } else {\n      state.corkedRequestsFree = _this;\n    }\n  };\n}","'use strict';\n\nvar Buffer = require('buffer').Buffer;\n/*<replacement>*/\nvar bufferShim = require('buffer-shims');\n/*</replacement>*/\n\nmodule.exports = BufferList;\n\nfunction BufferList() {\n  this.head = null;\n  this.tail = null;\n  this.length = 0;\n}\n\nBufferList.prototype.push = function (v) {\n  var entry = { data: v, next: null };\n  if (this.length > 0) this.tail.next = entry;else this.head = entry;\n  this.tail = entry;\n  ++this.length;\n};\n\nBufferList.prototype.unshift = function (v) {\n  var entry = { data: v, next: this.head };\n  if (this.length === 0) this.tail = entry;\n  this.head = entry;\n  ++this.length;\n};\n\nBufferList.prototype.shift = function () {\n  if (this.length === 0) return;\n  var ret = this.head.data;\n  if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n  --this.length;\n  return ret;\n};\n\nBufferList.prototype.clear = function () {\n  this.head = this.tail = null;\n  this.length = 0;\n};\n\nBufferList.prototype.join = function (s) {\n  if (this.length === 0) return '';\n  var p = this.head;\n  var ret = '' + p.data;\n  while (p = p.next) {\n    ret += s + p.data;\n  }return ret;\n};\n\nBufferList.prototype.concat = function (n) {\n  if (this.length === 0) return bufferShim.alloc(0);\n  if (this.length === 1) return this.head.data;\n  var ret = bufferShim.allocUnsafe(n >>> 0);\n  var p = this.head;\n  var i = 0;\n  while (p) {\n    p.data.copy(ret, i);\n    i += p.data.length;\n    p = p.next;\n  }\n  return ret;\n};","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","module.exports = require(\"./lib/_stream_passthrough.js\")\n","var Stream = (function (){\n  try {\n    return require('st' + 'ream'); // hack to fix a circular dependency issue when used with browserify\n  } catch(_){}\n}());\nexports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = Stream || exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\n\nif (!process.browser && process.env.READABLE_STREAM === 'disable' && Stream) {\n  module.exports = Stream;\n}\n","module.exports = require(\"./lib/_stream_transform.js\")\n","module.exports = require(\"./lib/_stream_writable.js\")\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nmodule.exports = Stream;\n\nvar EE = require('events').EventEmitter;\nvar inherits = require('inherits');\n\ninherits(Stream, EE);\nStream.Readable = require('readable-stream/readable.js');\nStream.Writable = require('readable-stream/writable.js');\nStream.Duplex = require('readable-stream/duplex.js');\nStream.Transform = require('readable-stream/transform.js');\nStream.PassThrough = require('readable-stream/passthrough.js');\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream;\n\n\n\n// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\n\nfunction Stream() {\n  EE.call(this);\n}\n\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n\n  source.on('data', ondata);\n\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n\n  dest.on('drain', ondrain);\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    dest.end();\n  }\n\n\n  function onclose() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    if (typeof dest.destroy === 'function') dest.destroy();\n  }\n\n  // don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup();\n    if (EE.listenerCount(this, 'error') === 0) {\n      throw er; // Unhandled stream error in pipe.\n    }\n  }\n\n  source.on('error', onerror);\n  dest.on('error', onerror);\n\n  // remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n\n    dest.removeListener('close', cleanup);\n  }\n\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n\n  dest.on('close', cleanup);\n\n  dest.emit('pipe', source);\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar Buffer = require('buffer').Buffer;\n\nvar isBufferEncoding = Buffer.isEncoding\n  || function(encoding) {\n       switch (encoding && encoding.toLowerCase()) {\n         case 'hex': case 'utf8': case 'utf-8': case 'ascii': case 'binary': case 'base64': case 'ucs2': case 'ucs-2': case 'utf16le': case 'utf-16le': case 'raw': return true;\n         default: return false;\n       }\n     }\n\n\nfunction assertEncoding(encoding) {\n  if (encoding && !isBufferEncoding(encoding)) {\n    throw new Error('Unknown encoding: ' + encoding);\n  }\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters. CESU-8 is handled as part of the UTF-8 encoding.\n//\n// @TODO Handling all encodings inside a single object makes it very difficult\n// to reason about this code, so it should be split up in the future.\n// @TODO There should be a utf8-strict encoding that rejects invalid UTF-8 code\n// points as used by CESU-8.\nvar StringDecoder = exports.StringDecoder = function(encoding) {\n  this.encoding = (encoding || 'utf8').toLowerCase().replace(/[-_]/, '');\n  assertEncoding(encoding);\n  switch (this.encoding) {\n    case 'utf8':\n      // CESU-8 represents each of Surrogate Pair by 3-bytes\n      this.surrogateSize = 3;\n      break;\n    case 'ucs2':\n    case 'utf16le':\n      // UTF-16 represents each of Surrogate Pair by 2-bytes\n      this.surrogateSize = 2;\n      this.detectIncompleteChar = utf16DetectIncompleteChar;\n      break;\n    case 'base64':\n      // Base-64 stores 3 bytes in 4 chars, and pads the remainder.\n      this.surrogateSize = 3;\n      this.detectIncompleteChar = base64DetectIncompleteChar;\n      break;\n    default:\n      this.write = passThroughWrite;\n      return;\n  }\n\n  // Enough space to store all bytes of a single character. UTF-8 needs 4\n  // bytes, but CESU-8 may require up to 6 (3 bytes per surrogate).\n  this.charBuffer = new Buffer(6);\n  // Number of bytes received for the current incomplete multi-byte character.\n  this.charReceived = 0;\n  // Number of bytes expected for the current incomplete multi-byte character.\n  this.charLength = 0;\n};\n\n\n// write decodes the given buffer and returns it as JS string that is\n// guaranteed to not contain any partial multi-byte characters. Any partial\n// character found at the end of the buffer is buffered up, and will be\n// returned when calling write again with the remaining bytes.\n//\n// Note: Converting a Buffer containing an orphan surrogate to a String\n// currently works, but converting a String to a Buffer (via `new Buffer`, or\n// Buffer#write) will replace incomplete surrogates with the unicode\n// replacement character. See https://codereview.chromium.org/121173009/ .\nStringDecoder.prototype.write = function(buffer) {\n  var charStr = '';\n  // if our last write ended with an incomplete multibyte character\n  while (this.charLength) {\n    // determine how many remaining bytes this buffer has to offer for this char\n    var available = (buffer.length >= this.charLength - this.charReceived) ?\n        this.charLength - this.charReceived :\n        buffer.length;\n\n    // add the new bytes to the char buffer\n    buffer.copy(this.charBuffer, this.charReceived, 0, available);\n    this.charReceived += available;\n\n    if (this.charReceived < this.charLength) {\n      // still not enough chars in this buffer? wait for more ...\n      return '';\n    }\n\n    // remove bytes belonging to the current character from the buffer\n    buffer = buffer.slice(available, buffer.length);\n\n    // get the character that was split\n    charStr = this.charBuffer.slice(0, this.charLength).toString(this.encoding);\n\n    // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n    var charCode = charStr.charCodeAt(charStr.length - 1);\n    if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n      this.charLength += this.surrogateSize;\n      charStr = '';\n      continue;\n    }\n    this.charReceived = this.charLength = 0;\n\n    // if there are no more bytes in this buffer, just emit our char\n    if (buffer.length === 0) {\n      return charStr;\n    }\n    break;\n  }\n\n  // determine and set charLength / charReceived\n  this.detectIncompleteChar(buffer);\n\n  var end = buffer.length;\n  if (this.charLength) {\n    // buffer the incomplete character bytes we got\n    buffer.copy(this.charBuffer, 0, buffer.length - this.charReceived, end);\n    end -= this.charReceived;\n  }\n\n  charStr += buffer.toString(this.encoding, 0, end);\n\n  var end = charStr.length - 1;\n  var charCode = charStr.charCodeAt(end);\n  // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n  if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n    var size = this.surrogateSize;\n    this.charLength += size;\n    this.charReceived += size;\n    this.charBuffer.copy(this.charBuffer, size, 0, size);\n    buffer.copy(this.charBuffer, 0, 0, size);\n    return charStr.substring(0, end);\n  }\n\n  // or just emit the charStr\n  return charStr;\n};\n\n// detectIncompleteChar determines if there is an incomplete UTF-8 character at\n// the end of the given buffer. If so, it sets this.charLength to the byte\n// length that character, and sets this.charReceived to the number of bytes\n// that are available for this character.\nStringDecoder.prototype.detectIncompleteChar = function(buffer) {\n  // determine how many bytes we have to check at the end of this buffer\n  var i = (buffer.length >= 3) ? 3 : buffer.length;\n\n  // Figure out if one of the last i bytes of our buffer announces an\n  // incomplete char.\n  for (; i > 0; i--) {\n    var c = buffer[buffer.length - i];\n\n    // See http://en.wikipedia.org/wiki/UTF-8#Description\n\n    // 110XXXXX\n    if (i == 1 && c >> 5 == 0x06) {\n      this.charLength = 2;\n      break;\n    }\n\n    // 1110XXXX\n    if (i <= 2 && c >> 4 == 0x0E) {\n      this.charLength = 3;\n      break;\n    }\n\n    // 11110XXX\n    if (i <= 3 && c >> 3 == 0x1E) {\n      this.charLength = 4;\n      break;\n    }\n  }\n  this.charReceived = i;\n};\n\nStringDecoder.prototype.end = function(buffer) {\n  var res = '';\n  if (buffer && buffer.length)\n    res = this.write(buffer);\n\n  if (this.charReceived) {\n    var cr = this.charReceived;\n    var buf = this.charBuffer;\n    var enc = this.encoding;\n    res += buf.slice(0, cr).toString(enc);\n  }\n\n  return res;\n};\n\nfunction passThroughWrite(buffer) {\n  return buffer.toString(this.encoding);\n}\n\nfunction utf16DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 2;\n  this.charLength = this.charReceived ? 2 : 0;\n}\n\nfunction base64DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 3;\n  this.charLength = this.charReceived ? 3 : 0;\n}\n","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","import file_system = require('../core/file_system');\nimport {ApiError, ErrorCode} from '../core/api_error';\nimport file_flag = require('../core/file_flag');\nimport file = require('../core/file');\nimport Stats from '../core/node_fs_stats';\nimport preload_file = require('../generic/preload_file');\nimport * as path from 'path';\n\ninterface IAsyncOperation {\n\tapiMethod: string;\n\targuments: any[];\n}\n\n/**\n * We define our own file to interpose on syncSync() for mirroring purposes.\n */\nclass MirrorFile extends preload_file.PreloadFile<AsyncMirror> implements file.File {\n  constructor(fs: AsyncMirror, path: string, flag: file_flag.FileFlag, stat: Stats, data: Buffer) {\n    super(fs, path, flag, stat, data);\n  }\n\n  public syncSync(): void {\n    if (this.isDirty()) {\n      this._fs._syncSync(this);\n      this.resetDirty();\n    }\n  }\n\n  public closeSync(): void {\n    this.syncSync();\n  }\n}\n\n/**\n * AsyncMirrorFS mirrors a synchronous filesystem into an asynchronous filesystem\n * by:\n * * Performing operations over the in-memory copy, while asynchronously pipelining them\n *   to the backing store.\n * * During application loading, the contents of the async file system can be reloaded into\n *   the synchronous store, if desired.\n * The two stores will be kept in sync. The most common use-case is to pair a synchronous\n * in-memory filesystem with an asynchronous backing store.\n */\nexport default class AsyncMirror extends file_system.SynchronousFileSystem implements file_system.FileSystem {\n  /**\n   * Queue of pending asynchronous operations.\n   */\n  private _queue: IAsyncOperation[] = [];\n  private _queueRunning: boolean = false;\n  private _sync: file_system.FileSystem;\n  private _async: file_system.FileSystem;\n  private _isInitialized: boolean = false;\n  private _initializeCallbacks: ((e?: ApiError) => void)[] = [];\n  constructor(sync: file_system.FileSystem, async: file_system.FileSystem) {\n    super();\n    this._sync = sync;\n    this._async = async;\n    if (!sync.supportsSynch()) {\n      throw new Error(\"Expected synchronous storage.\");\n    }\n    if (async.supportsSynch()) {\n      throw new Error(\"Expected asynchronous storage.\");\n    }\n  }\n\n  public getName(): string {\n\t \treturn \"AsyncMirror\";\n  }\n\n  public static isAvailable(): boolean {\n    return true;\n  }\n\n  public _syncSync(fd: preload_file.PreloadFile<any>) {\n    this._sync.writeFileSync(fd.getPath(), fd.getBuffer(), null, file_flag.FileFlag.getFileFlag('w'), fd.getStats().mode);\n    this.enqueueOp({\n      apiMethod: 'writeFile',\n      arguments: [fd.getPath(), fd.getBuffer(), null, fd.getFlag(), fd.getStats().mode]\n    });\n  }\n\n  /**\n   * Called once to load up files from async storage into sync storage.\n   */\n  public initialize(userCb: (err?: ApiError) => void): void {\n    const callbacks = this._initializeCallbacks;\n\n    const end = (e?: ApiError): void => {\n      this._isInitialized = !e;\n      this._initializeCallbacks = [];\n      callbacks.forEach((cb) => cb(e));\n    };\n\n    if (!this._isInitialized) {\n      // First call triggers initialization, the rest wait.\n      if (callbacks.push(userCb) === 1) {\n        const copyDirectory = (p: string, mode: number, cb: (err?: ApiError) => void) => {\n          if (p !== '/') {\n            this._sync.mkdirSync(p, mode);\n          }\n          this._async.readdir(p, (err, files) => {\n            var i = 0;\n            // NOTE: This function must not be in a lexically nested statement,\n            // such as an if or while statement. Safari refuses to run the\n            // script since it is undefined behavior.\n            function copyNextFile(err?: ApiError) {\n              if (err) {\n                cb(err);\n              } else if (i < files.length) {\n                copyItem(path.join(p, files[i]), copyNextFile);\n                i++;\n              } else {\n                cb();\n              }\n            }\n            if (err) {\n              cb(err);\n            } else {\n              copyNextFile();\n            }\n          });\n        }, copyFile = (p: string, mode: number, cb: (err?: ApiError) => void) => {\n          this._async.readFile(p, null, file_flag.FileFlag.getFileFlag('r'), (err, data) => {\n            if (err) {\n              cb(err);\n            } else {\n              try {\n                this._sync.writeFileSync(p, data, null, file_flag.FileFlag.getFileFlag('w'), mode);\n              } catch (e) {\n                err = e;\n              } finally {\n                cb(err);\n              }\n            }\n          });\n        }, copyItem = (p: string, cb: (err?: ApiError) => void) => {\n          this._async.stat(p, false, (err, stats) => {\n            if (err) {\n              cb(err);\n            } else if (stats.isDirectory()) {\n              copyDirectory(p, stats.mode, cb);\n            } else {\n              copyFile(p, stats.mode, cb);\n            }\n          });\n        };\n        copyDirectory('/', 0, end);\n      }\n    } else {\n      userCb();\n    }\n  }\n\n  private checkInitialized(): void {\n    if (!this._isInitialized) {\n      throw new ApiError(ErrorCode.EPERM, \"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.\");\n    }\n  }\n\n  public isReadOnly(): boolean { return false; }\n  public supportsSynch(): boolean { return true; }\n  public supportsLinks(): boolean { return false; }\n  public supportsProps(): boolean { return this._sync.supportsProps() && this._async.supportsProps(); }\n\n  private enqueueOp(op: IAsyncOperation) {\n    this._queue.push(op);\n    if (!this._queueRunning) {\n      this._queueRunning = true;\n      var doNextOp = (err?: ApiError) => {\n        if (err) {\n          console.error(`WARNING: File system has desynchronized. Received following error: ${err}\\n$`);\n        }\n        if (this._queue.length > 0) {\n          var op = this._queue.shift(),\n            args = op.arguments;\n          args.push(doNextOp);\n          (<Function> (<any> this._async)[op.apiMethod]).apply(this._async, args);\n        } else {\n          this._queueRunning = false;\n        }\n      };\n      doNextOp();\n    }\n  }\n\n  public renameSync(oldPath: string, newPath: string): void {\n    this.checkInitialized();\n    this._sync.renameSync(oldPath, newPath);\n    this.enqueueOp({\n      apiMethod: 'rename',\n      arguments: [oldPath, newPath]\n    });\n  }\n  public statSync(p: string, isLstat: boolean): Stats {\n    this.checkInitialized();\n    return this._sync.statSync(p, isLstat);\n  }\n  public openSync(p: string, flag: file_flag.FileFlag, mode: number): file.File {\n    this.checkInitialized();\n    // Sanity check: Is this open/close permitted?\n    var fd = this._sync.openSync(p, flag, mode);\n    fd.closeSync();\n    return new MirrorFile(this, p, flag, this._sync.statSync(p, false), this._sync.readFileSync(p, null, file_flag.FileFlag.getFileFlag('r')));\n  }\n  public unlinkSync(p: string): void {\n    this.checkInitialized();\n    this._sync.unlinkSync(p);\n    this.enqueueOp({\n      apiMethod: 'unlink',\n      arguments: [p]\n    });\n  }\n  public rmdirSync(p: string): void {\n    this.checkInitialized();\n    this._sync.rmdirSync(p);\n    this.enqueueOp({\n      apiMethod: 'rmdir',\n      arguments: [p]\n    });\n  }\n  public mkdirSync(p: string, mode: number): void {\n    this.checkInitialized();\n    this._sync.mkdirSync(p, mode);\n    this.enqueueOp({\n      apiMethod: 'mkdir',\n      arguments: [p, mode]\n    });\n  }\n  public readdirSync(p: string): string[] {\n    this.checkInitialized();\n    return this._sync.readdirSync(p);\n  }\n  public existsSync(p: string): boolean {\n    this.checkInitialized();\n    return this._sync.existsSync(p);\n  }\n  public chmodSync(p: string, isLchmod: boolean, mode: number): void {\n    this.checkInitialized();\n    this._sync.chmodSync(p, isLchmod, mode);\n    this.enqueueOp({\n      apiMethod: 'chmod',\n      arguments: [p, isLchmod, mode]\n    });\n  }\n  public chownSync(p: string, isLchown: boolean, uid: number, gid: number): void {\n    this.checkInitialized();\n    this._sync.chownSync(p, isLchown, uid, gid);\n    this.enqueueOp({\n      apiMethod: 'chown',\n      arguments: [p, isLchown, uid, gid]\n    });\n  }\n  public utimesSync(p: string, atime: Date, mtime: Date): void {\n    this.checkInitialized();\n    this._sync.utimesSync(p, atime, mtime);\n    this.enqueueOp({\n      apiMethod: 'utimes',\n      arguments: [p, atime, mtime]\n    });\n  }\n}\n","import preload_file = require('../generic/preload_file');\nimport file_system = require('../core/file_system');\nimport file_flag = require('../core/file_flag');\nimport {default as Stats, FileType} from '../core/node_fs_stats';\nimport {ApiError, ErrorCode} from '../core/api_error';\nimport file = require('../core/file');\nimport async = require('async');\nimport path = require('path');\nimport {arrayBuffer2Buffer, buffer2ArrayBuffer} from '../core/util';\n\nvar errorCodeLookup: {[dropboxErrorCode: number]: ErrorCode} = null;\n// Lazily construct error code lookup, since DropboxJS might be loaded *after* BrowserFS (or not at all!)\nfunction constructErrorCodeLookup() {\n  if (errorCodeLookup !== null) {\n    return;\n  }\n  errorCodeLookup = {};\n  // This indicates a network transmission error on modern browsers. Internet Explorer might cause this code to be reported on some API server errors.\n  errorCodeLookup[Dropbox.ApiError.NETWORK_ERROR] = ErrorCode.EIO;\n  // This happens when the contentHash parameter passed to a Dropbox.Client#readdir or Dropbox.Client#stat matches the most recent content, so the API call response is omitted, to save bandwidth.\n  // errorCodeLookup[Dropbox.ApiError.NO_CONTENT];\n  // The error property on {Dropbox.ApiError#response} should indicate which input parameter is invalid and why.\n  errorCodeLookup[Dropbox.ApiError.INVALID_PARAM] = ErrorCode.EINVAL;\n  // The OAuth token used for the request will never become valid again, so the user should be re-authenticated.\n  errorCodeLookup[Dropbox.ApiError.INVALID_TOKEN] = ErrorCode.EPERM;\n  // This indicates a bug in dropbox.js and should never occur under normal circumstances.\n  // ^ Actually, that's false. This occurs when you try to move folders to themselves, or move a file over another file.\n  errorCodeLookup[Dropbox.ApiError.OAUTH_ERROR] = ErrorCode.EPERM;\n  // This happens when trying to read from a non-existing file, readdir a non-existing directory, write a file into a non-existing directory, etc.\n  errorCodeLookup[Dropbox.ApiError.NOT_FOUND] = ErrorCode.ENOENT;\n  // This indicates a bug in dropbox.js and should never occur under normal circumstances.\n  errorCodeLookup[Dropbox.ApiError.INVALID_METHOD] = ErrorCode.EINVAL;\n  // This happens when a Dropbox.Client#readdir or Dropbox.Client#stat call would return more than a maximum amount of directory entries.\n  errorCodeLookup[Dropbox.ApiError.NOT_ACCEPTABLE] = ErrorCode.EINVAL;\n  // This is used by some backend methods to indicate that the client needs to download server-side changes and perform conflict resolution. Under normal usage, errors with this code should never surface to the code using dropbox.js.\n  errorCodeLookup[Dropbox.ApiError.CONFLICT] = ErrorCode.EINVAL;\n  // Status value indicating that the application is making too many requests.\n  errorCodeLookup[Dropbox.ApiError.RATE_LIMITED] = ErrorCode.EBUSY;\n  // The request should be retried after some time.\n  errorCodeLookup[Dropbox.ApiError.SERVER_ERROR] = ErrorCode.EBUSY;\n  // Status value indicating that the user's Dropbox is over its storage quota.\n  errorCodeLookup[Dropbox.ApiError.OVER_QUOTA] = ErrorCode.ENOSPC;\n}\n\ninterface ICachedPathInfo {\n  stat: Dropbox.File.Stat;\n}\n\ninterface ICachedFileInfo extends ICachedPathInfo {\n  contents: ArrayBuffer;\n}\n\nfunction isFileInfo(cache: ICachedPathInfo): cache is ICachedFileInfo {\n  return cache && cache.stat.isFile;\n}\n\ninterface ICachedDirInfo extends ICachedPathInfo {\n  contents: string[];\n}\n\nfunction isDirInfo(cache: ICachedPathInfo): cache is ICachedDirInfo {\n  return cache && cache.stat.isFolder;\n}\n\nfunction isArrayBuffer(ab: any): ab is ArrayBuffer {\n  // Accept null / undefined, too.\n  return ab === null || ab === undefined || (typeof(ab) === 'object' && typeof(ab['byteLength']) === 'number');\n}\n\n/**\n * Wraps a Dropbox client and caches operations.\n */\nclass CachedDropboxClient {\n  private _cache: {[path: string]: ICachedPathInfo} = {};\n  private _client: Dropbox.Client;\n\n  constructor(client: Dropbox.Client) {\n    this._client = client;\n  }\n\n  private getCachedInfo(p: string): ICachedPathInfo {\n    return this._cache[p.toLowerCase()];\n  }\n\n  private putCachedInfo(p: string, cache: ICachedPathInfo): void {\n    this._cache[p.toLowerCase()] = cache;\n  }\n\n  private deleteCachedInfo(p: string): void {\n    delete this._cache[p.toLowerCase()];\n  }\n\n  private getCachedDirInfo(p: string): ICachedDirInfo {\n    var info = this.getCachedInfo(p);\n    if (isDirInfo(info)) {\n      return info;\n    } else {\n      return null;\n    }\n  }\n\n  private getCachedFileInfo(p: string): ICachedFileInfo {\n    var info = this.getCachedInfo(p);\n    if (isFileInfo(info)) {\n      return info;\n    } else {\n      return null;\n    }\n  }\n\n  private updateCachedDirInfo(p: string, stat: Dropbox.File.Stat, contents: string[] = null): void {\n    var cachedInfo = this.getCachedInfo(p);\n    // Dropbox uses the *contentHash* property for directories.\n    // Ignore stat objects w/o a contentHash defined; those actually exist!!!\n    // (Example: readdir returns an array of stat objs; stat objs for dirs in that context have no contentHash)\n    if (stat.contentHash !== null && (cachedInfo === undefined || cachedInfo.stat.contentHash !== stat.contentHash)) {\n      this.putCachedInfo(p, <ICachedDirInfo> {\n        stat: stat,\n        contents: contents\n      });\n    }\n  }\n\n  private updateCachedFileInfo(p: string, stat: Dropbox.File.Stat, contents: ArrayBuffer = null): void {\n    var cachedInfo = this.getCachedInfo(p);\n    // Dropbox uses the *versionTag* property for files.\n    // Ignore stat objects w/o a versionTag defined.\n    if (stat.versionTag !== null && (cachedInfo === undefined || cachedInfo.stat.versionTag !== stat.versionTag)) {\n      this.putCachedInfo(p, <ICachedFileInfo> {\n        stat: stat,\n        contents: contents\n      });\n    }\n  }\n\n  private updateCachedInfo(p: string, stat: Dropbox.File.Stat, contents: ArrayBuffer | string[] = null): void {\n    if (stat.isFile && isArrayBuffer(contents)) {\n      this.updateCachedFileInfo(p, stat, contents);\n    } else if (stat.isFolder && Array.isArray(contents)) {\n      this.updateCachedDirInfo(p, stat, contents);\n    }\n  }\n\n  public readdir(p: string, cb: (error: Dropbox.ApiError, contents?: string[]) => void): void {\n    var cacheInfo = this.getCachedDirInfo(p);\n\n    this._wrap((interceptCb) => {\n      if (cacheInfo !== null && cacheInfo.contents) {\n        this._client.readdir(p, {\n          contentHash: cacheInfo.stat.contentHash\n        }, interceptCb);\n      } else {\n        this._client.readdir(p, interceptCb);\n      }\n    }, (err: Dropbox.ApiError, filenames: string[], stat: Dropbox.File.Stat, folderEntries: Dropbox.File.Stat[]) => {\n      if (err) {\n        if (err.status === Dropbox.ApiError.NO_CONTENT && cacheInfo !== null) {\n          cb(null, cacheInfo.contents.slice(0));\n        } else {\n          cb(err);\n        }\n      } else {\n        this.updateCachedDirInfo(p, stat, filenames.slice(0));\n        folderEntries.forEach((entry) => {\n          this.updateCachedInfo(path.join(p, entry.name), entry);\n        });\n        cb(null, filenames);\n      }\n    });\n  }\n\n  public remove(p: string, cb: (error?: Dropbox.ApiError) => void): void {\n    this._wrap((interceptCb) => {\n      this._client.remove(p, interceptCb);\n    }, (err: Dropbox.ApiError, stat?: Dropbox.File.Stat) => {\n      if (!err) {\n        this.updateCachedInfo(p, stat);\n      }\n      cb(err);\n    });\n  }\n\n  public move(src: string, dest: string, cb: (error?: Dropbox.ApiError) => void): void {\n    this._wrap((interceptCb) => {\n      this._client.move(src, dest, interceptCb);\n    }, (err: Dropbox.ApiError, stat: Dropbox.File.Stat) => {\n      if (!err) {\n        this.deleteCachedInfo(src);\n        this.updateCachedInfo(dest, stat);\n      }\n      cb(err);\n    });\n  }\n\n  public stat(p: string, cb: (error: Dropbox.ApiError, stat?: Dropbox.File.Stat) => void): void {\n    this._wrap((interceptCb) => {\n      this._client.stat(p, interceptCb);\n    }, (err: Dropbox.ApiError, stat: Dropbox.File.Stat) => {\n      if (!err) {\n        this.updateCachedInfo(p, stat);\n      }\n      cb(err, stat);\n    });\n  }\n\n  public readFile(p: string, cb: (error: Dropbox.ApiError, file?: ArrayBuffer, stat?: Dropbox.File.Stat) => void): void {\n    var cacheInfo = this.getCachedFileInfo(p);\n    if (cacheInfo !== null && cacheInfo.contents !== null) {\n      // Try to use cached info; issue a stat to see if contents are up-to-date.\n      this.stat(p, (error, stat?) => {\n        if (error) {\n          cb(error);\n        } else if (stat.contentHash === cacheInfo.stat.contentHash) {\n          // No file changes.\n          cb(error, cacheInfo.contents.slice(0), cacheInfo.stat);\n        } else {\n          // File changes; rerun to trigger actual readFile.\n          this.readFile(p, cb);\n        }\n      });\n    } else {\n      this._wrap((interceptCb) => {\n        this._client.readFile(p, { arrayBuffer: true }, interceptCb);\n      }, (err: Dropbox.ApiError, contents: any, stat: Dropbox.File.Stat) => {\n        if (!err) {\n          this.updateCachedInfo(p, stat, contents.slice(0));\n        }\n        cb(err, contents, stat);\n      });\n    }\n  }\n\n  public writeFile(p: string, contents: ArrayBuffer, cb: (error: Dropbox.ApiError, stat?: Dropbox.File.Stat) => void): void {\n    this._wrap((interceptCb) => {\n      this._client.writeFile(p, contents, interceptCb);\n    },(err: Dropbox.ApiError, stat: Dropbox.File.Stat) => {\n      if (!err) {\n        this.updateCachedInfo(p, stat, contents.slice(0));\n      }\n      cb(err, stat);\n    });\n  }\n\n  public mkdir(p: string, cb: (error?: Dropbox.ApiError) => void): void {\n    this._wrap((interceptCb) => {\n      this._client.mkdir(p, interceptCb);\n    }, (err: Dropbox.ApiError, stat: Dropbox.File.Stat) => {\n      if (!err) {\n        this.updateCachedInfo(p, stat, []);\n      }\n      cb(err);\n    });\n  }\n\n  /**\n   * Wraps an operation such that we retry a failed operation 3 times.\n   * Necessary to deal with Dropbox rate limiting.\n   *\n   * @param performOp Function that performs the operation. Will be called up to three times.\n   * @param cb Called when the operation succeeds, fails in a non-temporary manner, or fails three times.\n   */\n  private _wrap(performOp: (interceptCb: (error: Dropbox.ApiError) => void) => void, cb: Function): void {\n    var numRun = 0,\n      interceptCb = function (error: Dropbox.ApiError): void {\n        // Timeout duration, in seconds.\n        var timeoutDuration: number = 2;\n        if (error && 3 > (++numRun)) {\n          switch(error.status) {\n            case Dropbox.ApiError.SERVER_ERROR:\n            case Dropbox.ApiError.NETWORK_ERROR:\n            case Dropbox.ApiError.RATE_LIMITED:\n              setTimeout(() => {\n                performOp(interceptCb);\n              }, timeoutDuration * 1000);\n              break;\n            default:\n              cb.apply(null, arguments);\n              break;\n          }\n        } else {\n          cb.apply(null, arguments);\n        }\n      };\n\n    performOp(interceptCb);\n  }\n}\n\nexport class DropboxFile extends preload_file.PreloadFile<DropboxFileSystem> implements file.File {\n  constructor(_fs: DropboxFileSystem, _path: string, _flag: file_flag.FileFlag, _stat: Stats, contents?: NodeBuffer) {\n    super(_fs, _path, _flag, _stat, contents)\n  }\n\n  public sync(cb: (e?: ApiError) => void): void {\n    if (this.isDirty()) {\n      var buffer = this.getBuffer(),\n        arrayBuffer = buffer2ArrayBuffer(buffer);\n      this._fs._writeFileStrict(this.getPath(), arrayBuffer, (e?: ApiError) => {\n        if (!e) {\n          this.resetDirty();\n        }\n        cb(e);\n      });\n    } else {\n      cb();\n    }\n  }\n\n  public close(cb: (e?: ApiError) => void): void {\n    this.sync(cb);\n  }\n}\n\nexport default class DropboxFileSystem extends file_system.BaseFileSystem implements file_system.FileSystem {\n  // The Dropbox client.\n  private _client: CachedDropboxClient;\n\n  /**\n   * Arguments: an authenticated Dropbox.js client\n   */\n  constructor(client: Dropbox.Client) {\n    super();\n    this._client = new CachedDropboxClient(client);\n    constructErrorCodeLookup();\n  }\n\n  public getName(): string {\n    return 'Dropbox';\n  }\n\n  public static isAvailable(): boolean {\n    // Checks if the Dropbox library is loaded.\n    return typeof Dropbox !== 'undefined';\n  }\n\n  public isReadOnly(): boolean {\n    return false;\n  }\n\n  // Dropbox doesn't support symlinks, properties, or synchronous calls\n\n  public supportsSymlinks(): boolean {\n    return false;\n  }\n\n  public supportsProps(): boolean {\n    return false;\n  }\n\n  public supportsSynch(): boolean {\n    return false;\n  }\n\n  public empty(mainCb: (e?: ApiError) => void): void {\n    this._client.readdir('/', (error, files) => {\n      if (error) {\n        mainCb(this.convert(error, '/'));\n      } else {\n        var deleteFile = (file: string, cb: (err?: ApiError) => void) => {\n          var p = path.join('/', file);\n          this._client.remove(p, (err) => {\n            cb(err ? this.convert(err, p) : null);\n          });\n        };\n        var finished = (err?: ApiError) => {\n          if (err) {\n            mainCb(err);\n          } else {\n            mainCb();\n          }\n        };\n        // XXX: <any> typing is to get around overly-restrictive ErrorCallback typing.\n        async.each(files, <any> deleteFile, <any> finished);\n      }\n    });\n  }\n\n public rename(oldPath: string, newPath: string, cb: (e?: ApiError) => void): void {\n    this._client.move(oldPath, newPath, (error) => {\n      if (error) {\n        // the move is permitted if newPath is a file.\n        // Check if this is the case, and remove if so.\n        this._client.stat(newPath, (error2, stat) => {\n          if (error2 || stat.isFolder) {\n            var missingPath = (<any> error.response).error.indexOf(oldPath) > -1 ? oldPath : newPath;\n            cb(this.convert(error, missingPath));\n          } else {\n            // Delete file, repeat rename.\n            this._client.remove(newPath, (error2) => {\n              if (error2) {\n                cb(this.convert(error2, newPath));\n              } else {\n                this.rename(oldPath, newPath, cb);\n              }\n            });\n          }\n        });\n      } else {\n        cb();\n      }\n    });\n  }\n\n  public stat(path: string, isLstat: boolean, cb: (err: ApiError, stat?: Stats) => void): void {\n    // Ignore lstat case -- Dropbox doesn't support symlinks\n    // Stat the file\n    this._client.stat(path, (error, stat) => {\n      if (error) {\n        cb(this.convert(error, path));\n      } else if ((stat != null) && stat.isRemoved) {\n        // Dropbox keeps track of deleted files, so if a file has existed in the\n        // past but doesn't any longer, you wont get an error\n        cb(ApiError.FileError(ErrorCode.ENOENT, path));\n      } else {\n        var stats = new Stats(this._statType(stat), stat.size);\n        return cb(null, stats);\n      }\n    });\n  }\n\n  public open(path: string, flags: file_flag.FileFlag, mode: number, cb: (err: ApiError, fd?: file.File) => any): void {\n    // Try and get the file's contents\n    this._client.readFile(path, (error, content, dbStat) => {\n      if (error) {\n        // If the file's being opened for reading and doesn't exist, return an\n        // error\n        if (flags.isReadable()) {\n          cb(this.convert(error, path));\n        } else {\n          switch (error.status) {\n            // If it's being opened for writing or appending, create it so that\n            // it can be written to\n            case Dropbox.ApiError.NOT_FOUND:\n              var ab = new ArrayBuffer(0);\n              return this._writeFileStrict(path, ab, (error2: ApiError, stat?: Dropbox.File.Stat) => {\n                if (error2) {\n                  cb(error2);\n                } else {\n                  var file = this._makeFile(path, flags, stat, arrayBuffer2Buffer(ab));\n                  cb(null, file);\n                }\n              });\n            default:\n              return cb(this.convert(error, path));\n          }\n        }\n      } else {\n        // No error\n        var buffer: Buffer;\n        // Dropbox.js seems to set `content` to `null` rather than to an empty\n        // buffer when reading an empty file. Not sure why this is.\n        if (content === null) {\n          buffer = new Buffer(0);\n        } else {\n          buffer = arrayBuffer2Buffer(content);\n        }\n        var file = this._makeFile(path, flags, dbStat, buffer);\n        return cb(null, file);\n      }\n    });\n  }\n\n  public _writeFileStrict(p: string, data: ArrayBuffer, cb: (e: ApiError, stat?: Dropbox.File.Stat) => void): void {\n    var parent = path.dirname(p);\n    this.stat(parent, false, (error: ApiError, stat?: Stats): void => {\n      if (error) {\n        cb(ApiError.FileError(ErrorCode.ENOENT, parent));\n      } else {\n        this._client.writeFile(p, data, (error2, stat) => {\n          if (error2) {\n            cb(this.convert(error2, p));\n          } else {\n            cb(null, stat);\n          }\n        });\n      }\n    });\n  }\n\n  /**\n   * Private\n   * Returns a BrowserFS object representing the type of a Dropbox.js stat object\n   */\n  public _statType(stat: Dropbox.File.Stat): FileType {\n    return stat.isFile ? FileType.FILE : FileType.DIRECTORY;\n  }\n\n  /**\n   * Private\n   * Returns a BrowserFS object representing a File, created from the data\n   * returned by calls to the Dropbox API.\n   */\n  public _makeFile(path: string, flag: file_flag.FileFlag, stat: Dropbox.File.Stat, buffer: NodeBuffer): DropboxFile {\n    var type = this._statType(stat);\n    var stats = new Stats(type, stat.size);\n    return new DropboxFile(this, path, flag, stats, buffer);\n  }\n\n  /**\n   * Private\n   * Delete a file or directory from Dropbox\n   * isFile should reflect which call was made to remove the it (`unlink` or\n   * `rmdir`). If this doesn't match what's actually at `path`, an error will be\n   * returned\n   */\n  public _remove(path: string, cb: (e?: ApiError) => void, isFile: boolean): void {\n    this._client.stat(path, (error, stat) => {\n      if (error) {\n        cb(this.convert(error, path));\n      } else {\n        if (stat.isFile && !isFile) {\n          cb(ApiError.FileError(ErrorCode.ENOTDIR, path));\n        } else if (!stat.isFile && isFile) {\n          cb(ApiError.FileError(ErrorCode.EISDIR, path));\n        } else {\n          this._client.remove(path, (error) => {\n            if (error) {\n              cb(this.convert(error, path));\n            } else {\n              cb(null);\n            }\n          });\n        }\n      }\n    });\n  }\n\n  /**\n   * Delete a file\n   */\n  public unlink(path: string, cb: (e?: ApiError) => void): void {\n    this._remove(path, cb, true);\n  }\n\n  /**\n   * Delete a directory\n   */\n  public rmdir(path: string, cb: (e?: ApiError) => void): void {\n    this._remove(path, cb, false);\n  }\n\n  /**\n   * Create a directory\n   */\n  public mkdir(p: string, mode: number, cb: (e?: ApiError) => void): void {\n    // Dropbox.js' client.mkdir() behaves like `mkdir -p`, i.e. it creates a\n    // directory and all its ancestors if they don't exist.\n    // Node's fs.mkdir() behaves like `mkdir`, i.e. it throws an error if an attempt\n    // is made to create a directory without a parent.\n    // To handle this inconsistency, a check for the existence of `path`'s parent\n    // must be performed before it is created, and an error thrown if it does\n    // not exist\n    var parent = path.dirname(p);\n    this._client.stat(parent, (error, stat) => {\n      if (error) {\n        cb(this.convert(error, parent));\n      } else {\n        this._client.mkdir(p, (error) => {\n          if (error) {\n            cb(ApiError.FileError(ErrorCode.EEXIST, p));\n          } else {\n            cb(null);\n          }\n        });\n      }\n    });\n  }\n\n  /**\n   * Get the names of the files in a directory\n   */\n  public readdir(path: string, cb: (err: ApiError, files?: string[]) => void): void {\n    this._client.readdir(path, (error, files) => {\n      if (error) {\n        return cb(this.convert(error));\n      } else {\n        return cb(null, files);\n      }\n    });\n  }\n\n  /**\n   * Converts a Dropbox-JS error into a BFS error.\n   */\n  public convert(err: Dropbox.ApiError, path: string = null): ApiError {\n    var errorCode = errorCodeLookup[err.status];\n    if (errorCode === undefined) {\n      errorCode = ErrorCode.EIO;\n    }\n\n    if (path == null) {\n      return new ApiError(errorCode);\n    } else {\n      return ApiError.FileError(errorCode, path);\n    }\n  }\n}\n","import {BaseFileSystem, FileSystem} from '../core/file_system';\nimport path = require('path');\nimport {ApiError} from '../core/api_error';\n\n/**\n * The FolderAdapter file system wraps a file system, and scopes all interactions to a subfolder of that file system.\n */\nexport default class FolderAdapter extends BaseFileSystem implements FileSystem {\n  private _wrapped: FileSystem;\n  private _folder: string;\n  constructor(folder: string, wrapped: FileSystem) {\n    super();\n    this._folder = folder;\n    this._wrapped = wrapped;\n  }\n\n  /**\n   * Initialize the file system. Ensures that the wrapped file system\n   * has the given folder.\n   */\n  public initialize(cb: (e?: ApiError) => void) {\n    this._wrapped.exists(this._folder, (exists: boolean) => {\n      if (exists) {\n        cb();\n      } else if (this._wrapped.isReadOnly()) {\n        cb(ApiError.ENOENT(this._folder));\n      } else {\n        this._wrapped.mkdir(this._folder, 0x1ff, cb);\n      }\n    });\n  }\n\n  public getName(): string { return this._wrapped.getName(); }\n  public isReadOnly(): boolean { return this._wrapped.isReadOnly(); }\n  public supportsProps(): boolean { return this._wrapped.supportsProps(); }\n  public supportsSynch(): boolean { return this._wrapped.supportsSynch(); }\n  public supportsLinks(): boolean { return false; }\n\n  public static isAvailable(): boolean {\n    return true;\n  }\n}\n\nfunction translateError(folder: string, e: any): any {\n  if (e !== null && typeof e === 'object') {\n    let err = <ApiError> e;\n    let p = err.path;\n    if (p) {\n      p = '/' + path.relative(folder, p);\n      err.message = err.message.replace(err.path, p);\n      err.path = p;\n    }\n  }\n  return e;\n}\n\nfunction wrapCallback(folder: string, cb: any): any {\n  if (typeof cb === 'function') {\n    return function(err) {\n      if (arguments.length > 0) {\n        arguments[0] = translateError(folder, err);\n      }\n      (<Function> cb).apply(null, arguments);\n    };\n  } else {\n    return cb;\n  }\n}\n\nfunction wrapFunction(name: string, wrapFirst: boolean, wrapSecond: boolean): Function {\n  if (name.slice(name.length - 4) !== 'Sync') {\n    // Async function. Translate error in callback.\n    return function() {\n      if (arguments.length > 0) {\n        if (wrapFirst) {\n          arguments[0] = path.join(this._folder, arguments[0]);\n        }\n        if (wrapSecond) {\n          arguments[1] = path.join(this._folder, arguments[1]);\n        }\n        arguments[arguments.length - 1] = wrapCallback(this._folder, arguments[arguments.length - 1]);\n      }\n      return this._wrapped[name].apply(this._wrapped, arguments);\n    };\n  } else {\n    // Sync function. Translate error in catch.\n    return function() {\n      try {\n        if (wrapFirst) {\n          arguments[0] = path.join(this._folder, arguments[0]);\n        }\n        if (wrapSecond) {\n          arguments[1] = path.join(this._folder, arguments[1]);\n        }\n        return this._wrapped[name].apply(this._wrapped, arguments);\n      } catch (e) {\n        throw translateError(this._folder, e);\n      }\n    };\n  }\n}\n\n// First argument is a path.\n['diskSpace', 'stat', 'statSync', 'open', 'openSync', 'unlink', 'unlinkSync',\n 'rmdir', 'rmdirSync' ,'mkdir', 'mkdirSync', 'readdir', 'readdirSync', 'exists',\n 'existsSync', 'realpath', 'realpathSync', 'truncate', 'truncateSync', 'readFile',\n 'readFileSync', 'writeFile', 'writeFileSync', 'appendFile', 'appendFileSync',\n 'chmod', 'chmodSync', 'chown', 'chownSync', 'utimes', 'utimeSync', 'readlink',\n 'readlinkSync'].forEach((name: string) => {\n  FolderAdapter.prototype[name] = wrapFunction(name, true, false);\n});\n\n// First and second arguments are paths.\n['rename', 'renameSync', 'link', 'linkSync', 'symlink', 'symlinkSync'].forEach((name: string) => {\n  FolderAdapter.prototype[name] = wrapFunction(name, true, true);\n});\n","import preload_file = require('../generic/preload_file');\nimport file_system = require('../core/file_system');\nimport {ApiError, ErrorCode} from '../core/api_error';\nimport {FileFlag, ActionType} from '../core/file_flag';\nimport {default as Stats, FileType} from '../core/node_fs_stats';\nimport file = require('../core/file');\nimport path = require('path');\nimport global = require('../core/global');\nimport async = require('async');\nimport {buffer2ArrayBuffer, arrayBuffer2Buffer} from '../core/util';\n\nfunction isDirectoryEntry(entry: Entry): entry is DirectoryEntry {\n  return entry.isDirectory;\n}\n\nvar _getFS: (type:number, size:number, successCallback: FileSystemCallback, errorCallback?: ErrorCallback) => void = global.webkitRequestFileSystem || global.requestFileSystem || null;\n\nfunction _requestQuota(type: number, size: number, success: (size: number) => void, errorCallback: ErrorCallback) {\n  // We cast navigator and window to '<any>' because everything here is\n  // nonstandard functionality, despite the fact that Chrome has the only\n  // implementation of the HTML5FS and is likely driving the standardization\n  // process. Thus, these objects defined off of navigator and window are not\n  // present in the DefinitelyTyped TypeScript typings for FileSystem.\n  if (typeof (<any> navigator)['webkitPersistentStorage'] !== 'undefined') {\n    switch(type) {\n      case global.PERSISTENT:\n        (<any> navigator).webkitPersistentStorage.requestQuota(size, success, errorCallback);\n        break;\n      case global.TEMPORARY:\n        (<any> navigator).webkitTemporaryStorage.requestQuota(size, success, errorCallback);\n        break\n      default:\n        errorCallback(new TypeError(`Invalid storage type: ${type}`));\n        break;\n    }\n  } else {\n    (<any> global).webkitStorageInfo.requestQuota(type, size, success, errorCallback);\n  }\n}\n\nfunction _toArray(list?: any[]): any[] {\n  return Array.prototype.slice.call(list || [], 0);\n}\n\n// A note about getFile and getDirectory options:\n// These methods are called at numerous places in this file, and are passed\n// some combination of these two options:\n//   - create: If true, the entry will be created if it doesn't exist.\n//             If false, an error will be thrown if it doesn't exist.\n//   - exclusive: If true, only create the entry if it doesn't already exist,\n//                and throw an error if it does.\n\nexport class HTML5FSFile extends preload_file.PreloadFile<HTML5FS> implements file.File {\n  constructor(_fs: HTML5FS, _path: string, _flag: FileFlag, _stat: Stats, contents?: NodeBuffer) {\n    super(_fs, _path, _flag, _stat, contents);\n  }\n\n  public sync(cb: (e?: ApiError) => void): void {\n    if (this.isDirty()) {\n      // Don't create the file (it should already have been created by `open`)\n      var opts = {\n        create: false\n      };\n      var _fs = this._fs;\n      var success: FileEntryCallback = (entry) => {\n        entry.createWriter((writer) => {\n          var buffer = this.getBuffer();\n          var blob = new Blob([buffer2ArrayBuffer(buffer)]);\n          var length = blob.size;\n          writer.onwriteend = () => {\n            writer.onwriteend = null;\n            writer.truncate(length);\n            this.resetDirty();\n            cb();\n          };\n          writer.onerror = (err: DOMError) => {\n            cb(_fs.convert(err, this.getPath(), false));\n          };\n          writer.write(blob);\n        });\n      };\n      var error = (err: DOMError) => {\n        cb(_fs.convert(err, this.getPath(), false));\n      };\n      _fs.fs.root.getFile(this.getPath(), opts, success, error);\n    } else {\n      cb();\n    }\n  }\n\n  public close(cb: (e?: ApiError) => void): void {\n    this.sync(cb);\n  }\n}\n\nexport default class HTML5FS extends file_system.BaseFileSystem implements file_system.FileSystem {\n  private size: number;\n  private type: number;\n  // HTML5File reaches into HTML5FS. :/\n  public fs: FileSystem;\n  /**\n   * Arguments:\n   *   - type: PERSISTENT or TEMPORARY\n   *   - size: storage quota to request, in megabytes. Allocated value may be less.\n   */\n  constructor(size: number = 5, type: number = global.PERSISTENT) {\n    super();\n    // Convert MB to bytes.\n    this.size = 1024 * 1024 * size;\n    this.type = type;\n  }\n\n  public getName(): string {\n    return 'HTML5 FileSystem';\n  }\n\n  public static isAvailable(): boolean {\n    return _getFS != null;\n  }\n\n  public isReadOnly(): boolean {\n    return false;\n  }\n\n  public supportsSymlinks(): boolean {\n    return false;\n  }\n\n  public supportsProps(): boolean {\n    return false;\n  }\n\n  public supportsSynch(): boolean {\n    return false;\n  }\n\n  /**\n   * Converts the given DOMError into an appropriate ApiError.\n   * Full list of values here:\n   * https://developer.mozilla.org/en-US/docs/Web/API/DOMError\n   */\n  public convert(err: DOMError, p: string, expectedDir: boolean): ApiError {\n    switch (err.name) {\n      /* The user agent failed to create a file or directory due to the existence of a file or\n         directory with the same path.  */\n      case \"PathExistsError\":\n        return ApiError.EEXIST(p);\n      /* The operation failed because it would cause the application to exceed its storage quota.  */\n      case 'QuotaExceededError':\n        return ApiError.FileError(ErrorCode.ENOSPC, p);\n      /*  A required file or directory could not be found at the time an operation was processed.   */\n      case 'NotFoundError':\n        return ApiError.ENOENT(p);\n      /* This is a security error code to be used in situations not covered by any other error codes.\n         - A required file was unsafe for access within a Web application\n         - Too many calls are being made on filesystem resources */\n      case 'SecurityError':\n        return ApiError.FileError(ErrorCode.EACCES, p);\n      /* The modification requested was illegal. Examples of invalid modifications include moving a\n         directory into its own child, moving a file into its parent directory without changing its name,\n         or copying a directory to a path occupied by a file.  */\n      case 'InvalidModificationError':\n        return ApiError.FileError(ErrorCode.EPERM, p);\n      /* The user has attempted to look up a file or directory, but the Entry found is of the wrong type\n         [e.g. is a DirectoryEntry when the user requested a FileEntry].  */\n      case 'TypeMismatchError':\n        return ApiError.FileError(expectedDir ? ErrorCode.ENOTDIR : ErrorCode.EISDIR, p);\n      /* A path or URL supplied to the API was malformed.  */\n      case \"EncodingError\":\n      /* An operation depended on state cached in an interface object, but that state that has changed\n         since it was read from disk.  */\n      case \"InvalidStateError\":\n      /* The user attempted to write to a file or directory which could not be modified due to the state\n         of the underlying filesystem.  */\n      case \"NoModificationAllowedError\":\n      default:\n        return ApiError.FileError(ErrorCode.EINVAL, p);\n    }\n  }\n\n  /**\n   * Nonstandard\n   * Requests a storage quota from the browser to back this FS.\n   */\n  public allocate(cb: (e?: ApiError) => void = function(){}): void {\n    var success = (fs: FileSystem): void => {\n      this.fs = fs;\n      cb()\n    };\n    var error = (err: DOMException): void => {\n      cb(this.convert(err, \"/\", true));\n    };\n    if (this.type === global.PERSISTENT) {\n      _requestQuota(this.type, this.size, (granted: number) => {\n        _getFS(this.type, granted, success, error);\n      }, error);\n    } else {\n      _getFS(this.type, this.size, success, error);\n    }\n  }\n\n  /**\n   * Nonstandard\n   * Deletes everything in the FS. Used for testing.\n   * Karma clears the storage after you quit it but not between runs of the test\n   * suite, and the tests expect an empty FS every time.\n   */\n  public empty(mainCb: (e?: ApiError) => void): void {\n    // Get a list of all entries in the root directory to delete them\n    this._readdir('/', (err: ApiError, entries?: Entry[]): void => {\n      if (err) {\n        console.error('Failed to empty FS');\n        mainCb(err);\n      } else {\n        // Called when every entry has been operated on\n        var finished = (er: any): void => {\n          if (err) {\n            console.error(\"Failed to empty FS\");\n            mainCb(err);\n          } else {\n            mainCb();\n          }\n        };\n        // Removes files and recursively removes directories\n        var deleteEntry = (entry: Entry, cb: (e?: any) => void): void => {\n          var succ = () => {\n            cb();\n          };\n          var error = (err: DOMException) => {\n            cb(this.convert(err, entry.fullPath, !entry.isDirectory));\n          };\n          if (isDirectoryEntry(entry)) {\n            entry.removeRecursively(succ, error);\n          } else {\n            entry.remove(succ, error);\n          }\n        };\n        // Loop through the entries and remove them, then call the callback\n        // when they're all finished.\n        async.each(entries, deleteEntry, finished);\n      }\n    });\n  }\n\n  public rename(oldPath: string, newPath: string, cb: (e?: ApiError) => void): void {\n    var semaphore: number = 2,\n      successCount: number = 0,\n      root: DirectoryEntry = this.fs.root,\n      currentPath: string = oldPath,\n      error = (err: DOMException): void => {\n        if (--semaphore <= 0) {\n            cb(this.convert(err, currentPath, false));\n        }\n      },\n      success = (file: Entry): void => {\n        if (++successCount === 2) {\n          return cb(new ApiError(ErrorCode.EINVAL, \"Something was identified as both a file and a directory. This should never happen.\"));\n        }\n\n        // SPECIAL CASE: If newPath === oldPath, and the path exists, then\n        // this operation trivially succeeds.\n        if (oldPath === newPath) {\n          return cb();\n        }\n\n        // Get the new parent directory.\n        currentPath = path.dirname(newPath);\n        root.getDirectory(currentPath, {}, (parentDir: DirectoryEntry): void => {\n          currentPath = path.basename(newPath);\n          file.moveTo(parentDir, currentPath, (entry: Entry): void => { cb(); }, (err: DOMException): void => {\n            // SPECIAL CASE: If oldPath is a directory, and newPath is a\n            // file, rename should delete the file and perform the move.\n            if (file.isDirectory) {\n              currentPath = newPath;\n              // Unlink only works on files. Try to delete newPath.\n              this.unlink(newPath, (e?): void => {\n                if (e) {\n                  // newPath is probably a directory.\n                  error(err);\n                } else {\n                  // Recur, now that newPath doesn't exist.\n                  this.rename(oldPath, newPath, cb);\n                }\n              });\n            } else {\n              error(err);\n            }\n          });\n        }, error);\n      };\n\n    // We don't know if oldPath is a *file* or a *directory*, and there's no\n    // way to stat items. So launch both requests, see which one succeeds.\n    root.getFile(oldPath, {}, success, error);\n    root.getDirectory(oldPath, {}, success, error);\n  }\n\n  public stat(path: string, isLstat: boolean, cb: (err: ApiError, stat?: Stats) => void): void {\n    // Throw an error if the entry doesn't exist, because then there's nothing\n    // to stat.\n    var opts = {\n      create: false\n    };\n    // Called when the path has been successfully loaded as a file.\n    var loadAsFile = (entry: FileEntry): void => {\n      var fileFromEntry = (file: File): void => {\n        var stat = new Stats(FileType.FILE, file.size);\n        cb(null, stat);\n      };\n      entry.file(fileFromEntry, failedToLoad);\n    };\n    // Called when the path has been successfully loaded as a directory.\n    var loadAsDir = (dir: DirectoryEntry): void => {\n      // Directory entry size can't be determined from the HTML5 FS API, and is\n      // implementation-dependant anyway, so a dummy value is used.\n      var size = 4096;\n      var stat = new Stats(FileType.DIRECTORY, size);\n      cb(null, stat);\n    };\n    // Called when the path couldn't be opened as a directory or a file.\n    var failedToLoad = (err: DOMException): void => {\n      cb(this.convert(err, path, false /* Unknown / irrelevant */));\n    };\n    // Called when the path couldn't be opened as a file, but might still be a\n    // directory.\n    var failedToLoadAsFile = (): void => {\n      this.fs.root.getDirectory(path, opts, loadAsDir, failedToLoad);\n    };\n    // No method currently exists to determine whether a path refers to a\n    // directory or a file, so this implementation tries both and uses the first\n    // one that succeeds.\n    this.fs.root.getFile(path, opts, loadAsFile, failedToLoadAsFile);\n  }\n\n  public open(p: string, flags: FileFlag, mode: number, cb: (err: ApiError, fd?: file.File) => any): void {\n    var error = (err: DOMError): void => {\n      if (err.name === 'InvalidModificationError' && flags.isExclusive()) {\n        cb(ApiError.EEXIST(p));\n      } else {\n        cb(this.convert(err, p, false));\n      }\n    };\n\n    this.fs.root.getFile(p, {\n      create: flags.pathNotExistsAction() === ActionType.CREATE_FILE,\n      exclusive: flags.isExclusive()\n    }, (entry: FileEntry): void => {\n      // Try to fetch corresponding file.\n      entry.file((file: File): void => {\n        var reader = new FileReader();\n        reader.onloadend = (event: Event): void => {\n          var bfs_file = this._makeFile(p, flags, file, <ArrayBuffer> reader.result);\n          cb(null, bfs_file);\n        };\n        reader.onerror = (ev: Event) => {\n          error(reader.error);\n        };\n        reader.readAsArrayBuffer(file);\n      }, error);\n    }, error);\n  }\n\n  /**\n   * Returns a BrowserFS object representing the type of a Dropbox.js stat object\n   */\n  private _statType(stat: Entry): FileType {\n    return stat.isFile ? FileType.FILE : FileType.DIRECTORY;\n  }\n\n  /**\n   * Returns a BrowserFS object representing a File, created from the data\n   * returned by calls to the Dropbox API.\n   */\n  private _makeFile(path: string, flag: FileFlag, stat: File, data: ArrayBuffer = new ArrayBuffer(0)): HTML5FSFile {\n    var stats = new Stats(FileType.FILE, stat.size);\n    var buffer = arrayBuffer2Buffer(data);\n    return new HTML5FSFile(this, path, flag, stats, buffer);\n  }\n\n  /**\n   * Delete a file or directory from the file system\n   * isFile should reflect which call was made to remove the it (`unlink` or\n   * `rmdir`). If this doesn't match what's actually at `path`, an error will be\n   * returned\n   */\n  private _remove(path: string, cb: (e?: ApiError) => void, isFile: boolean): void {\n    var success = (entry: Entry): void => {\n      var succ = () => {\n        cb();\n      };\n      var err = (err: DOMException) => {\n        cb(this.convert(err, path, !isFile));\n      };\n      entry.remove(succ, err);\n    };\n    var error = (err: DOMException): void => {\n      cb(this.convert(err, path, !isFile));\n    };\n    // Deleting the entry, so don't create it\n    var opts = {\n      create: false\n    };\n\n    if (isFile) {\n      this.fs.root.getFile(path, opts, success, error);\n    } else {\n      this.fs.root.getDirectory(path, opts, success, error);\n    }\n  }\n\n  public unlink(path: string, cb: (e?: ApiError) => void): void {\n    this._remove(path, cb, true);\n  }\n\n  public rmdir(path: string, cb: (e?: ApiError) => void): void {\n    // Check if directory is non-empty, first.\n    this.readdir(path, (e, files?) => {\n      if (e) {\n        cb(e);\n      } else if (files.length > 0) {\n        cb(ApiError.ENOTEMPTY(path));\n      } else {\n        this._remove(path, cb, false);\n      }\n    });\n  }\n\n  public mkdir(path: string, mode: number, cb: (e?: ApiError) => void): void {\n    // Create the directory, but throw an error if it already exists, as per\n    // mkdir(1)\n    var opts = {\n      create: true,\n      exclusive: true\n    };\n    var success = (dir: DirectoryEntry): void => {\n      cb();\n    };\n    var error = (err: DOMException): void => {\n      cb(this.convert(err, path, true));\n    };\n    this.fs.root.getDirectory(path, opts, success, error);\n  }\n\n  /**\n   * Returns an array of `FileEntry`s. Used internally by empty and readdir.\n   */\n  private _readdir(path: string, cb: (e: ApiError, entries?: Entry[]) => void): void {\n    var error = (err: DOMException): void => {\n      cb(this.convert(err, path, true));\n    };\n    // Grab the requested directory.\n    this.fs.root.getDirectory(path, { create: false }, (dirEntry: DirectoryEntry) => {\n      var reader = dirEntry.createReader();\n      var entries: Entry[] = [];\n\n      // Call the reader.readEntries() until no more results are returned.\n      var readEntries = () => {\n        reader.readEntries(((results) => {\n          if (results.length) {\n            entries = entries.concat(_toArray(results));\n            readEntries();\n          } else {\n            cb(null, entries);\n          }\n        }), error);\n      };\n      readEntries();\n    }, error);\n  }\n\n  /**\n   * Map _readdir's list of `FileEntry`s to their names and return that.\n   */\n  public readdir(path: string, cb: (err: ApiError, files?: string[]) => void): void {\n    this._readdir(path, (e: ApiError, entries?: Entry[]): void => {\n      if (e) {\n        return cb(e);\n      }\n      var rv: string[] = [];\n      for (var i = 0; i < entries.length; i++) {\n        rv.push(entries[i].name);\n      }\n      cb(null, rv);\n    });\n  }\n}\n","import kvfs = require('../generic/key_value_filesystem');\n\n/**\n * A simple in-memory key-value store backed by a JavaScript object.\n */\nexport class InMemoryStore implements kvfs.SyncKeyValueStore, kvfs.SimpleSyncStore {\n  private store: { [key: string]: NodeBuffer } = {};\n\n  public name() { return 'In-memory'; }\n  public clear() { this.store = {}; }\n\n  public beginTransaction(type: string): kvfs.SyncKeyValueRWTransaction {\n    return new kvfs.SimpleSyncRWTransaction(this);\n  }\n\n  public get(key: string): NodeBuffer {\n    return this.store[key];\n  }\n\n  public put(key: string, data: NodeBuffer, overwrite: boolean): boolean {\n    if (!overwrite && this.store.hasOwnProperty(key)) {\n      return false;\n    }\n    this.store[key] = data;\n    return true;\n  }\n\n  public del(key: string): void {\n    delete this.store[key];\n  }\n}\n\n/**\n * A simple in-memory file system backed by an InMemoryStore.\n */\nexport default class InMemoryFileSystem extends kvfs.SyncKeyValueFileSystem {\n  constructor() {\n    super({ store: new InMemoryStore() });\n  }\n}\n","import kvfs = require('../generic/key_value_filesystem');\nimport {ApiError, ErrorCode} from '../core/api_error';\nimport global = require('../core/global');\nimport {arrayBuffer2Buffer, buffer2ArrayBuffer} from '../core/util';\n/**\n * Get the indexedDB constructor for the current browser.\n */\nvar indexedDB: IDBFactory = global.indexedDB ||\n                          (<any>global).mozIndexedDB ||\n                          (<any>global).webkitIndexedDB ||\n                          global.msIndexedDB;\n\n/**\n * Converts a DOMException or a DOMError from an IndexedDB event into a\n * standardized BrowserFS API error.\n */\nfunction convertError(e: {name: string}, message: string = e.toString()): ApiError {\n  switch(e.name) {\n    case \"NotFoundError\":\n      return new ApiError(ErrorCode.ENOENT, message);\n    case \"QuotaExceededError\":\n      return new ApiError(ErrorCode.ENOSPC, message);\n    default:\n      // The rest do not seem to map cleanly to standard error codes.\n      return new ApiError(ErrorCode.EIO, message);\n  }\n}\n\n/**\n * Produces a new onerror handler for IDB. Our errors are always fatal, so we\n * handle them generically: Call the user-supplied callback with a translated\n * version of the error, and let the error bubble up.\n */\nfunction onErrorHandler(cb: (e: ApiError) => void,\n  code: ErrorCode = ErrorCode.EIO, message: string = null): (e?: any) => void {\n  return function (e?: any): void {\n    // Prevent the error from canceling the transaction.\n    e.preventDefault();\n    cb(new ApiError(code, message));\n  };\n}\n\nexport class IndexedDBROTransaction implements kvfs.AsyncKeyValueROTransaction {\n  constructor(public tx: IDBTransaction, public store: IDBObjectStore) { }\n\n  get(key: string, cb: (e: ApiError, data?: NodeBuffer) => void): void {\n    try {\n      var r: IDBRequest = this.store.get(key);\n      r.onerror = onErrorHandler(cb);\n      r.onsuccess = (event) => {\n        // IDB returns the value 'undefined' when you try to get keys that\n        // don't exist. The caller expects this behavior.\n        var result: any = (<any>event.target).result;\n        if (result === undefined) {\n          cb(null, result);\n        } else {\n          // IDB data is stored as an ArrayBuffer\n          cb(null, arrayBuffer2Buffer(result));\n        }\n      };\n    } catch (e) {\n      cb(convertError(e));\n    }\n  }\n}\n\nexport class IndexedDBRWTransaction extends IndexedDBROTransaction implements kvfs.AsyncKeyValueRWTransaction, kvfs.AsyncKeyValueROTransaction {\n  constructor(tx: IDBTransaction, store: IDBObjectStore) {\n    super(tx, store);\n  }\n\n  public put(key: string, data: NodeBuffer, overwrite: boolean, cb: (e: ApiError, committed?: boolean) => void): void {\n    try {\n      var arraybuffer = buffer2ArrayBuffer(data),\n        r: IDBRequest;\n      if (overwrite) {\n        r = this.store.put(arraybuffer, key);\n      } else {\n        // 'add' will never overwrite an existing key.\n        r = this.store.add(arraybuffer, key);\n      }\n      // XXX: NEED TO RETURN FALSE WHEN ADD HAS A KEY CONFLICT. NO ERROR.\n      r.onerror = onErrorHandler(cb);\n      r.onsuccess = (event) => {\n        cb(null, true);\n      };\n    } catch (e) {\n      cb(convertError(e));\n    }\n  }\n\n  public del(key: string, cb: (e?: ApiError) => void): void {\n    try {\n      // NOTE: IE8 has a bug with identifiers named 'delete' unless used as a string\n      // like this.\n      // http://stackoverflow.com/a/26479152\n      var r: IDBRequest = this.store['delete'](key);\n      r.onerror = onErrorHandler(cb);\n      r.onsuccess = (event) => {\n        cb();\n      };\n    } catch (e) {\n      cb(convertError(e));\n    }\n  }\n\n  public commit(cb: (e?: ApiError) => void): void {\n    // Return to the event loop to commit the transaction.\n    setTimeout(cb, 0);\n  }\n\n  public abort(cb: (e?: ApiError) => void): void {\n    var _e: ApiError;\n    try {\n      this.tx.abort();\n    } catch (e) {\n      _e = convertError(e);\n    } finally {\n      cb(_e);\n    }\n  }\n}\n\nexport class IndexedDBStore implements kvfs.AsyncKeyValueStore {\n  private db: IDBDatabase;\n\n  /**\n   * Constructs an IndexedDB file system.\n   * @param cb Called once the database is instantiated and ready for use.\n   *   Passes an error if there was an issue instantiating the database.\n   * @param objectStoreName The name of this file system. You can have\n   *   multiple IndexedDB file systems operating at once, but each must have\n   *   a different name.\n   */\n  constructor(cb: (e: ApiError, store?: IndexedDBStore) => void, private storeName: string = 'browserfs') {\n    var openReq: IDBOpenDBRequest = indexedDB.open(this.storeName, 1);\n\n    openReq.onupgradeneeded = (event) => {\n      var db: IDBDatabase = (<any>event.target).result;\n      // Huh. This should never happen; we're at version 1. Why does another\n      // database exist?\n      if (db.objectStoreNames.contains(this.storeName)) {\n        db.deleteObjectStore(this.storeName);\n      }\n      db.createObjectStore(this.storeName);\n    };\n\n    openReq.onsuccess = (event) => {\n      this.db = (<any>event.target).result;\n      cb(null, this);\n    };\n\n    openReq.onerror = onErrorHandler(cb, ErrorCode.EACCES);\n  }\n\n  public name(): string {\n    return \"IndexedDB - \" + this.storeName;\n  }\n\n  public clear(cb: (e?: ApiError) => void): void {\n    try {\n      var tx = this.db.transaction(this.storeName, 'readwrite'),\n        objectStore = tx.objectStore(this.storeName),\n        r: IDBRequest = objectStore.clear();\n      r.onsuccess = (event) => {\n        // Use setTimeout to commit transaction.\n        setTimeout(cb, 0);\n      };\n      r.onerror = onErrorHandler(cb);\n    } catch (e) {\n      cb(convertError(e));\n    }\n  }\n\n  public beginTransaction(type: string = 'readonly'): kvfs.AsyncKeyValueROTransaction {\n    var tx = this.db.transaction(this.storeName, type),\n      objectStore = tx.objectStore(this.storeName);\n    if (type === 'readwrite') {\n      return new IndexedDBRWTransaction(tx, objectStore);\n    } else if (type === 'readonly') {\n      return new IndexedDBROTransaction(tx, objectStore);\n    } else {\n      throw new ApiError(ErrorCode.EINVAL, 'Invalid transaction type.');\n    }\n  }\n}\n\n/**\n * A file system that uses the IndexedDB key value file system.\n */\nexport default class IndexedDBFileSystem extends kvfs.AsyncKeyValueFileSystem {\n  constructor(cb: (e: ApiError, fs?: IndexedDBFileSystem) => void, storeName?: string) {\n    super();\n    new IndexedDBStore((e, store?): void => {\n      if (e) {\n        cb(e);\n      } else {\n        this.init(store, (e?) => {\n          cb(e, this);\n        });\n      }\n    }, storeName);\n  }\n\n  public static isAvailable(): boolean {\n    // In Safari's private browsing mode, indexedDB.open returns NULL.\n    // In Firefox, it throws an exception.\n    // In Chrome, it \"just works\", and clears the database when you leave the page.\n    // Untested: Opera, IE.\n    try {\n      return typeof indexedDB !== 'undefined' && null !== indexedDB.open(\"__browserfs_test__\");\n    } catch (e) {\n      return false;\n    }\n  }\n}\n","import kvfs = require('../generic/key_value_filesystem');\nimport {ApiError, ErrorCode} from '../core/api_error';\nimport global = require('../core/global');\n\n// Some versions of FF and all versions of IE do not support the full range of\n// 16-bit numbers encoded as characters, as they enforce UTF-16 restrictions.\n// http://stackoverflow.com/questions/11170716/are-there-any-characters-that-are-not-allowed-in-localstorage/11173673#11173673\nvar supportsBinaryString: boolean = false,\n  binaryEncoding: string;\ntry {\n  global.localStorage.setItem(\"__test__\", String.fromCharCode(0xD800));\n  supportsBinaryString = global.localStorage.getItem(\"__test__\") === String.fromCharCode(0xD800);\n} catch (e) {\n  // IE throws an exception.\n  supportsBinaryString = false;\n}\nbinaryEncoding = supportsBinaryString ? 'binary_string' : 'binary_string_ie';\nif (!Buffer.isEncoding(binaryEncoding)) {\n  // Fallback for non BrowserFS implementations of buffer that lack a\n  // binary_string format.\n  binaryEncoding = \"base64\";\n}\n\n/**\n * A synchronous key-value store backed by localStorage.\n */\nexport class LocalStorageStore implements kvfs.SyncKeyValueStore, kvfs.SimpleSyncStore {\n  constructor() { }\n\n  public name(): string {\n    return 'LocalStorage';\n  }\n\n  public clear(): void {\n    global.localStorage.clear();\n  }\n\n  public beginTransaction(type: string): kvfs.SyncKeyValueRWTransaction {\n    // No need to differentiate.\n    return new kvfs.SimpleSyncRWTransaction(this);\n  }\n\n  public get(key: string): NodeBuffer {\n    try {\n      var data = global.localStorage.getItem(key);\n      if (data !== null) {\n        return new Buffer(data, binaryEncoding);\n      }\n    } catch (e) {\n\n    }\n    // Key doesn't exist, or a failure occurred.\n    return undefined;\n  }\n\n  public put(key: string, data: NodeBuffer, overwrite: boolean): boolean {\n    try {\n      if (!overwrite && global.localStorage.getItem(key) !== null) {\n        // Don't want to overwrite the key!\n        return false;\n      }\n      global.localStorage.setItem(key, data.toString(binaryEncoding));\n      return true;\n    } catch (e) {\n      throw new ApiError(ErrorCode.ENOSPC, \"LocalStorage is full.\");\n    }\n  }\n\n  public del(key: string): void {\n    try {\n      global.localStorage.removeItem(key);\n    } catch (e) {\n      throw new ApiError(ErrorCode.EIO, \"Unable to delete key \" + key + \": \" + e);\n    }\n  }\n}\n\n/**\n * A synchronous file system backed by localStorage. Connects our\n * LocalStorageStore to our SyncKeyValueFileSystem.\n */\nexport default class LocalStorageFileSystem extends kvfs.SyncKeyValueFileSystem {\n  constructor() { super({ store: new LocalStorageStore() }); }\n  public static isAvailable(): boolean {\n    return typeof global.localStorage !== 'undefined';\n  }\n}\n","import file_system = require('../core/file_system');\nimport InMemoryFileSystem from './InMemory';\nimport {ApiError, ErrorCode} from '../core/api_error';\nimport fs = require('../core/node_fs');\nimport path = require('path');\nimport {mkdirpSync} from '../core/util';\n\n/**\n * The MountableFileSystem allows you to mount multiple backend types or\n * multiple instantiations of the same backend into a single file system tree.\n * The file systems do not need to know about each other; all interactions are\n * automatically facilitated through this interface.\n *\n * For example, if a file system is mounted at /mnt/blah, and a request came in\n * for /mnt/blah/foo.txt, the file system would see a request for /foo.txt.\n */\nexport default class MountableFileSystem extends file_system.BaseFileSystem implements file_system.FileSystem {\n  private mntMap: {[path: string]: file_system.FileSystem};\n  // Contains the list of mount points in mntMap, sorted by string length in decreasing order.\n  // Ensures that we scan the most specific mount points for a match first, which lets us\n  // nest mount points.\n  private mountList: string[] = [];\n  private rootFs: file_system.FileSystem;\n  constructor() {\n    super();\n    this.mntMap = {};\n    // The InMemory file system serves purely to provide directory listings for\n    // mounted file systems.\n    this.rootFs = new InMemoryFileSystem();\n  }\n\n  /**\n   * Mounts the file system at the given mount point.\n   */\n  public mount(mountPoint: string, fs: file_system.FileSystem): void {\n    if (mountPoint[0] !== '/') {\n      mountPoint = `/${mountPoint}`;\n    }\n    mountPoint = path.resolve(mountPoint);\n    if (this.mntMap[mountPoint]) {\n      throw new ApiError(ErrorCode.EINVAL, \"Mount point \" + mountPoint + \" is already taken.\");\n    }\n    mkdirpSync(mountPoint, 0x1ff, this.rootFs);\n    this.mntMap[mountPoint] = fs;\n    this.mountList.push(mountPoint);\n    this.mountList = this.mountList.sort((a, b) => b.length - a.length);\n  }\n\n  public umount(mountPoint: string): void {\n    if (mountPoint[0] !== '/') {\n      mountPoint = `/${mountPoint}`;\n    }\n    mountPoint = path.resolve(mountPoint);\n    if (!this.mntMap[mountPoint]) {\n      throw new ApiError(ErrorCode.EINVAL, \"Mount point \" + mountPoint + \" is already unmounted.\");\n    }\n    delete this.mntMap[mountPoint];\n    this.mountList.splice(this.mountList.indexOf(mountPoint), 1);\n\n    while (mountPoint !== '/') {\n      if (this.rootFs.readdirSync(mountPoint).length === 0) {\n        this.rootFs.rmdirSync(mountPoint);\n        mountPoint = path.dirname(mountPoint);\n      } else {\n        break;\n      }\n    }\n  }\n\n  /**\n   * Returns the file system that the path points to.\n   */\n  public _getFs(path: string): {fs: file_system.FileSystem; path: string} {\n    let mountList = this.mountList, len = mountList.length;\n    for (let i = 0; i < len; i++) {\n      let mountPoint = mountList[i];\n      // We know path is normalized, so it is a substring of the mount point.\n      if (mountPoint.length <= path.length && path.indexOf(mountPoint) === 0) {\n        path = path.substr(mountPoint.length > 1 ? mountPoint.length : 0);\n        if (path === '') {\n          path = '/';\n        }\n        return {fs: this.mntMap[mountPoint], path: path};\n      }\n    }\n    // Query our root file system.\n    return {fs: this.rootFs, path: path};\n  }\n\n  // Global information methods\n\n  public getName(): string {\n    return 'MountableFileSystem';\n  }\n\n  public static isAvailable(): boolean {\n    return true;\n  }\n\n  public diskSpace(path: string, cb: (total: number, free: number) => void): void {\n    cb(0, 0);\n  }\n\n  public isReadOnly(): boolean {\n    return false;\n  }\n\n  public supportsLinks(): boolean {\n    // I'm not ready for cross-FS links yet.\n    return false;\n  }\n\n  public supportsProps(): boolean {\n    return false;\n  }\n\n  public supportsSynch(): boolean {\n    return true;\n  }\n\n  /**\n   * Fixes up error messages so they mention the mounted file location relative\n   * to the MFS root, not to the particular FS's root.\n   * Mutates the input error, and returns it.\n   */\n  private standardizeError(err: ApiError, path: string, realPath: string): ApiError {\n    var index: number;\n    if (-1 !== (index = err.message.indexOf(path))) {\n      err.message = err.message.substr(0, index) + realPath + err.message.substr(index + path.length);\n      err.path = realPath;\n    }\n    return err;\n  }\n\n  // The following methods involve multiple file systems, and thus have custom\n  // logic.\n  // Note that we go through the Node API to use its robust default argument\n  // processing.\n\n  public rename(oldPath: string, newPath: string, cb: (e?: ApiError) => void): void {\n    // Scenario 1: old and new are on same FS.\n    var fs1_rv = this._getFs(oldPath);\n    var fs2_rv = this._getFs(newPath);\n    if (fs1_rv.fs === fs2_rv.fs) {\n      var _this = this;\n      return fs1_rv.fs.rename(fs1_rv.path, fs2_rv.path, function(e?: ApiError) {\n        if (e) _this.standardizeError(_this.standardizeError(e, fs1_rv.path, oldPath), fs2_rv.path, newPath);\n        cb(e);\n      });\n    }\n\n    // Scenario 2: Different file systems.\n    // Read old file, write new file, delete old file.\n    return fs.readFile(oldPath, function(err: ApiError, data?: any) {\n      if (err) {\n        return cb(err);\n      }\n      fs.writeFile(newPath, data, function(err) {\n        if (err) {\n          return cb(err);\n        }\n        fs.unlink(oldPath, cb);\n      });\n    });\n  }\n\n  public renameSync(oldPath: string, newPath: string): void {\n    // Scenario 1: old and new are on same FS.\n    var fs1_rv = this._getFs(oldPath);\n    var fs2_rv = this._getFs(newPath);\n    if (fs1_rv.fs === fs2_rv.fs) {\n      try {\n        return fs1_rv.fs.renameSync(fs1_rv.path, fs2_rv.path);\n      } catch(e) {\n        this.standardizeError(this.standardizeError(e, fs1_rv.path, oldPath), fs2_rv.path, newPath);\n        throw e;\n      }\n    }\n    // Scenario 2: Different file systems.\n    var data = fs.readFileSync(oldPath);\n    fs.writeFileSync(newPath, data);\n    return fs.unlinkSync(oldPath);\n  }\n\n  public readdirSync(p: string): string[] {\n    let fsInfo = this._getFs(p);\n\n    // If null, rootfs did not have the directory\n    // (or the target FS is the root fs).\n    let rv = null;\n    // Mount points are all defined in the root FS.\n    // Ensure that we list those, too.\n    if (fsInfo.fs !== this.rootFs) {\n      try {\n        rv = this.rootFs.readdirSync(p);\n      } catch (e) {\n        // Ignore.\n      }\n    }\n\n    try {\n      let rv2 = fsInfo.fs.readdirSync(fsInfo.path);\n      if (rv === null) {\n        return rv2;\n      } else {\n        // Filter out duplicates.\n        return rv2.concat(rv.filter((val) => rv2.indexOf(val) === -1));\n      }\n    } catch(e) {\n      if (rv === null) {\n        throw this.standardizeError(e, fsInfo.path, p);\n      } else {\n        // The root FS had something.\n        return rv;\n      }\n    }\n  }\n\n  public readdir(p: string, cb: (err: NodeJS.ErrnoException, listing?: string[]) => any): void {\n    let fsInfo = this._getFs(p);\n    fsInfo.fs.readdir(fsInfo.path, (err, files) => {\n      if (fsInfo.fs !== this.rootFs) {\n        try {\n          let rv = this.rootFs.readdirSync(p);\n          if (files) {\n            // Filter out duplicates.\n            files = files.concat(rv.filter((val) => files.indexOf(val) === -1));\n          } else {\n            files = rv;\n          }\n        } catch (e) {\n          // Root FS and target FS did not have directory.\n          if (err) {\n            return cb(this.standardizeError(err, fsInfo.path, p));\n          }\n        }\n      } else if (err) {\n        // Root FS and target FS are the same, and did not have directory.\n        return cb(this.standardizeError(err, fsInfo.path, p));\n      }\n\n      cb(null, files);\n    });\n  }\n\n  public rmdirSync(p: string): void {\n    let fsInfo = this._getFs(p);\n    if (this._containsMountPt(p)) {\n      throw ApiError.ENOTEMPTY(p);\n    } else {\n      try {\n        fsInfo.fs.rmdirSync(fsInfo.path);\n      } catch (e) {\n        throw this.standardizeError(e, fsInfo.path, p);\n      }\n    }\n  }\n\n  /**\n   * Returns true if the given path contains a mount point.\n   */\n  private _containsMountPt(p: string): boolean {\n    let mountPoints = this.mountList, len = mountPoints.length;\n    for (let i = 0; i < len; i++) {\n      let pt = mountPoints[i];\n      if (pt.length >= p.length && pt.slice(0, p.length) === p) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  public rmdir(p: string, cb: (err?: NodeJS.ErrnoException) => any): void {\n    let fsInfo = this._getFs(p);\n    if (this._containsMountPt(p)) {\n      cb(ApiError.ENOTEMPTY(p));\n    } else {\n      fsInfo.fs.rmdir(fsInfo.path, (err?) => {\n        cb(err ? this.standardizeError(err, fsInfo.path, p) : null);\n      });\n    }\n  }\n}\n\n/**\n * Tricky: Define all of the functions that merely forward arguments to the\n * relevant file system, or return/throw an error.\n * Take advantage of the fact that the *first* argument is always the path, and\n * the *last* is the callback function (if async).\n * @todo Can use numArgs to make proxying more efficient.\n */\nfunction defineFcn(name: string, isSync: boolean, numArgs: number): (...args: any[]) => any {\n  if (isSync) {\n    return function(...args: any[]) {\n      let self: MountableFileSystem = this;\n      var path = args[0];\n      var rv = self._getFs(path);\n      args[0] = rv.path;\n      try {\n        return rv.fs[name].apply(rv.fs, args);\n      } catch (e) {\n        (<any> self).standardizeError(e, rv.path, path);\n        throw e;\n      }\n    };\n  } else {\n    return function(...args: any[]) {\n      let self: MountableFileSystem = this;\n      var path = args[0];\n      var rv = self._getFs(path);\n      args[0] = rv.path;\n      if (typeof args[args.length-1] === 'function') {\n        var cb = args[args.length - 1];\n        args[args.length - 1] = function(...args: any[]) {\n          if (args.length > 0 && args[0] instanceof ApiError) {\n            (<any> self).standardizeError(args[0], rv.path, path);\n          }\n          cb.apply(null, args);\n        }\n      }\n      return rv.fs[name].apply(rv.fs, args);\n    };\n  }\n}\n\nvar fsCmdMap = [\n   // 1 arg functions\n   ['exists', 'unlink', 'readlink'],\n   // 2 arg functions\n   ['stat', 'mkdir', 'realpath', 'truncate'],\n   // 3 arg functions\n   ['open', 'readFile', 'chmod', 'utimes'],\n   // 4 arg functions\n   ['chown'],\n   // 5 arg functions\n   ['writeFile', 'appendFile']];\n\nfor (var i = 0; i < fsCmdMap.length; i++) {\n  var cmds = fsCmdMap[i];\n  for (var j = 0; j < cmds.length; j++) {\n    var fnName = cmds[j];\n    (<any> MountableFileSystem.prototype)[fnName] = defineFcn(fnName, false, i + 1);\n    (<any> MountableFileSystem.prototype)[fnName + 'Sync'] = defineFcn(fnName + 'Sync', true, i + 1);\n  }\n}\n","import {FileSystem, BaseFileSystem} from '../core/file_system';\nimport {ApiError, ErrorCode} from '../core/api_error';\nimport {FileFlag, ActionType} from '../core/file_flag';\nimport util = require('../core/util');\nimport {File} from '../core/file';\nimport {default as Stats, FileType} from '../core/node_fs_stats';\nimport {PreloadFile} from '../generic/preload_file';\nimport LockedFS from '../generic/locked_fs';\nimport path = require('path');\nlet deletionLogPath = '/.deletedFiles.log';\n\n/**\n * Given a read-only mode, makes it writable.\n */\nfunction makeModeWritable(mode: number): number {\n  return 0o222 | mode;\n}\n\nfunction getFlag(f: string): FileFlag {\n  return FileFlag.getFileFlag(f);\n}\n\n/**\n * Overlays a RO file to make it writable.\n */\nclass OverlayFile extends PreloadFile<UnlockedOverlayFS> implements File {\n  constructor(fs: UnlockedOverlayFS, path: string, flag: FileFlag, stats: Stats, data: Buffer) {\n    super(fs, path, flag, stats, data);\n  }\n\n  public sync(cb: (e?: ApiError) => void): void {\n    if (!this.isDirty()) {\n      cb(null);\n      return;\n    }\n\n    this._fs._syncAsync(this, (err: ApiError) => {\n      this.resetDirty();\n      cb(err);\n    });\n  }\n\n  public syncSync(): void {\n    if (this.isDirty()) {\n      this._fs._syncSync(this);\n      this.resetDirty();\n    }\n  }\n\n  public close(cb: (e?: ApiError) => void): void {\n    this.sync(cb);\n  }\n\n  public closeSync(): void {\n    this.syncSync();\n  }\n}\n\n/**\n * OverlayFS makes a read-only filesystem writable by storing writes on a second,\n * writable file system. Deletes are persisted via metadata stored on the writable\n * file system.\n */\nexport class UnlockedOverlayFS extends BaseFileSystem implements FileSystem {\n  private _writable: FileSystem;\n  private _readable: FileSystem;\n  private _isInitialized: boolean = false;\n  private _initializeCallbacks: ((e?: ApiError) => void)[] = [];\n  private _deletedFiles: {[path: string]: boolean} = {};\n  private _deleteLog: File = null;\n\n  constructor(writable: FileSystem, readable: FileSystem) {\n    super();\n    this._writable = writable;\n    this._readable = readable;\n    if (this._writable.isReadOnly()) {\n      throw new ApiError(ErrorCode.EINVAL, \"Writable file system must be writable.\");\n    }\n  }\n\n  private checkInitialized(): void {\n    if (!this._isInitialized) {\n      throw new ApiError(ErrorCode.EPERM, \"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.\");\n    }\n  }\n\n  private checkInitAsync(cb: (e?: ApiError) => void): boolean {\n    if (!this._isInitialized) {\n      cb(new ApiError(ErrorCode.EPERM, \"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.\"));\n      return false;\n    }\n    return true;\n  }\n\n  public getOverlayedFileSystems(): { readable: FileSystem; writable: FileSystem; } {\n    return {\n      readable: this._readable,\n      writable: this._writable\n    };\n  }\n\n  private createParentDirectoriesAsync(p: string, cb: (err?: ApiError)=>void): void {\n    let parent = path.dirname(p)\n    let toCreate: string[] = [];\n    let _this = this;\n\n    this._writable.stat(parent, false, statDone);\n    function statDone(err: ApiError, stat?: Stats): void {\n      if (err) {\n        toCreate.push(parent);\n        parent = path.dirname(parent);\n        _this._writable.stat(parent, false, statDone);\n      } else {\n        createParents();\n      }\n    }\n\n    function createParents(): void {\n      if (!toCreate.length) {\n        return cb();\n      }\n\n      let dir = toCreate.pop();\n      _this._readable.stat(dir, false, (err: ApiError, stats?: Stats) => {\n        // stop if we couldn't read the dir\n        if (!stats) {\n          return cb();\n        }\n\n        _this._writable.mkdir(dir, stats.mode, (err?: ApiError) => {\n          if (err) {\n            return cb(err);\n          }\n          createParents();\n        });\n      });\n    }\n  }\n\n  /**\n   * With the given path, create the needed parent directories on the writable storage\n   * should they not exist. Use modes from the read-only storage.\n   */\n  private createParentDirectories(p: string): void {\n    var parent = path.dirname(p), toCreate: string[] = [];\n    while (!this._writable.existsSync(parent)) {\n      toCreate.push(parent);\n      parent = path.dirname(parent);\n    }\n    toCreate = toCreate.reverse();\n\n    toCreate.forEach((p: string) => {\n      this._writable.mkdirSync(p, this.statSync(p, false).mode);\n    });\n  }\n\n  public static isAvailable(): boolean {\n    return true;\n  }\n\n  public _syncAsync(file: PreloadFile<UnlockedOverlayFS>, cb: (err: ApiError)=>void): void {\n    this.createParentDirectoriesAsync(file.getPath(), (err?: ApiError) => {\n      if (err) {\n        return cb(err);\n      }\n      this._writable.writeFile(file.getPath(), file.getBuffer(), null, getFlag('w'), file.getStats().mode, cb);\n    });\n  }\n\n  public _syncSync(file: PreloadFile<UnlockedOverlayFS>): void {\n    this.createParentDirectories(file.getPath());\n    this._writable.writeFileSync(file.getPath(), file.getBuffer(), null, getFlag('w'), file.getStats().mode);\n  }\n\n  public getName() {\n    return \"OverlayFS\";\n  }\n\n  /**\n   * Called once to load up metadata stored on the writable file system.\n   */\n  public initialize(cb: (err?: ApiError) => void): void {\n    const callbackArray = this._initializeCallbacks;\n\n    const end = (e?: ApiError): void => {\n      this._isInitialized = !e;\n      this._initializeCallbacks = [];\n      callbackArray.forEach(((cb) => cb(e)));\n    };\n\n    // if we're already initialized, immediately invoke the callback\n    if (this._isInitialized) {\n      return cb();\n    }\n\n    callbackArray.push(cb);\n    // The first call to initialize initializes, the rest wait for it to complete.\n    if (callbackArray.length !== 1) {\n      return;\n    }\n\n    // Read deletion log, process into metadata.\n    this._writable.readFile(deletionLogPath, 'utf8', getFlag('r'), (err: ApiError, data?: string) => {\n      if (err) {\n        // ENOENT === Newly-instantiated file system, and thus empty log.\n        if (err.errno !== ErrorCode.ENOENT) {\n          return end(err);\n        }\n      } else {\n        data.split('\\n').forEach((path: string) => {\n          // If the log entry begins w/ 'd', it's a deletion. Otherwise, it's\n          // an undeletion.\n          // TODO: Clean up log during initialization phase.\n          this._deletedFiles[path.slice(1)] = path.slice(0, 1) === 'd';\n        });\n      }\n      // Open up the deletion log for appending.\n      this._writable.open(deletionLogPath, getFlag('a'), 0o644, (err: ApiError, fd?: File) => {\n        if (!err) {\n          this._deleteLog = fd;\n        }\n        end(err);\n      });\n    });\n  }\n\n  public isReadOnly(): boolean { return false; }\n  public supportsSynch(): boolean { return this._readable.supportsSynch() && this._writable.supportsSynch(); }\n  public supportsLinks(): boolean { return false; }\n  public supportsProps(): boolean { return this._readable.supportsProps() && this._writable.supportsProps(); }\n\n  private deletePath(p: string): void {\n    this._deletedFiles[p] = true;\n    var buff = new Buffer(\"d\" + p + \"\\n\");\n    this._deleteLog.writeSync(buff, 0, buff.length, null);\n    this._deleteLog.syncSync();\n  }\n\n  private undeletePath(p: string): void {\n    if (this._deletedFiles[p]) {\n      this._deletedFiles[p] = false;\n      var buff = new Buffer(\"u\" + p);\n      this._deleteLog.writeSync(buff, 0, buff.length, null);\n      this._deleteLog.syncSync();\n    }\n  }\n\n  public rename(oldPath: string, newPath: string, cb: (err?: ApiError) => void): void {\n    if (!this.checkInitAsync(cb)) return;\n    // nothing to do if paths match\n    if (oldPath === newPath) {\n      return cb();\n    }\n\n    this.stat(oldPath, false, (oldErr: ApiError, oldStats?: Stats) => {\n      if (oldErr) {\n        return cb(oldErr);\n      }\n\n      return this.stat(newPath, false, (newErr: ApiError, newStats?: Stats) => {\n\n        // precondition: both oldPath and newPath exist and are dirs.\n        // decreases: |files|\n        // Need to move *every file/folder* currently stored on\n        // readable to its new location on writable.\n        function copyDirContents(files: string[]): void {\n          let file = files.shift();\n          if (!file) {\n            return cb();\n          }\n\n          let oldFile = path.resolve(oldPath, file);\n          let newFile = path.resolve(newPath, file);\n\n          // Recursion! Should work for any nested files / folders.\n          this.rename(oldFile, newFile, (err?: ApiError) => {\n            if (err) {\n              return cb(err);\n            }\n            copyDirContents(files);\n          });\n        }\n\n        let mode = 0o777;\n\n        // from linux's rename(2) manpage: oldpath can specify a\n        // directory.  In this case, newpath must either not exist, or\n        // it must specify an empty directory.\n        if (oldStats.isDirectory()) {\n          if (newErr) {\n            if (newErr.errno !== ErrorCode.ENOENT) {\n              return cb(newErr);\n            }\n\n            return this._writable.exists(oldPath, (exists: boolean) => {\n              // simple case - both old and new are on the writable layer\n              if (exists) {\n                return this._writable.rename(oldPath, newPath, cb);\n              }\n\n              this._writable.mkdir(newPath, mode, (mkdirErr?: ApiError) => {\n                if (mkdirErr) {\n                  return cb(mkdirErr);\n                }\n\n                this._readable.readdir(oldPath, (err: ApiError, files?: string[]) => {\n                  if (err) {\n                    return cb();\n                  }\n                  copyDirContents(files);\n                });\n              });\n            });\n          }\n\n          mode = newStats.mode;\n          if (!newStats.isDirectory()) {\n            return cb(ApiError.ENOTDIR(newPath));\n          }\n\n          this.readdir(newPath, (readdirErr: ApiError, files?: string[]) => {\n            if (files && files.length) {\n              return cb(ApiError.ENOTEMPTY(newPath));\n            }\n\n            this._readable.readdir(oldPath, (err: ApiError, files?: string[]) => {\n              if (err) {\n                return cb();\n              }\n              copyDirContents(files);\n            });\n          });\n        }\n\n        if (newStats && newStats.isDirectory()) {\n          return cb(ApiError.EISDIR(newPath));\n        }\n\n        this.readFile(oldPath, null, getFlag('r'), (err: ApiError, data?: any) => {\n          if (err) {\n            return cb(err);\n          }\n\n          return this.writeFile(newPath, data, null, getFlag('w'), oldStats.mode, (err: ApiError) => {\n            if (err) {\n              return cb(err);\n            }\n            return this.unlink(oldPath, cb);\n          });\n        });\n      });\n    });\n  }\n\n  public renameSync(oldPath: string, newPath: string): void {\n    this.checkInitialized();\n    // Write newPath using oldPath's contents, delete oldPath.\n    var oldStats = this.statSync(oldPath, false);\n    if (oldStats.isDirectory()) {\n      // Optimization: Don't bother moving if old === new.\n      if (oldPath === newPath) {\n        return;\n      }\n\n      var mode = 0o777;\n      if (this.existsSync(newPath)) {\n        var stats = this.statSync(newPath, false),\n          mode = stats.mode;\n        if (stats.isDirectory()) {\n          if (this.readdirSync(newPath).length > 0) {\n            throw ApiError.ENOTEMPTY(newPath);\n          }\n        } else {\n          throw ApiError.ENOTDIR(newPath);\n        }\n      }\n\n      // Take care of writable first. Move any files there, or create an empty directory\n      // if it doesn't exist.\n      if (this._writable.existsSync(oldPath)) {\n        this._writable.renameSync(oldPath, newPath);\n      } else if (!this._writable.existsSync(newPath)) {\n        this._writable.mkdirSync(newPath, mode);\n      }\n\n      // Need to move *every file/folder* currently stored on readable to its new location\n      // on writable.\n      if (this._readable.existsSync(oldPath)) {\n        this._readable.readdirSync(oldPath).forEach((name) => {\n          // Recursion! Should work for any nested files / folders.\n          this.renameSync(path.resolve(oldPath, name), path.resolve(newPath, name));\n        });\n      }\n    } else {\n      if (this.existsSync(newPath) && this.statSync(newPath, false).isDirectory()) {\n        throw ApiError.EISDIR(newPath);\n      }\n\n      this.writeFileSync(newPath,\n        this.readFileSync(oldPath, null, getFlag('r')), null, getFlag('w'), oldStats.mode);\n    }\n\n    if (oldPath !== newPath && this.existsSync(oldPath)) {\n      this.unlinkSync(oldPath);\n    }\n  }\n\n  public stat(p: string, isLstat: boolean,  cb: (err: ApiError, stat?: Stats) => void): void {\n    if (!this.checkInitAsync(cb)) return;\n    this._writable.stat(p, isLstat, (err: ApiError, stat?: Stats) => {\n      if (err && err.errno === ErrorCode.ENOENT) {\n        if (this._deletedFiles[p]) {\n          cb(ApiError.ENOENT(p));\n        }\n        this._readable.stat(p, isLstat, (err: ApiError, stat?: Stats) => {\n          if (stat) {\n            // Make the oldStat's mode writable. Preserve the topmost\n            // part of the mode, which specifies if it is a file or a\n            // directory.\n            stat = stat.clone();\n            stat.mode = makeModeWritable(stat.mode);\n          }\n          cb(err, stat);\n        });\n      } else {\n        cb(err, stat);\n      }\n    });\n  }\n\n  public statSync(p: string, isLstat: boolean): Stats {\n    this.checkInitialized();\n    try {\n      return this._writable.statSync(p, isLstat);\n    } catch (e) {\n      if (this._deletedFiles[p]) {\n        throw ApiError.ENOENT(p);\n      }\n      var oldStat = this._readable.statSync(p, isLstat).clone();\n      // Make the oldStat's mode writable. Preserve the topmost part of the\n      // mode, which specifies if it is a file or a directory.\n      oldStat.mode = makeModeWritable(oldStat.mode);\n      return oldStat;\n    }\n  }\n\n  public open(p: string, flag: FileFlag, mode: number, cb: (err: ApiError, fd?: File) => any): void {\n    if (!this.checkInitAsync(cb)) return;\n    this.stat(p, false, (err: ApiError, stats?: Stats) => {\n      if (stats) {\n        switch (flag.pathExistsAction()) {\n        case ActionType.TRUNCATE_FILE:\n          return this.createParentDirectoriesAsync(p, (err?: ApiError)=> {\n            if (err) {\n              return cb(err);\n            }\n            this._writable.open(p, flag, mode, cb);\n          });\n        case ActionType.NOP:\n          return this._writable.exists(p, (exists: boolean) => {\n            if (exists) {\n              this._writable.open(p, flag, mode, cb);\n            } else {\n              // at this point we know the stats object we got is from\n              // the readable FS.\n              stats = stats.clone();\n              stats.mode = mode;\n              this._readable.readFile(p, null, getFlag('r'), (readFileErr: ApiError, data?: any) => {\n                if (readFileErr) {\n                  return cb(readFileErr);\n                }\n                if (stats.size === -1) {\n                  stats.size = data.length;\n                }\n                let f = new OverlayFile(this, p, flag, stats, data);\n                cb(null, f);\n              });\n            }\n          });\n        default:\n          return cb(ApiError.EEXIST(p));\n        }\n      } else {\n        switch(flag.pathNotExistsAction()) {\n        case ActionType.CREATE_FILE:\n          return this.createParentDirectoriesAsync(p, (err?: ApiError) => {\n            if (err) {\n              return cb(err);\n            }\n            return this._writable.open(p, flag, mode, cb);\n          });\n        default:\n          return cb(ApiError.ENOENT(p));\n        }\n      }\n    });\n  }\n\n  public openSync(p: string, flag: FileFlag, mode: number): File {\n    this.checkInitialized();\n    if (this.existsSync(p)) {\n      switch (flag.pathExistsAction()) {\n        case ActionType.TRUNCATE_FILE:\n          this.createParentDirectories(p);\n          return this._writable.openSync(p, flag, mode);\n        case ActionType.NOP:\n          if (this._writable.existsSync(p)) {\n            return this._writable.openSync(p, flag, mode);\n          } else {\n            // Create an OverlayFile.\n            var stats = this._readable.statSync(p, false).clone();\n            stats.mode = mode;\n            return new OverlayFile(this, p, flag, stats, this._readable.readFileSync(p, null, getFlag('r')));\n          }\n        default:\n          throw ApiError.EEXIST(p);\n      }\n    } else {\n      switch(flag.pathNotExistsAction()) {\n        case ActionType.CREATE_FILE:\n          this.createParentDirectories(p);\n          return this._writable.openSync(p, flag, mode);\n        default:\n          throw ApiError.ENOENT(p);\n      }\n    }\n  }\n\n  public unlink(p: string, cb: (err: ApiError) => void): void {\n    if (!this.checkInitAsync(cb)) return;\n    this.exists(p, (exists: boolean) => {\n      if (!exists)\n        return cb(ApiError.ENOENT(p));\n\n      this._writable.exists(p, (writableExists: boolean) => {\n        if (writableExists) {\n          return this._writable.unlink(p, (err: ApiError) => {\n            if (err) {\n              return cb(err);\n            }\n\n            this.exists(p, (readableExists: boolean) => {\n              if (readableExists) {\n                this.deletePath(p);\n              }\n              cb(null);\n            });\n          });\n        } else {\n          // if this only exists on the readable FS, add it to the\n          // delete map.\n          this.deletePath(p);\n          cb(null);\n        }\n      });\n    });\n  }\n\n  public unlinkSync(p: string): void {\n    this.checkInitialized();\n    if (this.existsSync(p)) {\n      if (this._writable.existsSync(p)) {\n        this._writable.unlinkSync(p);\n      }\n\n      // if it still exists add to the delete log\n      if (this.existsSync(p)) {\n        this.deletePath(p);\n      }\n    } else {\n      throw ApiError.ENOENT(p);\n    }\n  }\n\n  public rmdir(p: string, cb: (err?: ApiError) => void): void {\n    if (!this.checkInitAsync(cb)) return;\n\n    let rmdirLower = (): void => {\n      this.readdir(p, (err: ApiError, files: string[]): void => {\n        if (err) {\n          return cb(err);\n        }\n\n        if (files.length) {\n          return cb(ApiError.ENOTEMPTY(p));\n        }\n\n        this.deletePath(p);\n        cb(null);\n      });\n    };\n\n    this.exists(p, (exists: boolean) => {\n      if (!exists) {\n        return cb(ApiError.ENOENT(p));\n      }\n\n      this._writable.exists(p, (writableExists: boolean) => {\n        if (writableExists) {\n          this._writable.rmdir(p, (err: ApiError) => {\n            if (err) {\n              return cb(err);\n            }\n\n            this._readable.exists(p, (readableExists: boolean) => {\n              if (readableExists) {\n                rmdirLower();\n              } else {\n                cb();\n              }\n            });\n          });\n        } else {\n          rmdirLower();\n        }\n      });\n    });\n  }\n\n  public rmdirSync(p: string): void {\n    this.checkInitialized();\n    if (this.existsSync(p)) {\n      if (this._writable.existsSync(p)) {\n        this._writable.rmdirSync(p);\n      }\n      if (this.existsSync(p)) {\n        // Check if directory is empty.\n        if (this.readdirSync(p).length > 0) {\n          throw ApiError.ENOTEMPTY(p);\n        } else {\n          this.deletePath(p);\n        }\n      }\n    } else {\n      throw ApiError.ENOENT(p);\n    }\n  }\n\n  public mkdir(p: string, mode: number, cb: (err: ApiError, stat?: Stats) => void): void {\n    if (!this.checkInitAsync(cb)) return;\n    this.exists(p, (exists: boolean) => {\n      if (exists) {\n        return cb(ApiError.EEXIST(p));\n      }\n\n      // The below will throw should any of the parent directories\n      // fail to exist on _writable.\n      this.createParentDirectoriesAsync(p, (err: ApiError) => {\n        if (err) {\n          return cb(err);\n        }\n        this._writable.mkdir(p, mode, cb);\n      });\n    });\n  }\n\n  public mkdirSync(p: string, mode: number): void {\n    this.checkInitialized();\n    if (this.existsSync(p)) {\n      throw ApiError.EEXIST(p);\n    } else {\n      // The below will throw should any of the parent directories fail to exist\n      // on _writable.\n      this.createParentDirectories(p);\n      this._writable.mkdirSync(p, mode);\n    }\n  }\n\n  public readdir(p: string, cb: (error: ApiError, files?: string[]) => void): void {\n    if (!this.checkInitAsync(cb)) return;\n    this.stat(p, false, (err: ApiError, dirStats?: Stats) => {\n      if (err) {\n        return cb(err);\n      }\n\n      if (!dirStats.isDirectory()) {\n        return cb(ApiError.ENOTDIR(p));\n      }\n\n      this._writable.readdir(p, (err: ApiError, wFiles: string[]) => {\n        if (err && err.code !== 'ENOENT') {\n          return cb(err);\n        } else if (err || !wFiles) {\n          wFiles = [];\n        }\n\n        this._readable.readdir(p, (err: ApiError, rFiles: string[]) => {\n          // if the directory doesn't exist on the lower FS set rFiles\n          // here to simplify the following code.\n          if (err || !rFiles) {\n            rFiles = [];\n          }\n\n          // Readdir in both, merge, check delete log on each file, return.\n          let contents: string[] = wFiles.concat(rFiles);\n          let seenMap: {[name: string]: boolean} = {};\n          let filtered = contents.filter((fPath: string) => {\n            let result = !seenMap[fPath] && !this._deletedFiles[p + \"/\" + fPath];\n            seenMap[fPath] = true;\n            return result;\n          });\n\n          cb(null, filtered);\n        });\n      });\n    });\n  }\n\n  public readdirSync(p: string): string[] {\n    this.checkInitialized();\n    var dirStats = this.statSync(p, false);\n    if (!dirStats.isDirectory()) {\n      throw ApiError.ENOTDIR(p);\n    }\n\n    // Readdir in both, merge, check delete log on each file, return.\n    var contents: string[] = [];\n    try {\n      contents = contents.concat(this._writable.readdirSync(p));\n    } catch (e) {\n    }\n    try {\n      contents = contents.concat(this._readable.readdirSync(p));\n    } catch (e) {\n    }\n    var seenMap: {[name: string]: boolean} = {};\n    return contents.filter((fileP: string) => {\n      var result = seenMap[fileP] === undefined && this._deletedFiles[p + \"/\" + fileP] !== true;\n      seenMap[fileP] = true;\n      return result;\n    });\n  }\n\n  public exists(p: string, cb: (exists: boolean) => void): void {\n    // Cannot pass an error back to callback, so throw an exception instead\n    // if not initialized.\n    this.checkInitialized();\n    this._writable.exists(p, (existsWritable: boolean) => {\n      if (existsWritable) {\n        return cb(true);\n      }\n\n      this._readable.exists(p, (existsReadable: boolean) => {\n        cb(existsReadable && this._deletedFiles[p] !== true);\n      });\n    });\n  }\n\n  public existsSync(p: string): boolean {\n    this.checkInitialized();\n    return this._writable.existsSync(p) || (this._readable.existsSync(p) && this._deletedFiles[p] !== true);\n  }\n\n  public chmod(p: string, isLchmod: boolean, mode: number, cb: (error?: ApiError) => void): void {\n    if (!this.checkInitAsync(cb)) return;\n    this.operateOnWritableAsync(p, (err?: ApiError) => {\n      if (err) {\n        return cb(err);\n      } else {\n        this._writable.chmod(p, isLchmod, mode, cb);\n      }\n    });\n  }\n\n  public chmodSync(p: string, isLchmod: boolean, mode: number): void {\n    this.checkInitialized();\n    this.operateOnWritable(p, () => {\n      this._writable.chmodSync(p, isLchmod, mode);\n    });\n  }\n\n  public chown(p: string, isLchmod: boolean, uid: number, gid: number, cb: (error?: ApiError) => void): void {\n    if (!this.checkInitAsync(cb)) return;\n    this.operateOnWritableAsync(p, (err?: ApiError) => {\n      if (err) {\n        return cb(err);\n      } else {\n        this._writable.chown(p, isLchmod, uid, gid, cb);\n      }\n    });\n  }\n\n  public chownSync(p: string, isLchown: boolean, uid: number, gid: number): void {\n    this.checkInitialized();\n    this.operateOnWritable(p, () => {\n      this._writable.chownSync(p, isLchown, uid, gid);\n    });\n  }\n\n  public utimes(p: string, atime: Date, mtime: Date, cb: (error?: ApiError) => void): void {\n    if (!this.checkInitAsync(cb)) return;\n    this.operateOnWritableAsync(p, (err?: ApiError) => {\n      if (err) {\n        return cb(err);\n      } else {\n        this._writable.utimes(p, atime, mtime, cb);\n      }\n    });\n  }\n\n  public utimesSync(p: string, atime: Date, mtime: Date): void {\n    this.checkInitialized();\n    this.operateOnWritable(p, () => {\n      this._writable.utimesSync(p, atime, mtime);\n    });\n  }\n\n  /**\n   * Helper function:\n   * - Ensures p is on writable before proceeding. Throws an error if it doesn't exist.\n   * - Calls f to perform operation on writable.\n   */\n  private operateOnWritable(p: string, f: () => void): void {\n    if (this.existsSync(p)) {\n      if (!this._writable.existsSync(p)) {\n        // File is on readable storage. Copy to writable storage before\n        // changing its mode.\n        this.copyToWritable(p);\n      }\n      f();\n    } else {\n      throw ApiError.ENOENT(p);\n    }\n  }\n\n  private operateOnWritableAsync(p: string, cb: (error?: ApiError) => void): void {\n    this.exists(p, (exists: boolean) => {\n      if (!exists) {\n        return cb(ApiError.ENOENT(p));\n      }\n\n      this._writable.exists(p, (existsWritable: boolean) => {\n        if (existsWritable) {\n          cb();\n        } else {\n          return this.copyToWritableAsync(p, cb);\n        }\n      });\n    });\n  }\n\n  /**\n   * Copy from readable to writable storage.\n   * PRECONDITION: File does not exist on writable storage.\n   */\n  private copyToWritable(p: string): void {\n    var pStats = this.statSync(p, false);\n    if (pStats.isDirectory()) {\n      this._writable.mkdirSync(p, pStats.mode);\n    } else {\n      this.writeFileSync(p,\n        this._readable.readFileSync(p, null, getFlag('r')), null,\n        getFlag('w'), this.statSync(p, false).mode);\n    }\n  }\n\n  private copyToWritableAsync(p: string, cb: (err?: ApiError) => void): void {\n    this.stat(p, false, (err: ApiError, pStats?: Stats) => {\n      if (err) {\n        return cb(err);\n      }\n\n      if (pStats.isDirectory()) {\n        return this._writable.mkdir(p, pStats.mode, cb);\n      }\n\n      // need to copy file.\n      this._readable.readFile(p, null, getFlag('r'), (err: ApiError, data?: Buffer) => {\n        if (err) {\n          return cb(err);\n        }\n\n        this.writeFile(p, data, null, getFlag('w'), pStats.mode, cb);\n      });\n    });\n  }\n}\n\nexport default class OverlayFS extends LockedFS<UnlockedOverlayFS> {\n\tconstructor(writable: FileSystem, readable: FileSystem) {\n\t\tsuper(new UnlockedOverlayFS(writable, readable));\n\t}\n\n\tinitialize(cb: (err?: ApiError) => void): void {\n\t\tsuper.initialize(cb);\n\t}\n\n\tstatic isAvailable(): boolean {\n\t\treturn UnlockedOverlayFS.isAvailable();\n\t}\n\n\tgetOverlayedFileSystems(): { readable: FileSystem; writable: FileSystem; } {\n\t\treturn super.getFSUnlocked().getOverlayedFileSystems();\n\t}\n}\n","import file_system = require('../core/file_system');\nimport {ApiError} from '../core/api_error';\nimport file_flag = require('../core/file_flag');\nimport {buffer2ArrayBuffer, arrayBuffer2Buffer} from '../core/util';\nimport file = require('../core/file');\nimport {default as Stats, FileType} from '../core/node_fs_stats';\nimport preload_file = require('../generic/preload_file');\nimport global = require('../core/global');\nimport fs = require('../core/node_fs');\n\ninterface IBrowserFSMessage {\n  browserfsMessage: boolean;\n}\n\nenum SpecialArgType {\n  // Callback\n  CB,\n  // File descriptor\n  FD,\n  // API error\n  API_ERROR,\n  // Stats object\n  STATS,\n  // Initial probe for file system information.\n  PROBE,\n  // FileFlag object.\n  FILEFLAG,\n  // Buffer object.\n  BUFFER,\n  // Generic Error object.\n  ERROR\n}\n\ninterface ISpecialArgument {\n  type: SpecialArgType;\n}\n\ninterface IProbeResponse extends ISpecialArgument {\n  isReadOnly: boolean;\n  supportsLinks: boolean;\n  supportsProps: boolean;\n}\n\ninterface ICallbackArgument extends ISpecialArgument {\n  // The callback ID.\n  id: number;\n}\n\n/**\n * Converts callback arguments into ICallbackArgument objects, and back\n * again.\n */\nclass CallbackArgumentConverter {\n  private _callbacks: { [id: number]: Function } = {};\n  private _nextId: number = 0;\n\n  public toRemoteArg(cb: Function): ICallbackArgument {\n    var id = this._nextId++;\n    this._callbacks[id] = cb;\n    return {\n      type: SpecialArgType.CB,\n      id: id\n    };\n  }\n\n  public toLocalArg(id: number): Function {\n    var cb = this._callbacks[id];\n    delete this._callbacks[id];\n    return cb;\n  }\n}\n\ninterface IFileDescriptorArgument extends ISpecialArgument {\n  // The file descriptor's id on the remote side.\n  id: number;\n  // The entire file's data, as an array buffer.\n  data: ArrayBuffer;\n  // The file's stat object, as an array buffer.\n  stat: ArrayBuffer;\n  // The path to the file.\n  path: string;\n  // The flag of the open file descriptor.\n  flag: string;\n}\n\nclass FileDescriptorArgumentConverter {\n  private _fileDescriptors: { [id: number]: file.File } = {};\n  private _nextId: number = 0;\n\n  public toRemoteArg(fd: file.File, p: string, flag: file_flag.FileFlag, cb: (err: ApiError, arg?: IFileDescriptorArgument) => void): void {\n    var id = this._nextId++,\n      data: ArrayBuffer,\n      stat: ArrayBuffer,\n      argsLeft: number = 2;\n    this._fileDescriptors[id] = fd;\n\n    // Extract needed information asynchronously.\n    fd.stat((err, stats) => {\n      if (err) {\n        cb(err);\n      } else {\n        stat = bufferToTransferrableObject(stats.toBuffer());\n        // If it's a readable flag, we need to grab contents.\n        if (flag.isReadable()) {\n          fd.read(new Buffer(stats.size), 0, stats.size, 0, (err, bytesRead, buff) => {\n            if (err) {\n              cb(err);\n            } else {\n              data = bufferToTransferrableObject(buff);\n              cb(null, {\n                type: SpecialArgType.FD,\n                id: id,\n                data: data,\n                stat: stat,\n                path: p,\n                flag: flag.getFlagString()\n              });\n            }\n          });\n        } else {\n          // File is not readable, which means writing to it will append or\n          // truncate/replace existing contents. Return an empty arraybuffer.\n          cb(null, {\n            type: SpecialArgType.FD,\n            id: id,\n            data: new ArrayBuffer(0),\n            stat: stat,\n            path: p,\n            flag: flag.getFlagString()\n          });\n        }\n      }\n    });\n  }\n\n  private _applyFdChanges(remoteFd: IFileDescriptorArgument, cb: (err: ApiError, fd?: file.File) => void): void {\n    var fd = this._fileDescriptors[remoteFd.id],\n      data = transferrableObjectToBuffer(remoteFd.data),\n      remoteStats = Stats.fromBuffer(transferrableObjectToBuffer(remoteFd.stat));\n\n    // Write data if the file is writable.\n    var flag = file_flag.FileFlag.getFileFlag(remoteFd.flag);\n    if (flag.isWriteable()) {\n      // Appendable: Write to end of file.\n      // Writeable: Replace entire contents of file.\n      fd.write(data, 0, data.length, flag.isAppendable() ? fd.getPos() : 0, (e) => {\n        function applyStatChanges() {\n          // Check if mode changed.\n          fd.stat((e, stats?) => {\n            if (e) {\n              cb(e);\n            } else {\n              if (stats.mode !== remoteStats.mode) {\n                fd.chmod(remoteStats.mode, (e: any) => {\n                  cb(e, fd);\n                });\n              } else {\n                cb(e, fd);\n              }\n            }\n          });\n        }\n        if (e) {\n          cb(e);\n        } else {\n          // If writeable & not appendable, we need to ensure file contents are\n          // identical to those from the remote FD. Thus, we truncate to the\n          // length of the remote file.\n          if (!flag.isAppendable()) {\n            fd.truncate(data.length, () => {\n              applyStatChanges();\n            })\n          } else {\n            applyStatChanges();\n          }\n        }\n      });\n    } else {\n      cb(null, fd);\n    }\n  }\n\n  public applyFdAPIRequest(request: IAPIRequest, cb: (err?: ApiError) => void): void {\n    var fdArg = <IFileDescriptorArgument> request.args[0];\n    this._applyFdChanges(fdArg, (err, fd?) => {\n      if (err) {\n        cb(err);\n      } else {\n        // Apply method on now-changed file descriptor.\n        (<any> fd)[request.method]((e?: ApiError) => {\n          if (request.method === 'close') {\n            delete this._fileDescriptors[fdArg.id];\n          }\n          cb(e);\n        });\n      }\n    });\n  }\n}\n\ninterface IAPIErrorArgument extends ISpecialArgument {\n  // The error object, as an array buffer.\n  errorData: ArrayBuffer;\n}\n\nfunction apiErrorLocal2Remote(e: ApiError): IAPIErrorArgument {\n  return {\n    type: SpecialArgType.API_ERROR,\n    errorData: bufferToTransferrableObject(e.writeToBuffer())\n  };\n}\n\nfunction apiErrorRemote2Local(e: IAPIErrorArgument): ApiError {\n  return ApiError.fromBuffer(transferrableObjectToBuffer(e.errorData));\n}\n\ninterface IErrorArgument extends ISpecialArgument {\n  // The name of the error (e.g. 'TypeError').\n  name: string;\n  // The message associated with the error.\n  message: string;\n  // The stack associated with the error.\n  stack: string;\n}\n\nfunction errorLocal2Remote(e: Error): IErrorArgument {\n  return {\n    type: SpecialArgType.ERROR,\n    name: e.name,\n    message: e.message,\n    stack: e.stack\n  };\n}\n\nfunction errorRemote2Local(e: IErrorArgument): Error {\n  var cnstr: {\n    new (msg: string): Error;\n  } = global[e.name];\n  if (typeof(cnstr) !== 'function') {\n    cnstr = Error;\n  }\n  var err = new cnstr(e.message);\n  err.stack = e.stack;\n  return err;\n}\n\ninterface IStatsArgument extends ISpecialArgument {\n  // The stats object as an array buffer.\n  statsData: ArrayBuffer;\n}\n\nfunction statsLocal2Remote(stats: Stats): IStatsArgument {\n  return {\n    type: SpecialArgType.STATS,\n    statsData: bufferToTransferrableObject(stats.toBuffer())\n  };\n}\n\nfunction statsRemote2Local(stats: IStatsArgument): Stats {\n  return Stats.fromBuffer(transferrableObjectToBuffer(stats.statsData));\n}\n\ninterface IFileFlagArgument extends ISpecialArgument {\n  flagStr: string;\n}\n\nfunction fileFlagLocal2Remote(flag: file_flag.FileFlag): IFileFlagArgument {\n  return {\n    type: SpecialArgType.FILEFLAG,\n    flagStr: flag.getFlagString()\n  };\n}\n\nfunction fileFlagRemote2Local(remoteFlag: IFileFlagArgument): file_flag.FileFlag {\n  return file_flag.FileFlag.getFileFlag(remoteFlag.flagStr);\n}\n\ninterface IBufferArgument extends ISpecialArgument {\n  data: ArrayBuffer;\n}\n\nfunction bufferToTransferrableObject(buff: NodeBuffer): ArrayBuffer {\n  return buffer2ArrayBuffer(buff);\n}\n\nfunction transferrableObjectToBuffer(buff: ArrayBuffer): Buffer {\n  return arrayBuffer2Buffer(buff);\n}\n\nfunction bufferLocal2Remote(buff: Buffer): IBufferArgument {\n  return {\n    type: SpecialArgType.BUFFER,\n    data: bufferToTransferrableObject(buff)\n  };\n}\n\nfunction bufferRemote2Local(buffArg: IBufferArgument): Buffer {\n  return transferrableObjectToBuffer(buffArg.data);\n}\n\ninterface IAPIRequest extends IBrowserFSMessage {\n  method: string;\n  args: Array<number | string | ISpecialArgument>;\n}\n\nfunction isAPIRequest(data: any): data is IAPIRequest {\n  return data != null && typeof data === 'object' && data.hasOwnProperty('browserfsMessage') && data['browserfsMessage'];\n}\n\ninterface IAPIResponse extends IBrowserFSMessage {\n  cbId: number;\n  args: Array<number | string | ISpecialArgument>;\n}\n\nfunction isAPIResponse(data: any): data is IAPIResponse {\n  return data != null && typeof data === 'object' && data.hasOwnProperty('browserfsMessage') && data['browserfsMessage'];\n}\n\n/**\n * Represents a remote file in a different worker/thread.\n */\nclass WorkerFile extends preload_file.PreloadFile<WorkerFS> {\n  private _remoteFdId: number;\n\n  constructor(_fs: WorkerFS, _path: string, _flag: file_flag.FileFlag, _stat: Stats, remoteFdId: number, contents?: NodeBuffer) {\n    super(_fs, _path, _flag, _stat, contents);\n    this._remoteFdId = remoteFdId;\n  }\n\n  public getRemoteFdId() {\n    return this._remoteFdId;\n  }\n\n  public toRemoteArg(): IFileDescriptorArgument {\n    return <IFileDescriptorArgument> {\n      type: SpecialArgType.FD,\n      id: this._remoteFdId,\n      data: bufferToTransferrableObject(this.getBuffer()),\n      stat: bufferToTransferrableObject(this.getStats().toBuffer()),\n      path: this.getPath(),\n      flag: this.getFlag().getFlagString()\n    };\n  }\n\n  private _syncClose(type: string, cb: (e?: ApiError) => void): void {\n    if (this.isDirty()) {\n      (<WorkerFS> this._fs).syncClose(type, this, (e?: ApiError) => {\n        if (!e) {\n          this.resetDirty();\n        }\n        cb(e);\n      });\n    } else {\n      cb();\n    }\n  }\n\n  public sync(cb: (e?: ApiError) => void): void {\n    this._syncClose('sync', cb);\n  }\n\n  public close(cb: (e?: ApiError) => void): void {\n    this._syncClose('close', cb);\n  }\n}\n\n/**\n * WorkerFS lets you access a BrowserFS instance that is running in a different\n * JavaScript context (e.g. access BrowserFS in one of your WebWorkers, or\n * access BrowserFS running on the main page from a WebWorker).\n *\n * For example, to have a WebWorker access files in the main browser thread,\n * do the following:\n *\n * MAIN BROWSER THREAD:\n * ```\n *   // Listen for remote file system requests.\n *   BrowserFS.FileSystem.WorkerFS.attachRemoteListener(webWorkerObject);\n * ``\n *\n * WEBWORKER THREAD:\n * ```\n *   // Set the remote file system as the root file system.\n *   BrowserFS.initialize(new BrowserFS.FileSystem.WorkerFS(self));\n * ```\n *\n * Note that synchronous operations are not permitted on the WorkerFS, regardless\n * of the configuration option of the remote FS.\n */\nexport default class WorkerFS extends file_system.BaseFileSystem implements file_system.FileSystem {\n  private _worker: Worker;\n  private _callbackConverter = new CallbackArgumentConverter();\n\n  private _isInitialized: boolean = false;\n  private _isReadOnly: boolean = false;\n  private _supportLinks: boolean = false;\n  private _supportProps: boolean = false;\n\n  /**\n   * Stores outstanding API requests to the remote BrowserFS instance.\n   */\n  private _outstandingRequests: { [id: number]: () => void } = {};\n\n  /**\n   * Constructs a new WorkerFS instance that connects with BrowserFS running on\n   * the specified worker.\n   */\n  constructor(worker: Worker) {\n    super();\n    this._worker = worker;\n    this._worker.addEventListener('message',(e: MessageEvent) => {\n      var resp: Object = e.data;\n      if (isAPIResponse(resp)) {\n        var i: number, args = resp.args, fixedArgs = new Array(args.length);\n        // Dispatch event to correct id.\n        for (i = 0; i < fixedArgs.length; i++) {\n          fixedArgs[i] = this._argRemote2Local(args[i]);\n        }\n        this._callbackConverter.toLocalArg(resp.cbId).apply(null, fixedArgs);\n      }\n    });\n  }\n\n  public static isAvailable(): boolean {\n    return typeof(importScripts) !== 'undefined' || typeof(Worker) !== 'undefined';\n  }\n\n  public getName(): string {\n    return 'WorkerFS';\n  }\n\n  private _argRemote2Local(arg: any): any {\n    if (arg == null) {\n      return arg;\n    }\n    switch (typeof arg) {\n      case 'object':\n        if (arg['type'] != null && typeof arg['type'] === 'number') {\n          var specialArg = <ISpecialArgument> arg;\n          switch (specialArg.type) {\n            case SpecialArgType.API_ERROR:\n              return apiErrorRemote2Local(<IAPIErrorArgument> specialArg);\n            case SpecialArgType.FD:\n              var fdArg = <IFileDescriptorArgument> specialArg;\n              return new WorkerFile(this, fdArg.path, file_flag.FileFlag.getFileFlag(fdArg.flag), Stats.fromBuffer(transferrableObjectToBuffer(fdArg.stat)), fdArg.id, transferrableObjectToBuffer(fdArg.data));\n            case SpecialArgType.STATS:\n              return statsRemote2Local(<IStatsArgument> specialArg);\n            case SpecialArgType.FILEFLAG:\n              return fileFlagRemote2Local(<IFileFlagArgument> specialArg);\n            case SpecialArgType.BUFFER:\n              return bufferRemote2Local(<IBufferArgument> specialArg);\n            case SpecialArgType.ERROR:\n              return errorRemote2Local(<IErrorArgument> specialArg);\n            default:\n              return arg;\n          }\n        } else {\n          return arg;\n        }\n      default:\n        return arg;\n    }\n  }\n\n  /**\n   * Converts a local argument into a remote argument. Public so WorkerFile objects can call it.\n   */\n  public _argLocal2Remote(arg: any): any {\n    if (arg == null) {\n      return arg;\n    }\n    switch (typeof arg) {\n      case \"object\":\n        if (arg instanceof Stats) {\n          return statsLocal2Remote(arg);\n        } else if (arg instanceof ApiError) {\n          return apiErrorLocal2Remote(arg);\n        } else if (arg instanceof WorkerFile) {\n          return (<WorkerFile> arg).toRemoteArg();\n        } else if (arg instanceof file_flag.FileFlag) {\n          return fileFlagLocal2Remote(arg);\n        } else if (arg instanceof Buffer) {\n          return bufferLocal2Remote(arg);\n        } else if (arg instanceof Error) {\n          return errorLocal2Remote(arg);\n        } else {\n          return \"Unknown argument\";\n        }\n      case \"function\":\n        return this._callbackConverter.toRemoteArg(arg);\n      default:\n        return arg;\n    }\n  }\n\n  /**\n   * Called once both local and remote sides are set up.\n   */\n  public initialize(cb: () => void): void {\n    if (!this._isInitialized) {\n      var message: IAPIRequest = {\n        browserfsMessage: true,\n        method: 'probe',\n        args: [this._argLocal2Remote(new Buffer(0)), this._callbackConverter.toRemoteArg((probeResponse: IProbeResponse) => {\n          this._isInitialized = true;\n          this._isReadOnly = probeResponse.isReadOnly;\n          this._supportLinks = probeResponse.supportsLinks;\n          this._supportProps = probeResponse.supportsProps;\n          cb();\n        })]\n      };\n      this._worker.postMessage(message);\n    } else {\n      cb();\n    }\n  }\n\n  public isReadOnly(): boolean { return this._isReadOnly; }\n  public supportsSynch(): boolean { return false; }\n  public supportsLinks(): boolean { return this._supportLinks; }\n  public supportsProps(): boolean { return this._supportProps; }\n\n  private _rpc(methodName: string, args: IArguments) {\n    var message: IAPIRequest = {\n      browserfsMessage: true,\n      method: methodName,\n      args: null\n    }, fixedArgs = new Array(args.length), i: number;\n    for (i = 0; i < args.length; i++) {\n      fixedArgs[i] = this._argLocal2Remote(args[i]);\n    }\n    message.args = fixedArgs;\n    this._worker.postMessage(message);\n  }\n\n  public rename(oldPath: string, newPath: string, cb: (err?: ApiError) => void): void {\n    this._rpc('rename', arguments);\n  }\n  public stat(p: string, isLstat: boolean, cb: (err: ApiError, stat?: Stats) => void): void {\n    this._rpc('stat', arguments);\n  }\n  public open(p: string, flag: file_flag.FileFlag, mode: number, cb: (err: ApiError, fd?: file.File) => any): void {\n    this._rpc('open', arguments);\n  }\n  public unlink(p: string, cb: Function): void {\n    this._rpc('unlink', arguments);\n  }\n  public rmdir(p: string, cb: Function): void {\n    this._rpc('rmdir', arguments);\n  }\n  public mkdir(p: string, mode: number, cb: Function): void {\n    this._rpc('mkdir', arguments);\n  }\n  public readdir(p: string, cb: (err: ApiError, files?: string[]) => void): void {\n    this._rpc('readdir', arguments);\n  }\n  public exists(p: string, cb: (exists: boolean) => void): void {\n    this._rpc('exists', arguments);\n  }\n  public realpath(p: string, cache: { [path: string]: string }, cb: (err: ApiError, resolvedPath?: string) => any): void {\n    this._rpc('realpath', arguments);\n  }\n  public truncate(p: string, len: number, cb: Function): void {\n    this._rpc('truncate', arguments);\n  }\n  public readFile(fname: string, encoding: string, flag: file_flag.FileFlag, cb: (err: ApiError, data?: any) => void): void {\n    this._rpc('readFile', arguments);\n  }\n  public writeFile(fname: string, data: any, encoding: string, flag: file_flag.FileFlag, mode: number, cb: (err: ApiError) => void): void {\n    this._rpc('writeFile', arguments);\n  }\n  public appendFile(fname: string, data: any, encoding: string, flag: file_flag.FileFlag, mode: number, cb: (err: ApiError) => void): void {\n    this._rpc('appendFile', arguments);\n  }\n  public chmod(p: string, isLchmod: boolean, mode: number, cb: Function): void {\n    this._rpc('chmod', arguments);\n  }\n  public chown(p: string, isLchown: boolean, uid: number, gid: number, cb: Function): void {\n    this._rpc('chown', arguments);\n  }\n  public utimes(p: string, atime: Date, mtime: Date, cb: Function): void {\n    this._rpc('utimes', arguments);\n  }\n  public link(srcpath: string, dstpath: string, cb: Function): void {\n    this._rpc('link', arguments);\n  }\n  public symlink(srcpath: string, dstpath: string, type: string, cb: Function): void {\n    this._rpc('symlink', arguments);\n  }\n  public readlink(p: string, cb: Function): void {\n    this._rpc('readlink', arguments);\n  }\n\n  public syncClose(method: string, fd: file.File, cb: (e: ApiError) => void): void {\n    this._worker.postMessage(<IAPIRequest> {\n      browserfsMessage: true,\n      method: method,\n      args: [(<WorkerFile> fd).toRemoteArg(), this._callbackConverter.toRemoteArg(cb)]\n    });\n  }\n\n  /**\n   * Attaches a listener to the remote worker for file system requests.\n   */\n  public static attachRemoteListener(worker: Worker) {\n    var fdConverter = new FileDescriptorArgumentConverter();\n\n    function argLocal2Remote(arg: any, requestArgs: any[], cb: (err: ApiError, arg?: any) => void): void {\n      switch (typeof arg) {\n        case 'object':\n          if (arg instanceof Stats) {\n            cb(null, statsLocal2Remote(arg));\n          } else if (arg instanceof ApiError) {\n            cb(null, apiErrorLocal2Remote(arg));\n          } else if (arg instanceof file.BaseFile) {\n            // Pass in p and flags from original request.\n            cb(null, fdConverter.toRemoteArg(arg, requestArgs[0], requestArgs[1], cb));\n          } else if (arg instanceof file_flag.FileFlag) {\n            cb(null, fileFlagLocal2Remote(arg));\n          } else if (arg instanceof Buffer) {\n            cb(null, bufferLocal2Remote(arg));\n          } else if (arg instanceof Error) {\n            cb(null, errorLocal2Remote(arg));\n          } else {\n            cb(null, arg);\n          }\n          break;\n        default:\n          cb(null, arg);\n          break;\n      }\n    }\n\n    function argRemote2Local(arg: any, fixedRequestArgs: any[]): any {\n      if (arg == null) {\n        return arg;\n      }\n      switch (typeof arg) {\n        case 'object':\n          if (typeof arg['type'] === 'number') {\n            var specialArg = <ISpecialArgument> arg;\n            switch (specialArg.type) {\n              case SpecialArgType.CB:\n                var cbId = (<ICallbackArgument> arg).id;\n                return function() {\n                  var i: number, fixedArgs = new Array(arguments.length),\n                    message: IAPIResponse,\n                    countdown = arguments.length;\n\n                  function abortAndSendError(err: ApiError) {\n                    if (countdown > 0) {\n                      countdown = -1;\n                      message = {\n                        browserfsMessage: true,\n                        cbId: cbId,\n                        args: [apiErrorLocal2Remote(err)]\n                      };\n                      worker.postMessage(message);\n                    }\n                  }\n\n\n                  for (i = 0; i < arguments.length; i++) {\n                    // Capture i and argument.\n                    ((i: number, arg: any) => {\n                      argLocal2Remote(arg, fixedRequestArgs, (err, fixedArg?) => {\n                        fixedArgs[i] = fixedArg;\n                        if (err) {\n                          abortAndSendError(err);\n                        } else if (--countdown === 0) {\n                          message = {\n                            browserfsMessage: true,\n                            cbId: cbId,\n                            args: fixedArgs\n                          };\n                          worker.postMessage(message);\n                        }\n                      });\n                    })(i, arguments[i]);\n                  }\n\n                  if (arguments.length === 0) {\n                    message = {\n                      browserfsMessage: true,\n                      cbId: cbId,\n                      args: fixedArgs\n                    };\n                    worker.postMessage(message);\n                  }\n\n                };\n              case SpecialArgType.API_ERROR:\n                return apiErrorRemote2Local(<IAPIErrorArgument> specialArg);\n              case SpecialArgType.STATS:\n                return statsRemote2Local(<IStatsArgument> specialArg);\n              case SpecialArgType.FILEFLAG:\n                return fileFlagRemote2Local(<IFileFlagArgument> specialArg);\n              case SpecialArgType.BUFFER:\n                return bufferRemote2Local(<IBufferArgument> specialArg);\n              case SpecialArgType.ERROR:\n                return errorRemote2Local(<IErrorArgument> specialArg);\n              default:\n                // No idea what this is.\n                return arg;\n            }\n          } else {\n            return arg;\n          }\n        default:\n          return arg;\n      }\n    }\n\n    worker.addEventListener('message',(e: MessageEvent) => {\n      var request: Object = e.data;\n      if (isAPIRequest(request)) {\n        var args = request.args,\n          fixedArgs = new Array<any>(args.length),\n          i: number;\n\n        switch (request.method) {\n          case 'close':\n          case 'sync':\n            (() => {\n              // File descriptor-relative methods.\n              var remoteCb = <ICallbackArgument> args[1];\n              fdConverter.applyFdAPIRequest(request, (err?: ApiError) => {\n                // Send response.\n                var response: IAPIResponse = {\n                  browserfsMessage: true,\n                  cbId: remoteCb.id,\n                  args: err ? [apiErrorLocal2Remote(err)] : []\n                };\n                worker.postMessage(response);\n              });\n            })();\n            break;\n          case 'probe':\n            (() => {\n              var rootFs = <file_system.FileSystem> fs.getRootFS(),\n                remoteCb = <ICallbackArgument> args[1],\n                probeResponse: IProbeResponse = {\n                  type: SpecialArgType.PROBE,\n                  isReadOnly: rootFs.isReadOnly(),\n                  supportsLinks: rootFs.supportsLinks(),\n                  supportsProps: rootFs.supportsProps()\n                },\n                response: IAPIResponse = {\n                  browserfsMessage: true,\n                  cbId: remoteCb.id,\n                  args: [probeResponse]\n                };\n\n              worker.postMessage(response);\n            })();\n            break;\n          default:\n            // File system methods.\n            for (i = 0; i < args.length; i++) {\n              fixedArgs[i] = argRemote2Local(args[i], fixedArgs);\n            }\n            var rootFS = fs.getRootFS();\n            (<Function> rootFS[request.method]).apply(rootFS, fixedArgs);\n            break;\n        }\n      }\n    });\n  }\n}\n","import file_system = require('../core/file_system');\nimport {ApiError, ErrorCode} from '../core/api_error';\nimport {FileFlag, ActionType} from '../core/file_flag';\nimport {copyingSlice} from '../core/util';\nimport file = require('../core/file');\nimport Stats from '../core/node_fs_stats';\nimport preload_file = require('../generic/preload_file');\nimport xhr = require('../generic/xhr');\nimport {FileIndex, DirInode, FileInode, Inode, isFileInode, isDirInode} from '../generic/file_index';\n\n/**\n * Try to convert the given buffer into a string, and pass it to the callback.\n * Optimization that removes the needed try/catch into a helper function, as\n * this is an uncommon case.\n */\nfunction tryToString(buff: Buffer, encoding: string, cb: (e: ApiError, rv?: string) => void) {\n  try {\n    cb(null, buff.toString(encoding));\n  } catch (e) {\n    cb(e);\n  }\n}\n\n/**\n * A simple filesystem backed by XmlHttpRequests.\n */\nexport default class XmlHttpRequest extends file_system.BaseFileSystem implements file_system.FileSystem {\n  private _index: FileIndex<{}>;\n  public prefixUrl: string;\n  /**\n   * Constructs the file system.\n   * @param listingUrlOrObj index object or the path to the JSON file index generated by\n   *   tools/XHRIndexer.coffee. This can be relative to the current webpage URL\n   *   or absolutely specified.\n   * @param prefixUrl The url prefix to use for all web-server requests.\n   */\n  constructor(listingUrlOrObj: string | Object, prefixUrl: string = '') {\n    super();\n    if (!listingUrlOrObj) {\n      listingUrlOrObj = 'index.json';\n    }\n    // prefix_url must end in a directory separator.\n    if (prefixUrl.length > 0 && prefixUrl.charAt(prefixUrl.length - 1) !== '/') {\n      prefixUrl = prefixUrl + '/';\n    }\n    this.prefixUrl = prefixUrl;\n\n    let listing: Object = null;\n    if (typeof(listingUrlOrObj) === \"string\") {\n      listing = this._requestFileSync(<string> listingUrlOrObj, 'json');\n      if (!listing) {\n        throw new Error(\"Unable to find listing at URL: ${listingUrlOrObj}\");\n      }\n    } else {\n      listing = listingUrlOrObj;\n    }\n\n    this._index = FileIndex.fromListing(listing);\n  }\n\n  public empty(): void {\n    this._index.fileIterator(function(file: Stats) {\n      file.file_data = null;\n    });\n  }\n\n  private getXhrPath(filePath: string): string {\n    if (filePath.charAt(0) === '/') {\n      filePath = filePath.slice(1);\n    }\n    return this.prefixUrl + filePath;\n  }\n\n  /**\n   * Only requests the HEAD content, for the file size.\n   */\n  public _requestFileSizeAsync(path: string, cb: (err: ApiError, size?: number) => void): void {\n    xhr.getFileSizeAsync(this.getXhrPath(path), cb);\n  }\n  public _requestFileSizeSync(path: string): number {\n    return xhr.getFileSizeSync(this.getXhrPath(path));\n  }\n\n  /**\n   * Asynchronously download the given file.\n   */\n  private _requestFileAsync(p: string, type: 'buffer', cb: (err: ApiError, data?: NodeBuffer) => void): void;\n  private _requestFileAsync(p: string, type: 'json', cb: (err: ApiError, data?: any) => void): void;\n  private _requestFileAsync(p: string, type: string, cb: (err: ApiError, data?: any) => void): void;\n  private _requestFileAsync(p: string, type: string, cb: (err: ApiError, data?: any) => void): void {\n    xhr.asyncDownloadFile(this.getXhrPath(p), type, cb);\n  }\n\n  /**\n   * Synchronously download the given file.\n   */\n  private _requestFileSync(p: string, type: 'buffer'): NodeBuffer;\n  private _requestFileSync(p: string, type: 'json'): any;\n  private _requestFileSync(p: string, type: string): any;\n  private _requestFileSync(p: string, type: string): any {\n    return xhr.syncDownloadFile(this.getXhrPath(p), type);\n  }\n\n  public getName(): string {\n    return 'XmlHttpRequest';\n  }\n\n  public static isAvailable(): boolean {\n    // @todo Older browsers use a different name for XHR, iirc.\n    return typeof XMLHttpRequest !== \"undefined\" && XMLHttpRequest !== null;\n  }\n\n  public diskSpace(path: string, cb: (total: number, free: number) => void): void {\n    // Read-only file system. We could calculate the total space, but that's not\n    // important right now.\n    cb(0, 0);\n  }\n\n  public isReadOnly(): boolean {\n    return true;\n  }\n\n  public supportsLinks(): boolean {\n    return false;\n  }\n\n  public supportsProps(): boolean {\n    return false;\n  }\n\n  public supportsSynch(): boolean {\n    return true;\n  }\n\n  /**\n   * Special XHR function: Preload the given file into the index.\n   * @param [String] path\n   * @param [BrowserFS.Buffer] buffer\n   */\n  public preloadFile(path: string, buffer: NodeBuffer): void {\n    var inode = this._index.getInode(path);\n    if (isFileInode<Stats>(inode)) {\n      if (inode === null) {\n        throw ApiError.ENOENT(path);\n      }\n      var stats = inode.getData();\n      stats.size = buffer.length;\n      stats.file_data = buffer;\n    } else {\n      throw ApiError.EISDIR(path);\n    }\n  }\n\n  public stat(path: string, isLstat: boolean, cb: (e: ApiError, stat?: Stats) => void): void {\n    var inode = this._index.getInode(path);\n    if (inode === null) {\n      return cb(ApiError.ENOENT(path));\n    }\n    var stats: Stats;\n    if (isFileInode<Stats>(inode)) {\n      stats = inode.getData();\n      // At this point, a non-opened file will still have default stats from the listing.\n      if (stats.size < 0) {\n        this._requestFileSizeAsync(path, function(e: ApiError, size?: number) {\n          if (e) {\n            return cb(e);\n          }\n          stats.size = size;\n          cb(null, stats.clone());\n        });\n      } else {\n        cb(null, stats.clone());\n      }\n    } else if (isDirInode(inode)) {\n      stats = inode.getStats();\n      cb(null, stats);\n    } else {\n      cb(ApiError.FileError(ErrorCode.EINVAL, path));\n    }\n  }\n\n  public statSync(path: string, isLstat: boolean): Stats {\n    var inode = this._index.getInode(path);\n    if (inode === null) {\n      throw ApiError.ENOENT(path);\n    }\n    var stats: Stats;\n    if (isFileInode<Stats>(inode)) {\n      stats = inode.getData();\n      // At this point, a non-opened file will still have default stats from the listing.\n      if (stats.size < 0) {\n        stats.size = this._requestFileSizeSync(path);\n      }\n    } else if (isDirInode(inode)) {\n      stats = inode.getStats();\n    } else {\n      throw ApiError.FileError(ErrorCode.EINVAL, path);\n    }\n    return stats;\n  }\n\n  public open(path: string, flags: FileFlag, mode: number, cb: (e: ApiError, file?: file.File) => void): void {\n    // INVARIANT: You can't write to files on this file system.\n    if (flags.isWriteable()) {\n      return cb(new ApiError(ErrorCode.EPERM, path));\n    }\n    var _this = this;\n    // Check if the path exists, and is a file.\n    var inode = this._index.getInode(path);\n    if (inode === null) {\n      return cb(ApiError.ENOENT(path));\n    }\n    if (isFileInode<Stats>(inode)) {\n      var stats = inode.getData();\n      switch (flags.pathExistsAction()) {\n        case ActionType.THROW_EXCEPTION:\n        case ActionType.TRUNCATE_FILE:\n          return cb(ApiError.EEXIST(path));\n        case ActionType.NOP:\n          // Use existing file contents.\n          // XXX: Uh, this maintains the previously-used flag.\n          if (stats.file_data != null) {\n            return cb(null, new preload_file.NoSyncFile(_this, path, flags, stats.clone(), stats.file_data));\n          }\n          // @todo be lazier about actually requesting the file\n          this._requestFileAsync(path, 'buffer', function(err: ApiError, buffer?: NodeBuffer) {\n            if (err) {\n              return cb(err);\n            }\n            // we don't initially have file sizes\n            stats.size = buffer.length;\n            stats.file_data = buffer;\n            return cb(null, new preload_file.NoSyncFile(_this, path, flags, stats.clone(), buffer));\n          });\n          break;\n        default:\n          return cb(new ApiError(ErrorCode.EINVAL, 'Invalid FileMode object.'));\n      }\n    } else {\n      return cb(ApiError.EISDIR(path));\n    }\n  }\n\n  public openSync(path: string, flags: FileFlag, mode: number): file.File {\n    // INVARIANT: You can't write to files on this file system.\n    if (flags.isWriteable()) {\n      throw new ApiError(ErrorCode.EPERM, path);\n    }\n    // Check if the path exists, and is a file.\n    var inode = this._index.getInode(path);\n    if (inode === null) {\n      throw ApiError.ENOENT(path);\n    }\n    if (isFileInode<Stats>(inode)) {\n      var stats = inode.getData();\n      switch (flags.pathExistsAction()) {\n        case ActionType.THROW_EXCEPTION:\n        case ActionType.TRUNCATE_FILE:\n          throw ApiError.EEXIST(path);\n        case ActionType.NOP:\n          // Use existing file contents.\n          // XXX: Uh, this maintains the previously-used flag.\n          if (stats.file_data != null) {\n            return new preload_file.NoSyncFile(this, path, flags, stats.clone(), stats.file_data);\n          }\n          // @todo be lazier about actually requesting the file\n          var buffer = this._requestFileSync(path, 'buffer');\n          // we don't initially have file sizes\n          stats.size = buffer.length;\n          stats.file_data = buffer;\n          return new preload_file.NoSyncFile(this, path, flags, stats.clone(), buffer);\n        default:\n          throw new ApiError(ErrorCode.EINVAL, 'Invalid FileMode object.');\n      }\n    } else {\n      throw ApiError.EISDIR(path);\n    }\n  }\n\n  public readdir(path: string, cb: (e: ApiError, listing?: string[]) => void): void {\n    try {\n      cb(null, this.readdirSync(path));\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  public readdirSync(path: string): string[] {\n    // Check if it exists.\n    var inode = this._index.getInode(path);\n    if (inode === null) {\n      throw ApiError.ENOENT(path);\n    } else if (isDirInode(inode)) {\n      return inode.getListing();\n    } else {\n      throw ApiError.ENOTDIR(path);\n    }\n  }\n\n  /**\n   * We have the entire file as a buffer; optimize readFile.\n   */\n  public readFile(fname: string, encoding: string, flag: FileFlag, cb: (err: ApiError, data?: any) => void): void {\n    // Wrap cb in file closing code.\n    var oldCb = cb;\n    // Get file.\n    this.open(fname, flag, 0x1a4, function(err: ApiError, fd?: file.File) {\n      if (err) {\n        return cb(err);\n      }\n      cb = function(err: ApiError, arg?: Buffer) {\n        fd.close(function(err2: any) {\n          if (err == null) {\n            err = err2;\n          }\n          return oldCb(err, arg);\n        });\n      };\n      var fdCast = <preload_file.NoSyncFile<XmlHttpRequest>> fd;\n      var fdBuff = <Buffer> fdCast.getBuffer();\n      if (encoding === null) {\n        cb(err, copyingSlice(fdBuff));\n      } else {\n        tryToString(fdBuff, encoding, cb);\n      }\n    });\n  }\n\n  /**\n   * Specially-optimized readfile.\n   */\n  public readFileSync(fname: string, encoding: string, flag: FileFlag): any {\n    // Get file.\n    var fd = this.openSync(fname, flag, 0x1a4);\n    try {\n      var fdCast = <preload_file.NoSyncFile<XmlHttpRequest>> fd;\n      var fdBuff = <Buffer> fdCast.getBuffer();\n      if (encoding === null) {\n        return copyingSlice(fdBuff);\n      }\n      return fdBuff.toString(encoding);\n    } finally {\n      fd.closeSync();\n    }\n  }\n}\n","/**\n * Zip file-backed filesystem\n * Implemented according to the standard:\n * http://www.pkware.com/documents/casestudies/APPNOTE.TXT\n *\n * While there are a few zip libraries for JavaScript (e.g. JSZip and zip.js),\n * they are not a good match for BrowserFS. In particular, these libraries\n * perform a lot of unneeded data copying, and eagerly decompress every file\n * in the zip file upon loading to check the CRC32. They also eagerly decode\n * strings. Furthermore, these libraries duplicate functionality already present\n * in BrowserFS (e.g. UTF-8 decoding and binary data manipulation).\n *\n * This filesystem takes advantage of BrowserFS's Buffer implementation, which\n * efficiently represents the zip file in memory (in both ArrayBuffer-enabled\n * browsers *and* non-ArrayBuffer browsers), and which can neatly be 'sliced'\n * without copying data. Each struct defined in the standard is represented with\n * a buffer slice pointing to an offset in the zip file, and has getters for\n * each field. As we anticipate that this data will not be read often, we choose\n * not to store each struct field in the JavaScript object; instead, to reduce\n * memory consumption, we retrieve it directly from the binary data each time it\n * is requested.\n *\n * When the filesystem is instantiated, we determine the directory structure\n * of the zip file as quickly as possible. We lazily decompress and check the\n * CRC32 of files. We do not cache decompressed files; if this is a desired\n * feature, it is best implemented as a generic file system wrapper that can\n * cache data from arbitrary file systems.\n *\n * For inflation, we use `pajo`'s implementation:\n * https://github.com/nodeca/pako\n *\n * Unfortunately, their implementation falls back to an array of bytes for non-\n * TypedArray browsers, which is results in a much larger memory footprint in\n * those browsers. Perhaps one day we'll have an implementation of inflate that\n * works on Buffers? :)\n *\n * Current limitations:\n * * No encryption.\n * * No ZIP64 support.\n * * Read-only.\n *   Write support would require that we:\n *   - Keep track of changed/new files.\n *   - Compress changed files, and generate appropriate metadata for each.\n *   - Update file offsets for other files in the zip file.\n *   - Stream it out to a location.\n *   This isn't that bad, so we might do this at a later date.\n */\nimport {ApiError, ErrorCode} from '../core/api_error';\nimport {default as Stats, FileType} from '../core/node_fs_stats';\nimport file_system = require('../core/file_system');\nimport file = require('../core/file');\nimport {FileFlag, ActionType} from '../core/file_flag';\nimport preload_file = require('../generic/preload_file');\nimport {Arrayish, buffer2Arrayish, arrayish2Buffer, copyingSlice} from '../core/util';\nimport ExtendedASCII from 'bfs-buffer/js/extended_ascii';\nvar inflateRaw: {\n  (data: Arrayish<number>, options?: {\n    chunkSize: number;\n  }): Arrayish<number>;\n} = require('pako/dist/pako_inflate.min').inflateRaw;\nimport {FileIndex, DirInode, FileInode, isDirInode, isFileInode} from '../generic/file_index';\n\n\n/**\n * 4.4.2.2: Indicates the compatibiltiy of a file's external attributes.\n */\nexport enum ExternalFileAttributeType {\n  MSDOS = 0, AMIGA = 1, OPENVMS = 2, UNIX = 3, VM_CMS = 4, ATARI_ST = 5,\n  OS2_HPFS = 6, MAC = 7, Z_SYSTEM = 8, CP_M = 9, NTFS = 10, MVS = 11, VSE = 12,\n  ACORN_RISC = 13, VFAT = 14, ALT_MVS = 15, BEOS = 16, TANDEM = 17, OS_400 = 18,\n  OSX = 19\n}\n\n/**\n * 4.4.5\n */\nexport enum CompressionMethod {\n  STORED = 0,     // The file is stored (no compression)\n  SHRUNK = 1,     // The file is Shrunk\n  REDUCED_1 = 2,  // The file is Reduced with compression factor 1\n  REDUCED_2 = 3,  // The file is Reduced with compression factor 2\n  REDUCED_3 = 4,  // The file is Reduced with compression factor 3\n  REDUCED_4 = 5,  // The file is Reduced with compression factor 4\n  IMPLODE = 6,    // The file is Imploded\n  DEFLATE = 8,    // The file is Deflated\n  DEFLATE64 = 9,  // Enhanced Deflating using Deflate64(tm)\n  TERSE_OLD = 10, // PKWARE Data Compression Library Imploding (old IBM TERSE)\n  BZIP2 = 12,     // File is compressed using BZIP2 algorithm\n  LZMA = 14,      // LZMA (EFS)\n  TERSE_NEW = 18, // File is compressed using IBM TERSE (new)\n  LZ77 = 19,      // IBM LZ77 z Architecture (PFS)\n  WAVPACK = 97,   // WavPack compressed data\n  PPMD = 98       // PPMd version I, Rev 1\n}\n\n/**\n * Converts the input time and date in MS-DOS format into a JavaScript Date\n * object.\n */\nfunction msdos2date(time: number, date: number): Date {\n  // MS-DOS Date\n  //|0 0 0 0  0|0 0 0  0|0 0 0  0 0 0 0\n  //  D (1-31)  M (1-23)  Y (from 1980)\n  var day = date & 0x1F;\n  // JS date is 0-indexed, DOS is 1-indexed.\n  var month = ((date >> 5) & 0xF) - 1;\n  var year = (date >> 9) + 1980;\n  // MS DOS Time\n  //|0 0 0 0  0|0 0 0  0 0 0|0  0 0 0 0\n  //   Second      Minute       Hour\n  var second = time & 0x1F;\n  var minute = (time >> 5) & 0x3F;\n  var hour = time >> 11;\n  return new Date(year, month, day, hour, minute, second);\n}\n\n/**\n * Safely returns the string from the buffer, even if it is 0 bytes long.\n * (Normally, calling toString() on a buffer with start === end causes an\n * exception).\n */\nfunction safeToString(buff: NodeBuffer, useUTF8: boolean, start: number, length: number): string {\n  if (length === 0) {\n    return \"\";\n  } else if (useUTF8) {\n    return buff.toString('utf8', start, start + length);\n  } else {\n    return ExtendedASCII.byte2str(buff.slice(start, start + length));\n  }\n}\n\n/*\n   4.3.6 Overall .ZIP file format:\n\n      [local file header 1]\n      [encryption header 1]\n      [file data 1]\n      [data descriptor 1]\n      .\n      .\n      .\n      [local file header n]\n      [encryption header n]\n      [file data n]\n      [data descriptor n]\n      [archive decryption header]\n      [archive extra data record]\n      [central directory header 1]\n      .\n      .\n      .\n      [central directory header n]\n      [zip64 end of central directory record]\n      [zip64 end of central directory locator]\n      [end of central directory record]\n*/\n\n/*\n 4.3.7  Local file header:\n\n      local file header signature     4 bytes  (0x04034b50)\n      version needed to extract       2 bytes\n      general purpose bit flag        2 bytes\n      compression method              2 bytes\n      last mod file time              2 bytes\n      last mod file date              2 bytes\n      crc-32                          4 bytes\n      compressed size                 4 bytes\n      uncompressed size               4 bytes\n      file name length                2 bytes\n      extra field length              2 bytes\n\n      file name (variable size)\n      extra field (variable size)\n */\nexport class FileHeader {\n  constructor(private data: NodeBuffer) {\n    if (data.readUInt32LE(0) !== 0x04034b50) {\n      throw new ApiError(ErrorCode.EINVAL, \"Invalid Zip file: Local file header has invalid signature: \" + this.data.readUInt32LE(0));\n    }\n  }\n  public versionNeeded(): number { return this.data.readUInt16LE(4); }\n  public flags(): number { return this.data.readUInt16LE(6); }\n  public compressionMethod(): CompressionMethod { return this.data.readUInt16LE(8); }\n  public lastModFileTime(): Date {\n    // Time and date is in MS-DOS format.\n    return msdos2date(this.data.readUInt16LE(10), this.data.readUInt16LE(12));\n  }\n  public rawLastModFileTime(): number {\n    return this.data.readUInt32LE(10);\n  }\n  public crc32(): number { return this.data.readUInt32LE(14); }\n  /**\n   * These two values are COMPLETELY USELESS.\n   *\n   * Section 4.4.9:\n   *   If bit 3 of the general purpose bit flag is set,\n   *   these fields are set to zero in the local header and the\n   *   correct values are put in the data descriptor and\n   *   in the central directory.\n   *\n   * So we'll just use the central directory's values.\n   */\n  // public compressedSize(): number { return this.data.readUInt32LE(18); }\n  // public uncompressedSize(): number { return this.data.readUInt32LE(22); }\n  public fileNameLength(): number { return this.data.readUInt16LE(26); }\n  public extraFieldLength(): number { return this.data.readUInt16LE(28); }\n  public fileName(): string {\n    return safeToString(this.data, this.useUTF8(), 30, this.fileNameLength());\n  }\n  public extraField(): NodeBuffer {\n    var start = 30 + this.fileNameLength();\n    return this.data.slice(start, start + this.extraFieldLength());\n  }\n  public totalSize(): number { return 30 + this.fileNameLength() + this.extraFieldLength(); }\n  public useUTF8(): boolean { return (this.flags() & 0x800) === 0x800; }\n}\n\n/**\n  4.3.8  File data\n\n    Immediately following the local header for a file\n    SHOULD be placed the compressed or stored data for the file.\n    If the file is encrypted, the encryption header for the file\n    SHOULD be placed after the local header and before the file\n    data. The series of [local file header][encryption header]\n    [file data][data descriptor] repeats for each file in the\n    .ZIP archive.\n\n    Zero-byte files, directories, and other file types that\n    contain no content MUST not include file data.\n*/\nexport class FileData {\n  constructor(private header: FileHeader, private record: CentralDirectory, private data: NodeBuffer) {}\n  public decompress(): NodeBuffer {\n    // Check the compression\n    var compressionMethod: CompressionMethod = this.header.compressionMethod();\n    switch (compressionMethod) {\n      case CompressionMethod.DEFLATE:\n        var data = inflateRaw(\n          buffer2Arrayish(this.data.slice(0, this.record.compressedSize())),\n          { chunkSize: this.record.uncompressedSize() }\n        );\n        return arrayish2Buffer(data);\n      case CompressionMethod.STORED:\n        // Grab and copy.\n        return copyingSlice(this.data, 0, this.record.uncompressedSize());\n      default:\n        var name: string = CompressionMethod[compressionMethod];\n        name = name ? name : \"Unknown: \" + compressionMethod;\n        throw new ApiError(ErrorCode.EINVAL, \"Invalid compression method on file '\" + this.header.fileName() + \"': \" + name);\n    }\n  }\n  public getHeader(): FileHeader {\n    return this.header;\n  }\n  public getRecord(): CentralDirectory {\n    return this.record;\n  }\n  public getRawData(): NodeBuffer {\n    return this.data;\n  }\n}\n\n/*\n 4.3.9  Data descriptor:\n\n      crc-32                          4 bytes\n      compressed size                 4 bytes\n      uncompressed size               4 bytes\n */\nexport class DataDescriptor {\n  constructor(private data: NodeBuffer) {}\n  public crc32(): number { return this.data.readUInt32LE(0); }\n  public compressedSize(): number { return this.data.readUInt32LE(4); }\n  public uncompressedSize(): number { return this.data.readUInt32LE(8); }\n}\n\n/*\n` 4.3.10  Archive decryption header:\n\n      4.3.10.1 The Archive Decryption Header is introduced in version 6.2\n      of the ZIP format specification.  This record exists in support\n      of the Central Directory Encryption Feature implemented as part of\n      the Strong Encryption Specification as described in this document.\n      When the Central Directory Structure is encrypted, this decryption\n      header MUST precede the encrypted data segment.\n */\n/*\n  4.3.11  Archive extra data record:\n\n        archive extra data signature    4 bytes  (0x08064b50)\n        extra field length              4 bytes\n        extra field data                (variable size)\n\n      4.3.11.1 The Archive Extra Data Record is introduced in version 6.2\n      of the ZIP format specification.  This record MAY be used in support\n      of the Central Directory Encryption Feature implemented as part of\n      the Strong Encryption Specification as described in this document.\n      When present, this record MUST immediately precede the central\n      directory data structure.\n*/\nexport class ArchiveExtraDataRecord {\n  constructor(private data: NodeBuffer) {\n    if (this.data.readUInt32LE(0) !== 0x08064b50) {\n      throw new ApiError(ErrorCode.EINVAL, \"Invalid archive extra data record signature: \" + this.data.readUInt32LE(0));\n    }\n  }\n  public length(): number { return this.data.readUInt32LE(4); }\n  public extraFieldData(): NodeBuffer { return this.data.slice(8, 8 + this.length()); }\n}\n\n/*\n  4.3.13 Digital signature:\n\n        header signature                4 bytes  (0x05054b50)\n        size of data                    2 bytes\n        signature data (variable size)\n\n      With the introduction of the Central Directory Encryption\n      feature in version 6.2 of this specification, the Central\n      Directory Structure MAY be stored both compressed and encrypted.\n      Although not required, it is assumed when encrypting the\n      Central Directory Structure, that it will be compressed\n      for greater storage efficiency.  Information on the\n      Central Directory Encryption feature can be found in the section\n      describing the Strong Encryption Specification. The Digital\n      Signature record will be neither compressed nor encrypted.\n*/\nexport class DigitalSignature {\n  constructor(private data: NodeBuffer) {\n    if (this.data.readUInt32LE(0) !== 0x05054b50) {\n      throw new ApiError(ErrorCode.EINVAL, \"Invalid digital signature signature: \" + this.data.readUInt32LE(0));\n    }\n  }\n  public size(): number { return this.data.readUInt16LE(4); }\n  public signatureData(): NodeBuffer { return this.data.slice(6, 6 + this.size()); }\n}\n\n/*\n  4.3.12  Central directory structure:\n\n    central file header signature   4 bytes  (0x02014b50)\n    version made by                 2 bytes\n    version needed to extract       2 bytes\n    general purpose bit flag        2 bytes\n    compression method              2 bytes\n    last mod file time              2 bytes\n    last mod file date              2 bytes\n    crc-32                          4 bytes\n    compressed size                 4 bytes\n    uncompressed size               4 bytes\n    file name length                2 bytes\n    extra field length              2 bytes\n    file comment length             2 bytes\n    disk number start               2 bytes\n    internal file attributes        2 bytes\n    external file attributes        4 bytes\n    relative offset of local header 4 bytes\n\n    file name (variable size)\n    extra field (variable size)\n    file comment (variable size)\n */\nexport class CentralDirectory {\n  // Optimization: The filename is frequently read, so stash it here.\n  private _filename: string;\n  constructor(private zipData: NodeBuffer, private data: NodeBuffer) {\n    // Sanity check.\n    if (this.data.readUInt32LE(0) !== 0x02014b50)\n      throw new ApiError(ErrorCode.EINVAL, \"Invalid Zip file: Central directory record has invalid signature: \" + this.data.readUInt32LE(0));\n    this._filename = this.produceFilename();\n  }\n  public versionMadeBy(): number { return this.data.readUInt16LE(4); }\n  public versionNeeded(): number { return this.data.readUInt16LE(6); }\n  public flag(): number { return this.data.readUInt16LE(8); }\n  public compressionMethod(): CompressionMethod { return this.data.readUInt16LE(10); }\n  public lastModFileTime(): Date {\n    // Time and date is in MS-DOS format.\n    return msdos2date(this.data.readUInt16LE(12), this.data.readUInt16LE(14));\n  }\n  public rawLastModFileTime(): number {\n    return this.data.readUInt32LE(12);\n  }\n  public crc32(): number { return this.data.readUInt32LE(16); }\n  public compressedSize(): number { return this.data.readUInt32LE(20); }\n  public uncompressedSize(): number { return this.data.readUInt32LE(24); }\n  public fileNameLength(): number { return this.data.readUInt16LE(28); }\n  public extraFieldLength(): number { return this.data.readUInt16LE(30); }\n  public fileCommentLength(): number { return this.data.readUInt16LE(32); }\n  public diskNumberStart(): number { return this.data.readUInt16LE(34); }\n  public internalAttributes(): number { return this.data.readUInt16LE(36); }\n  public externalAttributes(): number { return this.data.readUInt32LE(38); }\n  public headerRelativeOffset(): number { return this.data.readUInt32LE(42); }\n  public produceFilename(): string {\n    /*\n      4.4.17.1 claims:\n      * All slashes are forward ('/') slashes.\n      * Filename doesn't begin with a slash.\n      * No drive letters or any nonsense like that.\n      * If filename is missing, the input came from standard input.\n\n      Unfortunately, this isn't true in practice. Some Windows zip utilities use\n      a backslash here, but the correct Unix-style path in file headers.\n\n      To avoid seeking all over the file to recover the known-good filenames\n      from file headers, we simply convert '/' to '\\' here.\n    */\n    var fileName: string = safeToString(this.data, this.useUTF8(), 46, this.fileNameLength());\n    return fileName.replace(/\\\\/g, \"/\");\n  }\n  public fileName(): string {\n    return this._filename;\n  }\n  public rawFileName(): NodeBuffer {\n    return this.data.slice(46, 46 + this.fileNameLength());\n  }\n  public extraField(): NodeBuffer {\n    var start = 44 + this.fileNameLength();\n    return this.data.slice(start, start + this.extraFieldLength());\n  }\n  public fileComment(): string {\n    var start = 46 + this.fileNameLength() + this.extraFieldLength();\n    return safeToString(this.data, this.useUTF8(), start, this.fileCommentLength());\n  }\n  public rawFileComment(): NodeBuffer {\n    let start = 46 + this.fileNameLength() + this.extraFieldLength();\n    return this.data.slice(start, start + this.fileCommentLength());\n  }\n  public totalSize(): number {\n    return 46 + this.fileNameLength() + this.extraFieldLength() + this.fileCommentLength();\n  }\n  public isDirectory(): boolean {\n    // NOTE: This assumes that the zip file implementation uses the lower byte\n    //       of external attributes for DOS attributes for\n    //       backwards-compatibility. This is not mandated, but appears to be\n    //       commonplace.\n    //       According to the spec, the layout of external attributes is\n    //       platform-dependent.\n    //       If that fails, we also check if the name of the file ends in '/',\n    //       which is what Java's ZipFile implementation does.\n    var fileName = this.fileName();\n    return (this.externalAttributes() & 0x10 ? true : false) || (fileName.charAt(fileName.length-1) === '/');\n  }\n  public isFile(): boolean { return !this.isDirectory(); }\n  public useUTF8(): boolean { return (this.flag() & 0x800) === 0x800; }\n  public isEncrypted(): boolean { return (this.flag() & 0x1) === 0x1; }\n  public getFileData(): FileData {\n    // Need to grab the header before we can figure out where the actual\n    // compressed data starts.\n    var start = this.headerRelativeOffset();\n    var header = new FileHeader(this.zipData.slice(start));\n    return new FileData(header, this, this.zipData.slice(start + header.totalSize()));\n  }\n  public getData(): NodeBuffer {\n    return this.getFileData().decompress();\n  }\n  public getRawData(): NodeBuffer {\n    return this.getFileData().getRawData();\n  }\n  public getStats(): Stats {\n    return new Stats(FileType.FILE, this.uncompressedSize(), 0x16D, new Date(), this.lastModFileTime());\n  }\n}\n\n/*\n  4.3.16: end of central directory record\n    end of central dir signature    4 bytes  (0x06054b50)\n    number of this disk             2 bytes\n    number of the disk with the\n    start of the central directory  2 bytes\n    total number of entries in the\n    central directory on this disk  2 bytes\n    total number of entries in\n    the central directory           2 bytes\n    size of the central directory   4 bytes\n    offset of start of central\n    directory with respect to\n    the starting disk number        4 bytes\n    .ZIP file comment length        2 bytes\n    .ZIP file comment       (variable size)\n*/\nexport class EndOfCentralDirectory {\n  constructor(private data: NodeBuffer) {\n    if (this.data.readUInt32LE(0) !== 0x06054b50)\n      throw new ApiError(ErrorCode.EINVAL, \"Invalid Zip file: End of central directory record has invalid signature: \" + this.data.readUInt32LE(0));\n  }\n  public diskNumber(): number { return this.data.readUInt16LE(4); }\n  public cdDiskNumber(): number { return this.data.readUInt16LE(6); }\n  public cdDiskEntryCount(): number { return this.data.readUInt16LE(8); }\n  public cdTotalEntryCount(): number { return this.data.readUInt16LE(10); }\n  public cdSize(): number { return this.data.readUInt32LE(12); }\n  public cdOffset(): number { return this.data.readUInt32LE(16); }\n  public cdZipCommentLength(): number { return this.data.readUInt16LE(20); }\n  public cdZipComment(): string {\n    // Assuming UTF-8. The specification doesn't specify.\n    return safeToString(this.data, true, 22, this.cdZipCommentLength());\n  }\n  public rawCdZipComment(): NodeBuffer {\n    return this.data.slice(22, 22 + this.cdZipCommentLength())\n  }\n}\n\nexport class ZipTOC {\n  constructor(public index: FileIndex<CentralDirectory>, public directoryEntries: CentralDirectory[], public eocd: EndOfCentralDirectory, public data: NodeBuffer) {\n  }\n}\n\nexport default class ZipFS extends file_system.SynchronousFileSystem implements file_system.FileSystem {\n  private _index: FileIndex<CentralDirectory> = new FileIndex<CentralDirectory>();\n  private _directoryEntries: CentralDirectory[] = [];\n  private _eocd: EndOfCentralDirectory = null;\n  private data: NodeBuffer;\n\n  /**\n   * Constructs a ZipFS from the given zip file data. Name is optional, and is\n   * used primarily for our unit tests' purposes to differentiate different\n   * test zip files in test output.\n   */\n  constructor(private input: NodeBuffer | ZipTOC, private name: string = '') {\n    super();\n    if (input instanceof ZipTOC) {\n      this._index = input.index;\n      this._directoryEntries = input.directoryEntries;\n      this._eocd = input.eocd;\n      this.data = input.data;\n    } else {\n      this.data = input as NodeBuffer;\n      this.populateIndex();\n    }\n  }\n\n  public getName(): string {\n    return 'ZipFS' + (this.name !== '' ? ' ' + this.name : '');\n  }\n\n  /**\n   * Get the CentralDirectory object for the given path.\n   */\n  public getCentralDirectoryEntry(path: string): CentralDirectory {\n    let inode = this._index.getInode(path);\n    if (inode === null) {\n      throw ApiError.ENOENT(path);\n    }\n    if (isFileInode<CentralDirectory>(inode)) {\n      return inode.getData();\n    } else if (isDirInode<CentralDirectory>(inode)) {\n      return inode.getData();\n    }\n  }\n\n  public getCentralDirectoryEntryAt(index: number): CentralDirectory {\n    let dirEntry = this._directoryEntries[index];\n    if (!dirEntry) {\n      throw new RangeError(`Invalid directory index: ${index}.`);\n    }\n    return dirEntry;\n  }\n\n  public getNumberOfCentralDirectoryEntries(): number {\n    return this._directoryEntries.length;\n  }\n\n  public getEndOfCentralDirectory(): EndOfCentralDirectory {\n    return this._eocd;\n  }\n\n  public static isAvailable(): boolean { return true; }\n\n  public diskSpace(path: string, cb: (total: number, free: number) => void): void {\n    // Read-only file system.\n    cb(this.data.length, 0);\n  }\n\n  public isReadOnly(): boolean {\n    return true;\n  }\n\n  public supportsLinks(): boolean {\n    return false;\n  }\n\n  public supportsProps(): boolean {\n    return false;\n  }\n\n  public supportsSynch(): boolean {\n    return true;\n  }\n\n  public statSync(path: string, isLstat: boolean): Stats {\n    var inode = this._index.getInode(path);\n    if (inode === null) {\n      throw ApiError.ENOENT(path);\n    }\n    var stats: Stats;\n    if (isFileInode<CentralDirectory>(inode)) {\n      stats = inode.getData().getStats();\n    } else if (isDirInode(inode)) {\n      stats = inode.getStats();\n    } else {\n      throw new ApiError(ErrorCode.EINVAL, \"Invalid inode.\");\n    }\n    return stats;\n  }\n\n  public openSync(path: string, flags: FileFlag, mode: number): file.File {\n    // INVARIANT: Cannot write to RO file systems.\n    if (flags.isWriteable()) {\n      throw new ApiError(ErrorCode.EPERM, path);\n    }\n    // Check if the path exists, and is a file.\n    var inode = this._index.getInode(path);\n    if (!inode) {\n      throw ApiError.ENOENT(path);\n    } else if (isFileInode<CentralDirectory>(inode)) {\n      var cdRecord = inode.getData();\n      var stats = cdRecord.getStats();\n      switch (flags.pathExistsAction()) {\n        case ActionType.THROW_EXCEPTION:\n        case ActionType.TRUNCATE_FILE:\n          throw ApiError.EEXIST(path);\n        case ActionType.NOP:\n          return new preload_file.NoSyncFile(this, path, flags, stats, cdRecord.getData());\n        default:\n          throw new ApiError(ErrorCode.EINVAL, 'Invalid FileMode object.');\n      }\n    } else {\n      throw ApiError.EISDIR(path);\n    }\n  }\n\n  public readdirSync(path: string): string[] {\n    // Check if it exists.\n    var inode = this._index.getInode(path);\n    if (!inode) {\n      throw ApiError.ENOENT(path);\n    } else if (isDirInode(inode)) {\n      return inode.getListing();\n    } else {\n      throw ApiError.ENOTDIR(path);\n    }\n  }\n\n  /**\n   * Specially-optimized readfile.\n   */\n  public readFileSync(fname: string, encoding: string, flag: FileFlag): any {\n    // Get file.\n    var fd = this.openSync(fname, flag, 0x1a4);\n    try {\n      var fdCast = <preload_file.NoSyncFile<ZipFS>> fd;\n      var fdBuff = <Buffer> fdCast.getBuffer();\n      if (encoding === null) {\n        return copyingSlice(fdBuff);\n      }\n      return fdBuff.toString(encoding);\n    } finally {\n      fd.closeSync();\n    }\n  }\n\n  /**\n   * Locates the end of central directory record at the end of the file.\n   * Throws an exception if it cannot be found.\n   */\n  private static getEOCD(data: NodeBuffer): EndOfCentralDirectory {\n    // Unfortunately, the comment is variable size and up to 64K in size.\n    // We assume that the magic signature does not appear in the comment, and\n    // in the bytes between the comment and the signature. Other ZIP\n    // implementations make this same assumption, since the alternative is to\n    // read thread every entry in the file to get to it. :(\n    // These are *negative* offsets from the end of the file.\n    var startOffset = 22;\n    var endOffset = Math.min(startOffset + 0xFFFF, data.length - 1);\n    // There's not even a byte alignment guarantee on the comment so we need to\n    // search byte by byte. *grumble grumble*\n    for (var i = startOffset; i < endOffset; i++) {\n      // Magic number: EOCD Signature\n      if (data.readUInt32LE(data.length - i) === 0x06054b50) {\n        return new EndOfCentralDirectory(data.slice(data.length - i));\n      }\n    }\n    throw new ApiError(ErrorCode.EINVAL, \"Invalid ZIP file: Could not locate End of Central Directory signature.\");\n  }\n\n  private static addToIndex(cd: CentralDirectory, index: FileIndex<CentralDirectory>) {\n    // Paths must be absolute, yet zip file paths are always relative to the\n    // zip root. So we append '/' and call it a day.\n    let filename = cd.fileName();\n    if (filename.charAt(0) === '/') throw new Error(\"WHY IS THIS ABSOLUTE\");\n    // XXX: For the file index, strip the trailing '/'.\n    if (filename.charAt(filename.length - 1) === '/') {\n      filename = filename.substr(0, filename.length-1);\n    }\n\n    if (cd.isDirectory()) {\n      index.addPathFast('/' + filename, new DirInode<CentralDirectory>(cd));\n    } else {\n      index.addPathFast('/' + filename, new FileInode<CentralDirectory>(cd));\n    }\n  }\n\n  private static computeIndexResponsive(data: NodeBuffer, index: FileIndex<CentralDirectory>, cdPtr: number, cdEnd: number, cb: (zipTOC: ZipTOC) => void, cdEntries: CentralDirectory[], eocd: EndOfCentralDirectory) {\n    if (cdPtr < cdEnd) {\n      let count = 0;\n      while (count++ < 200 && cdPtr < cdEnd) {\n        const cd: CentralDirectory = new CentralDirectory(data, data.slice(cdPtr));\n        ZipFS.addToIndex(cd, index);\n        cdPtr += cd.totalSize();\n        cdEntries.push(cd);\n      }\n      setImmediate(() => {\n        ZipFS.computeIndexResponsive(data, index, cdPtr, cdEnd, cb, cdEntries, eocd);\n      });\n    } else {\n      cb(new ZipTOC(index, cdEntries, eocd, data));\n    }\n  }\n\n  static computeIndex(data: NodeBuffer, cb: (zipTOC: ZipTOC) => void) {\n    const index: FileIndex<CentralDirectory> = new FileIndex<CentralDirectory>();\n    const eocd: EndOfCentralDirectory = ZipFS.getEOCD(data);\n    if (eocd.diskNumber() !== eocd.cdDiskNumber())\n      throw new ApiError(ErrorCode.EINVAL, \"ZipFS does not support spanned zip files.\");\n\n    const cdPtr = eocd.cdOffset();\n    if (cdPtr === 0xFFFFFFFF)\n      throw new ApiError(ErrorCode.EINVAL, \"ZipFS does not support Zip64.\");\n    const cdEnd = cdPtr + eocd.cdSize();\n    ZipFS.computeIndexResponsive(data, index, cdPtr, cdEnd, cb, [], eocd);\n  }\n\n  private populateIndex() {\n    var eocd: EndOfCentralDirectory = this._eocd = ZipFS.getEOCD(this.data);\n    if (eocd.diskNumber() !== eocd.cdDiskNumber())\n      throw new ApiError(ErrorCode.EINVAL, \"ZipFS does not support spanned zip files.\");\n\n    var cdPtr = eocd.cdOffset();\n    if (cdPtr === 0xFFFFFFFF)\n      throw new ApiError(ErrorCode.EINVAL, \"ZipFS does not support Zip64.\");\n    var cdEnd = cdPtr + eocd.cdSize();\n    while (cdPtr < cdEnd) {\n      const cd: CentralDirectory = new CentralDirectory(this.data, this.data.slice(cdPtr));\n      cdPtr += cd.totalSize();\n      ZipFS.addToIndex(cd, this._index);\n      this._directoryEntries.push(cd);\n    }\n  }\n}\n","/// <reference path=\"../typings/main.d.ts\" />\n\n// Shim for Browserify so we can reference tsd.d.ts without\n// accidentally referencing it in our *.d.ts files, which\n// causes problems for TypeScript projects that depend on\n// us.\n\nexport = require('./main');\n","import {File} from './file';\nimport {ApiError, ErrorCode} from './api_error';\nimport file_system = require('./file_system');\nimport {FileFlag} from './file_flag';\nimport path = require('path');\nimport Stats from './node_fs_stats';\n// Typing info only.\nimport _fs = require('fs');\nimport global = require('./global');\n\ndeclare var __numWaiting: number;\n\ndeclare var setImmediate: (cb: Function) => void;\n\ndeclare var RELEASE: boolean;\n\n/**\n * Wraps a callback with a setImmediate call.\n * @param [Function] cb The callback to wrap.\n * @param [Number] numArgs The number of arguments that the callback takes.\n * @return [Function] The wrapped callback.\n */\nfunction wrapCb<T extends Function>(cb: T, numArgs: number): T {\n  if (RELEASE) {\n    return cb;\n  } else {\n    if (typeof cb !== 'function') {\n      throw new ApiError(ErrorCode.EINVAL, 'Callback must be a function.');\n    }\n    // This is used for unit testing.\n    // We could use `arguments`, but Function.call/apply is expensive. And we only\n    // need to handle 1-3 arguments\n    if (typeof __numWaiting === 'undefined') {\n      global.__numWaiting = 0;\n    }\n    __numWaiting++;\n\n    switch (numArgs) {\n      case 1:\n        return <any> function(arg1: any) {\n          setImmediate(function() {\n            __numWaiting--;\n            return cb(arg1);\n          });\n        };\n      case 2:\n        return <any> function(arg1: any, arg2: any) {\n          setImmediate(function() {\n            __numWaiting--;\n            return cb(arg1, arg2);\n          });\n        };\n      case 3:\n        return <any> function(arg1: any, arg2: any, arg3: any) {\n          setImmediate(function() {\n            __numWaiting--;\n            return cb(arg1, arg2, arg3);\n          });\n        };\n      default:\n        throw new Error('Invalid invocation of wrapCb.');\n    }\n  }\n}\n\nfunction normalizeMode(mode: number|string, def: number): number {\n  switch(typeof mode) {\n    case 'number':\n      // (path, flag, mode, cb?)\n      return <number> mode;\n    case 'string':\n      // (path, flag, modeString, cb?)\n      var trueMode = parseInt(<string> mode, 8);\n      if (trueMode !== NaN) {\n        return trueMode;\n      }\n      // FALL THROUGH if mode is an invalid string!\n    default:\n      return def;\n  }\n}\n\nfunction normalizeTime(time: number | Date): Date {\n  if (time instanceof Date) {\n    return time;\n  } else if (typeof time === 'number') {\n    return new Date(time * 1000);\n  } else {\n    throw new ApiError(ErrorCode.EINVAL, `Invalid time.`);\n  }\n}\n\nfunction normalizePath(p: string): string {\n  // Node doesn't allow null characters in paths.\n  if (p.indexOf('\\u0000') >= 0) {\n    throw new ApiError(ErrorCode.EINVAL, 'Path must be a string without null bytes.');\n  } else if (p === '') {\n    throw new ApiError(ErrorCode.EINVAL, 'Path must not be empty.');\n  }\n  return path.resolve(p);\n}\n\nfunction normalizeOptions(options: any, defEnc: string, defFlag: string, defMode: number): {encoding: string; flag: string; mode: number} {\n  switch (typeof options) {\n    case 'object':\n      return {\n        encoding: typeof options['encoding'] !== 'undefined' ? options['encoding'] : defEnc,\n        flag: typeof options['flag'] !== 'undefined' ? options['flag'] : defFlag,\n        mode: normalizeMode(options['mode'], defMode)\n      };\n    case 'string':\n      return {\n        encoding: options,\n        flag: defFlag,\n        mode: defMode\n      };\n    default:\n      return {\n        encoding: defEnc,\n        flag: defFlag,\n        mode: defMode\n      };\n  }\n}\n\n// The default callback is a NOP.\nfunction nopCb() {};\n\n/**\n * The node frontend to all filesystems.\n * This layer handles:\n *\n * * Sanity checking inputs.\n * * Normalizing paths.\n * * Resetting stack depth for asynchronous operations which may not go through\n *   the browser by wrapping all input callbacks using `setImmediate`.\n * * Performing the requested operation through the filesystem or the file\n *   descriptor, as appropriate.\n * * Handling optional arguments and setting default arguments.\n * @see http://nodejs.org/api/fs.html\n * @class\n */\nexport default class FS {\n  // Exported fs.Stats.\n  public static Stats = Stats;\n\n  private root: file_system.FileSystem = null;\n  private fdMap: {[fd: number]: File} = {};\n  private nextFd = 100;\n  private getFdForFile(file: File): number {\n    let fd = this.nextFd++;\n    this.fdMap[fd] = file;\n    return fd;\n  }\n  private fd2file(fd: number): File {\n    let rv = this.fdMap[fd];\n    if (rv) {\n      return rv;\n    } else {\n      throw new ApiError(ErrorCode.EBADF, 'Invalid file descriptor.');\n    }\n  }\n  private closeFd(fd: number): void {\n    delete this.fdMap[fd];\n  }\n\n  public initialize(rootFS: file_system.FileSystem): file_system.FileSystem {\n    if (!(<any> rootFS).constructor.isAvailable()) {\n      throw new ApiError(ErrorCode.EINVAL, 'Tried to instantiate BrowserFS with an unavailable file system.');\n    }\n    return this.root = rootFS;\n  }\n\n  /**\n   * converts Date or number to a fractional UNIX timestamp\n   * Grabbed from NodeJS sources (lib/fs.js)\n   */\n  public _toUnixTimestamp(time: Date | number): number {\n    if (typeof time === 'number') {\n      return time;\n    } else if (time instanceof Date) {\n      return time.getTime() / 1000;\n    }\n    throw new Error(\"Cannot parse time: \" + time);\n  }\n\n  /**\n   * **NONSTANDARD**: Grab the FileSystem instance that backs this API.\n   * @return [BrowserFS.FileSystem | null] Returns null if the file system has\n   *   not been initialized.\n   */\n  public getRootFS(): file_system.FileSystem {\n    if (this.root) {\n      return this.root;\n    } else {\n      return null;\n    }\n  }\n\n  // FILE OR DIRECTORY METHODS\n\n  /**\n   * Asynchronous rename. No arguments other than a possible exception are given\n   * to the completion callback.\n   * @param [String] oldPath\n   * @param [String] newPath\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public rename(oldPath: string, newPath: string, cb: (err?: ApiError) => void = nopCb): void {\n    var newCb = wrapCb(cb, 1);\n    try {\n      this.root.rename(normalizePath(oldPath), normalizePath(newPath), newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous rename.\n   * @param [String] oldPath\n   * @param [String] newPath\n   */\n  public renameSync(oldPath: string, newPath: string): void {\n    this.root.renameSync(normalizePath(oldPath), normalizePath(newPath));\n  }\n\n  /**\n   * Test whether or not the given path exists by checking with the file system.\n   * Then call the callback argument with either true or false.\n   * @example Sample invocation\n   *   fs.exists('/etc/passwd', function (exists) {\n   *     util.debug(exists ? \"it's there\" : \"no passwd!\");\n   *   });\n   * @param [String] path\n   * @param [Function(Boolean)] callback\n   */\n  public exists(path: string, cb: (exists: boolean) => void = nopCb): void {\n    var newCb = wrapCb(cb, 1);\n    try {\n      return this.root.exists(normalizePath(path), newCb);\n    } catch (e) {\n      // Doesn't return an error. If something bad happens, we assume it just\n      // doesn't exist.\n      return newCb(false);\n    }\n  }\n\n  /**\n   * Test whether or not the given path exists by checking with the file system.\n   * @param [String] path\n   * @return [boolean]\n   */\n  public existsSync(path: string): boolean {\n    try {\n      return this.root.existsSync(normalizePath(path));\n    } catch (e) {\n      // Doesn't return an error. If something bad happens, we assume it just\n      // doesn't exist.\n      return false;\n    }\n  }\n\n  /**\n   * Asynchronous `stat`.\n   * @param [String] path\n   * @param [Function(BrowserFS.ApiError, BrowserFS.node.fs.Stats)] callback\n   */\n  public stat(path: string, cb: (err: ApiError, stats?: Stats) => any = nopCb): void {\n    var newCb = wrapCb(cb, 2);\n    try {\n      return this.root.stat(normalizePath(path), false, newCb);\n    } catch (e) {\n      return newCb(e, null);\n    }\n  }\n\n  /**\n   * Synchronous `stat`.\n   * @param [String] path\n   * @return [BrowserFS.node.fs.Stats]\n   */\n  public statSync(path: string): Stats {\n    return this.root.statSync(normalizePath(path), false);\n  }\n\n  /**\n   * Asynchronous `lstat`.\n   * `lstat()` is identical to `stat()`, except that if path is a symbolic link,\n   * then the link itself is stat-ed, not the file that it refers to.\n   * @param [String] path\n   * @param [Function(BrowserFS.ApiError, BrowserFS.node.fs.Stats)] callback\n   */\n  public lstat(path: string, cb: (err: ApiError, stats?: Stats) => any = nopCb): void {\n    var newCb = wrapCb(cb, 2);\n    try {\n      return this.root.stat(normalizePath(path), true, newCb);\n    } catch (e) {\n      return newCb(e, null);\n    }\n  }\n\n  /**\n   * Synchronous `lstat`.\n   * `lstat()` is identical to `stat()`, except that if path is a symbolic link,\n   * then the link itself is stat-ed, not the file that it refers to.\n   * @param [String] path\n   * @return [BrowserFS.node.fs.Stats]\n   */\n  public lstatSync(path: string): Stats {\n    return this.root.statSync(normalizePath(path), true);\n  }\n\n  // FILE-ONLY METHODS\n\n  /**\n   * Asynchronous `truncate`.\n   * @param [String] path\n   * @param [Number] len\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public truncate(path: string, cb?: (err?: ApiError) => void): void;\n  public truncate(path: string, len: number, cb?: (err?: ApiError) => void): void;\n  public truncate(path: string, arg2: any = 0, cb: (err?: ApiError) => void = nopCb): void {\n    var len = 0;\n    if (typeof arg2 === 'function') {\n      cb = arg2;\n    } else if (typeof arg2 === 'number') {\n      len = arg2;\n    }\n\n    var newCb = wrapCb(cb, 1);\n    try {\n      if (len < 0) {\n        throw new ApiError(ErrorCode.EINVAL);\n      }\n      return this.root.truncate(normalizePath(path), len, newCb);\n    } catch (e) {\n      return newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous `truncate`.\n   * @param [String] path\n   * @param [Number] len\n   */\n  public truncateSync(path: string, len: number = 0): void {\n    if (len < 0) {\n      throw new ApiError(ErrorCode.EINVAL);\n    }\n    return this.root.truncateSync(normalizePath(path), len);\n  }\n\n  /**\n   * Asynchronous `unlink`.\n   * @param [String] path\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public unlink(path: string, cb: (err?: ApiError) => void = nopCb): void {\n    var newCb = wrapCb(cb, 1);\n    try {\n      return this.root.unlink(normalizePath(path), newCb);\n    } catch (e) {\n      return newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous `unlink`.\n   * @param [String] path\n   */\n  public unlinkSync(path: string): void {\n    return this.root.unlinkSync(normalizePath(path));\n  }\n\n  /**\n   * Asynchronous file open.\n   * Exclusive mode ensures that path is newly created.\n   *\n   * `flags` can be:\n   *\n   * * `'r'` - Open file for reading. An exception occurs if the file does not exist.\n   * * `'r+'` - Open file for reading and writing. An exception occurs if the file does not exist.\n   * * `'rs'` - Open file for reading in synchronous mode. Instructs the filesystem to not cache writes.\n   * * `'rs+'` - Open file for reading and writing, and opens the file in synchronous mode.\n   * * `'w'` - Open file for writing. The file is created (if it does not exist) or truncated (if it exists).\n   * * `'wx'` - Like 'w' but opens the file in exclusive mode.\n   * * `'w+'` - Open file for reading and writing. The file is created (if it does not exist) or truncated (if it exists).\n   * * `'wx+'` - Like 'w+' but opens the file in exclusive mode.\n   * * `'a'` - Open file for appending. The file is created if it does not exist.\n   * * `'ax'` - Like 'a' but opens the file in exclusive mode.\n   * * `'a+'` - Open file for reading and appending. The file is created if it does not exist.\n   * * `'ax+'` - Like 'a+' but opens the file in exclusive mode.\n   *\n   * @see http://www.manpagez.com/man/2/open/\n   * @param [String] path\n   * @param [String] flags\n   * @param [Number?] mode defaults to `0644`\n   * @param [Function(BrowserFS.ApiError, BrowserFS.File)] callback\n   */\n  public open(path: string, flag: string, cb?: (err: ApiError, fd?: number) => any): void;\n  public open(path: string, flag: string, mode: number|string, cb?: (err: ApiError, fd?: number) => any): void;\n  public open(path: string, flag: string, arg2?: any, cb: (err: ApiError, fd?: number) => any = nopCb): void {\n    var mode = normalizeMode(arg2, 0x1a4);\n    cb = typeof arg2 === 'function' ? arg2 : cb;\n    var newCb = wrapCb(cb, 2);\n    try {\n      this.root.open(normalizePath(path), FileFlag.getFileFlag(flag), mode, (e: ApiError, file?: File) => {\n        if (file) {\n          newCb(e, this.getFdForFile(file));\n        } else {\n          newCb(e);\n        }\n      });\n    } catch (e) {\n      newCb(e, null);\n    }\n  }\n\n  /**\n   * Synchronous file open.\n   * @see http://www.manpagez.com/man/2/open/\n   * @param [String] path\n   * @param [String] flags\n   * @param [Number?] mode defaults to `0644`\n   * @return [BrowserFS.File]\n   */\n  public openSync(path: string, flag: string, mode: number|string = 0x1a4): number {\n    return this.getFdForFile(\n      this.root.openSync(normalizePath(path), FileFlag.getFileFlag(flag), normalizeMode(mode, 0x1a4)));\n  }\n\n  /**\n   * Asynchronously reads the entire contents of a file.\n   * @example Usage example\n   *   fs.readFile('/etc/passwd', function (err, data) {\n   *     if (err) throw err;\n   *     console.log(data);\n   *   });\n   * @param [String] filename\n   * @param [Object?] options\n   * @option options [String] encoding The string encoding for the file contents. Defaults to `null`.\n   * @option options [String] flag Defaults to `'r'`.\n   * @param [Function(BrowserFS.ApiError, String | BrowserFS.node.Buffer)] callback If no encoding is specified, then the raw buffer is returned.\n   */\n  public readFile(filename: string, cb: (err: ApiError, data?: Buffer) => void ): void;\n  public readFile(filename: string, options: { flag?: string; }, callback: (err: ApiError, data: Buffer) => void): void;\n  public readFile(filename: string, options: { encoding: string; flag?: string; }, callback: (err: ApiError, data: string) => void): void;\n  public readFile(filename: string, encoding: string, cb?: (err: ApiError, data?: string) => void ): void;\n  public readFile(filename: string, arg2: any = {}, cb: (err: ApiError, data?: any) => void = nopCb ) {\n    var options = normalizeOptions(arg2, null, 'r', null);\n    cb = typeof arg2 === 'function' ? arg2 : cb;\n    var newCb = wrapCb(cb, 2);\n    try {\n      var flag = FileFlag.getFileFlag(options['flag']);\n      if (!flag.isReadable()) {\n        return newCb(new ApiError(ErrorCode.EINVAL, 'Flag passed to readFile must allow for reading.'));\n      }\n      return this.root.readFile(normalizePath(filename), options.encoding, flag, newCb);\n    } catch (e) {\n      return newCb(e, null);\n    }\n  }\n\n  /**\n   * Synchronously reads the entire contents of a file.\n   * @param [String] filename\n   * @param [Object?] options\n   * @option options [String] encoding The string encoding for the file contents. Defaults to `null`.\n   * @option options [String] flag Defaults to `'r'`.\n   * @return [String | BrowserFS.node.Buffer]\n   */\n  public readFileSync(filename: string, options?: { flag?: string; }): Buffer;\n  public readFileSync(filename: string, options: { encoding: string; flag?: string; }): string;\n  public readFileSync(filename: string, encoding: string): string;\n  public readFileSync(filename: string, arg2: any = {}): any {\n    var options = normalizeOptions(arg2, null, 'r', null);\n    var flag = FileFlag.getFileFlag(options.flag);\n    if (!flag.isReadable()) {\n      throw new ApiError(ErrorCode.EINVAL, 'Flag passed to readFile must allow for reading.');\n    }\n    return this.root.readFileSync(normalizePath(filename), options.encoding, flag);\n  }\n\n  /**\n   * Asynchronously writes data to a file, replacing the file if it already\n   * exists.\n   *\n   * The encoding option is ignored if data is a buffer.\n   *\n   * @example Usage example\n   *   fs.writeFile('message.txt', 'Hello Node', function (err) {\n   *     if (err) throw err;\n   *     console.log('It\\'s saved!');\n   *   });\n   * @param [String] filename\n   * @param [String | BrowserFS.node.Buffer] data\n   * @param [Object?] options\n   * @option options [String] encoding Defaults to `'utf8'`.\n   * @option options [Number] mode Defaults to `0644`.\n   * @option options [String] flag Defaults to `'w'`.\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public writeFile(filename: string, data: any, cb?: (err?: ApiError) => void): void;\n  public writeFile(filename: string, data: any, encoding?: string, cb?: (err?: ApiError) => void): void;\n  public writeFile(filename: string, data: any, options?: { encoding?: string; mode?: string | number; flag?: string; }, cb?: (err?: ApiError) => void): void;\n  public writeFile(filename: string, data: any, arg3: any = {}, cb: (err?: ApiError) => void = nopCb): void {\n    var options = normalizeOptions(arg3, 'utf8', 'w', 0x1a4);\n    cb = typeof arg3 === 'function' ? arg3 : cb;\n    var newCb = wrapCb(cb, 1);\n    try {\n      var flag = FileFlag.getFileFlag(options.flag);\n      if (!flag.isWriteable()) {\n        return newCb(new ApiError(ErrorCode.EINVAL, 'Flag passed to writeFile must allow for writing.'));\n      }\n      return this.root.writeFile(normalizePath(filename), data, options.encoding, flag, options.mode, newCb);\n    } catch (e) {\n      return newCb(e);\n    }\n  }\n\n  /**\n   * Synchronously writes data to a file, replacing the file if it already\n   * exists.\n   *\n   * The encoding option is ignored if data is a buffer.\n   * @param [String] filename\n   * @param [String | BrowserFS.node.Buffer] data\n   * @param [Object?] options\n   * @option options [String] encoding Defaults to `'utf8'`.\n   * @option options [Number] mode Defaults to `0644`.\n   * @option options [String] flag Defaults to `'w'`.\n   */\n  public writeFileSync(filename: string, data: any, options?: { encoding?: string; mode?: number | string; flag?: string; }): void;\n  public writeFileSync(filename: string, data: any, encoding?: string): void;\n  public writeFileSync(filename: string, data: any, arg3?: any): void {\n    var options = normalizeOptions(arg3, 'utf8', 'w', 0x1a4);\n    var flag = FileFlag.getFileFlag(options.flag);\n    if (!flag.isWriteable()) {\n      throw new ApiError(ErrorCode.EINVAL, 'Flag passed to writeFile must allow for writing.');\n    }\n    return this.root.writeFileSync(normalizePath(filename), data, options.encoding, flag, options.mode);\n  }\n\n  /**\n   * Asynchronously append data to a file, creating the file if it not yet\n   * exists.\n   *\n   * @example Usage example\n   *   fs.appendFile('message.txt', 'data to append', function (err) {\n   *     if (err) throw err;\n   *     console.log('The \"data to append\" was appended to file!');\n   *   });\n   * @param [String] filename\n   * @param [String | BrowserFS.node.Buffer] data\n   * @param [Object?] options\n   * @option options [String] encoding Defaults to `'utf8'`.\n   * @option options [Number] mode Defaults to `0644`.\n   * @option options [String] flag Defaults to `'a'`.\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public appendFile(filename: string, data: any, cb?: (err: ApiError) => void): void;\n  public appendFile(filename: string, data: any, options?: { encoding?: string; mode?: number|string; flag?: string; }, cb?: (err: ApiError) => void): void;\n  public appendFile(filename: string, data: any, encoding?: string, cb?: (err: ApiError) => void): void;\n  public appendFile(filename: string, data: any, arg3?: any, cb: (err: ApiError) => void = nopCb): void {\n    var options = normalizeOptions(arg3, 'utf8', 'a', 0x1a4);\n    cb = typeof arg3 === 'function' ? arg3 : cb;\n    var newCb = wrapCb(cb, 1);\n    try {\n      var flag = FileFlag.getFileFlag(options.flag);\n      if (!flag.isAppendable()) {\n        return newCb(new ApiError(ErrorCode.EINVAL, 'Flag passed to appendFile must allow for appending.'));\n      }\n      this.root.appendFile(normalizePath(filename), data, options.encoding, flag, options.mode, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Asynchronously append data to a file, creating the file if it not yet\n   * exists.\n   *\n   * @example Usage example\n   *   fs.appendFile('message.txt', 'data to append', function (err) {\n   *     if (err) throw err;\n   *     console.log('The \"data to append\" was appended to file!');\n   *   });\n   * @param [String] filename\n   * @param [String | BrowserFS.node.Buffer] data\n   * @param [Object?] options\n   * @option options [String] encoding Defaults to `'utf8'`.\n   * @option options [Number] mode Defaults to `0644`.\n   * @option options [String] flag Defaults to `'a'`.\n   */\n  public appendFileSync(filename: string, data: any, options?: { encoding?: string; mode?: number | string; flag?: string; }): void;\n  public appendFileSync(filename: string, data: any, encoding?: string): void;\n  public appendFileSync(filename: string, data: any, arg3?: any): void {\n    var options = normalizeOptions(arg3, 'utf8', 'a', 0x1a4);\n    var flag = FileFlag.getFileFlag(options.flag);\n    if (!flag.isAppendable()) {\n      throw new ApiError(ErrorCode.EINVAL, 'Flag passed to appendFile must allow for appending.');\n    }\n    return this.root.appendFileSync(normalizePath(filename), data, options.encoding, flag, options.mode);\n  }\n\n  // FILE DESCRIPTOR METHODS\n\n  /**\n   * Asynchronous `fstat`.\n   * `fstat()` is identical to `stat()`, except that the file to be stat-ed is\n   * specified by the file descriptor `fd`.\n   * @param [BrowserFS.File] fd\n   * @param [Function(BrowserFS.ApiError, BrowserFS.node.fs.Stats)] callback\n   */\n  public fstat(fd: number, cb: (err: ApiError, stats?: Stats) => any = nopCb): void {\n    var newCb = wrapCb(cb, 2);\n    try {\n      let file = this.fd2file(fd);\n      file.stat(newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous `fstat`.\n   * `fstat()` is identical to `stat()`, except that the file to be stat-ed is\n   * specified by the file descriptor `fd`.\n   * @param [BrowserFS.File] fd\n   * @return [BrowserFS.node.fs.Stats]\n   */\n  public fstatSync(fd: number): Stats {\n    return this.fd2file(fd).statSync();\n  }\n\n  /**\n   * Asynchronous close.\n   * @param [BrowserFS.File] fd\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public close(fd: number, cb: (e?: ApiError) => void = nopCb): void {\n    var newCb = wrapCb(cb, 1);\n    try {\n      this.fd2file(fd).close((e: ApiError) => {\n        if (!e) {\n          this.closeFd(fd);\n        }\n        newCb(e);\n      });\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous close.\n   * @param [BrowserFS.File] fd\n   */\n  public closeSync(fd: number): void {\n    this.fd2file(fd).closeSync();\n    this.closeFd(fd);\n  }\n\n  /**\n   * Asynchronous ftruncate.\n   * @param [BrowserFS.File] fd\n   * @param [Number] len\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public ftruncate(fd: number, cb?: (err?: ApiError) => void): void;\n  public ftruncate(fd: number, len?: number, cb?: (err?: ApiError) => void): void;\n  public ftruncate(fd: number, arg2?: any, cb: (err?: ApiError) => void = nopCb): void {\n    var length = typeof arg2 === 'number' ? arg2 : 0;\n    cb = typeof arg2 === 'function' ? arg2 : cb;\n    var newCb = wrapCb(cb, 1);\n    try {\n      let file = this.fd2file(fd);\n      if (length < 0) {\n        throw new ApiError(ErrorCode.EINVAL);\n      }\n      file.truncate(length, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous ftruncate.\n   * @param [BrowserFS.File] fd\n   * @param [Number] len\n   */\n  public ftruncateSync(fd: number, len: number = 0): void {\n    let file = this.fd2file(fd);\n    if (len < 0) {\n      throw new ApiError(ErrorCode.EINVAL);\n    }\n    file.truncateSync(len);\n  }\n\n  /**\n   * Asynchronous fsync.\n   * @param [BrowserFS.File] fd\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public fsync(fd: number, cb: (err?: ApiError) => void = nopCb): void {\n    var newCb = wrapCb(cb, 1);\n    try {\n      this.fd2file(fd).sync(newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous fsync.\n   * @param [BrowserFS.File] fd\n   */\n  public fsyncSync(fd: number): void {\n    this.fd2file(fd).syncSync();\n  }\n\n  /**\n   * Asynchronous fdatasync.\n   * @param [BrowserFS.File] fd\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public fdatasync(fd: number, cb: (err?: ApiError) => void = nopCb): void {\n    var newCb = wrapCb(cb, 1);\n    try {\n      this.fd2file(fd).datasync(newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous fdatasync.\n   * @param [BrowserFS.File] fd\n   */\n  public fdatasyncSync(fd: number): void {\n    this.fd2file(fd).datasyncSync();\n  }\n\n  /**\n   * Write buffer to the file specified by `fd`.\n   * Note that it is unsafe to use fs.write multiple times on the same file\n   * without waiting for the callback.\n   * @param [BrowserFS.File] fd\n   * @param [BrowserFS.node.Buffer] buffer Buffer containing the data to write to\n   *   the file.\n   * @param [Number] offset Offset in the buffer to start reading data from.\n   * @param [Number] length The amount of bytes to write to the file.\n   * @param [Number] position Offset from the beginning of the file where this\n   *   data should be written. If position is null, the data will be written at\n   *   the current position.\n   * @param [Function(BrowserFS.ApiError, Number, BrowserFS.node.Buffer)]\n   *   callback The number specifies the number of bytes written into the file.\n   */\n  public write(fd: number, buffer: Buffer, offset: number, length: number, cb?: (err: ApiError, written: number, buffer: Buffer) => void): void;\n  public write(fd: number, buffer: Buffer, offset: number, length: number, position: number, cb?: (err: ApiError, written: number, buffer: Buffer) => void): void;\n  public write(fd: number, data: any, cb?: (err: ApiError, written: number, str: string) => any): void;\n  public write(fd: number, data: any, position: number, cb?: (err: ApiError, written: number, str: string) => any): void;\n  public write(fd: number, data: any, position: number, encoding: string, cb?: (err: ApiError, written: number, str: string) => void): void;\n  public write(fd: number, arg2: any, arg3?: any, arg4?: any, arg5?: any, cb: (err: ApiError, written?: number, buffer?: Buffer) => void = nopCb): void {\n    var buffer: Buffer, offset: number, length: number, position: number = null;\n    if (typeof arg2 === 'string') {\n      // Signature 1: (fd, string, [position?, [encoding?]], cb?)\n      var encoding = 'utf8';\n      switch (typeof arg3) {\n        case 'function':\n          // (fd, string, cb)\n          cb = arg3;\n          break;\n        case 'number':\n          // (fd, string, position, encoding?, cb?)\n          position = arg3;\n          encoding = typeof arg4 === 'string' ? arg4 : 'utf8';\n          cb = typeof arg5 === 'function' ? arg5 : cb;\n          break;\n        default:\n          // ...try to find the callback and get out of here!\n          cb = typeof arg4 === 'function' ? arg4 : typeof arg5 === 'function' ? arg5 : cb;\n          return cb(new ApiError(ErrorCode.EINVAL, 'Invalid arguments.'));\n      }\n      buffer = new Buffer(arg2, encoding);\n      offset = 0;\n      length = buffer.length;\n    } else {\n      // Signature 2: (fd, buffer, offset, length, position?, cb?)\n      buffer = arg2;\n      offset = arg3;\n      length = arg4;\n      position = typeof arg5 === 'number' ? arg5 : null;\n      cb = typeof arg5 === 'function' ? arg5 : cb;\n    }\n\n    var newCb = wrapCb(cb, 3);\n    try {\n      let file = this.fd2file(fd);\n      if (position == null) {\n        position = file.getPos();\n      }\n      file.write(buffer, offset, length, position, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Write buffer to the file specified by `fd`.\n   * Note that it is unsafe to use fs.write multiple times on the same file\n   * without waiting for it to return.\n   * @param [BrowserFS.File] fd\n   * @param [BrowserFS.node.Buffer] buffer Buffer containing the data to write to\n   *   the file.\n   * @param [Number] offset Offset in the buffer to start reading data from.\n   * @param [Number] length The amount of bytes to write to the file.\n   * @param [Number] position Offset from the beginning of the file where this\n   *   data should be written. If position is null, the data will be written at\n   *   the current position.\n   * @return [Number]\n   */\n  public writeSync(fd: number, buffer: Buffer, offset: number, length: number, position?: number): number;\n  public writeSync(fd: number, data: string, position?: number, encoding?: string): number;\n  public writeSync(fd: number, arg2: any, arg3?: any, arg4?: any, arg5?: any): number {\n    var buffer: Buffer, offset: number = 0, length: number, position: number;\n    if (typeof arg2 === 'string') {\n      // Signature 1: (fd, string, [position?, [encoding?]])\n      position = typeof arg3 === 'number' ? arg3 : null;\n      var encoding = typeof arg4 === 'string' ? arg4 : 'utf8';\n      offset = 0;\n      buffer = new Buffer(arg2, encoding);\n      length = buffer.length;\n    } else {\n      // Signature 2: (fd, buffer, offset, length, position?)\n      buffer = arg2;\n      offset = arg3;\n      length = arg4;\n      position = typeof arg5 === 'number' ? arg5 : null;\n    }\n\n    let file = this.fd2file(fd);\n    if (position == null) {\n      position = file.getPos();\n    }\n    return file.writeSync(buffer, offset, length, position);\n  }\n\n  /**\n   * Read data from the file specified by `fd`.\n   * @param [BrowserFS.File] fd\n   * @param [BrowserFS.node.Buffer] buffer The buffer that the data will be\n   *   written to.\n   * @param [Number] offset The offset within the buffer where writing will\n   *   start.\n   * @param [Number] length An integer specifying the number of bytes to read.\n   * @param [Number] position An integer specifying where to begin reading from\n   *   in the file. If position is null, data will be read from the current file\n   *   position.\n   * @param [Function(BrowserFS.ApiError, Number, BrowserFS.node.Buffer)]\n   *   callback The number is the number of bytes read\n   */\n  public read(fd: number, length: number, position: number, encoding: string, cb?: (err: ApiError, data?: string, bytesRead?: number) => void): void;\n  public read(fd: number, buffer: Buffer, offset: number, length: number, position: number, cb?: (err: ApiError, bytesRead?: number, buffer?: Buffer) => void): void;\n  public read(fd: number, arg2: any, arg3: any, arg4: any, arg5?: any, cb: (err: ApiError, arg2?: any, arg3?: any) => void = nopCb): void {\n    var position: number, offset: number, length: number, buffer: Buffer, newCb: (err: ApiError, bytesRead?: number, buffer?: Buffer) => void;\n    if (typeof arg2 === 'number') {\n      // legacy interface\n      // (fd, length, position, encoding, callback)\n      length = arg2;\n      position = arg3;\n      var encoding = arg4;\n      cb = typeof arg5 === 'function' ? arg5 : cb;\n      offset = 0;\n      buffer = new Buffer(length);\n      // XXX: Inefficient.\n      // Wrap the cb so we shelter upper layers of the API from these\n      // shenanigans.\n      newCb = wrapCb((function(err: any, bytesRead: number, buf: Buffer) {\n        if (err) {\n          return cb(err);\n        }\n        cb(err, buf.toString(encoding), bytesRead);\n      }), 3);\n    } else {\n      buffer = arg2;\n      offset = arg3;\n      length = arg4;\n      position = arg5;\n      newCb = wrapCb(cb, 3);\n    }\n\n    try {\n      let file = this.fd2file(fd);\n      if (position == null) {\n        position = file.getPos();\n      }\n      file.read(buffer, offset, length, position, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Read data from the file specified by `fd`.\n   * @param [BrowserFS.File] fd\n   * @param [BrowserFS.node.Buffer] buffer The buffer that the data will be\n   *   written to.\n   * @param [Number] offset The offset within the buffer where writing will\n   *   start.\n   * @param [Number] length An integer specifying the number of bytes to read.\n   * @param [Number] position An integer specifying where to begin reading from\n   *   in the file. If position is null, data will be read from the current file\n   *   position.\n   * @return [Number]\n   */\n  public readSync(fd: number, length: number, position: number, encoding: string): string;\n  public readSync(fd: number, buffer: Buffer, offset: number, length: number, position: number): number;\n  public readSync(fd: number, arg2: any, arg3: any, arg4: any, arg5?: any): any {\n    var shenanigans = false;\n    var buffer: Buffer, offset: number, length: number, position: number;\n    if (typeof arg2 === 'number') {\n      length = arg2;\n      position = arg3;\n      var encoding = arg4;\n      offset = 0;\n      buffer = new Buffer(length);\n      shenanigans = true;\n    } else {\n      buffer = arg2;\n      offset = arg3;\n      length = arg4;\n      position = arg5;\n    }\n    let file = this.fd2file(fd);\n    if (position == null) {\n      position = file.getPos();\n    }\n\n    var rv = file.readSync(buffer, offset, length, position);\n    if (!shenanigans) {\n      return rv;\n    } else {\n      return [buffer.toString(encoding), rv];\n    }\n  }\n\n  /**\n   * Asynchronous `fchown`.\n   * @param [BrowserFS.File] fd\n   * @param [Number] uid\n   * @param [Number] gid\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public fchown(fd: number, uid: number, gid: number, callback: (e?: ApiError) => void = nopCb): void {\n    var newCb = wrapCb(callback, 1);\n    try {\n      this.fd2file(fd).chown(uid, gid, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous `fchown`.\n   * @param [BrowserFS.File] fd\n   * @param [Number] uid\n   * @param [Number] gid\n   */\n  public fchownSync(fd: number, uid: number, gid: number): void {\n    this.fd2file(fd).chownSync(uid, gid);\n  }\n\n  /**\n   * Asynchronous `fchmod`.\n   * @param [BrowserFS.File] fd\n   * @param [Number] mode\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public fchmod(fd: number, mode: string | number, cb?: (e?: ApiError) => void): void {\n    var newCb = wrapCb(cb, 1);\n    try {\n      let numMode = typeof mode === 'string' ? parseInt(mode, 8) : mode;\n      this.fd2file(fd).chmod(numMode, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous `fchmod`.\n   * @param [BrowserFS.File] fd\n   * @param [Number] mode\n   */\n  public fchmodSync(fd: number, mode: number | string): void {\n    let numMode = typeof mode === 'string' ? parseInt(mode, 8) : mode;\n    this.fd2file(fd).chmodSync(numMode);\n  }\n\n  /**\n   * Change the file timestamps of a file referenced by the supplied file\n   * descriptor.\n   * @param [BrowserFS.File] fd\n   * @param [Date] atime\n   * @param [Date] mtime\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public futimes(fd: number, atime: number, mtime: number, cb: (e?: ApiError) => void): void;\n  public futimes(fd: number, atime: Date, mtime: Date, cb: (e?: ApiError) => void): void;\n  public futimes(fd: number, atime: any, mtime: any, cb: (e?: ApiError) => void = nopCb): void {\n    var newCb = wrapCb(cb, 1);\n    try {\n      let file = this.fd2file(fd);\n      if (typeof atime === 'number') {\n        atime = new Date(atime * 1000);\n      }\n      if (typeof mtime === 'number') {\n        mtime = new Date(mtime * 1000);\n      }\n      file.utimes(atime, mtime, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Change the file timestamps of a file referenced by the supplied file\n   * descriptor.\n   * @param [BrowserFS.File] fd\n   * @param [Date] atime\n   * @param [Date] mtime\n   */\n  public futimesSync(fd: number, atime: number | Date, mtime: number | Date): void {\n    this.fd2file(fd).utimesSync(normalizeTime(atime), normalizeTime(mtime));\n  }\n\n  // DIRECTORY-ONLY METHODS\n\n  /**\n   * Asynchronous `rmdir`.\n   * @param [String] path\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public rmdir(path: string, cb: (e?: ApiError) => void = nopCb): void {\n    var newCb = wrapCb(cb, 1);\n    try {\n      path = normalizePath(path);\n      this.root.rmdir(path, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous `rmdir`.\n   * @param [String] path\n   */\n  public rmdirSync(path: string): void {\n    path = normalizePath(path);\n    return this.root.rmdirSync(path);\n  }\n\n  /**\n   * Asynchronous `mkdir`.\n   * @param [String] path\n   * @param [Number?] mode defaults to `0777`\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public mkdir(path: string, mode?: any, cb: (e?: ApiError) => void = nopCb): void {\n    if (typeof mode === 'function') {\n      cb = mode;\n      mode = 0x1ff;\n    }\n    var newCb = wrapCb(cb, 1);\n    try {\n      path = normalizePath(path);\n      this.root.mkdir(path, mode, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous `mkdir`.\n   * @param [String] path\n   * @param [Number?] mode defaults to `0777`\n   */\n  public mkdirSync(path: string, mode?: number | string): void {\n    this.root.mkdirSync(normalizePath(path), normalizeMode(mode, 0x1ff));\n  }\n\n  /**\n   * Asynchronous `readdir`. Reads the contents of a directory.\n   * The callback gets two arguments `(err, files)` where `files` is an array of\n   * the names of the files in the directory excluding `'.'` and `'..'`.\n   * @param [String] path\n   * @param [Function(BrowserFS.ApiError, String[])] callback\n   */\n  public readdir(path: string, cb: (err: ApiError, files?: string[]) => void = nopCb): void {\n    var newCb = <(err: ApiError, files?: string[]) => void> wrapCb(cb, 2);\n    try {\n      path = normalizePath(path);\n      this.root.readdir(path, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous `readdir`. Reads the contents of a directory.\n   * @param [String] path\n   * @return [String[]]\n   */\n  public readdirSync(path: string): string[] {\n    path = normalizePath(path);\n    return this.root.readdirSync(path);\n  }\n\n  // SYMLINK METHODS\n\n  /**\n   * Asynchronous `link`.\n   * @param [String] srcpath\n   * @param [String] dstpath\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public link(srcpath: string, dstpath: string, cb: (e?: ApiError) => void = nopCb): void {\n    var newCb = wrapCb(cb, 1);\n    try {\n      srcpath = normalizePath(srcpath);\n      dstpath = normalizePath(dstpath);\n      this.root.link(srcpath, dstpath, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous `link`.\n   * @param [String] srcpath\n   * @param [String] dstpath\n   */\n  public linkSync(srcpath: string, dstpath: string): void {\n    srcpath = normalizePath(srcpath);\n    dstpath = normalizePath(dstpath);\n    return this.root.linkSync(srcpath, dstpath);\n  }\n\n  /**\n   * Asynchronous `symlink`.\n   * @param [String] srcpath\n   * @param [String] dstpath\n   * @param [String?] type can be either `'dir'` or `'file'` (default is `'file'`)\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public symlink(srcpath: string, dstpath: string, cb?: (e?: ApiError) => void): void;\n  public symlink(srcpath: string, dstpath: string, type?: string, cb?: (e?: ApiError) => void): void;\n  public symlink(srcpath: string, dstpath: string, arg3?: any, cb: (e?: ApiError) => void = nopCb): void {\n    var type = typeof arg3 === 'string' ? arg3 : 'file';\n    cb = typeof arg3 === 'function' ? arg3 : cb;\n    var newCb = wrapCb(cb, 1);\n    try {\n      if (type !== 'file' && type !== 'dir') {\n        return newCb(new ApiError(ErrorCode.EINVAL, \"Invalid type: \" + type));\n      }\n      srcpath = normalizePath(srcpath);\n      dstpath = normalizePath(dstpath);\n      this.root.symlink(srcpath, dstpath, type, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous `symlink`.\n   * @param [String] srcpath\n   * @param [String] dstpath\n   * @param [String?] type can be either `'dir'` or `'file'` (default is `'file'`)\n   */\n  public symlinkSync(srcpath: string, dstpath: string, type?: string): void {\n    if (type == null) {\n      type = 'file';\n    } else if (type !== 'file' && type !== 'dir') {\n      throw new ApiError(ErrorCode.EINVAL, \"Invalid type: \" + type);\n    }\n    srcpath = normalizePath(srcpath);\n    dstpath = normalizePath(dstpath);\n    return this.root.symlinkSync(srcpath, dstpath, type);\n  }\n\n  /**\n   * Asynchronous readlink.\n   * @param [String] path\n   * @param [Function(BrowserFS.ApiError, String)] callback\n   */\n  public readlink(path: string, cb: (err: ApiError, linkString?: string) => any = nopCb): void {\n    var newCb = wrapCb(cb, 2);\n    try {\n      path = normalizePath(path);\n      this.root.readlink(path, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous readlink.\n   * @param [String] path\n   * @return [String]\n   */\n  public readlinkSync(path: string): string {\n    path = normalizePath(path);\n    return this.root.readlinkSync(path);\n  }\n\n  // PROPERTY OPERATIONS\n\n  /**\n   * Asynchronous `chown`.\n   * @param [String] path\n   * @param [Number] uid\n   * @param [Number] gid\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public chown(path: string, uid: number, gid: number, cb: (e?: ApiError) => void = nopCb): void {\n    var newCb = wrapCb(cb, 1);\n    try {\n      path = normalizePath(path);\n      this.root.chown(path, false, uid, gid, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous `chown`.\n   * @param [String] path\n   * @param [Number] uid\n   * @param [Number] gid\n   */\n  public chownSync(path: string, uid: number, gid: number): void {\n    path = normalizePath(path);\n    this.root.chownSync(path, false, uid, gid);\n  }\n\n  /**\n   * Asynchronous `lchown`.\n   * @param [String] path\n   * @param [Number] uid\n   * @param [Number] gid\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public lchown(path: string, uid: number, gid: number, cb: (e?: ApiError) => void = nopCb): void {\n    var newCb = wrapCb(cb, 1);\n    try {\n      path = normalizePath(path);\n      this.root.chown(path, true, uid, gid, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous `lchown`.\n   * @param [String] path\n   * @param [Number] uid\n   * @param [Number] gid\n   */\n  public lchownSync(path: string, uid: number, gid: number): void {\n    path = normalizePath(path);\n    this.root.chownSync(path, true, uid, gid);\n  }\n\n  /**\n   * Asynchronous `chmod`.\n   * @param [String] path\n   * @param [Number] mode\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public chmod(path: string, mode: number | string, cb: (e?: ApiError) => void = nopCb): void {\n    var newCb = wrapCb(cb, 1);\n    try {\n      let numMode = normalizeMode(mode, -1);\n      if (numMode < 0) {\n        throw new ApiError(ErrorCode.EINVAL, `Invalid mode.`);\n      }\n      this.root.chmod(normalizePath(path), false, numMode, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous `chmod`.\n   * @param [String] path\n   * @param [Number] mode\n   */\n  public chmodSync(path: string, mode: string|number): void {\n    let numMode = normalizeMode(mode, -1);\n    if (numMode < 0) {\n      throw new ApiError(ErrorCode.EINVAL, `Invalid mode.`);\n    }\n    path = normalizePath(path);\n    this.root.chmodSync(path, false, numMode);\n  }\n\n  /**\n   * Asynchronous `lchmod`.\n   * @param [String] path\n   * @param [Number] mode\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public lchmod(path: string, mode: number|string, cb: Function = nopCb): void {\n    var newCb = wrapCb(cb, 1);\n    try {\n      let numMode = normalizeMode(mode, -1);\n      if (numMode < 0) {\n        throw new ApiError(ErrorCode.EINVAL, `Invalid mode.`);\n      }\n      this.root.chmod(normalizePath(path), true, numMode, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous `lchmod`.\n   * @param [String] path\n   * @param [Number] mode\n   */\n  public lchmodSync(path: string, mode: number|string): void {\n    let numMode = normalizeMode(mode, -1);\n    if (numMode < 1) {\n      throw new ApiError(ErrorCode.EINVAL, `Invalid mode.`);\n    }\n    this.root.chmodSync(normalizePath(path), true, numMode);\n  }\n\n  /**\n   * Change file timestamps of the file referenced by the supplied path.\n   * @param [String] path\n   * @param [Date] atime\n   * @param [Date] mtime\n   * @param [Function(BrowserFS.ApiError)] callback\n   */\n  public utimes(path: string, atime: number|Date, mtime: number|Date, cb: (e?: ApiError) => void = nopCb): void {\n    var newCb = wrapCb(cb, 1);\n    try {\n      this.root.utimes(normalizePath(path), normalizeTime(atime), normalizeTime(mtime), newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Change file timestamps of the file referenced by the supplied path.\n   * @param [String] path\n   * @param [Date] atime\n   * @param [Date] mtime\n   */\n  public utimesSync(path: string, atime: number|Date, mtime: number|Date): void {\n    this.root.utimesSync(normalizePath(path), normalizeTime(atime), normalizeTime(mtime));\n  }\n\n  /**\n   * Asynchronous `realpath`. The callback gets two arguments\n   * `(err, resolvedPath)`. May use `process.cwd` to resolve relative paths.\n   *\n   * @example Usage example\n   *   var cache = {'/etc':'/private/etc'};\n   *   fs.realpath('/etc/passwd', cache, function (err, resolvedPath) {\n   *     if (err) throw err;\n   *     console.log(resolvedPath);\n   *   });\n   *\n   * @param [String] path\n   * @param [Object?] cache An object literal of mapped paths that can be used to\n   *   force a specific path resolution or avoid additional `fs.stat` calls for\n   *   known real paths.\n   * @param [Function(BrowserFS.ApiError, String)] callback\n   */\n  public realpath(path: string, cb?: (err: ApiError, resolvedPath?: string) =>any): void;\n  public realpath(path: string, cache: {[path: string]: string}, cb: (err: ApiError, resolvedPath?: string) =>any): void;\n  public realpath(path: string, arg2?: any, cb: (err: ApiError, resolvedPath?: string) => any = nopCb): void {\n    var cache = typeof arg2 === 'object' ? arg2 : {};\n    cb = typeof arg2 === 'function' ? arg2 : nopCb;\n    var newCb = <(err: ApiError, resolvedPath?: string) =>any> wrapCb(cb, 2);\n    try {\n      path = normalizePath(path);\n      this.root.realpath(path, cache, newCb);\n    } catch (e) {\n      newCb(e);\n    }\n  }\n\n  /**\n   * Synchronous `realpath`.\n   * @param [String] path\n   * @param [Object?] cache An object literal of mapped paths that can be used to\n   *   force a specific path resolution or avoid additional `fs.stat` calls for\n   *   known real paths.\n   * @return [String]\n   */\n  public realpathSync(path: string, cache: {[path: string]: string} = {}): string {\n    path = normalizePath(path);\n    return this.root.realpathSync(path, cache);\n  }\n\n  public watchFile(filename: string, listener: (curr: Stats, prev: Stats) => void): void;\n  public watchFile(filename: string, options: { persistent?: boolean; interval?: number; }, listener: (curr: Stats, prev: Stats) => void): void;\n  public watchFile(filename: string, arg2: any, listener: (curr: Stats, prev: Stats) => void = nopCb): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n\n  public unwatchFile(filename: string, listener: (curr: Stats, prev: Stats) => void = nopCb): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n\n  public watch(filename: string, listener?: (event: string, filename: string) => any): _fs.FSWatcher;\n  public watch(filename: string, options: { persistent?: boolean; }, listener?: (event: string, filename: string) => any): _fs.FSWatcher;\n  public watch(filename: string, arg2: any, listener: (event: string, filename: string) => any = nopCb): _fs.FSWatcher {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n\n  public F_OK: number = 0;\n  public R_OK: number = 4;\n  public W_OK: number = 2;\n  public X_OK: number = 1;\n\n  public access(path: string, callback: (err: ApiError) => void): void;\n  public access(path: string, mode: number, callback: (err: ApiError) => void): void;\n  public access(path: string, arg2: any, cb: (e: ApiError) => void = nopCb): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n\n  public accessSync(path: string, mode?: number): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n\n  public createReadStream(path: string, options?: {\n        flags?: string;\n        encoding?: string;\n        fd?: number;\n        mode?: number;\n        autoClose?: boolean;\n    }): _fs.ReadStream {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n\n  public createWriteStream(path: string, options?: {\n        flags?: string;\n        encoding?: string;\n        fd?: number;\n        mode?: number;\n    }): _fs.WriteStream {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n\n  public _wrapCb: (cb: Function, args: number) => Function = wrapCb;\n}\n\n// Type checking.\nvar _: typeof _fs = new FS();\n\nexport interface FSModule extends FS {\n  /**\n   * Retrieve the FS object backing the fs module.\n   */\n  getFSModule(): FS;\n  /**\n   * Set the FS object backing the fs module.\n   */\n  changeFSModule(newFs: FS): void;\n  /**\n   * The FS constructor.\n   */\n  FS: typeof FS;\n}\n","/**\n * Standard libc error codes. Add more to this enum and ErrorStrings as they are\n * needed.\n * @url http://www.gnu.org/software/libc/manual/html_node/Error-Codes.html\n */\nexport enum ErrorCode {\n  EPERM, ENOENT, EIO, EBADF, EACCES, EBUSY, EEXIST, ENOTDIR, EISDIR, EINVAL,\n  EFBIG, ENOSPC, EROFS, ENOTEMPTY, ENOTSUP\n}\n/**\n * Strings associated with each error code.\n */\nvar ErrorStrings: {[code: string]: string} = {};\nErrorStrings[ErrorCode.EPERM] = 'Operation not permitted.';\nErrorStrings[ErrorCode.ENOENT] = 'No such file or directory.';\nErrorStrings[ErrorCode.EIO] = 'Input/output error.';\nErrorStrings[ErrorCode.EBADF] = 'Bad file descriptor.';\nErrorStrings[ErrorCode.EACCES] = 'Permission denied.';\nErrorStrings[ErrorCode.EBUSY] = 'Resource busy or locked.';\nErrorStrings[ErrorCode.EEXIST] = 'File exists.';\nErrorStrings[ErrorCode.ENOTDIR] = 'File is not a directory.';\nErrorStrings[ErrorCode.EISDIR] = 'File is a directory.';\nErrorStrings[ErrorCode.EINVAL] = 'Invalid argument.';\nErrorStrings[ErrorCode.EFBIG] = 'File is too big.';\nErrorStrings[ErrorCode.ENOSPC] = 'No space left on disk.';\nErrorStrings[ErrorCode.EROFS] = 'Cannot modify a read-only file system.';\nErrorStrings[ErrorCode.ENOTEMPTY] = 'Directory is not empty.';\nErrorStrings[ErrorCode.ENOTSUP] = 'Operation is not supported.';\n\n/**\n * Represents a BrowserFS error. Passed back to applications after a failed\n * call to the BrowserFS API.\n * errno?: number;\n        code?: string;\n        path?: string;\n        syscall?: string;\n        stack?: string;\n */\nexport class ApiError extends Error implements NodeJS.ErrnoException {\n  public errno: ErrorCode;\n  public code: string;\n  public path: string;\n  // Unsupported.\n  public syscall: string = \"\";\n  public stack: string;\n\n  /**\n   * Represents a BrowserFS error. Passed back to applications after a failed\n   * call to the BrowserFS API.\n   *\n   * Error codes mirror those returned by regular Unix file operations, which is\n   * what Node returns.\n   * @constructor ApiError\n   * @param type The type of the error.\n   * @param [message] A descriptive error message.\n   */\n  constructor(type: ErrorCode, message: string = ErrorStrings[type], path: string = null) {\n    super(message);\n    this.errno = type;\n    this.code = ErrorCode[type];\n    this.path = path;\n    this.stack = (<any>new Error()).stack;\n    this.message = `Error: ${this.code}: ${message}${this.path ? `, '${this.path}'` : ''}`;\n  }\n\n  /**\n   * @return A friendly error message.\n   */\n  public toString(): string {\n    return this.message;\n  }\n\n  public toJSON(): any {\n    return {\n      errno: this.errno,\n      code: this.code,\n      path: this.path,\n      stack: this.stack,\n      message: this.message\n    };\n  }\n\n  public static fromJSON(json: any): ApiError {\n    var err = new ApiError(0);\n    err.errno = json.errno;\n    err.code = json.code;\n    err.path = json.path;\n    err.stack = json.stack;\n    err.message = json.message;\n    return err;\n  }\n\n  /**\n   * Writes the API error into a buffer.\n   */\n  public writeToBuffer(buffer: Buffer = new Buffer(this.bufferSize()), i: number = 0): Buffer {\n    var bytesWritten = buffer.write(JSON.stringify(this.toJSON()), i + 4);\n    buffer.writeUInt32LE(bytesWritten, i);\n    return buffer;\n  }\n\n  /**\n   * Creates an ApiError object from a buffer.\n   */\n  public static fromBuffer(buffer: Buffer, i: number = 0): ApiError {\n    return ApiError.fromJSON(JSON.parse(buffer.toString('utf8', i + 4, i + 4 + buffer.readUInt32LE(i))));\n  }\n\n  /**\n   * The size of the API error in buffer-form in bytes.\n   */\n  public bufferSize(): number {\n    // 4 bytes for string length.\n    return 4 + Buffer.byteLength(JSON.stringify(this.toJSON()));\n  }\n\n  public static FileError(code: ErrorCode, p: string): ApiError {\n    return new ApiError(code, ErrorStrings[code], p);\n  }\n  public static ENOENT(path: string): ApiError {\n    return this.FileError(ErrorCode.ENOENT, path);\n  }\n\n  public static EEXIST(path: string): ApiError {\n    return this.FileError(ErrorCode.EEXIST, path);\n  }\n\n  public static EISDIR(path: string): ApiError {\n    return this.FileError(ErrorCode.EISDIR, path);\n  }\n\n  public static ENOTDIR(path: string): ApiError {\n    return this.FileError(ErrorCode.ENOTDIR, path);\n  }\n\n  public static EPERM(path: string): ApiError {\n    return this.FileError(ErrorCode.EPERM, path);\n  }\n\n  public static ENOTEMPTY(path: string): ApiError {\n    return this.FileError(ErrorCode.ENOTEMPTY, path);\n  }\n}\n","import AsyncMirror from '../backend/AsyncMirror';\nimport Dropbox from '../backend/Dropbox';\nimport FolderAdapter from '../backend/FolderAdapter';\nimport HTML5FS from '../backend/HTML5FS';\nimport InMemory from '../backend/InMemory';\nimport IndexedDB from '../backend/IndexedDB';\nimport LocalStorage from '../backend/LocalStorage';\nimport MountableFileSystem from '../backend/MountableFileSystem';\nimport OverlayFS from '../backend/OverlayFS';\nimport WorkerFS from '../backend/WorkerFS';\nimport XmlHttpRequest from '../backend/XmlHttpRequest';\nimport ZipFS from '../backend/ZipFS';\nexport {AsyncMirror, Dropbox, FolderAdapter, HTML5FS, InMemory, IndexedDB, LocalStorage, MountableFileSystem, OverlayFS, WorkerFS, XmlHttpRequest, ZipFS};\n","/**\n * BrowserFS's main module. This is exposed in the browser via the BrowserFS global.\n */\n\nimport buffer = require('buffer');\nimport fs = require('./node_fs');\nimport path = require('path');\nimport file_system = require('./file_system');\nimport EmscriptenFS from '../generic/emscripten_fs';\nimport * as FileSystem from './backends';\nimport * as BFSUtils from './util';\n\nif (process['initializeTTYs']) {\n  process['initializeTTYs']();\n}\n\n/**\n * Installs BrowserFS onto the given object.\n * We recommend that you run install with the 'window' object to make things\n * global, as in Node.\n *\n * Properties installed:\n *\n * * Buffer\n * * process\n * * require (we monkey-patch it)\n *\n * This allows you to write code as if you were running inside Node.\n * @param {object} obj - The object to install things onto (e.g. window)\n */\nexport function install(obj: any) {\n  obj.Buffer = Buffer;\n  obj.process = process;\n  var oldRequire = obj.require != null ? obj.require : null;\n  // Monkey-patch require for Node-style code.\n  obj.require = function(arg: string) {\n    var rv = BFSRequire(arg);\n    if (rv == null) {\n      return oldRequire.apply(null, Array.prototype.slice.call(arguments, 0))\n    } else {\n      return rv;\n    }\n  };\n}\n\nexport function registerFileSystem(name: string, fs: file_system.FileSystemConstructor) {\n  (<any> FileSystem)[name] = fs;\n}\n\nexport function BFSRequire(module: 'fs'): typeof fs;\nexport function BFSRequire(module: 'path'): typeof path;\nexport function BFSRequire(module: 'buffer'): typeof buffer;\nexport function BFSRequire(module: 'process'): typeof process;\nexport function BFSRequire(module: 'bfs_utils'): typeof BFSUtils;\nexport function BFSRequire(module: string): any;\nexport function BFSRequire(module: string): any {\n  switch(module) {\n    case 'fs':\n      return fs;\n    case 'path':\n      return path;\n    case 'buffer':\n      // The 'buffer' module has 'Buffer' as a property.\n      return buffer;\n    case 'process':\n      return process;\n    case 'bfs_utils':\n      return BFSUtils;\n    default:\n      return FileSystem[module];\n  }\n}\n\n/**\n * You must call this function with a properly-instantiated root file system\n * before using any file system API method.\n * @param {BrowserFS.FileSystem} rootFS - The root filesystem to use for the\n *   entire BrowserFS file system.\n */\nexport function initialize(rootfs: file_system.FileSystem) {\n  return fs.initialize(rootfs);\n}\n\nexport {EmscriptenFS, FileSystem};\n","import {ApiError, ErrorCode} from './api_error';\nimport Stats from './node_fs_stats';\n\nexport interface File {\n  /**\n   * **Core**: Get the current file position.\n   * @return [Number]\n   */\n  getPos(): number;\n  /**\n   * **Core**: Asynchronous `stat`.\n   * @param [Function(BrowserFS.ApiError, BrowserFS.node.fs.Stats)] cb\n   */\n  stat(cb: (err: ApiError, stats?: Stats) => any): void;\n  /**\n   * **Core**: Synchronous `stat`.\n   * @param [Function(BrowserFS.ApiError, BrowserFS.node.fs.Stats)] cb\n   */\n  statSync(): Stats;\n  /**\n   * **Core**: Asynchronous close.\n   * @param [Function(BrowserFS.ApiError)] cb\n   */\n  close(cb: Function): void;\n  /**\n   * **Core**: Synchronous close.\n   */\n  closeSync(): void;\n  /**\n   * **Core**: Asynchronous truncate.\n   * @param [Number] len\n   * @param [Function(BrowserFS.ApiError)] cb\n   */\n  truncate(len: number, cb: Function): void;\n  /**\n   * **Core**: Synchronous truncate.\n   * @param [Number] len\n   */\n  truncateSync(len: number): void;\n  /**\n   * **Core**: Asynchronous sync.\n   * @param [Function(BrowserFS.ApiError)] cb\n   */\n  sync(cb: (e?: ApiError) => void): void;\n  /**\n   * **Core**: Synchronous sync.\n   */\n  syncSync(): void;\n  /**\n   * **Core**: Write buffer to the file.\n   * Note that it is unsafe to use fs.write multiple times on the same file\n   * without waiting for the callback.\n   * @param [BrowserFS.node.Buffer] buffer Buffer containing the data to write to\n   *  the file.\n   * @param [Number] offset Offset in the buffer to start reading data from.\n   * @param [Number] length The amount of bytes to write to the file.\n   * @param [Number] position Offset from the beginning of the file where this\n   *   data should be written. If position is null, the data will be written at\n   *   the current position.\n   * @param [Function(BrowserFS.ApiError, Number, BrowserFS.node.Buffer)]\n   *   cb The number specifies the number of bytes written into the file.\n   */\n  write(buffer: NodeBuffer, offset: number, length: number, position: number, cb: (err: ApiError, written?: number, buffer?: NodeBuffer) => any): void;\n  /**\n   * **Core**: Write buffer to the file.\n   * Note that it is unsafe to use fs.writeSync multiple times on the same file\n   * without waiting for it to return.\n   * @param [BrowserFS.node.Buffer] buffer Buffer containing the data to write to\n   *  the file.\n   * @param [Number] offset Offset in the buffer to start reading data from.\n   * @param [Number] length The amount of bytes to write to the file.\n   * @param [Number] position Offset from the beginning of the file where this\n   *   data should be written. If position is null, the data will be written at\n   *   the current position.\n   * @return [Number]\n   */\n  writeSync(buffer: NodeBuffer, offset: number, length: number, position: number): number;\n  /**\n   * **Core**: Read data from the file.\n   * @param [BrowserFS.node.Buffer] buffer The buffer that the data will be\n   *   written to.\n   * @param [Number] offset The offset within the buffer where writing will\n   *   start.\n   * @param [Number] length An integer specifying the number of bytes to read.\n   * @param [Number] position An integer specifying where to begin reading from\n   *   in the file. If position is null, data will be read from the current file\n   *   position.\n   * @param [Function(BrowserFS.ApiError, Number, BrowserFS.node.Buffer)] cb The\n   *   number is the number of bytes read\n   */\n  read(buffer: NodeBuffer, offset: number, length: number, position: number, cb: (err: ApiError, bytesRead?: number, buffer?: NodeBuffer) => void): void;\n  /**\n   * **Core**: Read data from the file.\n   * @param [BrowserFS.node.Buffer] buffer The buffer that the data will be\n   *   written to.\n   * @param [Number] offset The offset within the buffer where writing will\n   *   start.\n   * @param [Number] length An integer specifying the number of bytes to read.\n   * @param [Number] position An integer specifying where to begin reading from\n   *   in the file. If position is null, data will be read from the current file\n   *   position.\n   * @return [Number]\n   */\n  readSync(buffer: NodeBuffer, offset: number, length: number, position: number): number;\n  /**\n   * **Supplementary**: Asynchronous `datasync`.\n   *\n   * Default implementation maps to `sync`.\n   * @param [Function(BrowserFS.ApiError)] cb\n   */\n  datasync(cb: (e?: ApiError) => void): void;\n  /**\n   * **Supplementary**: Synchronous `datasync`.\n   *\n   * Default implementation maps to `syncSync`.\n   */\n  datasyncSync(): void;\n  /**\n   * **Optional**: Asynchronous `chown`.\n   * @param [Number] uid\n   * @param [Number] gid\n   * @param [Function(BrowserFS.ApiError)] cb\n   */\n  chown(uid: number, gid: number, cb: (e?: ApiError) => void): void;\n  /**\n   * **Optional**: Synchronous `chown`.\n   * @param [Number] uid\n   * @param [Number] gid\n   */\n  chownSync(uid: number, gid: number): void;\n  /**\n   * **Optional**: Asynchronous `fchmod`.\n   * @param [Number] mode\n   * @param [Function(BrowserFS.ApiError)] cb\n   */\n  chmod(mode: number, cb: (e?: ApiError) => void): void;\n  /**\n   * **Optional**: Synchronous `fchmod`.\n   * @param [Number] mode\n   */\n  chmodSync(mode: number): void;\n  /**\n   * **Optional**: Change the file timestamps of the file.\n   * @param [Date] atime\n   * @param [Date] mtime\n   * @param [Function(BrowserFS.ApiError)] cb\n   */\n  utimes(atime: Date, mtime: Date, cb: (e?: ApiError) => void): void;\n  /**\n   * **Optional**: Change the file timestamps of the file.\n   * @param [Date] atime\n   * @param [Date] mtime\n   */\n  utimesSync(atime: Date, mtime: Date): void;\n}\n\n/**\n * Base class that contains shared implementations of functions for the file\n * object.\n * @class\n */\nexport class BaseFile {\n  public sync(cb: (e?: ApiError) => void): void {\n    cb(new ApiError(ErrorCode.ENOTSUP));\n  }\n  public syncSync(): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  public datasync(cb: (e?: ApiError) => void): void {\n    this.sync(cb);\n  }\n  public datasyncSync(): void {\n    return this.syncSync();\n  }\n  public chown(uid: number, gid: number, cb: (e?: ApiError) => void): void {\n    cb(new ApiError(ErrorCode.ENOTSUP));\n  }\n  public chownSync(uid: number, gid: number): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  public chmod(mode: number, cb: (e?: ApiError) => void): void {\n    cb(new ApiError(ErrorCode.ENOTSUP));\n  }\n  public chmodSync(mode: number): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  public utimes(atime: Date, mtime: Date, cb: (e?: ApiError) => void): void {\n    cb(new ApiError(ErrorCode.ENOTSUP));\n  }\n  public utimesSync(atime: Date, mtime: Date): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n}\n","import api_error = require('./api_error');\n\n/**\n * @class\n */\nexport enum ActionType {\n  // Indicates that the code should not do anything.\n  NOP = 0,\n  // Indicates that the code should throw an exception.\n  THROW_EXCEPTION = 1,\n  // Indicates that the code should truncate the file, but only if it is a file.\n  TRUNCATE_FILE = 2,\n  // Indicates that the code should create the file.\n  CREATE_FILE = 3\n}\n\n/**\n * Represents one of the following file flags. A convenience object.\n *\n * * `'r'` - Open file for reading. An exception occurs if the file does not exist.\n * * `'r+'` - Open file for reading and writing. An exception occurs if the file does not exist.\n * * `'rs'` - Open file for reading in synchronous mode. Instructs the filesystem to not cache writes.\n * * `'rs+'` - Open file for reading and writing, and opens the file in synchronous mode.\n * * `'w'` - Open file for writing. The file is created (if it does not exist) or truncated (if it exists).\n * * `'wx'` - Like 'w' but opens the file in exclusive mode.\n * * `'w+'` - Open file for reading and writing. The file is created (if it does not exist) or truncated (if it exists).\n * * `'wx+'` - Like 'w+' but opens the file in exclusive mode.\n * * `'a'` - Open file for appending. The file is created if it does not exist.\n * * `'ax'` - Like 'a' but opens the file in exclusive mode.\n * * `'a+'` - Open file for reading and appending. The file is created if it does not exist.\n * * `'ax+'` - Like 'a+' but opens the file in exclusive mode.\n *\n * Exclusive mode ensures that the file path is newly created.\n * @class\n */\nexport class FileFlag {\n  // Contains cached FileMode instances.\n  private static flagCache: { [mode: string]: FileFlag } = {};\n  // Array of valid mode strings.\n  private static validFlagStrs = ['r', 'r+', 'rs', 'rs+', 'w', 'wx', 'w+', 'wx+', 'a', 'ax', 'a+', 'ax+'];\n\n  /**\n   * Get an object representing the given file mode.\n   * @param [String] modeStr The string representing the mode\n   * @return [BrowserFS.FileMode] The FileMode object representing the mode\n   * @throw [BrowserFS.ApiError] when the mode string is invalid\n   */\n  public static getFileFlag(flagStr: string): FileFlag {\n    // Check cache first.\n    if (FileFlag.flagCache.hasOwnProperty(flagStr)) {\n      return FileFlag.flagCache[flagStr];\n    }\n    return FileFlag.flagCache[flagStr] = new FileFlag(flagStr);\n  }\n\n  private flagStr: string;\n  /**\n   * This should never be called directly.\n   * @param [String] modeStr The string representing the mode\n   * @throw [BrowserFS.ApiError] when the mode string is invalid\n   */\n  constructor(flagStr: string) {\n    this.flagStr = flagStr;\n    if (FileFlag.validFlagStrs.indexOf(flagStr) < 0) {\n      throw new api_error.ApiError(api_error.ErrorCode.EINVAL, \"Invalid flag: \" + flagStr);\n    }\n  }\n\n  /**\n   * Get the underlying flag string for this flag.\n   */\n  public getFlagString(): string {\n    return this.flagStr;\n  }\n\n  /**\n   * Returns true if the file is readable.\n   * @return [Boolean]\n   */\n  public isReadable(): boolean {\n    return this.flagStr.indexOf('r') !== -1 || this.flagStr.indexOf('+') !== -1;\n  }\n  /**\n   * Returns true if the file is writeable.\n   * @return [Boolean]\n   */\n  public isWriteable(): boolean {\n    return this.flagStr.indexOf('w') !== -1 || this.flagStr.indexOf('a') !== -1 || this.flagStr.indexOf('+') !== -1;\n  }\n  /**\n   * Returns true if the file mode should truncate.\n   * @return [Boolean]\n   */\n  public isTruncating(): boolean {\n    return this.flagStr.indexOf('w') !== -1;\n  }\n  /**\n   * Returns true if the file is appendable.\n   * @return [Boolean]\n   */\n  public isAppendable(): boolean {\n    return this.flagStr.indexOf('a') !== -1;\n  }\n  /**\n   * Returns true if the file is open in synchronous mode.\n   * @return [Boolean]\n   */\n  public isSynchronous(): boolean {\n    return this.flagStr.indexOf('s') !== -1;\n  }\n  /**\n   * Returns true if the file is open in exclusive mode.\n   * @return [Boolean]\n   */\n  public isExclusive(): boolean {\n    return this.flagStr.indexOf('x') !== -1;\n  }\n  /**\n   * Returns one of the static fields on this object that indicates the\n   * appropriate response to the path existing.\n   * @return [Number]\n   */\n  public pathExistsAction(): ActionType {\n    if (this.isExclusive()) {\n      return ActionType.THROW_EXCEPTION;\n    } else if (this.isTruncating()) {\n      return ActionType.TRUNCATE_FILE;\n    } else {\n      return ActionType.NOP;\n    }\n  }\n  /**\n   * Returns one of the static fields on this object that indicates the\n   * appropriate response to the path not existing.\n   * @return [Number]\n   */\n  public pathNotExistsAction(): ActionType {\n    if ((this.isWriteable() || this.isAppendable()) && this.flagStr !== 'r+') {\n      return ActionType.CREATE_FILE;\n    } else {\n      return ActionType.THROW_EXCEPTION;\n    }\n  }\n}\n","import {ApiError, ErrorCode} from './api_error';\nimport Stats from './node_fs_stats';\nimport file = require('./file');\nimport {FileFlag, ActionType} from './file_flag';\nimport path = require('path');\n\n/**\n * Interface for a filesystem. **All** BrowserFS FileSystems should implement\n * this interface.\n *\n * Below, we denote each API method as **Core**, **Supplemental**, or\n * **Optional**.\n *\n * ### Core Methods\n *\n * **Core** API methods *need* to be implemented for basic read/write\n * functionality.\n *\n * Note that read-only FileSystems can choose to not implement core methods\n * that mutate files or metadata. The default implementation will pass a\n * NOT_SUPPORTED error to the callback.\n *\n * ### Supplemental Methods\n *\n * **Supplemental** API methods do not need to be implemented by a filesystem.\n * The default implementation implements all of the supplemental API methods in\n * terms of the **core** API methods.\n *\n * Note that a file system may choose to implement supplemental methods for\n * efficiency reasons.\n *\n * The code for some supplemental methods was adapted directly from NodeJS's\n * fs.js source code.\n *\n * ### Optional Methods\n *\n * **Optional** API methods provide functionality that may not be available in\n * all filesystems. For example, all symlink/hardlink-related API methods fall\n * under this category.\n *\n * The default implementation will pass a NOT_SUPPORTED error to the callback.\n *\n * ### Argument Assumptions\n *\n * You can assume the following about arguments passed to each API method:\n *\n * * **Every path is an absolute path.** Meaning, `.`, `..`, and other items\n *   are resolved into an absolute form.\n * * **All arguments are present.** Any optional arguments at the Node API level\n *   have been passed in with their default values.\n * * **The callback will reset the stack depth.** When your filesystem calls the\n *   callback with the requested information, it will use `setImmediate` to\n *   reset the JavaScript stack depth before calling the user-supplied callback.\n * @class FileSystem\n */\nexport interface FileSystem {\n  /**\n   * **Optional**: Returns the name of the file system.\n   * @method FileSystem#getName\n   * @return {string}\n   */\n  getName(): string;\n  /**\n   * **Optional**: Passes the following information to the callback:\n   *\n   * * Total number of bytes available on this file system.\n   * * number of free bytes available on this file system.\n   *\n   * @method FileSystem#diskSpace\n   * @todo This info is not available through the Node API. Perhaps we could do a\n   *   polyfill of diskspace.js, or add a new Node API function.\n   * @param {string} path The path to the location that is being queried. Only\n   *   useful for filesystems that support mount points.\n   * @param {FileSystem~diskSpaceCallback} cb\n   */\n  diskSpace(p: string, cb: (total: number, free: number) => any): void;\n  /**\n   * **Core**: Is this filesystem read-only?\n   * @method FileSystem#isReadOnly\n   * @return {boolean} True if this FileSystem is inherently read-only.\n   */\n  isReadOnly(): boolean;\n  /**\n   * **Core**: Does the filesystem support optional symlink/hardlink-related\n   *   commands?\n   * @method FileSystem#supportsLinks\n   * @return {boolean} True if the FileSystem supports the optional\n   *   symlink/hardlink-related commands.\n   */\n  supportsLinks(): boolean;\n  /**\n   * **Core**: Does the filesystem support optional property-related commands?\n   * @method FileSystem#supportsProps\n   * @return {boolean} True if the FileSystem supports the optional\n   *   property-related commands (permissions, utimes, etc).\n   */\n  supportsProps(): boolean;\n  /**\n   * **Core**: Does the filesystem support the optional synchronous interface?\n   * @method FileSystem#supportsSynch\n   * @return {boolean} True if the FileSystem supports synchronous operations.\n   */\n  supportsSynch(): boolean;\n  // **CORE API METHODS**\n  // File or directory operations\n  /**\n   * **Core**: Asynchronous rename. No arguments other than a possible exception\n   * are given to the completion callback.\n   * @method FileSystem#rename\n   * @param {string} oldPath\n   * @param {string} newPath\n   * @param {FileSystem~nodeCallback} cb\n   */\n  rename(oldPath: string, newPath: string, cb: (err?: ApiError) => void): void;\n  /**\n   * **Core**: Synchronous rename.\n   * @method FileSystem#renameSync\n   * @param {string} oldPath\n   * @param {string} newPath\n   */\n  renameSync(oldPath: string, newPath: string): void;\n  /**\n   * **Core**: Asynchronous `stat` or `lstat`.\n   * @method FileSystem#stat\n   * @param {string} path\n   * @param {boolean} isLstat True if this is `lstat`, false if this is regular\n   *   `stat`.\n   * @param {FileSystem~nodeStatsCallback} cb\n   */\n  stat(p: string, isLstat: boolean, cb: (err: ApiError, stat?: Stats) => void): void;\n  /**\n   * **Core**: Synchronous `stat` or `lstat`.\n   * @method FileSystem#statSync\n   * @param {string} path\n   * @param {boolean} isLstat True if this is `lstat`, false if this is regular\n   *   `stat`.\n   * @return {BrowserFS.node.fs.Stats}\n   */\n  statSync(p: string, isLstat: boolean): Stats;\n  // File operations\n  /**\n   * **Core**: Asynchronous file open.\n   * @see http://www.manpagez.com/man/2/open/\n   * @method FileSystem#open\n   * @param {string} path\n   * @param {BrowserFS.FileMode} flags Handles the complexity of the various file\n   *   modes. See its API for more details.\n   * @param {number} mode Mode to use to open the file. Can be ignored if the\n   *   filesystem doesn't support permissions.\n   * @param {FileSystem~fileCallback} cb\n   */\n  open(p: string, flag:FileFlag, mode: number, cb: (err: ApiError, fd?: file.File) => any): void;\n  /**\n   * **Core**: Synchronous file open.\n   * @see http://www.manpagez.com/man/2/open/\n   * @method FileSystem#openSync\n   * @param {string} path\n   * @param {BrowserFS.FileMode} flags Handles the complexity of the various file\n   *   modes. See its API for more details.\n   * @param {number} mode Mode to use to open the file. Can be ignored if the\n   *   filesystem doesn't support permissions.\n   * @return {BrowserFS.File}\n   */\n  openSync(p: string, flag: FileFlag, mode: number): file.File;\n  /**\n   * **Core**: Asynchronous `unlink`.\n   * @method FileSystem#unlink\n   * @param [string] path\n   * @param [FileSystem~nodeCallback] cb\n   */\n  unlink(p: string, cb: Function): void;\n  /**\n   * **Core**: Synchronous `unlink`.\n   * @method FileSystem#unlinkSync\n   * @param {string} path\n   */\n  unlinkSync(p: string): void;\n  // Directory operations\n  /**\n   * **Core**: Asynchronous `rmdir`.\n   * @method FileSystem#rmdir\n   * @param {string} path\n   * @param {FileSystem~nodeCallback} cb\n   */\n  rmdir(p: string, cb: Function): void;\n  /**\n   * **Core**: Synchronous `rmdir`.\n   * @method FileSystem#rmdirSync\n   * @param {string} path\n   */\n  rmdirSync(p: string): void;\n  /**\n   * **Core**: Asynchronous `mkdir`.\n   * @method FileSystem#mkdir\n   * @param {string} path\n   * @param {number?} mode Mode to make the directory using. Can be ignored if\n   *   the filesystem doesn't support permissions.\n   * @param {FileSystem~nodeCallback} cb\n   */\n  mkdir(p: string, mode: number, cb: Function): void;\n  /**\n   * **Core**: Synchronous `mkdir`.\n   * @method FileSystem#mkdirSync\n   * @param {string} path\n   * @param {number} mode Mode to make the directory using. Can be ignored if\n   *   the filesystem doesn't support permissions.\n   */\n  mkdirSync(p: string, mode: number): void;\n  /**\n   * **Core**: Asynchronous `readdir`. Reads the contents of a directory.\n   *\n   * The callback gets two arguments `(err, files)` where `files` is an array of\n   * the names of the files in the directory excluding `'.'` and `'..'`.\n   * @method FileSystem#readdir\n   * @param {string} path\n   * @param {FileSystem~readdirCallback} cb\n   */\n  readdir(p: string, cb: (err: ApiError, files?: string[]) => void): void;\n  /**\n   * **Core**: Synchronous `readdir`. Reads the contents of a directory.\n   * @method FileSystem#readdirSync\n   * @param {string} path\n   * @return {string[]}\n   */\n  readdirSync(p: string): string[];\n  // **SUPPLEMENTAL INTERFACE METHODS**\n  // File or directory operations\n  /**\n   * **Supplemental**: Test whether or not the given path exists by checking with\n   * the file system. Then call the callback argument with either true or false.\n   * @method FileSystem#exists\n   * @param {string} path\n   * @param {FileSystem~existsCallback} cb\n   */\n  exists(p: string, cb: (exists: boolean) => void): void;\n  /**\n   * **Supplemental**: Test whether or not the given path exists by checking with\n   * the file system.\n   * @method FileSystem#existsSync\n   * @param {string} path\n   * @return {boolean}\n   */\n  existsSync(p: string): boolean;\n  /**\n   * **Supplemental**: Asynchronous `realpath`. The callback gets two arguments\n   * `(err, resolvedPath)`.\n   *\n   * Note that the Node API will resolve `path` to an absolute path.\n   * @method FileSystem#realpath\n   * @param {string} path\n   * @param {Object} cache An object literal of mapped paths that can be used to\n   *   force a specific path resolution or avoid additional `fs.stat` calls for\n   *   known real paths. If not supplied by the user, it'll be an empty object.\n   * @param {FileSystem~pathCallback} cb\n   */\n  realpath(p: string, cache: {[path: string]: string}, cb: (err: ApiError, resolvedPath?: string) => any): void;\n  /**\n   * **Supplemental**: Synchronous `realpath`.\n   *\n   * Note that the Node API will resolve `path` to an absolute path.\n   * @method FileSystem#realpathSync\n   * @param {string} path\n   * @param {Object} cache An object literal of mapped paths that can be used to\n   *   force a specific path resolution or avoid additional `fs.stat` calls for\n   *   known real paths. If not supplied by the user, it'll be an empty object.\n   * @return {string}\n   */\n  realpathSync(p: string, cache: {[path: string]: string}): string;\n  // File operations\n  /**\n   *\n   * **Supplemental**: Asynchronous `truncate`.\n   * @method FileSystem#truncate\n   * @param {string} path\n   * @param {number} len\n   * @param {FileSystem~nodeCallback} cb\n   */\n  truncate(p: string, len: number, cb: Function): void;\n  /**\n   * **Supplemental**: Synchronous `truncate`.\n   * @method FileSystem#truncateSync\n   * @param {string} path\n   * @param {number} len\n   */\n  truncateSync(p: string, len: number): void;\n  /**\n   * **Supplemental**: Asynchronously reads the entire contents of a file.\n   * @method FileSystem#readFile\n   * @param {string} filename\n   * @param {string} encoding If non-null, the file's contents should be decoded\n   *   into a string using that encoding. Otherwise, if encoding is null, fetch\n   *   the file's contents as a Buffer.\n   * @param {BrowserFS.FileMode} flag\n   * @param {FileSystem~readCallback} cb If no encoding is specified, then the\n   *   raw buffer is returned.\n   */\n  readFile(fname: string, encoding: string, flag: FileFlag, cb: (err: ApiError, data?: any) => void): void;\n  /**\n   * **Supplemental**: Synchronously reads the entire contents of a file.\n   * @method FileSystem#readFileSync\n   * @param {string} filename\n   * @param {string} encoding If non-null, the file's contents should be decoded\n   *   into a string using that encoding. Otherwise, if encoding is null, fetch\n   *   the file's contents as a Buffer.\n   * @param {BrowserFS.FileMode} flag\n   * @return {(string|BrowserFS.Buffer)}\n   */\n  readFileSync(fname: string, encoding: string, flag: FileFlag): any;\n  /**\n   * **Supplemental**: Asynchronously writes data to a file, replacing the file\n   * if it already exists.\n   *\n   * The encoding option is ignored if data is a buffer.\n   * @method FileSystem#writeFile\n   * @param {string} filename\n   * @param {(string | BrowserFS.node.Buffer)} data\n   * @param {string} encoding\n   * @param {BrowserFS.FileMode} flag\n   * @param {number} mode\n   * @param {FileSystem~nodeCallback} cb\n   */\n  writeFile(fname: string, data: any, encoding: string, flag: FileFlag, mode: number, cb: (err: ApiError) => void): void;\n  /**\n   * **Supplemental**: Synchronously writes data to a file, replacing the file\n   * if it already exists.\n   *\n   * The encoding option is ignored if data is a buffer.\n   * @method FileSystem#writeFileSync\n   * @param {string} filename\n   * @param {(string | BrowserFS.node.Buffer)} data\n   * @param {string} encoding\n   * @param {BrowserFS.FileMode} flag\n   * @param {number} mode\n   */\n  writeFileSync(fname: string, data: any, encoding: string, flag: FileFlag, mode: number): void;\n  /**\n   * **Supplemental**: Asynchronously append data to a file, creating the file if\n   * it not yet exists.\n   * @method FileSystem#appendFile\n   * @param {string} filename\n   * @param {(string | BrowserFS.node.Buffer)} data\n   * @param {string} encoding\n   * @param {BrowserFS.FileMode} flag\n   * @param {number} mode\n   * @param {FileSystem~nodeCallback} cb\n   */\n  appendFile(fname: string, data: any, encoding: string, flag: FileFlag, mode: number, cb: (err: ApiError) => void): void;\n  /**\n   * **Supplemental**: Synchronously append data to a file, creating the file if\n   * it not yet exists.\n   * @method FileSystem#appendFileSync\n   * @param {string} filename\n   * @param {(string | BrowserFS.node.Buffer)} data\n   * @param {string} encoding\n   * @param {BrowserFS.FileMode} flag\n   * @param {number} mode\n   */\n  appendFileSync(fname: string, data: any, encoding: string, flag: FileFlag, mode: number): void;\n  // **OPTIONAL INTERFACE METHODS**\n  // Property operations\n  // This isn't always possible on some filesystem types (e.g. Dropbox).\n  /**\n   * **Optional**: Asynchronous `chmod` or `lchmod`.\n   * @method FileSystem#chmod\n   * @param {string} path\n   * @param {boolean} isLchmod `True` if `lchmod`, false if `chmod`. Has no\n   *   bearing on result if links aren't supported.\n   * @param {number} mode\n   * @param {FileSystem~nodeCallback} cb\n   */\n  chmod(p: string, isLchmod: boolean, mode: number, cb: Function): void;\n  /**\n   * **Optional**: Synchronous `chmod` or `lchmod`.\n   * @method FileSystem#chmodSync\n   * @param {string} path\n   * @param {boolean} isLchmod `True` if `lchmod`, false if `chmod`. Has no\n   *   bearing on result if links aren't supported.\n   * @param {number} mode\n   */\n  chmodSync(p: string, isLchmod: boolean, mode: number): void;\n  /**\n   * **Optional**: Asynchronous `chown` or `lchown`.\n   * @method FileSystem#chown\n   * @param {string} path\n   * @param {boolean} isLchown `True` if `lchown`, false if `chown`. Has no\n   *   bearing on result if links aren't supported.\n   * @param {number} uid\n   * @param {number} gid\n   * @param {FileSystem~nodeCallback} cb\n   */\n  chown(p: string, isLchown: boolean, uid: number, gid: number, cb: Function): void;\n  /**\n   * **Optional**: Synchronous `chown` or `lchown`.\n   * @method FileSystem#chownSync\n   * @param {string} path\n   * @param {boolean} isLchown `True` if `lchown`, false if `chown`. Has no\n   *   bearing on result if links aren't supported.\n   * @param {number} uid\n   * @param {number} gid\n   */\n  chownSync(p: string, isLchown: boolean, uid: number, gid: number): void;\n  /**\n   * **Optional**: Change file timestamps of the file referenced by the supplied\n   * path.\n   * @method FileSystem#utimes\n   * @param {string} path\n   * @param {Date} atime\n   * @param {Date} mtime\n   * @param {FileSystem~nodeCallback} cb\n   */\n  utimes(p: string, atime: Date, mtime: Date, cb: Function): void;\n  /**\n   * **Optional**: Change file timestamps of the file referenced by the supplied\n   * path.\n   * @method FileSystem#utimesSync\n   * @param {string} path\n   * @param {Date} atime\n   * @param {Date} mtime\n   */\n  utimesSync(p: string, atime: Date, mtime: Date): void;\n  // Symlink operations\n  // Symlinks aren't always supported.\n  /**\n   * **Optional**: Asynchronous `link`.\n   * @method FileSystem#link\n   * @param {string} srcpath\n   * @param {string} dstpath\n   * @param {FileSystem~nodeCallback} cb\n   */\n  link(srcpath: string, dstpath: string, cb: Function): void;\n  /**\n   * **Optional**: Synchronous `link`.\n   * @method FileSystem#linkSync\n   * @param {string} srcpath\n   * @param {string} dstpath\n   */\n  linkSync(srcpath: string, dstpath: string): void;\n  /**\n   * **Optional**: Asynchronous `symlink`.\n   * @method FileSystem#symlink\n   * @param {string} srcpath\n   * @param {string} dstpath\n   * @param {string} type can be either `'dir'` or `'file'`\n   * @param {FileSystem~nodeCallback} cb\n   */\n  symlink(srcpath: string, dstpath: string, type: string, cb: Function): void;\n  /**\n   * **Optional**: Synchronous `symlink`.\n   * @method FileSystem#symlinkSync\n   * @param {string} srcpath\n   * @param {string} dstpath\n   * @param {string} type can be either `'dir'` or `'file'`\n   */\n  symlinkSync(srcpath: string, dstpath: string, type: string): void;\n  /**\n   * **Optional**: Asynchronous readlink.\n   * @method FileSystem#readlink\n   * @param {string} path\n   * @param {FileSystem~pathCallback} callback\n   */\n  readlink(p: string, cb: Function): void;\n  /**\n   * **Optional**: Synchronous readlink.\n   * @method FileSystem#readlinkSync\n   * @param {string} path\n   */\n  readlinkSync(p: string): string;\n}\n\n/**\n * Contains typings for static functions on the file system constructor.\n */\nexport interface FileSystemConstructor {\n  /**\n   * **Core**: Returns 'true' if this filesystem is available in the current\n   * environment. For example, a `localStorage`-backed filesystem will return\n   * 'false' if the browser does not support that API.\n   *\n   * Defaults to 'false', as the FileSystem base class isn't usable alone.\n   * @method FileSystem.isAvailable\n   * @return {boolean}\n   */\n  isAvailable(): boolean;\n}\n\n/**\n * Basic filesystem class. Most filesystems should extend this class, as it\n * provides default implementations for a handful of methods.\n */\nexport class BaseFileSystem {\n  public supportsLinks(): boolean {\n    return false;\n  }\n  public diskSpace(p: string, cb: (total: number, free: number) => any): void {\n    cb(0, 0);\n  }\n  /**\n   * Opens the file at path p with the given flag. The file must exist.\n   * @param p The path to open.\n   * @param flag The flag to use when opening the file.\n   */\n  public openFile(p: string, flag: FileFlag, cb: (e: ApiError, file?: file.File) => void): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  /**\n   * Create the file at path p with the given mode. Then, open it with the given\n   * flag.\n   */\n  public createFile(p: string, flag: FileFlag, mode: number, cb: (e: ApiError, file?: file.File) => void): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  public open(p: string, flag:FileFlag, mode: number, cb: (err: ApiError, fd?: file.BaseFile) => any): void {\n    var must_be_file = (e: ApiError, stats?: Stats): void => {\n      if (e) {\n        // File does not exist.\n        switch (flag.pathNotExistsAction()) {\n          case ActionType.CREATE_FILE:\n            // Ensure parent exists.\n            return this.stat(path.dirname(p), false, (e: ApiError, parentStats?: Stats) => {\n              if (e) {\n                cb(e);\n              } else if (!parentStats.isDirectory()) {\n                cb(ApiError.ENOTDIR(path.dirname(p)));\n              } else {\n                this.createFile(p, flag, mode, cb);\n              }\n            });\n          case ActionType.THROW_EXCEPTION:\n            return cb(ApiError.ENOENT(p));\n          default:\n            return cb(new ApiError(ErrorCode.EINVAL, 'Invalid FileFlag object.'));\n        }\n      } else {\n        // File exists.\n        if (stats.isDirectory()) {\n          return cb(ApiError.EISDIR(p));\n        }\n        switch (flag.pathExistsAction()) {\n          case ActionType.THROW_EXCEPTION:\n            return cb(ApiError.EEXIST(p));\n          case ActionType.TRUNCATE_FILE:\n            // NOTE: In a previous implementation, we deleted the file and\n            // re-created it. However, this created a race condition if another\n            // asynchronous request was trying to read the file, as the file\n            // would not exist for a small period of time.\n            return this.openFile(p, flag, (e: ApiError, fd?: file.File): void => {\n              if (e) {\n                cb(e);\n              } else {\n                fd.truncate(0, () => {\n                  fd.sync(() => {\n                    cb(null, fd);\n                  });\n                });\n              }\n            });\n          case ActionType.NOP:\n            return this.openFile(p, flag, cb);\n          default:\n            return cb(new ApiError(ErrorCode.EINVAL, 'Invalid FileFlag object.'));\n        }\n      }\n    };\n    this.stat(p, false, must_be_file);\n  }\n  public rename(oldPath: string, newPath: string, cb: (err?: ApiError) => void): void {\n    cb(new ApiError(ErrorCode.ENOTSUP));\n  }\n  public renameSync(oldPath: string, newPath: string): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  public stat(p: string, isLstat: boolean, cb: (err: ApiError, stat?: Stats) => void): void {\n    cb(new ApiError(ErrorCode.ENOTSUP));\n  }\n  public statSync(p: string, isLstat: boolean): Stats {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  /**\n   * Opens the file at path p with the given flag. The file must exist.\n   * @param p The path to open.\n   * @param flag The flag to use when opening the file.\n   * @return A File object corresponding to the opened file.\n   */\n  public openFileSync(p: string, flag: FileFlag): file.File {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  /**\n   * Create the file at path p with the given mode. Then, open it with the given\n   * flag.\n   */\n  public createFileSync(p: string, flag: FileFlag, mode: number): file.File {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  public openSync(p: string, flag: FileFlag, mode: number): file.File {\n    // Check if the path exists, and is a file.\n    var stats: Stats;\n    try {\n      stats = this.statSync(p, false);\n    } catch (e) {\n      // File does not exist.\n      switch (flag.pathNotExistsAction()) {\n        case ActionType.CREATE_FILE:\n          // Ensure parent exists.\n          var parentStats = this.statSync(path.dirname(p), false);\n          if (!parentStats.isDirectory()) {\n            throw ApiError.ENOTDIR(path.dirname(p));\n          }\n          return this.createFileSync(p, flag, mode);\n        case ActionType.THROW_EXCEPTION:\n          throw ApiError.ENOENT(p);\n        default:\n          throw new ApiError(ErrorCode.EINVAL, 'Invalid FileFlag object.');\n      }\n    }\n\n    // File exists.\n    if (stats.isDirectory()) {\n      throw ApiError.EISDIR(p);\n    }\n    switch (flag.pathExistsAction()) {\n      case ActionType.THROW_EXCEPTION:\n        throw ApiError.EEXIST(p);\n      case ActionType.TRUNCATE_FILE:\n        // Delete file.\n        this.unlinkSync(p);\n        // Create file. Use the same mode as the old file.\n        // Node itself modifies the ctime when this occurs, so this action\n        // will preserve that behavior if the underlying file system\n        // supports those properties.\n        return this.createFileSync(p, flag, stats.mode);\n      case ActionType.NOP:\n        return this.openFileSync(p, flag);\n      default:\n        throw new ApiError(ErrorCode.EINVAL, 'Invalid FileFlag object.');\n    }\n  }\n  public unlink(p: string, cb: Function): void {\n    cb(new ApiError(ErrorCode.ENOTSUP));\n  }\n  public unlinkSync(p: string): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  public rmdir(p: string, cb: Function): void {\n    cb(new ApiError(ErrorCode.ENOTSUP));\n  }\n  public rmdirSync(p: string): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  public mkdir(p: string, mode: number, cb: Function): void {\n    cb(new ApiError(ErrorCode.ENOTSUP));\n  }\n  public mkdirSync(p: string, mode: number): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  public readdir(p: string, cb: (err: ApiError, files?: string[]) => void): void {\n    cb(new ApiError(ErrorCode.ENOTSUP));\n  }\n  public readdirSync(p: string): string[] {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  public exists(p: string, cb: (exists: boolean) => void): void {\n    this.stat(p, null, function(err) {\n      cb(err == null);\n    });\n  }\n  public existsSync(p: string): boolean {\n    try {\n      this.statSync(p, true);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n  public realpath(p: string, cache: {[path: string]: string}, cb: (err: ApiError, resolvedPath?: string) => any): void {\n    if (this.supportsLinks()) {\n      // The path could contain symlinks. Split up the path,\n      // resolve any symlinks, return the resolved string.\n      var splitPath = p.split(path.sep);\n      // TODO: Simpler to just pass through file, find sep and such.\n      for (var i = 0; i < splitPath.length; i++) {\n        var addPaths = splitPath.slice(0, i + 1);\n        splitPath[i] = path.join.apply(null, addPaths);\n      }\n    } else {\n      // No symlinks. We just need to verify that it exists.\n      this.exists(p, function(doesExist) {\n        if (doesExist) {\n          cb(null, p);\n        } else {\n          cb(ApiError.ENOENT(p));\n        }\n      });\n    }\n  }\n  public realpathSync(p: string, cache: {[path: string]: string}): string {\n    if (this.supportsLinks()) {\n      // The path could contain symlinks. Split up the path,\n      // resolve any symlinks, return the resolved string.\n      var splitPath = p.split(path.sep);\n      // TODO: Simpler to just pass through file, find sep and such.\n      for (var i = 0; i < splitPath.length; i++) {\n        var addPaths = splitPath.slice(0, i + 1);\n        splitPath[i] = path.join.apply(null, addPaths);\n      }\n    } else {\n      // No symlinks. We just need to verify that it exists.\n      if (this.existsSync(p)) {\n        return p;\n      } else {\n        throw ApiError.ENOENT(p);\n      }\n    }\n  }\n  public truncate(p: string, len: number, cb: Function): void {\n    this.open(p, FileFlag.getFileFlag('r+'), 0x1a4, (function(er: ApiError, fd?: file.File) {\n      if (er) {\n        return cb(er);\n      }\n      fd.truncate(len, (function(er: any) {\n        fd.close((function(er2: any) {\n          cb(er || er2);\n        }));\n      }));\n    }));\n  }\n  public truncateSync(p: string, len: number): void {\n    var fd = this.openSync(p, FileFlag.getFileFlag('r+'), 0x1a4);\n    // Need to safely close FD, regardless of whether or not truncate succeeds.\n    try {\n      fd.truncateSync(len);\n    } catch (e) {\n      throw e;\n    } finally {\n      fd.closeSync();\n    }\n  }\n  public readFile(fname: string, encoding: string, flag: FileFlag, cb: (err: ApiError, data?: any) => void): void {\n    // Wrap cb in file closing code.\n    var oldCb = cb;\n    // Get file.\n    this.open(fname, flag, 0x1a4, function(err: ApiError, fd?: file.File) {\n      if (err) {\n        return cb(err);\n      }\n      cb = function(err: ApiError, arg?: file.File) {\n        fd.close(function(err2: any) {\n          if (err == null) {\n            err = err2;\n          }\n          return oldCb(err, arg);\n        });\n      };\n      fd.stat(function(err: ApiError, stat?: Stats) {\n        if (err != null) {\n          return cb(err);\n        }\n        // Allocate buffer.\n        var buf = new Buffer(stat.size);\n        fd.read(buf, 0, stat.size, 0, function(err) {\n          if (err != null) {\n            return cb(err);\n          } else if (encoding === null) {\n            return cb(err, buf);\n          }\n          try {\n            cb(null, buf.toString(encoding));\n          } catch (e) {\n            cb(e);\n          }\n        });\n      });\n    });\n  }\n  public readFileSync(fname: string, encoding: string, flag: FileFlag): any {\n    // Get file.\n    var fd = this.openSync(fname, flag, 0x1a4);\n    try {\n      var stat = fd.statSync();\n      // Allocate buffer.\n      var buf = new Buffer(stat.size);\n      fd.readSync(buf, 0, stat.size, 0);\n      fd.closeSync();\n      if (encoding === null) {\n        return buf;\n      }\n      return buf.toString(encoding);\n    } finally {\n      fd.closeSync();\n    }\n  }\n  public writeFile(fname: string, data: any, encoding: string, flag: FileFlag, mode: number, cb: (err: ApiError) => void): void {\n    // Wrap cb in file closing code.\n    var oldCb = cb;\n    // Get file.\n    this.open(fname, flag, 0x1a4, function(err: ApiError, fd?:file.File) {\n      if (err != null) {\n        return cb(err);\n      }\n      cb = function(err: ApiError) {\n        fd.close(function(err2: any) {\n          oldCb(err != null ? err : err2);\n        });\n      };\n\n      try {\n        if (typeof data === 'string') {\n          data = new Buffer(data, encoding);\n        }\n      } catch (e) {\n        return cb(e);\n      }\n      // Write into file.\n      fd.write(data, 0, data.length, 0, cb);\n    });\n  }\n  public writeFileSync(fname: string, data: any, encoding: string, flag: FileFlag, mode: number): void {\n    // Get file.\n    var fd = this.openSync(fname, flag, mode);\n    try {\n      if (typeof data === 'string') {\n        data = new Buffer(data, encoding);\n      }\n      // Write into file.\n      fd.writeSync(data, 0, data.length, 0);\n    } finally {\n      fd.closeSync();\n    }\n  }\n  public appendFile(fname: string, data: any, encoding: string, flag: FileFlag, mode: number, cb: (err: ApiError) => void): void {\n    // Wrap cb in file closing code.\n    var oldCb = cb;\n    this.open(fname, flag, mode, function(err: ApiError, fd?: file.File) {\n      if (err != null) {\n        return cb(err);\n      }\n      cb = function(err: ApiError) {\n        fd.close(function(err2: any) {\n          oldCb(err != null ? err : err2);\n        });\n      };\n      if (typeof data === 'string') {\n        data = new Buffer(data, encoding);\n      }\n      fd.write(data, 0, data.length, null, cb);\n    });\n  }\n  public appendFileSync(fname: string, data: any, encoding: string, flag: FileFlag, mode: number): void {\n    var fd = this.openSync(fname, flag, mode);\n    try {\n      if (typeof data === 'string') {\n        data = new Buffer(data, encoding);\n      }\n      fd.writeSync(data, 0, data.length, null);\n    } finally {\n      fd.closeSync();\n    }\n  }\n  public chmod(p: string, isLchmod: boolean, mode: number, cb: Function): void {\n    cb(new ApiError(ErrorCode.ENOTSUP));\n  }\n  public chmodSync(p: string, isLchmod: boolean, mode: number) {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  public chown(p: string, isLchown: boolean, uid: number, gid: number, cb: Function): void {\n    cb(new ApiError(ErrorCode.ENOTSUP));\n  }\n  public chownSync(p: string, isLchown: boolean, uid: number, gid: number): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  public utimes(p: string, atime: Date, mtime: Date, cb: Function): void {\n    cb(new ApiError(ErrorCode.ENOTSUP));\n  }\n  public utimesSync(p: string, atime: Date, mtime: Date): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  public link(srcpath: string, dstpath: string, cb: Function): void {\n    cb(new ApiError(ErrorCode.ENOTSUP));\n  }\n  public linkSync(srcpath: string, dstpath: string): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  public symlink(srcpath: string, dstpath: string, type: string, cb: Function): void {\n    cb(new ApiError(ErrorCode.ENOTSUP));\n  }\n  public symlinkSync(srcpath: string, dstpath: string, type: string): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n  public readlink(p: string, cb: Function): void {\n    cb(new ApiError(ErrorCode.ENOTSUP));\n  }\n  public readlinkSync(p: string): string {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n}\n\n/**\n * Implements the asynchronous API in terms of the synchronous API.\n * @class SynchronousFileSystem\n */\nexport class SynchronousFileSystem extends BaseFileSystem {\n  public supportsSynch(): boolean {\n    return true;\n  }\n\n  public rename(oldPath: string, newPath: string, cb: Function): void {\n    try {\n      this.renameSync(oldPath, newPath);\n      cb();\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  public stat(p: string, isLstat: boolean, cb: Function): void {\n    try {\n      cb(null, this.statSync(p, isLstat));\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  public open(p: string, flags: FileFlag, mode: number, cb: Function): void {\n    try {\n      cb(null, this.openSync(p, flags, mode));\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  public unlink(p: string, cb: Function): void {\n    try {\n      this.unlinkSync(p);\n      cb();\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  public rmdir(p: string, cb: Function): void {\n    try {\n      this.rmdirSync(p);\n      cb();\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  public mkdir(p: string, mode: number, cb: Function): void {\n    try {\n      this.mkdirSync(p, mode);\n      cb();\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  public readdir(p: string, cb: Function): void {\n    try {\n      cb(null, this.readdirSync(p));\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  public chmod(p: string, isLchmod: boolean, mode: number, cb: Function): void {\n    try {\n      this.chmodSync(p, isLchmod, mode);\n      cb();\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  public chown(p: string, isLchown: boolean, uid: number, gid: number, cb: Function): void {\n    try {\n      this.chownSync(p, isLchown, uid, gid);\n      cb();\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  public utimes(p: string, atime: Date, mtime: Date, cb: Function): void {\n    try {\n      this.utimesSync(p, atime, mtime);\n      cb();\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  public link(srcpath: string, dstpath: string, cb: Function): void {\n    try {\n      this.linkSync(srcpath, dstpath);\n      cb();\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  public symlink(srcpath: string, dstpath: string, type: string, cb: Function): void {\n    try {\n      this.symlinkSync(srcpath, dstpath, type);\n      cb();\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  public readlink(p: string, cb: Function): void {\n    try {\n      cb(null, this.readlinkSync(p));\n    } catch (e) {\n      cb(e);\n    }\n  }\n}\n","/**\n * Exports the global scope variable.\n * In the main browser thread, this is \"window\".\n * In a WebWorker, this is \"self\".\n * In Node, this is \"global\".\n */\ndeclare var global: any;\nvar toExport: any;\nif (typeof(window) !== 'undefined') {\n  toExport = window;\n} else if (typeof(self) !== 'undefined') {\n  toExport = self;\n} else {\n  toExport = global;\n}\nexport = toExport;","import {default as FS, FSModule} from './FS';\nimport {FileSystem} from './file_system';\nimport {ApiError} from './api_error';\nimport Stats from './node_fs_stats';\n\n// Manually export the individual public functions of fs.\n// Required because some code will invoke functions off of the module.\n// e.g.:\n// let writeFile = fs.writeFile;\n// writeFile(...)\n\nlet fs = new FS();\nlet _fsMock: FSModule = <any> {};\n\nlet FSProto = FS.prototype;\nObject.keys(FSProto).forEach((key) => {\n  if (typeof fs[key] === 'function') {\n    _fsMock[key] = function() {\n      return (<Function> fs[key]).apply(fs, arguments);\n    };\n  } else {\n    _fsMock[key] = fs[key];\n  }\n});\n\n_fsMock['changeFSModule'] = function(newFs: FS): void {\n  fs = newFs;\n}\n_fsMock['getFSModule'] = function(): FS {\n  return fs;\n}\n_fsMock['_wrapCb'] = function(cb: Function, numArgs: number): Function {\n  return fs._wrapCb(cb, numArgs);\n};\n_fsMock['FS'] = FS;\n\nexport = _fsMock;\n","import fs = require('fs');\nimport file = require('./file');\n\n/**\n * Indicates the type of the given file. Applied to 'mode'.\n */\nexport enum FileType {\n  FILE = 0x8000,\n  DIRECTORY = 0x4000,\n  SYMLINK = 0xA000\n}\n\n/**\n * Emulation of Node's `fs.Stats` object.\n *\n * Attribute descriptions are from `man 2 stat'\n * @see http://nodejs.org/api/fs.html#fs_class_fs_stats\n * @see http://man7.org/linux/man-pages/man2/stat.2.html\n * @class\n */\nexport default class Stats implements fs.Stats {\n  public blocks: number;\n  /**\n   * UNSUPPORTED ATTRIBUTES\n   * I assume no one is going to need these details, although we could fake\n   * appropriate values if need be.\n   */\n  // ID of device containing file\n  public dev: number = 0;\n  // inode number\n  public ino: number = 0;\n  // device ID (if special file)\n  public rdev: number = 0;\n  // number of hard links\n  public nlink: number = 1;\n  // blocksize for file system I/O\n  public blksize: number = 4096;\n  // @todo Maybe support these? atm, it's a one-user filesystem.\n  // user ID of owner\n  public uid: number = 0;\n  // group ID of owner\n  public gid: number = 0;\n  // time file was created (currently unsupported)\n  public birthtime: Date = new Date(0);\n  // XXX: Some file systems stash data on stats objects.\n  public file_data: NodeBuffer = null;\n\n  /**\n   * Provides information about a particular entry in the file system.\n   * @param [Number] item_type type of the item (FILE, DIRECTORY, SYMLINK, or SOCKET)\n   * @param [Number] size Size of the item in bytes. For directories/symlinks,\n   *   this is normally the size of the struct that represents the item.\n   * @param [Number] mode Unix-style file mode (e.g. 0o644)\n   * @param [Date?] atime time of last access\n   * @param [Date?] mtime time of last modification\n   * @param [Date?] ctime time of creation\n   */\n  constructor(\n    item_type: FileType,\n    public size: number,\n    public mode?: number,\n    public atime: Date = new Date(),\n    public mtime: Date = new Date(),\n    public ctime: Date = new Date()) {\n    if (this.mode == null) {\n      switch(item_type) {\n        case FileType.FILE:\n          this.mode = 0x1a4;\n          break;\n        case FileType.DIRECTORY:\n        default:\n          this.mode = 0x1ff;\n      }\n    }\n    // number of 512B blocks allocated\n    this.blocks = Math.ceil(size / 512);\n    // Check if mode also includes top-most bits, which indicate the file's\n    // type.\n    if (this.mode < 0x1000) {\n      this.mode |= item_type;\n    }\n  }\n\n  public toBuffer(): Buffer {\n    var buffer = new Buffer(32);\n    buffer.writeUInt32LE(this.size, 0);\n    buffer.writeUInt32LE(this.mode, 4);\n    buffer.writeDoubleLE(this.atime.getTime(), 8);\n    buffer.writeDoubleLE(this.mtime.getTime(), 16);\n    buffer.writeDoubleLE(this.ctime.getTime(), 24);\n    return buffer;\n  }\n\n  public static fromBuffer(buffer: Buffer): Stats {\n    var size = buffer.readUInt32LE(0),\n      mode = buffer.readUInt32LE(4),\n      atime = buffer.readDoubleLE(8),\n      mtime = buffer.readDoubleLE(16),\n      ctime = buffer.readDoubleLE(24);\n\n    return new Stats(mode & 0xF000, size, mode & 0xFFF, new Date(atime), new Date(mtime), new Date(ctime));\n  }\n\n  /**\n   * **Nonstandard**: Clone the stats object.\n   * @return [BrowserFS.node.fs.Stats]\n   */\n  public clone(): Stats {\n    return new Stats(this.mode & 0xF000, this.size, this.mode & 0xFFF, this.atime, this.mtime, this.ctime);\n  }\n\n  /**\n   * @return [Boolean] True if this item is a file.\n   */\n  public isFile(): boolean {\n    return (this.mode & 0xF000) === FileType.FILE;\n  }\n\n  /**\n   * @return [Boolean] True if this item is a directory.\n   */\n  public isDirectory(): boolean {\n    return (this.mode & 0xF000) === FileType.DIRECTORY;\n  }\n\n  /**\n   * @return [Boolean] True if this item is a symbolic link (only valid through lstat)\n   */\n  public isSymbolicLink(): boolean {\n    return (this.mode & 0xF000) === FileType.SYMLINK;\n  }\n\n  /**\n   * Change the mode of the file. We use this helper function to prevent messing\n   * up the type of the file, which is encoded in mode.\n   */\n  public chmod(mode: number): void {\n    this.mode = (this.mode & 0xF000) | mode;\n  }\n\n  // We don't support the following types of files.\n\n  public isSocket(): boolean {\n    return false;\n  }\n\n  public isBlockDevice(): boolean {\n    return false;\n  }\n\n  public isCharacterDevice(): boolean {\n    return false;\n  }\n\n  public isFIFO(): boolean {\n    return false;\n  }\n}\n","/**\n * Grab bag of utility functions used across the code.\n */\nimport {FileSystem} from './file_system';\nimport path = require('path');\n\nconst SUPPORTS_TYPED_ARRAYS = typeof(ArrayBuffer) !== 'undefined';\n\n/**\n * Checks for any IE version, including IE11 which removed MSIE from the\n * userAgent string.\n */\nexport var isIE: boolean = typeof navigator !== \"undefined\" && (/(msie) ([\\w.]+)/.exec(navigator.userAgent.toLowerCase()) != null || navigator.userAgent.indexOf('Trident') !== -1);\n\n/**\n * Check if we're in a web worker.\n */\nexport var isWebWorker: boolean = typeof window === \"undefined\";\n\nexport interface Arrayish<T> {\n  [idx: number]: T;\n  length: number;\n}\n\n/**\n * Synchronous recursive makedir.\n */\nexport function mkdirpSync(p: string, mode: number, fs: FileSystem): void {\n  if (!fs.existsSync(p)) {\n    mkdirpSync(path.dirname(p), mode, fs);\n    fs.mkdirSync(p, mode);\n  }\n}\n\n/**\n * Converts a buffer into an array buffer. Attempts to do so in a\n * zero-copy manner, e.g. the array references the same memory.\n */\nexport function buffer2ArrayBuffer(buff: Buffer): ArrayBuffer {\n  var u8 = buffer2Uint8array(buff),\n    u8offset = u8.byteOffset,\n    u8Len = u8.byteLength;\n  if (u8offset === 0 && u8Len === u8.buffer.byteLength) {\n    return u8.buffer;\n  } else {\n    return u8.buffer.slice(u8offset, u8offset + u8Len)\n  }\n}\n\n/**\n * Converts a buffer into a Uint8Array. Attempts to do so in a\n * zero-copy manner, e.g. the array references the same memory.\n */\nexport function buffer2Uint8array(buff: Buffer): Uint8Array {\n  if (buff['toUint8Array']) {\n    return (<any> buff).toUint8Array();\n  } else if (buff instanceof Uint8Array) {\n    // Node v4.0 buffers *are* Uint8Arrays.\n    return <any> buff;\n  } else {\n    // Uint8Arrays can be constructed from arrayish numbers.\n    // At this point, we assume this isn't a BFS array.\n    return new Uint8Array(buff);\n  }\n}\n\n/**\n * Converts the given buffer into a Uint8 arrayish form. Attempts\n * to be zero-copy.\n *\n * Required for BrowserFS buffers, which do not support indexing.\n */\nexport function buffer2Arrayish(buff: Buffer): Arrayish<number> {\n  if (typeof(buff[0]) === 'number') {\n    return buff;\n  } else if (SUPPORTS_TYPED_ARRAYS) {\n    return buffer2Uint8array(buff);\n  } else {\n    return buff.toJSON().data;\n  }\n}\n\n/**\n * Converts the given arrayish object into a Buffer. Attempts to\n * be zero-copy.\n */\nexport function arrayish2Buffer(arr: Arrayish<number>): Buffer {\n  if (SUPPORTS_TYPED_ARRAYS && arr instanceof Uint8Array) {\n    return uint8Array2Buffer(arr);\n  } else if (arr instanceof Buffer) {\n    return arr;\n  } else {\n    return new Buffer(<number[]> arr);\n  }\n}\n\n/**\n * Converts the given Uint8Array into a Buffer. Attempts to be zero-copy.\n */\nexport function uint8Array2Buffer(u8: Uint8Array): Buffer {\n  if (u8.byteOffset === 0 && u8.byteLength === u8.buffer.byteLength) {\n    return arrayBuffer2Buffer(u8);\n  } else {\n    return new Buffer(u8);\n  }\n}\n\n/**\n * Converts the given array buffer into a Buffer. Attempts to be\n * zero-copy.\n */\nexport function arrayBuffer2Buffer(ab: ArrayBuffer): Buffer {\n  try {\n    // Works in BFS and Node v4.2.\n    return new Buffer(<any> ab);\n  } catch (e) {\n    // I believe this copies, but there's no avoiding it in Node < v4.2\n    return new Buffer(new Uint8Array(ab));\n  }\n}\n\n// Polyfill for Uint8Array.prototype.slice.\n// Safari and some other browsers do not define it.\nif (typeof(ArrayBuffer) !== 'undefined' && typeof(Uint8Array) !== 'undefined') {\n  if (!Uint8Array.prototype['slice']) {\n    Uint8Array.prototype.slice = function(start: number = 0, end: number = this.length): Uint8Array {\n      let self: Uint8Array = this;\n      if (start < 0) {\n        start = this.length + start;\n        if (start < 0) {\n          start = 0;\n        }\n      }\n      if (end < 0) {\n        end = this.length + end;\n        if (end < 0) {\n          end = 0;\n        }\n      }\n      if (end < start) {\n        end = start;\n      }\n      return new Uint8Array(self.buffer, self.byteOffset + start, end - start);\n    };\n  }\n}\n\n/**\n * Copies a slice of the given buffer\n */\nexport function copyingSlice(buff: Buffer, start: number = 0, end = buff.length): Buffer {\n  if (start < 0 || end < 0 || end > buff.length || start > end) {\n    throw new TypeError(`Invalid slice bounds on buffer of length ${buff.length}: [${start}, ${end}]`);\n  }\n  if (buff.length === 0) {\n    // Avoid s0 corner case in ArrayBuffer case.\n    return new Buffer(0);\n  } else if (SUPPORTS_TYPED_ARRAYS) {\n    var u8 = buffer2Uint8array(buff),\n      s0 = buff.readUInt8(0),\n      newS0 = (s0 + 1) % 0xFF;\n\n    buff.writeUInt8(newS0, 0);\n    if (u8[0] === newS0) {\n      // Same memory. Revert & copy.\n      u8[0] = s0;\n      return uint8Array2Buffer(u8.slice(start, end));\n    } else {\n      // Revert.\n      buff.writeUInt8(s0, 0);\n      return uint8Array2Buffer(u8.subarray(start, end));\n    }\n  } else {\n    var buffSlice = new Buffer(end - start);\n    buff.copy(buffSlice, 0, start, end);\n    return buffSlice;\n  }\n}\n","/**\n * Defines an Emscripten file system object for use in the Emscripten virtual\n * filesystem. Allows you to use synchronous BrowserFS file systems from within\n * Emscripten.\n *\n * You can construct a BFSEmscriptenFS, mount it using its mount command,\n * and then mount it into Emscripten.\n *\n * Adapted from Emscripten's NodeFS:\n * https://raw.github.com/kripken/emscripten/master/src/library_nodefs.js\n */\nimport BrowserFS = require('../core/browserfs');\nimport FS from '../core/FS';\nimport fs = require('../core/node_fs');\nimport NodeStats from '../core/node_fs_stats';\nimport {uint8Array2Buffer} from '../core/util';\n\nexport interface Stats {\n  dev: number;\n  ino: number;\n  mode: number;\n  nlink: number;\n  uid: number;\n  gid: number;\n  rdev: number;\n  size: number;\n  blksize: number;\n  blocks: number;\n  atime: Date;\n  mtime: Date;\n  ctime: Date;\n  timestamp?: number;\n}\n\nexport interface EmscriptenFSNode {\n  name: string;\n  mode: number;\n  parent: EmscriptenFSNode;\n  mount: {opts: {root: string}};\n  stream_ops: EmscriptenStreamOps;\n  node_ops: EmscriptenNodeOps;\n}\n\nexport interface EmscriptenStream {\n  node: EmscriptenFSNode;\n  nfd: any;\n  flags: string;\n  position: number;\n}\n\nexport interface EmscriptenNodeOps {\n  getattr(node: EmscriptenFSNode): Stats;\n  setattr(node: EmscriptenFSNode, attr: Stats): void;\n  lookup(parent: EmscriptenFSNode, name: string): EmscriptenFSNode;\n  mknod(parent: EmscriptenFSNode, name: string, mode: number, dev: any): EmscriptenFSNode;\n  rename(oldNode: EmscriptenFSNode, newDir: EmscriptenFSNode, newName: string): void;\n  unlink(parent: EmscriptenFSNode, name: string): void;\n  rmdir(parent: EmscriptenFSNode, name: string): void;\n  readdir(node: EmscriptenFSNode): string[];\n  symlink(parent: EmscriptenFSNode, newName: string, oldPath: string): void;\n  readlink(node: EmscriptenFSNode): string;\n}\n\nexport interface EmscriptenStreamOps {\n  open(stream: EmscriptenStream): void;\n  close(stream: EmscriptenStream): void;\n  read(stream: EmscriptenStream, buffer: Uint8Array, offset: number, length: number, position: number): number;\n  write(stream: EmscriptenStream, buffer: Uint8Array, offset: number, length: number, position: number): number;\n  llseek(stream: EmscriptenStream, offset: number, whence: number): number;\n}\n\nexport interface EmscriptenFS {\n  mount(mount: {opts: {root: string}}): EmscriptenFSNode;\n  createNode(parent: EmscriptenFSNode, name: string, mode: number, dev?: any): EmscriptenFSNode;\n  getMode(path: string): number;\n  realPath(node: EmscriptenFSNode): string;\n  node_ops: EmscriptenNodeOps;\n  stream_ops: EmscriptenStreamOps;\n}\n\nclass BFSEmscriptenStreamOps implements EmscriptenStreamOps {\n  private FS: any;\n  private PATH: any;\n  private ERRNO_CODES: any;\n  private nodefs: FS;\n\n  constructor(private fs: BFSEmscriptenFS) {\n    this.nodefs = fs.getNodeFS();\n    this.FS = fs.getFS();\n    this.PATH = fs.getPATH();\n    this.ERRNO_CODES = fs.getERRNO_CODES();\n  }\n\n  public open(stream: EmscriptenStream): void {\n    var path = this.fs.realPath(stream.node),\n      FS = this.FS;\n    try {\n      if (FS.isFile(stream.node.mode)) {\n        stream.nfd = this.nodefs.openSync(path, this.fs.flagsToPermissionString(stream.flags));\n      }\n    } catch (e) {\n      if (!e.code) throw e;\n      throw new FS.ErrnoError(this.ERRNO_CODES[e.code]);\n    }\n  }\n\n  public close(stream: EmscriptenStream): void {\n    var FS = this.FS;\n    try {\n      if (FS.isFile(stream.node.mode) && stream.nfd) {\n        this.nodefs.closeSync(stream.nfd);\n      }\n    } catch (e) {\n      if (!e.code) throw e;\n      throw new FS.ErrnoError(this.ERRNO_CODES[e.code]);\n    }\n  }\n\n  public read(stream: EmscriptenStream, buffer: Uint8Array, offset: number, length: number, position: number): number {\n    // Avoid copying overhead by reading directly into buffer.\n    try {\n      return this.nodefs.readSync(stream.nfd, uint8Array2Buffer(buffer), offset, length, position);\n    } catch (e) {\n      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);\n    }\n  }\n\n  public write(stream: EmscriptenStream, buffer: Uint8Array, offset: number, length: number, position: number): number {\n    // Avoid copying overhead.\n    try {\n      return this.nodefs.writeSync(stream.nfd, uint8Array2Buffer(buffer), offset, length, position);\n    } catch (e) {\n      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);\n    }\n  }\n\n  public llseek(stream: EmscriptenStream, offset: number, whence: number): number {\n    var position = offset;\n    if (whence === 1) {  // SEEK_CUR.\n      position += stream.position;\n    } else if (whence === 2) {  // SEEK_END.\n      if (this.FS.isFile(stream.node.mode)) {\n        try {\n          var stat = this.nodefs.fstatSync(stream.nfd);\n          position += stat.size;\n        } catch (e) {\n          throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);\n        }\n      }\n    }\n\n    if (position < 0) {\n      throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);\n    }\n\n    stream.position = position;\n    return position;\n  }\n}\n\nclass BFSEmscriptenNodeOps implements EmscriptenNodeOps {\n  private FS: any;\n  private PATH: any;\n  private ERRNO_CODES: any;\n  private nodefs: FS;\n\n  constructor(private fs: BFSEmscriptenFS) {\n    this.nodefs = fs.getNodeFS();\n    this.FS = fs.getFS();\n    this.PATH = fs.getPATH();\n    this.ERRNO_CODES = fs.getERRNO_CODES();\n  }\n\n  public getattr(node: EmscriptenFSNode): Stats {\n    var path = this.fs.realPath(node);\n    var stat: NodeStats;\n    try {\n      stat = this.nodefs.lstatSync(path);\n    } catch (e) {\n      if (!e.code) throw e;\n      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);\n    }\n    return {\n      dev: stat.dev,\n      ino: stat.ino,\n      mode: stat.mode,\n      nlink: stat.nlink,\n      uid: stat.uid,\n      gid: stat.gid,\n      rdev: stat.rdev,\n      size: stat.size,\n      atime: stat.atime,\n      mtime: stat.mtime,\n      ctime: stat.ctime,\n      blksize: stat.blksize,\n      blocks: stat.blocks\n    };\n  }\n\n  public setattr(node: EmscriptenFSNode, attr: Stats): void {\n    var path = this.fs.realPath(node);\n    try {\n      if (attr.mode !== undefined) {\n        this.nodefs.chmodSync(path, attr.mode);\n        // update the common node structure mode as well\n        node.mode = attr.mode;\n      }\n      if (attr.timestamp !== undefined) {\n        var date = new Date(attr.timestamp);\n        this.nodefs.utimesSync(path, date, date);\n      }\n    } catch (e) {\n      if (!e.code) throw e;\n      // Ignore not supported errors. Emscripten does utimesSync when it\n      // writes files, but never really requires the value to be set.\n      if (e.code !== \"ENOTSUP\") {\n        throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);\n      }\n    }\n    if (attr.size !== undefined) {\n      try {\n        this.nodefs.truncateSync(path, attr.size);\n      } catch (e) {\n        if (!e.code) throw e;\n        throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);\n      }\n    }\n  }\n\n  public lookup(parent: EmscriptenFSNode, name: string): EmscriptenFSNode {\n    var path = this.PATH.join2(this.fs.realPath(parent), name);\n    var mode = this.fs.getMode(path);\n    return this.fs.createNode(parent, name, mode);\n  }\n\n  public mknod(parent: EmscriptenFSNode, name: string, mode: number, dev: any): EmscriptenFSNode {\n    var node = this.fs.createNode(parent, name, mode, dev);\n    // create the backing node for this in the fs root as well\n    var path = this.fs.realPath(node);\n    try {\n      if (this.FS.isDir(node.mode)) {\n        this.nodefs.mkdirSync(path, node.mode);\n      } else {\n        this.nodefs.writeFileSync(path, '', { mode: node.mode });\n      }\n    } catch (e) {\n      if (!e.code) throw e;\n      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);\n    }\n    return node;\n  }\n\n  public rename(oldNode: EmscriptenFSNode, newDir: EmscriptenFSNode, newName: string): void {\n    var oldPath = this.fs.realPath(oldNode);\n    var newPath = this.PATH.join2(this.fs.realPath(newDir), newName);\n    try {\n      this.nodefs.renameSync(oldPath, newPath);\n    } catch (e) {\n      if (!e.code) throw e;\n      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);\n    }\n  }\n\n  public unlink(parent: EmscriptenFSNode, name: string): void {\n    var path = this.PATH.join2(this.fs.realPath(parent), name);\n    try {\n      this.nodefs.unlinkSync(path);\n    } catch (e) {\n      if (!e.code) throw e;\n      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);\n    }\n  }\n\n  public rmdir(parent: EmscriptenFSNode, name: string) {\n    var path = this.PATH.join2(this.fs.realPath(parent), name);\n    try {\n      this.nodefs.rmdirSync(path);\n    } catch (e) {\n      if (!e.code) throw e;\n      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);\n    }\n  }\n\n  public readdir(node: EmscriptenFSNode): string[] {\n    var path = this.fs.realPath(node);\n    try {\n      return this.nodefs.readdirSync(path);\n    } catch (e) {\n      if (!e.code) throw e;\n      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);\n    }\n  }\n\n  public symlink(parent: EmscriptenFSNode, newName: string, oldPath: string): void {\n    var newPath = this.PATH.join2(this.fs.realPath(parent), newName);\n    try {\n      this.nodefs.symlinkSync(oldPath, newPath);\n    } catch (e) {\n      if (!e.code) throw e;\n      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);\n    }\n  }\n\n  public readlink(node: EmscriptenFSNode): string {\n    var path = this.fs.realPath(node);\n    try {\n      return this.nodefs.readlinkSync(path);\n    } catch (e) {\n      if (!e.code) throw e;\n      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);\n    }\n  }\n}\n\nexport default class BFSEmscriptenFS implements EmscriptenFS {\n  private FS: any;\n  private PATH: any;\n  private ERRNO_CODES: any;\n  private nodefs: FS;\n  constructor(_FS = (<any> self)['FS'], _PATH = (<any> self)['PATH'], _ERRNO_CODES = (<any> self)['ERRNO_CODES'], nodefs: FS = fs) {\n    if (typeof BrowserFS === 'undefined') {\n      throw new Error(\"BrowserFS is not loaded. Please load it before this library.\");\n    }\n    this.nodefs = nodefs;\n    this.FS = _FS;\n    this.PATH = _PATH;\n    this.ERRNO_CODES = _ERRNO_CODES;\n    this.node_ops = new BFSEmscriptenNodeOps(this);\n    this.stream_ops = new BFSEmscriptenStreamOps(this);\n  }\n\n  public mount(mount: {opts: {root: string}}): EmscriptenFSNode {\n    return this.createNode(null, '/', this.getMode(mount.opts.root), 0);\n  }\n\n  public createNode(parent: EmscriptenFSNode, name: string, mode: number, dev?: any): EmscriptenFSNode {\n    var FS = this.FS;\n    if (!FS.isDir(mode) && !FS.isFile(mode) && !FS.isLink(mode)) {\n      throw new FS.ErrnoError(this.ERRNO_CODES.EINVAL);\n    }\n    var node = FS.createNode(parent, name, mode);\n    node.node_ops = this.node_ops;\n    node.stream_ops = this.stream_ops;\n    return node;\n  }\n\n  public getMode(path: string): number {\n    var stat: NodeStats;\n    try {\n      stat = this.nodefs.lstatSync(path);\n    } catch (e) {\n      if (!e.code) throw e;\n      throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);\n    }\n    return stat.mode;\n  }\n\n  public realPath(node: EmscriptenFSNode): string {\n    var parts: string[] = [];\n    while (node.parent !== node) {\n      parts.push(node.name);\n      node = node.parent;\n    }\n    parts.push(node.mount.opts.root);\n    parts.reverse();\n    return this.PATH.join.apply(null, parts);\n  }\n  // This maps the integer permission modes from http://linux.die.net/man/3/open\n  // to node.js-specific file open permission strings at http://nodejs.org/api/fs.html#fs_fs_open_path_flags_mode_callback\n  public flagsToPermissionStringMap = {\n    0/*O_RDONLY*/: 'r',\n    1/*O_WRONLY*/: 'r+',\n    2/*O_RDWR*/: 'r+',\n    64/*O_CREAT*/: 'r',\n    65/*O_WRONLY|O_CREAT*/: 'r+',\n    66/*O_RDWR|O_CREAT*/: 'r+',\n    129/*O_WRONLY|O_EXCL*/: 'rx+',\n    193/*O_WRONLY|O_CREAT|O_EXCL*/: 'rx+',\n    514/*O_RDWR|O_TRUNC*/: 'w+',\n    577/*O_WRONLY|O_CREAT|O_TRUNC*/: 'w',\n    578/*O_CREAT|O_RDWR|O_TRUNC*/: 'w+',\n    705/*O_WRONLY|O_CREAT|O_EXCL|O_TRUNC*/: 'wx',\n    706/*O_RDWR|O_CREAT|O_EXCL|O_TRUNC*/: 'wx+',\n    1024/*O_APPEND*/: 'a',\n    1025/*O_WRONLY|O_APPEND*/: 'a',\n    1026/*O_RDWR|O_APPEND*/: 'a+',\n    1089/*O_WRONLY|O_CREAT|O_APPEND*/: 'a',\n    1090/*O_RDWR|O_CREAT|O_APPEND*/: 'a+',\n    1153/*O_WRONLY|O_EXCL|O_APPEND*/: 'ax',\n    1154/*O_RDWR|O_EXCL|O_APPEND*/: 'ax+',\n    1217/*O_WRONLY|O_CREAT|O_EXCL|O_APPEND*/: 'ax',\n    1218/*O_RDWR|O_CREAT|O_EXCL|O_APPEND*/: 'ax+',\n    4096/*O_RDONLY|O_DSYNC*/: 'rs',\n    4098/*O_RDWR|O_DSYNC*/: 'rs+'\n  }\n\n  public flagsToPermissionString(flags: string): string {\n    var parsedFlags = (typeof flags === \"string\") ? parseInt(flags, 10) : <number><any> flags;\n    parsedFlags &= 0x1FFF;\n    if (parsedFlags in this.flagsToPermissionStringMap) {\n      return (<any> this.flagsToPermissionStringMap)[parsedFlags];\n    } else {\n      return flags;\n    }\n  }\n\n  public getNodeFS() {\n    return this.nodefs;\n  }\n\n  public getFS() {\n    return this.FS;\n  }\n\n  public getPATH() {\n    return this.PATH;\n  }\n\n  public getERRNO_CODES() {\n    return this.ERRNO_CODES;\n  }\n\n  public node_ops: EmscriptenNodeOps;\n  public stream_ops: EmscriptenStreamOps;\n}\n","import {default as Stats, FileType} from '../core/node_fs_stats';\nimport path = require('path');\n\n/**\n * A simple class for storing a filesystem index. Assumes that all paths passed\n * to it are *absolute* paths.\n *\n * Can be used as a partial or a full index, although care must be taken if used\n * for the former purpose, especially when directories are concerned.\n */\nexport class FileIndex<T> {\n  // Maps directory paths to directory inodes, which contain files.\n  private _index: {[path: string]: DirInode<T>}\n\n  /**\n   * Constructs a new FileIndex.\n   */\n  constructor() {\n    // _index is a single-level key,value store that maps *directory* paths to\n    // DirInodes. File information is only contained in DirInodes themselves.\n    this._index = {};\n    // Create the root directory.\n    this.addPath('/', new DirInode());\n  }\n\n  /**\n   * Split into a (directory path, item name) pair\n   */\n  private _split_path(p: string): string[] {\n    var dirpath = path.dirname(p);\n    var itemname = p.substr(dirpath.length + (dirpath === \"/\" ? 0 : 1));\n    return [dirpath, itemname];\n  }\n\n  /**\n   * Runs the given function over all files in the index.\n   */\n  public fileIterator<T>(cb: (file: T) => void): void {\n    for (var path in this._index) {\n      var dir = this._index[path];\n      var files = dir.getListing();\n      for (var i = 0; i < files.length; i++) {\n        var item = dir.getItem(files[i]);\n        if (isFileInode<T>(item)) {\n          cb(item.getData());\n        }\n      }\n    }\n  }\n\n  /**\n   * Adds the given absolute path to the index if it is not already in the index.\n   * Creates any needed parent directories.\n   * @param [String] path The path to add to the index.\n   * @param [BrowserFS.FileInode | BrowserFS.DirInode] inode The inode for the\n   *   path to add.\n   * @return [Boolean] 'True' if it was added or already exists, 'false' if there\n   *   was an issue adding it (e.g. item in path is a file, item exists but is\n   *   different).\n   * @todo If adding fails and implicitly creates directories, we do not clean up\n   *   the new empty directories.\n   */\n  public addPath(path: string, inode: Inode): boolean {\n    if (inode == null) {\n      throw new Error('Inode must be specified');\n    }\n    if (path[0] !== '/') {\n      throw new Error('Path must be absolute, got: ' + path);\n    }\n\n    // Check if it already exists.\n    if (this._index.hasOwnProperty(path)) {\n      return this._index[path] === inode;\n    }\n\n    var splitPath = this._split_path(path);\n    var dirpath = splitPath[0];\n    var itemname = splitPath[1];\n    // Try to add to its parent directory first.\n    var parent = this._index[dirpath];\n    if (parent === undefined && path !== '/') {\n      // Create parent.\n      parent = new DirInode<T>();\n      if (!this.addPath(dirpath, parent)) {\n        return false;\n      }\n    }\n    // Add myself to my parent.\n    if (path !== '/') {\n      if (!parent.addItem(itemname, inode)) {\n        return false;\n      }\n    }\n    // If I'm a directory, add myself to the index.\n    if (isDirInode<T>(inode)) {\n      this._index[path] = inode;\n    }\n    return true;\n  }\n\n  /**\n   * Adds the given absolute path to the index if it is not already in the index.\n   * The path is added without special treatment (no joining of adjacent separators, etc).\n   * Creates any needed parent directories.\n   * @param [String] path The path to add to the index.\n   * @param [BrowserFS.FileInode | BrowserFS.DirInode] inode The inode for the\n   *   path to add.\n   * @return [Boolean] 'True' if it was added or already exists, 'false' if there\n   *   was an issue adding it (e.g. item in path is a file, item exists but is\n   *   different).\n   * @todo If adding fails and implicitly creates directories, we do not clean up\n   *   the new empty directories.\n   */\n  public addPathFast(path: string, inode: Inode): boolean {\n\n    const itemNameMark = path.lastIndexOf('/');\n    const parentPath = itemNameMark == 0 ? \"/\" : path.substring(0, itemNameMark);\n    const itemName = path.substring(itemNameMark+1);\n\n    // Try to add to its parent directory first.\n    let parent = this._index[parentPath];\n    if (parent === undefined) {\n      // Create parent.\n      parent = new DirInode<T>();\n      this.addPathFast(parentPath, parent);\n    }\n\n    if (!parent.addItem(itemName, inode)) {\n      return false;\n    }\n\n    // If adding a directory, add to the index as well.\n    if (inode.isDir()) {\n      this._index[path] = <DirInode<T>> inode;\n    }\n    return true;\n  }\n\n  /**\n   * Removes the given path. Can be a file or a directory.\n   * @return [BrowserFS.FileInode | BrowserFS.DirInode | null] The removed item,\n   *   or null if it did not exist.\n   */\n  public removePath(path: string): Inode {\n    var splitPath = this._split_path(path);\n    var dirpath = splitPath[0];\n    var itemname = splitPath[1];\n\n    // Try to remove it from its parent directory first.\n    var parent = this._index[dirpath];\n    if (parent === undefined) {\n      return null;\n    }\n    // Remove myself from my parent.\n    var inode = parent.remItem(itemname);\n    if (inode === null) {\n      return null;\n    }\n    // If I'm a directory, remove myself from the index, and remove my children.\n    if (isDirInode(inode)) {\n      var children = inode.getListing();\n      for (var i = 0; i < children.length; i++) {\n        this.removePath(path + '/' + children[i]);\n      }\n\n      // Remove the directory from the index, unless it's the root.\n      if (path !== '/') {\n        delete this._index[path];\n      }\n    }\n    return inode;\n  }\n\n  /**\n   * Retrieves the directory listing of the given path.\n   * @return [String[]] An array of files in the given path, or 'null' if it does\n   *   not exist.\n   */\n  public ls(path: string): string[] {\n    var item = this._index[path];\n    if (item === undefined) {\n      return null;\n    }\n    return item.getListing();\n  }\n\n  /**\n   * Returns the inode of the given item.\n   * @param [String] path\n   * @return [BrowserFS.FileInode | BrowserFS.DirInode | null] Returns null if\n   *   the item does not exist.\n   */\n  public getInode(path: string): Inode {\n    var splitPath = this._split_path(path);\n    var dirpath = splitPath[0];\n    var itemname = splitPath[1];\n    // Retrieve from its parent directory.\n    var parent = this._index[dirpath];\n    if (parent === undefined) {\n      return null;\n    }\n    // Root case\n    if (dirpath === path) {\n      return parent;\n    }\n    return parent.getItem(itemname);\n  }\n\n  /**\n   * Static method for constructing indices from a JSON listing.\n   * @param [Object] listing Directory listing generated by tools/XHRIndexer.coffee\n   * @return [BrowserFS.FileIndex] A new FileIndex object.\n   */\n  public static fromListing<T>(listing): FileIndex<T> {\n    var idx = new FileIndex<T>();\n    // Add a root DirNode.\n    var rootInode = new DirInode<T>();\n    idx._index['/'] = rootInode;\n    var queue = [['', listing, rootInode]];\n    while (queue.length > 0) {\n      var inode;\n      var next = queue.pop();\n      var pwd = next[0];\n      var tree = next[1];\n      var parent = next[2];\n      for (var node in tree) {\n        var children = tree[node];\n        var name = \"\" + pwd + \"/\" + node;\n        if (children != null) {\n          idx._index[name] = inode = new DirInode<T>();\n          queue.push([name, children, inode]);\n        } else {\n          // This inode doesn't have correct size information, noted with -1.\n          inode = new FileInode<Stats>(new Stats(FileType.FILE, -1, 0x16D));\n        }\n        if (parent != null) {\n          parent._ls[node] = inode;\n        }\n      }\n    }\n    return idx;\n  }\n}\n\n/**\n * Generic interface for file/directory inodes.\n * Note that Stats objects are what we use for file inodes.\n */\nexport interface Inode {\n  // Is this an inode for a file?\n  isFile(): boolean;\n  // Is this an inode for a directory?\n  isDir(): boolean;\n}\n\n/**\n * Inode for a file. Stores an arbitrary (filesystem-specific) data payload.\n */\nexport class FileInode<T> implements Inode {\n  constructor(private data: T) { }\n  public isFile(): boolean { return true; }\n  public isDir(): boolean { return false; }\n  public getData(): T { return this.data; }\n  public setData(data: T): void { this.data = data; }\n}\n\n/**\n * Inode for a directory. Currently only contains the directory listing.\n */\nexport class DirInode<T> implements Inode {\n  private _ls: {[path: string]: Inode} = {};\n  /**\n   * Constructs an inode for a directory.\n   */\n  constructor(private data: T = null) {}\n  public isFile(): boolean {\n    return false;\n  }\n  public isDir(): boolean {\n    return true;\n  }\n  public getData(): T { return this.data; }\n\n  /**\n   * Return a Stats object for this inode.\n   * @todo Should probably remove this at some point. This isn't the\n   *       responsibility of the FileIndex.\n   * @return [BrowserFS.node.fs.Stats]\n   */\n  public getStats(): Stats {\n    return new Stats(FileType.DIRECTORY, 4096, 0x16D);\n  }\n  /**\n   * Returns the directory listing for this directory. Paths in the directory are\n   * relative to the directory's path.\n   * @return [String[]] The directory listing for this directory.\n   */\n  public getListing(): string[] {\n    return Object.keys(this._ls);\n  }\n  /**\n   * Returns the inode for the indicated item, or null if it does not exist.\n   * @param [String] p Name of item in this directory.\n   * @return [BrowserFS.FileInode | BrowserFS.DirInode | null]\n   */\n  public getItem(p: string): Inode {\n    var _ref;\n    return (_ref = this._ls[p]) != null ? _ref : null;\n  }\n  /**\n   * Add the given item to the directory listing. Note that the given inode is\n   * not copied, and will be mutated by the DirInode if it is a DirInode.\n   * @param [String] p Item name to add to the directory listing.\n   * @param [BrowserFS.FileInode | BrowserFS.DirInode] inode The inode for the\n   *   item to add to the directory inode.\n   * @return [Boolean] True if it was added, false if it already existed.\n   */\n  public addItem(p: string, inode: Inode): boolean {\n    if (p in this._ls) {\n      return false;\n    }\n    this._ls[p] = inode;\n    return true;\n  }\n  /**\n   * Removes the given item from the directory listing.\n   * @param [String] p Name of item to remove from the directory listing.\n   * @return [BrowserFS.FileInode | BrowserFS.DirInode | null] Returns the item\n   *   removed, or null if the item did not exist.\n   */\n  public remItem(p: string): Inode {\n    var item = this._ls[p];\n    if (item === undefined) {\n      return null;\n    }\n    delete this._ls[p];\n    return item;\n  }\n}\n\nexport function isFileInode<T>(inode: Inode): inode is FileInode<T> {\n  return inode && inode.isFile();\n}\n\nexport function isDirInode<T>(inode: Inode): inode is DirInode<T> {\n  return inode && inode.isDir();\n}\n","import {default as Stats, FileType} from '../core/node_fs_stats';\n\n/**\n * Generic inode definition that can easily be serialized.\n */\nclass Inode {\n  constructor(public id: string,\n    public size: number,\n    public mode: number,\n    public atime: number,\n    public mtime: number,\n    public ctime: number) { }\n\n  /**\n   * Handy function that converts the Inode to a Node Stats object.\n   */\n  public toStats(): Stats {\n    return new Stats(\n      (this.mode & 0xF000) === FileType.DIRECTORY ? FileType.DIRECTORY : FileType.FILE,\n      this.size, this.mode, new Date(this.atime), new Date(this.mtime), new Date(this.ctime));\n  }\n\n  /**\n   * Get the size of this Inode, in bytes.\n   */\n  public getSize(): number {\n    // ASSUMPTION: ID is ASCII (1 byte per char).\n    return 30 + this.id.length;\n  }\n\n  /**\n   * Writes the inode into the start of the buffer.\n   */\n  public toBuffer(buff: NodeBuffer = new Buffer(this.getSize())): NodeBuffer {\n    buff.writeUInt32LE(this.size, 0);\n    buff.writeUInt16LE(this.mode, 4);\n    buff.writeDoubleLE(this.atime, 6);\n    buff.writeDoubleLE(this.mtime, 14);\n    buff.writeDoubleLE(this.ctime, 22);\n    buff.write(this.id, 30, this.id.length, 'ascii');\n    return buff;\n  }\n\n  /**\n   * Updates the Inode using information from the stats object. Used by file\n   * systems at sync time, e.g.:\n   * - Program opens file and gets a File object.\n   * - Program mutates file. File object is responsible for maintaining\n   *   metadata changes locally -- typically in a Stats object.\n   * - Program closes file. File object's metadata changes are synced with the\n   *   file system.\n   * @return True if any changes have occurred.\n   */\n  public update(stats: Stats): boolean {\n    var hasChanged = false;\n    if (this.size !== stats.size) {\n      this.size = stats.size;\n      hasChanged = true;\n    }\n\n    if (this.mode !== stats.mode) {\n      this.mode = stats.mode;\n      hasChanged = true;\n    }\n\n    var atimeMs = stats.atime.getTime();\n    if (this.atime !== atimeMs) {\n      this.atime = atimeMs;\n      hasChanged = true;\n    }\n\n    var mtimeMs = stats.mtime.getTime();\n    if (this.mtime !== mtimeMs) {\n      this.mtime = mtimeMs;\n      hasChanged = true;\n    }\n\n    var ctimeMs = stats.ctime.getTime();\n    if (this.ctime !== ctimeMs) {\n      this.ctime = ctimeMs;\n      hasChanged = true;\n    }\n\n    return hasChanged;\n  }\n\n  /**\n   * Converts the buffer into an Inode.\n   */\n  public static fromBuffer(buffer: NodeBuffer): Inode {\n    if (buffer === undefined) {\n      throw new Error(\"NO\");\n    }\n    return new Inode(buffer.toString('ascii', 30),\n      buffer.readUInt32LE(0),\n      buffer.readUInt16LE(4),\n      buffer.readDoubleLE(6),\n      buffer.readDoubleLE(14),\n      buffer.readDoubleLE(22)\n    );\n  }\n\n  // XXX: Copied from Stats. Should reconcile these two into something more\n  //      compact.\n\n  /**\n   * @return [Boolean] True if this item is a file.\n   */\n  public isFile(): boolean {\n    return (this.mode & 0xF000) === FileType.FILE;\n  }\n\n  /**\n   * @return [Boolean] True if this item is a directory.\n   */\n  public isDirectory(): boolean {\n    return (this.mode & 0xF000) === FileType.DIRECTORY;\n  }\n}\n\nexport = Inode;\n","import file_system = require('../core/file_system');\nimport {ApiError, ErrorCode} from '../core/api_error';\nimport {default as Stats, FileType} from '../core/node_fs_stats';\nimport file = require('../core/file');\nimport file_flag = require('../core/file_flag');\nimport path = require('path');\nimport Inode = require('../generic/inode');\nimport preload_file = require('../generic/preload_file');\nvar ROOT_NODE_ID: string = \"/\";\n\n/**\n * Generates a random ID.\n */\nfunction GenerateRandomID(): string {\n  // From http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n/**\n * Helper function. Checks if 'e' is defined. If so, it triggers the callback\n * with 'e' and returns false. Otherwise, returns true.\n */\nfunction noError(e: ApiError, cb: (e: ApiError) => void): boolean {\n  if (e) {\n    cb(e);\n    return false;\n  }\n  return true;\n}\n\n/**\n * Helper function. Checks if 'e' is defined. If so, it aborts the transaction,\n * triggers the callback with 'e', and returns false. Otherwise, returns true.\n */\nfunction noErrorTx(e: ApiError, tx: AsyncKeyValueRWTransaction, cb: (e: ApiError) => void): boolean {\n  if (e) {\n    tx.abort(() => {\n      cb(e);\n    });\n    return false;\n  }\n  return true;\n}\n\n/**\n * Represents a *synchronous* key-value store.\n */\nexport interface SyncKeyValueStore {\n  /**\n   * The name of the key-value store.\n   */\n  name(): string;\n  /**\n   * Empties the key-value store completely.\n   */\n  clear(): void;\n  /**\n   * Begins a new read-only transaction.\n   */\n  beginTransaction(type: \"readonly\"): SyncKeyValueROTransaction;\n  /**\n   * Begins a new read-write transaction.\n   */\n  beginTransaction(type: \"readwrite\"): SyncKeyValueRWTransaction;\n  beginTransaction(type: string): SyncKeyValueROTransaction;\n}\n\n/**\n * A read-only transaction for a synchronous key value store.\n */\nexport interface SyncKeyValueROTransaction {\n  /**\n   * Retrieves the data at the given key. Throws an ApiError if an error occurs\n   * or if the key does not exist.\n   * @param key The key to look under for data.\n   * @return The data stored under the key, or undefined if not present.\n   */\n  get(key: string): NodeBuffer;\n}\n\n/**\n * A read-write transaction for a synchronous key value store.\n */\nexport interface SyncKeyValueRWTransaction extends SyncKeyValueROTransaction {\n  /**\n   * Adds the data to the store under the given key.\n   * @param key The key to add the data under.\n   * @param data The data to add to the store.\n   * @param overwrite If 'true', overwrite any existing data. If 'false',\n   *   avoids storing the data if the key exists.\n   * @return True if storage succeeded, false otherwise.\n   */\n  put(key: string, data: NodeBuffer, overwrite: boolean): boolean;\n  /**\n   * Deletes the data at the given key.\n   * @param key The key to delete from the store.\n   */\n  del(key: string): void;\n  /**\n   * Commits the transaction.\n   */\n  commit(): void;\n  /**\n   * Aborts and rolls back the transaction.\n   */\n  abort(): void;\n}\n\n/**\n * An interface for simple synchronous key-value stores that don't have special\n * support for transactions and such.\n */\nexport interface SimpleSyncStore {\n  get(key: string): NodeBuffer;\n  put(key: string, data: NodeBuffer, overwrite: boolean): boolean;\n  del(key: string): void;\n}\n\n/**\n * A simple RW transaction for simple synchronous key-value stores.\n */\nexport class SimpleSyncRWTransaction implements SyncKeyValueRWTransaction {\n  constructor(private store: SimpleSyncStore) { }\n  /**\n   * Stores data in the keys we modify prior to modifying them.\n   * Allows us to roll back commits.\n   */\n  private originalData: { [key: string]: NodeBuffer } = {};\n  /**\n   * List of keys modified in this transaction, if any.\n   */\n  private modifiedKeys: string[] = [];\n  /**\n   * Stashes given key value pair into `originalData` if it doesn't already\n   * exist. Allows us to stash values the program is requesting anyway to\n   * prevent needless `get` requests if the program modifies the data later\n   * on during the transaction.\n   */\n  private stashOldValue(key: string, value: NodeBuffer) {\n    // Keep only the earliest value in the transaction.\n    if (!this.originalData.hasOwnProperty(key)) {\n      this.originalData[key] = value\n    }\n  }\n  /**\n   * Marks the given key as modified, and stashes its value if it has not been\n   * stashed already.\n   */\n  private markModified(key: string) {\n    if (this.modifiedKeys.indexOf(key) === -1) {\n      this.modifiedKeys.push(key);\n      if (!this.originalData.hasOwnProperty(key)) {\n        this.originalData[key] = this.store.get(key);\n      }\n    }\n  }\n\n  public get(key: string): NodeBuffer {\n    var val = this.store.get(key);\n    this.stashOldValue(key, val);\n    return val;\n  }\n\n  public put(key: string, data: NodeBuffer, overwrite: boolean): boolean {\n    this.markModified(key);\n    return this.store.put(key, data, overwrite);\n  }\n\n  public del(key: string): void {\n    this.markModified(key);\n    this.store.del(key);\n  }\n\n  public commit(): void {/* NOP */}\n  public abort(): void {\n    // Rollback old values.\n    var i: number, key: string, value: NodeBuffer;\n    for (i = 0; i < this.modifiedKeys.length; i++) {\n      key = this.modifiedKeys[i];\n      value = this.originalData[key];\n      if (value === null) {\n        // Key didn't exist.\n        this.store.del(key);\n      } else {\n        // Key existed. Store old value.\n        this.store.put(key, value, true);\n      }\n    }\n  }\n}\n\nexport interface SyncKeyValueFileSystemOptions {\n  /**\n   * The actual key-value store to read from/write to.\n   */\n  store: SyncKeyValueStore;\n  /**\n   * Should the file system support properties (mtime/atime/ctime/chmod/etc)?\n   * Enabling this slightly increases the storage space per file, and adds\n   * atime updates every time a file is accessed, mtime updates every time\n   * a file is modified, and permission checks on every operation.\n   *\n   * Defaults to *false*.\n   */\n  //supportProps?: boolean;\n  /**\n   * Should the file system support links?\n   */\n  //supportLinks?: boolean;\n}\n\nexport class SyncKeyValueFile extends preload_file.PreloadFile<SyncKeyValueFileSystem> implements file.File {\n  constructor(_fs: SyncKeyValueFileSystem, _path: string, _flag: file_flag.FileFlag, _stat: Stats, contents?: NodeBuffer) {\n    super(_fs, _path, _flag, _stat, contents);\n  }\n\n  public syncSync(): void {\n    if (this.isDirty()) {\n      this._fs._syncSync(this.getPath(), this.getBuffer(), this.getStats());\n      this.resetDirty();\n    }\n  }\n\n  public closeSync(): void {\n    this.syncSync();\n  }\n}\n\n/**\n * A \"Synchronous key-value file system\". Stores data to/retrieves data from an\n * underlying key-value store.\n *\n * We use a unique ID for each node in the file system. The root node has a\n * fixed ID.\n * @todo Introduce Node ID caching.\n * @todo Check modes.\n */\nexport class SyncKeyValueFileSystem extends file_system.SynchronousFileSystem {\n  private store: SyncKeyValueStore;\n  constructor(options: SyncKeyValueFileSystemOptions) {\n    super();\n    this.store = options.store;\n    // INVARIANT: Ensure that the root exists.\n    this.makeRootDirectory();\n  }\n\n  public static isAvailable(): boolean { return true; }\n  public getName(): string { return this.store.name(); }\n  public isReadOnly(): boolean { return false; }\n  public supportsSymlinks(): boolean { return false; }\n  public supportsProps(): boolean { return false; }\n  public supportsSynch(): boolean { return true; }\n\n  /**\n   * Checks if the root directory exists. Creates it if it doesn't.\n   */\n  private makeRootDirectory() {\n    var tx = this.store.beginTransaction('readwrite');\n    if (tx.get(ROOT_NODE_ID) === undefined) {\n      // Create new inode.\n      var currTime = (new Date()).getTime(),\n        // Mode 0666\n        dirInode = new Inode(GenerateRandomID(), 4096, 511 | FileType.DIRECTORY, currTime, currTime, currTime);\n      // If the root doesn't exist, the first random ID shouldn't exist,\n      // either.\n      tx.put(dirInode.id, new Buffer(\"{}\"), false);\n      tx.put(ROOT_NODE_ID, dirInode.toBuffer(), false);\n      tx.commit();\n    }\n  }\n\n  /**\n   * Helper function for findINode.\n   * @param parent The parent directory of the file we are attempting to find.\n   * @param filename The filename of the inode we are attempting to find, minus\n   *   the parent.\n   * @return string The ID of the file's inode in the file system.\n   */\n  private _findINode(tx: SyncKeyValueROTransaction, parent: string, filename: string): string {\n    var read_directory = (inode: Inode): string => {\n      // Get the root's directory listing.\n      var dirList = this.getDirListing(tx, parent, inode);\n      // Get the file's ID.\n      if (dirList[filename]) {\n        return dirList[filename];\n      } else {\n        throw ApiError.ENOENT(path.resolve(parent, filename));\n      }\n    };\n    if (parent === '/') {\n      if (filename === '') {\n        // BASE CASE #1: Return the root's ID.\n        return ROOT_NODE_ID;\n      } else {\n        // BASE CASE #2: Find the item in the root ndoe.\n        return read_directory(this.getINode(tx, parent, ROOT_NODE_ID));\n      }\n    } else {\n      return read_directory(this.getINode(tx, parent + path.sep + filename,\n        this._findINode(tx, path.dirname(parent), path.basename(parent))));\n    }\n  }\n\n  /**\n   * Finds the Inode of the given path.\n   * @param p The path to look up.\n   * @return The Inode of the path p.\n   * @todo memoize/cache\n   */\n  private findINode(tx: SyncKeyValueROTransaction, p: string): Inode {\n    return this.getINode(tx, p, this._findINode(tx, path.dirname(p), path.basename(p)));\n  }\n\n  /**\n   * Given the ID of a node, retrieves the corresponding Inode.\n   * @param tx The transaction to use.\n   * @param p The corresponding path to the file (used for error messages).\n   * @param id The ID to look up.\n   */\n  private getINode(tx: SyncKeyValueROTransaction, p: string, id: string): Inode {\n    var inode = tx.get(id);\n    if (inode === undefined) {\n      throw ApiError.ENOENT(p);\n    }\n    return Inode.fromBuffer(inode);\n  }\n\n  /**\n   * Given the Inode of a directory, retrieves the corresponding directory\n   * listing.\n   */\n  private getDirListing(tx: SyncKeyValueROTransaction, p: string, inode: Inode): { [fileName: string]: string } {\n    if (!inode.isDirectory()) {\n      throw ApiError.ENOTDIR(p);\n    }\n    var data = tx.get(inode.id);\n    if (data === undefined) {\n      throw ApiError.ENOENT(p);\n    }\n    return JSON.parse(data.toString());\n  }\n\n  /**\n   * Creates a new node under a random ID. Retries 5 times before giving up in\n   * the exceedingly unlikely chance that we try to reuse a random GUID.\n   * @return The GUID that the data was stored under.\n   */\n  private addNewNode(tx: SyncKeyValueRWTransaction, data: NodeBuffer): string {\n    var retries = 0, currId: string;\n    while (retries < 5) {\n      try {\n        currId = GenerateRandomID();\n        tx.put(currId, data, false);\n        return currId;\n      } catch (e) {\n        // Ignore and reroll.\n      }\n    }\n    throw new ApiError(ErrorCode.EIO, 'Unable to commit data to key-value store.');\n  }\n\n  /**\n   * Commits a new file (well, a FILE or a DIRECTORY) to the file system with\n   * the given mode.\n   * Note: This will commit the transaction.\n   * @param p The path to the new file.\n   * @param type The type of the new file.\n   * @param mode The mode to create the new file with.\n   * @param data The data to store at the file's data node.\n   * @return The Inode for the new file.\n   */\n  private commitNewFile(tx: SyncKeyValueRWTransaction, p: string, type: FileType, mode: number, data: NodeBuffer): Inode {\n    var parentDir = path.dirname(p),\n      fname = path.basename(p),\n      parentNode = this.findINode(tx, parentDir),\n      dirListing = this.getDirListing(tx, parentDir, parentNode),\n      currTime = (new Date()).getTime();\n\n    // Invariant: The root always exists.\n    // If we don't check this prior to taking steps below, we will create a\n    // file with name '' in root should p == '/'.\n    if (p === '/') {\n      throw ApiError.EEXIST(p);\n    }\n\n    // Check if file already exists.\n    if (dirListing[fname]) {\n      throw ApiError.EEXIST(p);\n    }\n\n    try {\n      // Commit data.\n      var dataId = this.addNewNode(tx, data),\n        fileNode = new Inode(dataId, data.length, mode | type, currTime, currTime, currTime),\n        // Commit file node.\n        fileNodeId = this.addNewNode(tx, fileNode.toBuffer());\n      // Update and commit parent directory listing.\n      dirListing[fname] = fileNodeId;\n      tx.put(parentNode.id, new Buffer(JSON.stringify(dirListing)), true);\n    } catch (e) {\n      tx.abort();\n      throw e;\n    }\n    tx.commit();\n    return fileNode;\n  }\n\n  /**\n   * Delete all contents stored in the file system.\n   */\n  public empty(): void {\n    this.store.clear();\n    // INVARIANT: Root always exists.\n    this.makeRootDirectory();\n  }\n\n  public renameSync(oldPath: string, newPath: string): void {\n    var tx = this.store.beginTransaction('readwrite'),\n      oldParent = path.dirname(oldPath), oldName = path.basename(oldPath),\n      newParent = path.dirname(newPath), newName = path.basename(newPath),\n      // Remove oldPath from parent's directory listing.\n      oldDirNode = this.findINode(tx, oldParent),\n      oldDirList = this.getDirListing(tx, oldParent, oldDirNode);\n\n    if (!oldDirList[oldName]) {\n      throw ApiError.ENOENT(oldPath);\n    }\n    var nodeId: string = oldDirList[oldName];\n    delete oldDirList[oldName];\n\n    // Invariant: Can't move a folder inside itself.\n    // This funny little hack ensures that the check passes only if oldPath\n    // is a subpath of newParent. We append '/' to avoid matching folders that\n    // are a substring of the bottom-most folder in the path.\n    if ((newParent + '/').indexOf(oldPath + '/') === 0) {\n      throw new ApiError(ErrorCode.EBUSY, oldParent);\n    }\n\n    // Add newPath to parent's directory listing.\n    var newDirNode: Inode, newDirList: typeof oldDirList;\n    if (newParent === oldParent) {\n      // Prevent us from re-grabbing the same directory listing, which still\n      // contains oldName.\n      newDirNode = oldDirNode;\n      newDirList = oldDirList;\n    } else {\n      newDirNode = this.findINode(tx, newParent);\n      newDirList = this.getDirListing(tx, newParent, newDirNode);\n    }\n\n    if (newDirList[newName]) {\n      // If it's a file, delete it.\n      var newNameNode = this.getINode(tx, newPath, newDirList[newName]);\n      if (newNameNode.isFile()) {\n        try {\n          tx.del(newNameNode.id);\n          tx.del(newDirList[newName]);\n        } catch (e) {\n          tx.abort();\n          throw e;\n        }\n      } else {\n        // If it's a directory, throw a permissions error.\n        throw ApiError.EPERM(newPath);\n      }\n    }\n    newDirList[newName] = nodeId;\n\n    // Commit the two changed directory listings.\n    try {\n      tx.put(oldDirNode.id, new Buffer(JSON.stringify(oldDirList)), true);\n      tx.put(newDirNode.id, new Buffer(JSON.stringify(newDirList)), true);\n    } catch (e) {\n      tx.abort();\n      throw e;\n    }\n\n    tx.commit();\n  }\n\n  public statSync(p: string, isLstat: boolean): Stats {\n    // Get the inode to the item, convert it into a Stats object.\n    return this.findINode(this.store.beginTransaction('readonly'), p).toStats();\n  }\n\n  public createFileSync(p: string, flag: file_flag.FileFlag, mode: number): file.File {\n    var tx = this.store.beginTransaction('readwrite'),\n      data = new Buffer(0),\n      newFile = this.commitNewFile(tx, p, FileType.FILE, mode, data);\n    // Open the file.\n    return new SyncKeyValueFile(this, p, flag, newFile.toStats(), data);\n  }\n\n  public openFileSync(p: string, flag: file_flag.FileFlag): file.File {\n    var tx = this.store.beginTransaction('readonly'),\n      node = this.findINode(tx, p),\n      data = tx.get(node.id);\n    if (data === undefined) {\n      throw ApiError.ENOENT(p);\n    }\n    return new SyncKeyValueFile(this, p, flag, node.toStats(), data);\n  }\n\n  /**\n   * Remove all traces of the given path from the file system.\n   * @param p The path to remove from the file system.\n   * @param isDir Does the path belong to a directory, or a file?\n   * @todo Update mtime.\n   */\n  private removeEntry(p: string, isDir: boolean): void {\n    var tx = this.store.beginTransaction('readwrite'),\n      parent: string = path.dirname(p),\n      parentNode = this.findINode(tx, parent),\n      parentListing = this.getDirListing(tx, parent, parentNode),\n      fileName: string = path.basename(p);\n\n    if (!parentListing[fileName]) {\n      throw ApiError.ENOENT(p);\n    }\n\n    // Remove from directory listing of parent.\n    var fileNodeId = parentListing[fileName];\n    delete parentListing[fileName];\n\n    // Get file inode.\n    var fileNode = this.getINode(tx, p, fileNodeId);\n    if (!isDir && fileNode.isDirectory()) {\n      throw ApiError.EISDIR(p);\n    } else if (isDir && !fileNode.isDirectory()) {\n      throw ApiError.ENOTDIR(p);\n    }\n\n    try {\n      // Delete data.\n      tx.del(fileNode.id);\n      // Delete node.\n      tx.del(fileNodeId);\n      // Update directory listing.\n      tx.put(parentNode.id, new Buffer(JSON.stringify(parentListing)), true);\n    } catch (e) {\n      tx.abort();\n      throw e;\n    }\n    // Success.\n    tx.commit();\n  }\n\n  public unlinkSync(p: string): void {\n    this.removeEntry(p, false);\n  }\n\n  public rmdirSync(p: string): void {\n    // Check first if directory is empty.\n    if (this.readdirSync(p).length > 0) {\n      throw ApiError.ENOTEMPTY(p);\n    } else {\n      this.removeEntry(p, true);\n    }\n  }\n\n  public mkdirSync(p: string, mode: number): void {\n    var tx = this.store.beginTransaction('readwrite'),\n      data = new Buffer('{}');\n    this.commitNewFile(tx, p, FileType.DIRECTORY, mode, data);\n  }\n\n  public readdirSync(p: string): string[]{\n    var tx = this.store.beginTransaction('readonly');\n    return Object.keys(this.getDirListing(tx, p, this.findINode(tx, p)));\n  }\n\n  public _syncSync(p: string, data: NodeBuffer, stats: Stats): void {\n    // @todo Ensure mtime updates properly, and use that to determine if a data\n    //       update is required.\n    var tx = this.store.beginTransaction('readwrite'),\n      // We use the _findInode helper because we actually need the INode id.\n      fileInodeId = this._findINode(tx, path.dirname(p), path.basename(p)),\n      fileInode = this.getINode(tx, p, fileInodeId),\n      inodeChanged = fileInode.update(stats);\n\n    try {\n      // Sync data.\n      tx.put(fileInode.id, data, true);\n      // Sync metadata.\n      if (inodeChanged) {\n        tx.put(fileInodeId, fileInode.toBuffer(), true);\n      }\n    } catch (e) {\n      tx.abort();\n      throw e;\n    }\n    tx.commit();\n  }\n}\n\n/**\n * Represents an *asynchronous* key-value store.\n */\nexport interface AsyncKeyValueStore {\n  /**\n   * The name of the key-value store.\n   */\n  name(): string;\n  /**\n   * Empties the key-value store completely.\n   */\n  clear(cb: (e?: ApiError) => void): void;\n  /**\n   * Begins a read-write transaction.\n   */\n  beginTransaction(type: 'readwrite'): AsyncKeyValueRWTransaction;\n  /**\n   * Begins a read-only transaction.\n   */\n  beginTransaction(type: 'readonly'): AsyncKeyValueROTransaction;\n  beginTransaction(type: string): AsyncKeyValueROTransaction;\n}\n\n/**\n * Represents an asynchronous read-only transaction.\n */\nexport interface AsyncKeyValueROTransaction {\n  /**\n   * Retrieves the data at the given key.\n   * @param key The key to look under for data.\n   */\n  get(key: string, cb: (e: ApiError, data?: NodeBuffer) => void): void;\n}\n\n/**\n * Represents an asynchronous read-write transaction.\n */\nexport interface AsyncKeyValueRWTransaction extends AsyncKeyValueROTransaction {\n  /**\n   * Adds the data to the store under the given key. Overwrites any existing\n   * data.\n   * @param key The key to add the data under.\n   * @param data The data to add to the store.\n   * @param overwrite If 'true', overwrite any existing data. If 'false',\n   *   avoids writing the data if the key exists.\n   * @param cb Triggered with an error and whether or not the value was\n   *   committed.\n   */\n  put(key: string, data: NodeBuffer, overwrite: boolean, cb: (e: ApiError,\n    committed?: boolean) => void): void;\n  /**\n   * Deletes the data at the given key.\n   * @param key The key to delete from the store.\n   */\n  del(key: string, cb: (e?: ApiError) => void): void;\n  /**\n   * Commits the transaction.\n   */\n  commit(cb: (e?: ApiError) => void): void;\n  /**\n   * Aborts and rolls back the transaction.\n   */\n  abort(cb: (e?: ApiError) => void): void;\n}\n\nexport class AsyncKeyValueFile extends preload_file.PreloadFile<AsyncKeyValueFileSystem> implements file.File {\n  constructor(_fs: AsyncKeyValueFileSystem, _path: string, _flag: file_flag.FileFlag, _stat: Stats, contents?: NodeBuffer) {\n    super(_fs, _path, _flag, _stat, contents);\n  }\n\n  public sync(cb: (e?: ApiError) => void): void {\n    if (this.isDirty()) {\n      this._fs._sync(this.getPath(), this.getBuffer(), this.getStats(), (e?: ApiError) => {\n        if (!e) {\n          this.resetDirty();\n        }\n        cb(e);\n      });\n    } else {\n      cb();\n    }\n  }\n\n  public close(cb: (e?: ApiError) => void): void {\n    this.sync(cb);\n  }\n}\n\n/**\n * An \"Asynchronous key-value file system\". Stores data to/retrieves data from\n * an underlying asynchronous key-value store.\n */\nexport class AsyncKeyValueFileSystem extends file_system.BaseFileSystem {\n  private store: AsyncKeyValueStore;\n\n  /**\n   * Initializes the file system. Typically called by subclasses' async\n   * constructors.\n   */\n  public init(store: AsyncKeyValueStore, cb: (e?: ApiError) => void) {\n    this.store = store;\n    // INVARIANT: Ensure that the root exists.\n    this.makeRootDirectory(cb);\n  }\n\n  public static isAvailable(): boolean { return true; }\n  public getName(): string { return this.store.name(); }\n  public isReadOnly(): boolean { return false; }\n  public supportsSymlinks(): boolean { return false; }\n  public supportsProps(): boolean { return false; }\n  public supportsSynch(): boolean { return false; }\n\n  /**\n   * Checks if the root directory exists. Creates it if it doesn't.\n   */\n  private makeRootDirectory(cb: (e?: ApiError) => void) {\n    var tx = this.store.beginTransaction('readwrite');\n    tx.get(ROOT_NODE_ID, (e: ApiError, data?: NodeBuffer) => {\n      if (e || data === undefined) {\n        // Create new inode.\n        var currTime = (new Date()).getTime(),\n          // Mode 0666\n          dirInode = new Inode(GenerateRandomID(), 4096, 511 | FileType.DIRECTORY, currTime, currTime, currTime);\n        // If the root doesn't exist, the first random ID shouldn't exist,\n        // either.\n        tx.put(dirInode.id, new Buffer(\"{}\"), false, (e?: ApiError) => {\n          if (noErrorTx(e, tx, cb)) {\n            tx.put(ROOT_NODE_ID, dirInode.toBuffer(), false, (e?: ApiError) => {\n              if (e) {\n                tx.abort(() => { cb(e); });\n              } else {\n                tx.commit(cb);\n              }\n            });\n          }\n        });\n      } else {\n        // We're good.\n        tx.commit(cb);\n      }\n    });\n  }\n\n  /**\n   * Helper function for findINode.\n   * @param parent The parent directory of the file we are attempting to find.\n   * @param filename The filename of the inode we are attempting to find, minus\n   *   the parent.\n   * @param cb Passed an error or the ID of the file's inode in the file system.\n   */\n  private _findINode(tx: AsyncKeyValueROTransaction, parent: string, filename: string, cb: (e: ApiError, id?: string) => void): void {\n    var handle_directory_listings = (e: ApiError, inode?: Inode, dirList?: {[name: string]: string}): void => {\n      if (e) {\n        cb(e)\n      } else if (dirList[filename]) {\n        cb(null, dirList[filename]);\n      } else {\n        cb(ApiError.ENOENT(path.resolve(parent, filename)));\n      }\n    };\n\n    if (parent === '/') {\n      if (filename === '') {\n        // BASE CASE #1: Return the root's ID.\n        cb(null, ROOT_NODE_ID);\n      } else {\n        // BASE CASE #2: Find the item in the root node.\n        this.getINode(tx, parent, ROOT_NODE_ID, (e: ApiError, inode?: Inode): void => {\n          if (noError(e, cb)) {\n            this.getDirListing(tx, parent, inode, (e: ApiError, dirList?: {[name: string]: string}): void => {\n              // handle_directory_listings will handle e for us.\n              handle_directory_listings(e, inode, dirList);\n            });\n          }\n        });\n      }\n    } else {\n      // Get the parent directory's INode, and find the file in its directory\n      // listing.\n      this.findINodeAndDirListing(tx, parent, handle_directory_listings);\n    }\n  }\n\n  /**\n   * Finds the Inode of the given path.\n   * @param p The path to look up.\n   * @param cb Passed an error or the Inode of the path p.\n   * @todo memoize/cache\n   */\n  private findINode(tx: AsyncKeyValueROTransaction, p: string, cb: (e: ApiError, inode?: Inode) => void): void {\n    this._findINode(tx, path.dirname(p), path.basename(p), (e: ApiError, id?: string): void => {\n      if (noError(e, cb)) {\n        this.getINode(tx, p, id, cb);\n      }\n    });\n  }\n\n  /**\n   * Given the ID of a node, retrieves the corresponding Inode.\n   * @param tx The transaction to use.\n   * @param p The corresponding path to the file (used for error messages).\n   * @param id The ID to look up.\n   * @param cb Passed an error or the inode under the given id.\n   */\n  private getINode(tx: AsyncKeyValueROTransaction, p: string, id: string, cb: (e: ApiError, inode?: Inode) => void): void {\n    tx.get(id, (e: ApiError, data?: NodeBuffer): void => {\n      if (noError(e, cb)) {\n        if (data === undefined) {\n          cb(ApiError.ENOENT(p));\n        } else {\n          cb(null, Inode.fromBuffer(data));\n        }\n      }\n    });\n  }\n\n  /**\n   * Given the Inode of a directory, retrieves the corresponding directory\n   * listing.\n   */\n  private getDirListing(tx: AsyncKeyValueROTransaction, p: string, inode: Inode, cb: (e: ApiError, listing?: { [fileName: string]: string }) => void): void {\n    if (!inode.isDirectory()) {\n      cb(ApiError.ENOTDIR(p));\n    } else {\n      tx.get(inode.id, (e: ApiError, data?: NodeBuffer): void => {\n        if (noError(e, cb)) {\n          try {\n            cb(null, JSON.parse(data.toString()));\n          } catch (e) {\n            // Occurs when data is undefined, or corresponds to something other\n            // than a directory listing. The latter should never occur unless\n            // the file system is corrupted.\n            cb(ApiError.ENOENT(p));\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * Given a path to a directory, retrieves the corresponding INode and\n   * directory listing.\n   */\n  private findINodeAndDirListing(tx: AsyncKeyValueROTransaction, p: string, cb: (e: ApiError, inode?: Inode, listing?: { [fileName: string]: string }) => void): void {\n    this.findINode(tx, p, (e: ApiError, inode?: Inode): void => {\n      if (noError(e, cb)) {\n        this.getDirListing(tx, p, inode, (e, listing?) => {\n          if (noError(e, cb)) {\n            cb(null, inode, listing);\n          }\n        });\n      }\n    });\n  }\n\n  /**\n   * Adds a new node under a random ID. Retries 5 times before giving up in\n   * the exceedingly unlikely chance that we try to reuse a random GUID.\n   * @param cb Passed an error or the GUID that the data was stored under.\n   */\n  private addNewNode(tx: AsyncKeyValueRWTransaction, data: NodeBuffer, cb: (e: ApiError, guid?: string) => void): void {\n    var retries = 0, currId: string,\n      reroll = () => {\n        if (++retries === 5) {\n          // Max retries hit. Return with an error.\n          cb(new ApiError(ErrorCode.EIO, 'Unable to commit data to key-value store.'));\n        } else {\n          // Try again.\n          currId = GenerateRandomID();\n          tx.put(currId, data, false, (e: ApiError, committed?: boolean) => {\n            if (e || !committed) {\n              reroll();\n            } else {\n              // Successfully stored under 'currId'.\n              cb(null, currId);\n            }\n          });\n        }\n      };\n    reroll();\n  }\n\n  /**\n   * Commits a new file (well, a FILE or a DIRECTORY) to the file system with\n   * the given mode.\n   * Note: This will commit the transaction.\n   * @param p The path to the new file.\n   * @param type The type of the new file.\n   * @param mode The mode to create the new file with.\n   * @param data The data to store at the file's data node.\n   * @param cb Passed an error or the Inode for the new file.\n   */\n  private commitNewFile(tx: AsyncKeyValueRWTransaction, p: string, type: FileType, mode: number, data: NodeBuffer, cb: (e: ApiError, inode?: Inode) => void): void {\n    var parentDir = path.dirname(p),\n      fname = path.basename(p),\n      currTime = (new Date()).getTime();\n\n    // Invariant: The root always exists.\n    // If we don't check this prior to taking steps below, we will create a\n    // file with name '' in root should p == '/'.\n    if (p === '/') {\n      return cb(ApiError.EEXIST(p));\n    }\n\n    // Let's build a pyramid of code!\n\n    // Step 1: Get the parent directory's inode and directory listing\n    this.findINodeAndDirListing(tx, parentDir, (e: ApiError, parentNode?: Inode, dirListing?: {[name: string]: string}): void => {\n      if (noErrorTx(e, tx, cb)) {\n        if (dirListing[fname]) {\n          // File already exists.\n          tx.abort(() => {\n            cb(ApiError.EEXIST(p));\n          });\n        } else {\n          // Step 2: Commit data to store.\n          this.addNewNode(tx, data, (e: ApiError, dataId?: string): void => {\n            if (noErrorTx(e, tx, cb)) {\n              // Step 3: Commit the file's inode to the store.\n              var fileInode = new Inode(dataId, data.length, mode | type, currTime, currTime, currTime);\n              this.addNewNode(tx, fileInode.toBuffer(), (e: ApiError, fileInodeId?: string): void => {\n                if (noErrorTx(e, tx, cb)) {\n                  // Step 4: Update parent directory's listing.\n                  dirListing[fname] = fileInodeId;\n                  tx.put(parentNode.id, new Buffer(JSON.stringify(dirListing)), true, (e: ApiError): void => {\n                    if (noErrorTx(e, tx, cb)) {\n                      // Step 5: Commit and return the new inode.\n                      tx.commit((e?: ApiError): void => {\n                        if (noErrorTx(e, tx, cb)) {\n                          cb(null, fileInode);\n                        }\n                      });\n                    }\n                  });\n                }\n              });\n            }\n          });\n        }\n      }\n    });\n  }\n\n  /**\n   * Delete all contents stored in the file system.\n   */\n  public empty(cb: (e?: ApiError) => void): void {\n    this.store.clear((e?) => {\n      if (noError(e, cb)) {\n        // INVARIANT: Root always exists.\n        this.makeRootDirectory(cb);\n      }\n    });\n  }\n\n  public rename(oldPath: string, newPath: string, cb: (e?: ApiError) => void): void {\n    var tx = this.store.beginTransaction('readwrite'),\n      oldParent = path.dirname(oldPath), oldName = path.basename(oldPath),\n      newParent = path.dirname(newPath), newName = path.basename(newPath),\n      inodes: { [path: string]: Inode } = {},\n      lists: {\n        [path: string]: { [file: string]: string }\n      } = {},\n      errorOccurred: boolean = false;\n\n    // Invariant: Can't move a folder inside itself.\n    // This funny little hack ensures that the check passes only if oldPath\n    // is a subpath of newParent. We append '/' to avoid matching folders that\n    // are a substring of the bottom-most folder in the path.\n    if ((newParent + '/').indexOf(oldPath + '/') === 0) {\n      return cb(new ApiError(ErrorCode.EBUSY, oldParent));\n    }\n\n    /**\n     * Responsible for Phase 2 of the rename operation: Modifying and\n     * committing the directory listings. Called once we have successfully\n     * retrieved both the old and new parent's inodes and listings.\n     */\n    var theOleSwitcharoo = (): void => {\n      // Sanity check: Ensure both paths are present, and no error has occurred.\n      if (errorOccurred || !lists.hasOwnProperty(oldParent) || !lists.hasOwnProperty(newParent)) {\n        return;\n      }\n      var oldParentList = lists[oldParent], oldParentINode = inodes[oldParent],\n        newParentList = lists[newParent], newParentINode = inodes[newParent];\n\n      // Delete file from old parent.\n      if (!oldParentList[oldName]) {\n        cb(ApiError.ENOENT(oldPath));\n      } else {\n        var fileId = oldParentList[oldName];\n        delete oldParentList[oldName];\n\n        // Finishes off the renaming process by adding the file to the new\n        // parent.\n        var completeRename = () => {\n          newParentList[newName] = fileId;\n          // Commit old parent's list.\n          tx.put(oldParentINode.id, new Buffer(JSON.stringify(oldParentList)), true, (e: ApiError) => {\n            if (noErrorTx(e, tx, cb)) {\n              if (oldParent === newParent) {\n                // DONE!\n                tx.commit(cb);\n              } else {\n                // Commit new parent's list.\n                tx.put(newParentINode.id, new Buffer(JSON.stringify(newParentList)), true, (e: ApiError) => {\n                  if (noErrorTx(e, tx, cb)) {\n                    tx.commit(cb);\n                  }\n                });\n              }\n            }\n          });\n        };\n\n        if (newParentList[newName]) {\n          // 'newPath' already exists. Check if it's a file or a directory, and\n          // act accordingly.\n          this.getINode(tx, newPath, newParentList[newName], (e: ApiError, inode?: Inode) => {\n            if (noErrorTx(e, tx, cb)) {\n              if (inode.isFile()) {\n                // Delete the file and continue.\n                tx.del(inode.id, (e?: ApiError) => {\n                  if (noErrorTx(e, tx, cb)) {\n                    tx.del(newParentList[newName], (e?: ApiError) => {\n                      if (noErrorTx(e, tx, cb)) {\n                        completeRename();\n                      }\n                    });\n                  }\n                });\n              } else {\n                // Can't overwrite a directory using rename.\n                tx.abort((e?) => {\n                  cb(ApiError.EPERM(newPath));\n                });\n              }\n            }\n          });\n        } else {\n          completeRename();\n        }\n      }\n    };\n\n    /**\n     * Grabs a path's inode and directory listing, and shoves it into the\n     * inodes and lists hashes.\n     */\n    var processInodeAndListings = (p: string): void => {\n      this.findINodeAndDirListing(tx, p, (e: ApiError, node?: Inode, dirList?: {[name: string]: string}): void => {\n        if (e) {\n          if (!errorOccurred) {\n            errorOccurred = true;\n            tx.abort(() => {\n              cb(e);\n            });\n          }\n          // If error has occurred already, just stop here.\n        } else {\n          inodes[p] = node;\n          lists[p] = dirList;\n          theOleSwitcharoo();\n        }\n      });\n    };\n\n    processInodeAndListings(oldParent);\n    if (oldParent !== newParent) {\n      processInodeAndListings(newParent);\n    }\n  }\n\n  public stat(p: string, isLstat: boolean, cb: (err: ApiError, stat?: Stats) => void): void {\n    var tx = this.store.beginTransaction('readonly');\n    this.findINode(tx, p, (e: ApiError, inode?: Inode): void => {\n      if (noError(e, cb)) {\n        cb(null, inode.toStats());\n      }\n    });\n  }\n\n  public createFile(p: string, flag: file_flag.FileFlag, mode: number, cb: (e: ApiError, file?: file.File) => void): void {\n    var tx = this.store.beginTransaction('readwrite'),\n      data = new Buffer(0);\n\n    this.commitNewFile(tx, p, FileType.FILE, mode, data, (e: ApiError, newFile?: Inode): void => {\n      if (noError(e, cb)) {\n        cb(null, new AsyncKeyValueFile(this, p, flag, newFile.toStats(), data));\n      }\n    });\n  }\n\n  public openFile(p: string, flag: file_flag.FileFlag, cb: (e: ApiError, file?: file.File) => void): void {\n    var tx = this.store.beginTransaction('readonly');\n    // Step 1: Grab the file's inode.\n    this.findINode(tx, p, (e: ApiError, inode?: Inode) => {\n      if (noError(e, cb)) {\n        // Step 2: Grab the file's data.\n        tx.get(inode.id, (e: ApiError, data?: NodeBuffer): void => {\n          if (noError(e, cb)) {\n            if (data === undefined) {\n              cb(ApiError.ENOENT(p));\n            } else {\n              cb(null, new AsyncKeyValueFile(this, p, flag, inode.toStats(), data));\n            }\n          }\n        });\n      }\n    });\n  }\n\n  /**\n   * Remove all traces of the given path from the file system.\n   * @param p The path to remove from the file system.\n   * @param isDir Does the path belong to a directory, or a file?\n   * @todo Update mtime.\n   */\n  private removeEntry(p: string, isDir: boolean, cb: (e?: ApiError) => void): void {\n    var tx = this.store.beginTransaction('readwrite'),\n      parent: string = path.dirname(p), fileName: string = path.basename(p);\n    // Step 1: Get parent directory's node and directory listing.\n    this.findINodeAndDirListing(tx, parent, (e: ApiError, parentNode?: Inode, parentListing?: {[name: string]: string}): void => {\n      if (noErrorTx(e, tx, cb)) {\n        if (!parentListing[fileName]) {\n          tx.abort(() => {\n            cb(ApiError.ENOENT(p));\n          });\n        } else {\n          // Remove from directory listing of parent.\n          var fileNodeId = parentListing[fileName];\n          delete parentListing[fileName];\n          // Step 2: Get file inode.\n          this.getINode(tx, p, fileNodeId, (e: ApiError, fileNode?: Inode): void => {\n            if (noErrorTx(e, tx, cb)) {\n              if (!isDir && fileNode.isDirectory()) {\n                tx.abort(() => {\n                  cb(ApiError.EISDIR(p));\n                });\n              } else if (isDir && !fileNode.isDirectory()) {\n                tx.abort(() => {\n                  cb(ApiError.ENOTDIR(p));\n                });\n              } else {\n                // Step 3: Delete data.\n                tx.del(fileNode.id, (e?: ApiError): void => {\n                  if (noErrorTx(e, tx, cb)) {\n                    // Step 4: Delete node.\n                    tx.del(fileNodeId, (e?: ApiError): void => {\n                      if (noErrorTx(e, tx, cb)) {\n                        // Step 5: Update directory listing.\n                        tx.put(parentNode.id, new Buffer(JSON.stringify(parentListing)), true, (e: ApiError): void => {\n                          if (noErrorTx(e, tx, cb)) {\n                            tx.commit(cb);\n                          }\n                        });\n                      }\n                    });\n                  }\n                });\n              }\n            }\n          });\n        }\n      }\n    });\n  }\n\n  public unlink(p: string, cb: (e?: ApiError) => void): void {\n    this.removeEntry(p, false, cb);\n  }\n\n  public rmdir(p: string, cb: (e?: ApiError) => void): void {\n    // Check first if directory is empty.\n    this.readdir(p, (err, files?) => {\n      if (err) {\n        cb(err);\n      } else if (files.length > 0) {\n        cb(ApiError.ENOTEMPTY(p));\n      } else {\n        this.removeEntry(p, true, cb);\n      }\n    });\n  }\n\n  public mkdir(p: string, mode: number, cb: (e?: ApiError) => void): void {\n    var tx = this.store.beginTransaction('readwrite'),\n      data = new Buffer('{}');\n    this.commitNewFile(tx, p, FileType.DIRECTORY, mode, data, cb);\n  }\n\n  public readdir(p: string, cb: (err: ApiError, files?: string[]) => void): void {\n    var tx = this.store.beginTransaction('readonly');\n    this.findINode(tx, p, (e: ApiError, inode?: Inode) => {\n      if (noError(e, cb)) {\n        this.getDirListing(tx, p, inode, (e: ApiError, dirListing?: {[name: string]: string}) => {\n          if (noError(e, cb)) {\n            cb(null, Object.keys(dirListing));\n          }\n        });\n      }\n    });\n  }\n\n  public _sync(p: string, data: NodeBuffer, stats: Stats, cb: (e?: ApiError) => void): void {\n    // @todo Ensure mtime updates properly, and use that to determine if a data\n    //       update is required.\n    var tx = this.store.beginTransaction('readwrite');\n    // Step 1: Get the file node's ID.\n    this._findINode(tx, path.dirname(p), path.basename(p), (e: ApiError, fileInodeId?: string): void => {\n      if (noErrorTx(e, tx, cb)) {\n        // Step 2: Get the file inode.\n        this.getINode(tx, p, fileInodeId, (e: ApiError, fileInode?: Inode): void => {\n          if (noErrorTx(e, tx, cb)) {\n            var inodeChanged: boolean = fileInode.update(stats);\n            // Step 3: Sync the data.\n            tx.put(fileInode.id, data, true, (e: ApiError): void => {\n              if (noErrorTx(e, tx, cb)) {\n                // Step 4: Sync the metadata (if it changed)!\n                if (inodeChanged) {\n                  tx.put(fileInodeId, fileInode.toBuffer(), true, (e: ApiError): void => {\n                    if (noErrorTx(e, tx, cb)) {\n                      tx.commit(cb);\n                    }\n                  });\n                } else {\n                  // No need to sync metadata; return.\n                  tx.commit(cb);\n                }\n              }\n            });\n          }\n        });\n      }\n    });\n  }\n}\n","import Mutex from './mutex';\nimport {FileSystem, SynchronousFileSystem} from '../core/file_system';\nimport {ApiError, ErrorCode} from '../core/api_error';\nimport {FileFlag, ActionType} from '../core/file_flag';\nimport {default as Stats, FileType} from '../core/node_fs_stats';\nimport {File} from '../core/file';\n\n\n/// This class serializes access to an underlying async filesystem.\n/// For example, on an OverlayFS instance with an async lower\n/// directory operations like rename and rmdir may involve multiple\n/// requests involving both the upper and lower filesystems -- they\n/// are not executed in a single atomic step.  OverlayFS uses this\n/// LockedFS to avoid having to reason about the correctness of\n/// multiple requests interleaving.\nexport default class LockedFS<T extends FileSystem> implements FileSystem {\n  private _fs: T;\n  private _mu: Mutex;\n\n  constructor(fs: T) {\n    this._fs = fs;\n    this._mu = new Mutex();\n  }\n\n  getName(): string {\n    return 'LockedFS<' + this._fs.getName()  + '>';\n  }\n\n  getFSUnlocked(): T {\n    return this._fs;\n  }\n\n  initialize(cb: (err?: ApiError) => void): void {\n    // FIXME: check to see if FS supports initialization\n    (<any>this._fs).initialize(cb);\n  }\n\n  diskSpace(p: string, cb: (total: number, free: number) => any): void {\n    // FIXME: should this lock?\n    this._fs.diskSpace(p, cb);\n  }\n\n  isReadOnly(): boolean {\n    return this._fs.isReadOnly();\n  }\n\n  supportsLinks(): boolean {\n    return this._fs.supportsLinks();\n  }\n\n  supportsProps(): boolean {\n    return this._fs.supportsProps();\n  }\n\n  supportsSynch(): boolean {\n    return this._fs.supportsSynch();\n  }\n\n  rename(oldPath: string, newPath: string, cb: (err?: ApiError) => void): void {\n    this._mu.lock(() => {\n      this._fs.rename(oldPath, newPath, (err?: ApiError) => {\n        this._mu.unlock();\n        cb(err);\n      });\n    });\n  }\n\n  renameSync(oldPath: string, newPath: string): void {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.renameSync(oldPath, newPath);\n  }\n\n  stat(p: string, isLstat: boolean, cb: (err: ApiError, stat?: Stats) => void): void {\n    this._mu.lock(() => {\n      this._fs.stat(p, isLstat, (err?: ApiError, stat?: Stats) => {\n        this._mu.unlock();\n        cb(err, stat);\n      });\n    });\n  }\n\n  statSync(p: string, isLstat: boolean): Stats {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.statSync(p, isLstat);\n  }\n\n  open(p: string, flag: FileFlag, mode: number, cb: (err: ApiError, fd?: File) => any): void {\n    this._mu.lock(() => {\n      this._fs.open(p, flag, mode, (err?: ApiError, fd?: File) => {\n        this._mu.unlock();\n        cb(err, fd);\n      });\n    });\n  }\n\n  openSync(p: string, flag: FileFlag, mode: number): File {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.openSync(p, flag, mode);\n  }\n\n  unlink(p: string, cb: Function): void {\n    this._mu.lock(() => {\n      this._fs.unlink(p, (err?: ApiError) => {\n        this._mu.unlock();\n        cb(err);\n      });\n    });\n  }\n\n  unlinkSync(p: string): void {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.unlinkSync(p);\n  }\n\n  rmdir(p: string, cb: Function): void {\n    this._mu.lock(() => {\n      this._fs.rmdir(p, (err?: ApiError) => {\n        this._mu.unlock();\n        cb(err);\n      });\n    });\n  }\n\n  rmdirSync(p: string): void {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.rmdirSync(p);\n  }\n\n  mkdir(p: string, mode: number, cb: Function): void {\n    this._mu.lock(() => {\n      this._fs.mkdir(p, mode, (err?: ApiError) => {\n        this._mu.unlock();\n        cb(err);\n      });\n    });\n  }\n\n  mkdirSync(p: string, mode: number): void {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.mkdirSync(p, mode);\n  }\n\n  readdir(p: string, cb: (err: ApiError, files?: string[]) => void): void {\n    this._mu.lock(() => {\n      this._fs.readdir(p, (err?: ApiError, files?: string[]) => {\n        this._mu.unlock();\n        cb(err, files);\n      });\n    });\n  }\n\n  readdirSync(p: string): string[] {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.readdirSync(p);\n  }\n\n  exists(p: string, cb: (exists: boolean) => void): void {\n    this._mu.lock(() => {\n      this._fs.exists(p, (exists: boolean) => {\n        this._mu.unlock();\n        cb(exists);\n      });\n    });\n  }\n\n  existsSync(p: string): boolean {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.existsSync(p);\n  }\n\n  realpath(p: string, cache: {[path: string]: string}, cb: (err: ApiError, resolvedPath?: string) => any): void {\n    this._mu.lock(() => {\n      this._fs.realpath(p, cache, (err?: ApiError, resolvedPath?: string) => {\n        this._mu.unlock();\n        cb(err, resolvedPath);\n      });\n    });\n  }\n\n  realpathSync(p: string, cache: {[path: string]: string}): string {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.realpathSync(p, cache);\n  }\n\n  truncate(p: string, len: number, cb: Function): void {\n    this._mu.lock(() => {\n      this._fs.truncate(p, len, (err?: ApiError) => {\n        this._mu.unlock();\n        cb(err);\n      });\n    });\n  }\n\n  truncateSync(p: string, len: number): void {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.truncateSync(p, len);\n  }\n\n  readFile(fname: string, encoding: string, flag: FileFlag, cb: (err: ApiError, data?: any) => void): void {\n    this._mu.lock(() => {\n      this._fs.readFile(fname, encoding, flag, (err?: ApiError, data?: any) => {\n        this._mu.unlock();\n        cb(err, data);\n      });\n    });\n  }\n\n  readFileSync(fname: string, encoding: string, flag: FileFlag): any {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.readFileSync(fname, encoding, flag);\n  }\n\n  writeFile(fname: string, data: any, encoding: string, flag: FileFlag, mode: number, cb: (err: ApiError) => void): void {\n    this._mu.lock(() => {\n      this._fs.writeFile(fname, data, encoding, flag, mode, (err?: ApiError) => {\n        this._mu.unlock();\n        cb(err);\n      });\n    });\n  }\n\n  writeFileSync(fname: string, data: any, encoding: string, flag: FileFlag, mode: number): void {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.writeFileSync(fname, data, encoding, flag, mode);\n  }\n\n  appendFile(fname: string, data: any, encoding: string, flag: FileFlag, mode: number, cb: (err: ApiError) => void): void {\n    this._mu.lock(() => {\n      this._fs.appendFile(fname, data, encoding, flag, mode, (err?: ApiError) => {\n        this._mu.unlock();\n        cb(err);\n      });\n    });\n  }\n\n  appendFileSync(fname: string, data: any, encoding: string, flag: FileFlag, mode: number): void {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.appendFileSync(fname, data, encoding, flag, mode);\n  }\n\n  chmod(p: string, isLchmod: boolean, mode: number, cb: Function): void {\n    this._mu.lock(() => {\n      this._fs.chmod(p, isLchmod, mode, (err?: ApiError) => {\n        this._mu.unlock();\n        cb(err);\n      });\n    });\n  }\n\n  chmodSync(p: string, isLchmod: boolean, mode: number): void {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.chmodSync(p, isLchmod, mode);\n  }\n\n  chown(p: string, isLchown: boolean, uid: number, gid: number, cb: Function): void {\n    this._mu.lock(() => {\n      this._fs.chown(p, isLchown, uid, gid, (err?: ApiError) => {\n        this._mu.unlock();\n        cb(err);\n      });\n    });\n  }\n\n  chownSync(p: string, isLchown: boolean, uid: number, gid: number): void {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.chownSync(p, isLchown, uid, gid);\n  }\n\n  utimes(p: string, atime: Date, mtime: Date, cb: Function): void {\n    this._mu.lock(() => {\n      this._fs.utimes(p, atime, mtime, (err?: ApiError) => {\n        this._mu.unlock();\n        cb(err);\n      });\n    });\n  }\n\n  utimesSync(p: string, atime: Date, mtime: Date): void {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.utimesSync(p, atime, mtime);\n  }\n\n  link(srcpath: string, dstpath: string, cb: Function): void {\n    this._mu.lock(() => {\n      this._fs.link(srcpath, dstpath, (err?: ApiError) => {\n        this._mu.unlock();\n        cb(err);\n      });\n    });\n  }\n\n  linkSync(srcpath: string, dstpath: string): void {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.linkSync(srcpath, dstpath);\n  }\n\n  symlink(srcpath: string, dstpath: string, type: string, cb: Function): void {\n    this._mu.lock(() => {\n      this._fs.symlink(srcpath, dstpath, type, (err?: ApiError) => {\n        this._mu.unlock();\n        cb(err);\n      });\n    });\n  }\n\n  symlinkSync(srcpath: string, dstpath: string, type: string): void {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.symlinkSync(srcpath, dstpath, type);\n  }\n\n  readlink(p: string, cb: Function): void {\n    this._mu.lock(() => {\n      this._fs.readlink(p, (err?: ApiError, linkString?: string) => {\n        this._mu.unlock();\n        cb(err, linkString);\n      });\n    });\n  }\n\n  readlinkSync(p: string): string {\n    if (this._mu.isLocked())\n      throw new Error('invalid sync call');\n    return this._fs.readlinkSync(p);\n  }\n}\n","\ndeclare var setImmediate: (cb: Function) => void;\n\n/// non-recursive mutex\nexport default class Mutex {\n  private _locked: boolean = false;\n  private _waiters: Function[] = [];\n\n  lock(cb: Function): void {\n    if (this._locked) {\n      this._waiters.push(cb);\n      return;\n    }\n    this._locked = true;\n    cb();\n  }\n\n  unlock(): void {\n    if (!this._locked)\n      throw new Error('unlock of a non-locked mutex');\n\n    let next = this._waiters.shift();\n    // don't unlock - we want to queue up next for the\n    // _end_ of the current task execution, but we don't\n    // want it to be called inline with whatever the\n    // current stack is.  This way we still get the nice\n    // behavior that an unlock immediately followed by a\n    // lock won't cause starvation.\n    if (next) {\n      setImmediate(next);\n      return;\n    }\n\n    this._locked = false;\n  }\n\n  tryLock(): boolean {\n    if (this._locked)\n      return false;\n\n    this._locked = true;\n    return true;\n  }\n\n  isLocked(): boolean {\n    return this._locked;\n  }\n}\n","import file = require('../core/file');\nimport file_system = require('../core/file_system');\nimport Stats from '../core/node_fs_stats';\nimport {FileFlag} from '../core/file_flag';\nimport {ApiError, ErrorCode} from '../core/api_error';\nimport fs = require('../core/node_fs');\n\n/**\n * An implementation of the File interface that operates on a file that is\n * completely in-memory. PreloadFiles are backed by a Buffer.\n *\n * This is also an abstract class, as it lacks an implementation of 'sync' and\n * 'close'. Each filesystem that wishes to use this file representation must\n * extend this class and implement those two methods.\n * @todo 'close' lever that disables functionality once closed.\n */\nexport class PreloadFile<T extends file_system.FileSystem> extends file.BaseFile {\n  private _pos: number = 0;\n  private _path: string;\n  protected _fs: T;\n  private _stat: Stats;\n  private _flag: FileFlag;\n  private _buffer: NodeBuffer;\n  private _dirty: boolean = false;\n  /**\n   * Creates a file with the given path and, optionally, the given contents. Note\n   * that, if contents is specified, it will be mutated by the file!\n   * @param [BrowserFS.FileSystem] _fs The file system that created the file.\n   * @param [String] _path\n   * @param [BrowserFS.FileMode] _mode The mode that the file was opened using.\n   *   Dictates permissions and where the file pointer starts.\n   * @param [BrowserFS.node.fs.Stats] _stat The stats object for the given file.\n   *   PreloadFile will mutate this object. Note that this object must contain\n   *   the appropriate mode that the file was opened as.\n   * @param [BrowserFS.node.Buffer?] contents A buffer containing the entire\n   *   contents of the file. PreloadFile will mutate this buffer. If not\n   *   specified, we assume it is a new file.\n   */\n  constructor(_fs: T, _path: string, _flag: FileFlag, _stat: Stats, contents?: NodeBuffer) {\n    super();\n    this._fs = _fs;\n    this._path = _path;\n    this._flag = _flag;\n    this._stat = _stat;\n    if (contents != null) {\n      this._buffer = contents;\n    } else {\n      // Empty buffer. It'll expand once we write stuff to it.\n      this._buffer = new Buffer(0);\n    }\n    // Note: This invariant is *not* maintained once the file starts getting\n    // modified.\n    // Note: Only actually matters if file is readable, as writeable modes may\n    // truncate/append to file.\n    if (this._stat.size !== this._buffer.length && this._flag.isReadable()) {\n      throw new Error(\"Invalid buffer: Buffer is \" + this._buffer.length + \" long, yet Stats object specifies that file is \" + this._stat.size + \" long.\");\n    }\n  }\n\n  protected isDirty(): boolean {\n    return this._dirty;\n  }\n\n  /**\n   * Resets the dirty bit. Should only be called after a sync has completed successfully.\n   */\n  protected resetDirty() {\n    this._dirty = false;\n  }\n\n  /**\n   * NONSTANDARD: Get the underlying buffer for this file. !!DO NOT MUTATE!! Will mess up dirty tracking.\n   */\n  public getBuffer(): NodeBuffer {\n    return this._buffer;\n  }\n\n  /**\n   * NONSTANDARD: Get underlying stats for this file. !!DO NOT MUTATE!!\n   */\n  public getStats(): Stats {\n    return this._stat;\n  }\n\n  public getFlag(): FileFlag {\n    return this._flag;\n  }\n\n  /**\n   * Get the path to this file.\n   * @return [String] The path to the file.\n   */\n  public getPath(): string {\n    return this._path;\n  }\n\n  /**\n   * Get the current file position.\n   *\n   * We emulate the following bug mentioned in the Node documentation:\n   * > On Linux, positional writes don't work when the file is opened in append\n   *   mode. The kernel ignores the position argument and always appends the data\n   *   to the end of the file.\n   * @return [Number] The current file position.\n   */\n  public getPos(): number {\n    if (this._flag.isAppendable()) {\n      return this._stat.size;\n    }\n    return this._pos;\n  }\n\n  /**\n   * Advance the current file position by the indicated number of positions.\n   * @param [Number] delta\n   */\n  public advancePos(delta: number): number {\n    return this._pos += delta;\n  }\n\n  /**\n   * Set the file position.\n   * @param [Number] newPos\n   */\n  public setPos(newPos: number): number {\n    return this._pos = newPos;\n  }\n\n  /**\n   * **Core**: Asynchronous sync. Must be implemented by subclasses of this\n   * class.\n   * @param [Function(BrowserFS.ApiError)] cb\n   */\n  public sync(cb: (e?: ApiError) => void): void {\n    try {\n      this.syncSync();\n      cb();\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  /**\n   * **Core**: Synchronous sync.\n   */\n  public syncSync(): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n\n  /**\n   * **Core**: Asynchronous close. Must be implemented by subclasses of this\n   * class.\n   * @param [Function(BrowserFS.ApiError)] cb\n   */\n  public close(cb: (e?: ApiError) => void): void {\n    try {\n      this.closeSync();\n      cb();\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  /**\n   * **Core**: Synchronous close.\n   */\n  public closeSync(): void {\n    throw new ApiError(ErrorCode.ENOTSUP);\n  }\n\n  /**\n   * Asynchronous `stat`.\n   * @param [Function(BrowserFS.ApiError, BrowserFS.node.fs.Stats)] cb\n   */\n  public stat(cb: (e: ApiError, stat?: Stats) => void): void {\n    try {\n      cb(null, this._stat.clone());\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  /**\n   * Synchronous `stat`.\n   */\n  public statSync(): Stats {\n    return this._stat.clone();\n  }\n\n  /**\n   * Asynchronous truncate.\n   * @param [Number] len\n   * @param [Function(BrowserFS.ApiError)] cb\n   */\n  public truncate(len: number, cb: (e?: ApiError) => void): void {\n    try {\n      this.truncateSync(len);\n      if (this._flag.isSynchronous() && !fs.getRootFS().supportsSynch()) {\n        this.sync(cb);\n      }\n      cb();\n    } catch (e) {\n      return cb(e);\n    }\n  }\n\n  /**\n   * Synchronous truncate.\n   * @param [Number] len\n   */\n  public truncateSync(len: number): void {\n    this._dirty = true;\n    if (!this._flag.isWriteable()) {\n      throw new ApiError(ErrorCode.EPERM, 'File not opened with a writeable mode.');\n    }\n    this._stat.mtime = new Date();\n    if (len > this._buffer.length) {\n      var buf = new Buffer(len - this._buffer.length);\n      buf.fill(0);\n      // Write will set @_stat.size for us.\n      this.writeSync(buf, 0, buf.length, this._buffer.length);\n      if (this._flag.isSynchronous() && fs.getRootFS().supportsSynch()) {\n        this.syncSync();\n      }\n      return;\n    }\n    this._stat.size = len;\n    // Truncate buffer to 'len'.\n    var newBuff = new Buffer(len);\n    this._buffer.copy(newBuff, 0, 0, len);\n    this._buffer = newBuff;\n    if (this._flag.isSynchronous() && fs.getRootFS().supportsSynch()) {\n      this.syncSync();\n    }\n  }\n\n  /**\n   * Write buffer to the file.\n   * Note that it is unsafe to use fs.write multiple times on the same file\n   * without waiting for the callback.\n   * @param [BrowserFS.node.Buffer] buffer Buffer containing the data to write to\n   *  the file.\n   * @param [Number] offset Offset in the buffer to start reading data from.\n   * @param [Number] length The amount of bytes to write to the file.\n   * @param [Number] position Offset from the beginning of the file where this\n   *   data should be written. If position is null, the data will be written at\n   *   the current position.\n   * @param [Function(BrowserFS.ApiError, Number, BrowserFS.node.Buffer)]\n   *   cb The number specifies the number of bytes written into the file.\n   */\n  public write(buffer: NodeBuffer, offset: number, length: number, position: number, cb: (e: ApiError, len?: number, buff?: NodeBuffer) => void): void {\n    try {\n      cb(null, this.writeSync(buffer, offset, length, position), buffer);\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  /**\n   * Write buffer to the file.\n   * Note that it is unsafe to use fs.writeSync multiple times on the same file\n   * without waiting for the callback.\n   * @param [BrowserFS.node.Buffer] buffer Buffer containing the data to write to\n   *  the file.\n   * @param [Number] offset Offset in the buffer to start reading data from.\n   * @param [Number] length The amount of bytes to write to the file.\n   * @param [Number] position Offset from the beginning of the file where this\n   *   data should be written. If position is null, the data will be written at\n   *   the current position.\n   * @return [Number]\n   */\n  public writeSync(buffer: NodeBuffer, offset: number, length: number, position: number): number {\n    this._dirty = true;\n    if (position == null) {\n      position = this.getPos();\n    }\n    if (!this._flag.isWriteable()) {\n      throw new ApiError(ErrorCode.EPERM, 'File not opened with a writeable mode.');\n    }\n    var endFp = position + length;\n    if (endFp > this._stat.size) {\n      this._stat.size = endFp;\n      if (endFp > this._buffer.length) {\n        // Extend the buffer!\n        var newBuff = new Buffer(endFp);\n        this._buffer.copy(newBuff);\n        this._buffer = newBuff;\n      }\n    }\n    var len = buffer.copy(this._buffer, position, offset, offset + length);\n    this._stat.mtime = new Date();\n    if (this._flag.isSynchronous()) {\n      this.syncSync();\n      return len;\n    }\n    this.setPos(position + len);\n    return len;\n  }\n\n  /**\n   * Read data from the file.\n   * @param [BrowserFS.node.Buffer] buffer The buffer that the data will be\n   *   written to.\n   * @param [Number] offset The offset within the buffer where writing will\n   *   start.\n   * @param [Number] length An integer specifying the number of bytes to read.\n   * @param [Number] position An integer specifying where to begin reading from\n   *   in the file. If position is null, data will be read from the current file\n   *   position.\n   * @param [Function(BrowserFS.ApiError, Number, BrowserFS.node.Buffer)] cb The\n   *   number is the number of bytes read\n   */\n  public read(buffer: NodeBuffer, offset: number, length: number, position: number, cb: (e: ApiError, len?: number, buff?: NodeBuffer) => void): void {\n    try {\n      cb(null, this.readSync(buffer, offset, length, position), buffer);\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  /**\n   * Read data from the file.\n   * @param [BrowserFS.node.Buffer] buffer The buffer that the data will be\n   *   written to.\n   * @param [Number] offset The offset within the buffer where writing will\n   *   start.\n   * @param [Number] length An integer specifying the number of bytes to read.\n   * @param [Number] position An integer specifying where to begin reading from\n   *   in the file. If position is null, data will be read from the current file\n   *   position.\n   * @return [Number]\n   */\n  public readSync(buffer: NodeBuffer, offset: number, length: number, position: number): number {\n    if (!this._flag.isReadable()) {\n      throw new ApiError(ErrorCode.EPERM, 'File not opened with a readable mode.');\n    }\n    if (position == null) {\n      position = this.getPos();\n    }\n    var endRead = position + length;\n    if (endRead > this._stat.size) {\n      length = this._stat.size - position;\n    }\n    var rv = this._buffer.copy(buffer, offset, position, position + length);\n    this._stat.atime = new Date();\n    this._pos = position + length;\n    return rv;\n  }\n\n  /**\n   * Asynchronous `fchmod`.\n   * @param [Number|String] mode\n   * @param [Function(BrowserFS.ApiError)] cb\n   */\n  public chmod(mode: number, cb: (e?: ApiError) => void): void {\n    try {\n      this.chmodSync(mode);\n      cb();\n    } catch (e) {\n      cb(e);\n    }\n  }\n\n  /**\n   * Asynchronous `fchmod`.\n   * @param [Number] mode\n   */\n  public chmodSync(mode: number): void {\n    if (!this._fs.supportsProps()) {\n      throw new ApiError(ErrorCode.ENOTSUP);\n    }\n    this._dirty = true;\n    this._stat.chmod(mode);\n    this.syncSync();\n  }\n}\n\n/**\n * File class for the InMemory and XHR file systems.\n * Doesn't sync to anything, so it works nicely for memory-only files.\n */\nexport class NoSyncFile<T extends file_system.FileSystem> extends PreloadFile<T> implements file.File {\n  constructor(_fs: T, _path: string, _flag: FileFlag, _stat: Stats, contents?: NodeBuffer) {\n    super(_fs, _path, _flag, _stat, contents);\n  }\n  /**\n   * Asynchronous sync. Doesn't do anything, simply calls the cb.\n   * @param [Function(BrowserFS.ApiError)] cb\n   */\n  public sync(cb: (e?: ApiError) => void): void {\n    cb();\n  }\n  /**\n   * Synchronous sync. Doesn't do anything.\n   */\n  public syncSync(): void {}\n  /**\n   * Asynchronous close. Doesn't do anything, simply calls the cb.\n   * @param [Function(BrowserFS.ApiError)] cb\n   */\n  public close(cb: (e?: ApiError) => void): void {\n    cb();\n  }\n  /**\n   * Synchronous close. Doesn't do anything.\n   */\n  public closeSync(): void {}\n}\n","/**\n * Contains utility methods for performing a variety of tasks with\n * XmlHttpRequest across browsers.\n */\n\nimport util = require('../core/util');\nimport {ApiError, ErrorCode} from '../core/api_error';\n\n// See core/polyfills for the VBScript definition of these functions.\ndeclare var IEBinaryToArray_ByteStr: (vbarr: any) => string;\ndeclare var IEBinaryToArray_ByteStr_Last: (vbarr: any) => string;\n// Converts 'responseBody' in IE into the equivalent 'responseText' that other\n// browsers would generate.\nfunction getIEByteArray(IEByteArray: any): number[] {\n  var rawBytes = IEBinaryToArray_ByteStr(IEByteArray);\n  var lastChr = IEBinaryToArray_ByteStr_Last(IEByteArray);\n  var data_str = rawBytes.replace(/[\\s\\S]/g, function(match) {\n    var v = match.charCodeAt(0)\n    return String.fromCharCode(v&0xff, v>>8)\n  }) + lastChr;\n  var data_array = new Array(data_str.length);\n  for (var i = 0; i < data_str.length; i++) {\n    data_array[i] = data_str.charCodeAt(i);\n  }\n  return data_array;\n}\n\nfunction downloadFileIE(async: boolean, p: string, type: string, cb: (err: ApiError, data?: any) => void): void {\n  switch(type) {\n    case 'buffer':\n      // Fallthrough\n    case 'json':\n      break;\n    default:\n      return cb(new ApiError(ErrorCode.EINVAL, \"Invalid download type: \" + type));\n  }\n\n  var req = new XMLHttpRequest();\n  req.open('GET', p, async);\n  req.setRequestHeader(\"Accept-Charset\", \"x-user-defined\");\n  req.onreadystatechange = function(e) {\n    var data_array;\n    if (req.readyState === 4) {\n      if (req.status === 200) {\n        switch(type) {\n          case 'buffer':\n            data_array = getIEByteArray(req.responseBody);\n            return cb(null, new Buffer(data_array));\n          case 'json':\n            return cb(null, JSON.parse(req.responseText));\n        }\n      } else {\n        return cb(new ApiError(req.status, \"XHR error.\"));\n      }\n    }\n  };\n  req.send();\n}\n\nfunction asyncDownloadFileIE(p: string, type: 'buffer', cb: (err: ApiError, data?: NodeBuffer) => void): void;\nfunction asyncDownloadFileIE(p: string, type: 'json', cb: (err: ApiError, data?: any) => void): void;\nfunction asyncDownloadFileIE(p: string, type: string, cb: (err: ApiError, data?: any) => void): void;\nfunction asyncDownloadFileIE(p: string, type: string, cb: (err: ApiError, data?: any) => void): void {\n  downloadFileIE(true, p, type, cb);\n}\n\nfunction syncDownloadFileIE(p: string, type: 'buffer'): NodeBuffer;\nfunction syncDownloadFileIE(p: string, type: 'json'): any;\nfunction syncDownloadFileIE(p: string, type: string): any;\nfunction syncDownloadFileIE(p: string, type: string): any {\n  var rv;\n  downloadFileIE(false, p, type, function(err: ApiError, data?: any) {\n    if (err) throw err;\n    rv = data;\n  });\n  return rv;\n}\n\nfunction asyncDownloadFileModern(p: string, type: 'buffer', cb: (err: ApiError, data?: NodeBuffer) => void): void;\nfunction asyncDownloadFileModern(p: string, type: 'json', cb: (err: ApiError, data?: any) => void): void;\nfunction asyncDownloadFileModern(p: string, type: string, cb: (err: ApiError, data?: any) => void): void;\nfunction asyncDownloadFileModern(p: string, type: string, cb: (err: ApiError, data?: any) => void): void {\n  var req = new XMLHttpRequest();\n  req.open('GET', p, true);\n  var jsonSupported = true;\n  switch(type) {\n    case 'buffer':\n      req.responseType = 'arraybuffer';\n      break;\n    case 'json':\n     // Some browsers don't support the JSON response type.\n     // They either reset responseType, or throw an exception.\n     // @see https://github.com/Modernizr/Modernizr/blob/master/src/testXhrType.js\n      try {\n        req.responseType = 'json';\n        jsonSupported = req.responseType === 'json';\n      } catch (e) {\n        jsonSupported = false;\n      }\n      break;\n    default:\n      return cb(new ApiError(ErrorCode.EINVAL, \"Invalid download type: \" + type));\n  }\n  req.onreadystatechange = function(e) {\n    if (req.readyState === 4) {\n      if (req.status === 200) {\n        switch(type) {\n          case 'buffer':\n            // XXX: WebKit-based browsers return *null* when XHRing an empty file.\n            return cb(null, new Buffer(req.response ? req.response : 0));\n          case 'json':\n            if (jsonSupported) {\n              return cb(null, req.response);\n            } else {\n              return cb(null, JSON.parse(req.responseText));\n            }\n        }\n      } else {\n        return cb(new ApiError(req.status, \"XHR error.\"));\n      }\n    }\n  };\n  req.send();\n}\n\nfunction syncDownloadFileModern(p: string, type: 'buffer'): NodeBuffer;\nfunction syncDownloadFileModern(p: string, type: 'json'): any;\nfunction syncDownloadFileModern(p: string, type: string): any;\nfunction syncDownloadFileModern(p: string, type: string): any {\n  var req = new XMLHttpRequest();\n  req.open('GET', p, false);\n\n  // On most platforms, we cannot set the responseType of synchronous downloads.\n  // @todo Test for this; IE10 allows this, as do older versions of Chrome/FF.\n  var data = null;\n  var err = null;\n  // Classic hack to download binary data as a string.\n  req.overrideMimeType('text/plain; charset=x-user-defined');\n  req.onreadystatechange = function(e) {\n    if (req.readyState === 4) {\n      if (req.status === 200) {\n        switch(type) {\n          case 'buffer':\n            // Convert the text into a buffer.\n            var text = req.responseText;\n            data = new Buffer(text.length);\n            // Throw away the upper bits of each character.\n            for (var i = 0; i < text.length; i++) {\n              // This will automatically throw away the upper bit of each\n              // character for us.\n              data.writeUInt8(text.charCodeAt(i), i);\n            }\n            return;\n          case 'json':\n            data = JSON.parse(req.responseText);\n            return;\n        }\n      } else {\n        err = new ApiError(req.status, \"XHR error.\");\n        return;\n      }\n    }\n  };\n  req.send();\n  if (err) {\n    throw err;\n  }\n  return data;\n}\n\n/**\n * IE10 allows us to perform synchronous binary file downloads.\n * @todo Feature detect this, as older versions of FF/Chrome do too!\n */\nfunction syncDownloadFileIE10(p: string, type: 'buffer'): NodeBuffer;\nfunction syncDownloadFileIE10(p: string, type: 'json'): any;\nfunction syncDownloadFileIE10(p: string, type: string): any;\nfunction syncDownloadFileIE10(p: string, type: string): any {\n  var req = new XMLHttpRequest();\n  req.open('GET', p, false);\n  switch(type) {\n    case 'buffer':\n      req.responseType = 'arraybuffer';\n      break;\n    case 'json':\n      // IE10 does not support the JSON type.\n      break;\n    default:\n      throw new ApiError(ErrorCode.EINVAL, \"Invalid download type: \" + type);\n  }\n  var data;\n  var err;\n  req.onreadystatechange = function(e) {\n    if (req.readyState === 4) {\n      if (req.status === 200) {\n        switch(type) {\n          case 'buffer':\n            data = new Buffer(req.response);\n            break;\n          case 'json':\n            data = JSON.parse(req.response);\n            break;\n        }\n      } else {\n        err = new ApiError(req.status, \"XHR error.\");\n      }\n    }\n  };\n  req.send();\n  if (err) {\n    throw err;\n  }\n  return data;\n}\n\nfunction getFileSize(async: boolean, p: string, cb: (err: ApiError, size?: number) => void): void {\n  var req = new XMLHttpRequest();\n  req.open('HEAD', p, async);\n  req.onreadystatechange = function(e) {\n    if (req.readyState === 4) {\n      if (req.status == 200) {\n        try {\n          return cb(null, parseInt(req.getResponseHeader('Content-Length') || '-1', 10));\n        } catch(e) {\n          // In the event that the header isn't present or there is an error...\n          return cb(new ApiError(ErrorCode.EIO, \"XHR HEAD error: Could not read content-length.\"));\n        }\n      } else {\n        return cb(new ApiError(req.status, \"XHR HEAD error.\"));\n      }\n    }\n  };\n  req.send();\n}\n\n/**\n * Asynchronously download a file as a buffer or a JSON object.\n * Note that the third function signature with a non-specialized type is\n * invalid, but TypeScript requires it when you specialize string arguments to\n * constants.\n */\nexport var asyncDownloadFile: {\n  (p: string, type: 'buffer', cb: (err: ApiError, data?: NodeBuffer) => void): void;\n  (p: string, type: 'json', cb: (err: ApiError, data?: any) => void): void;\n  (p: string, type: string, cb: (err: ApiError, data?: any) => void): void;\n} = (util.isIE && typeof Blob === 'undefined') ? asyncDownloadFileIE : asyncDownloadFileModern;\n\n/**\n * Synchronously download a file as a buffer or a JSON object.\n * Note that the third function signature with a non-specialized type is\n * invalid, but TypeScript requires it when you specialize string arguments to\n * constants.\n */\nexport var syncDownloadFile: {\n  (p: string, type: 'buffer'): NodeBuffer;\n  (p: string, type: 'json'): any;\n  (p: string, type: string): any;\n} = (util.isIE && typeof Blob === 'undefined') ? syncDownloadFileIE : (util.isIE && typeof Blob !== 'undefined') ? syncDownloadFileIE10 : syncDownloadFileModern;\n\n/**\n * Synchronously retrieves the size of the given file in bytes.\n */\nexport function getFileSizeSync(p: string): number {\n  var rv: number;\n  getFileSize(false, p, function(err: ApiError, size?: number) {\n    if (err) {\n      throw err;\n    }\n    rv = size;\n  });\n  return rv;\n}\n\n/**\n * Asynchronously retrieves the size of the given file in bytes.\n */\nexport function getFileSizeAsync(p: string, cb: (err: ApiError, size?: number) => void): void {\n  getFileSize(true, p, cb);\n}\n","/**\n * BrowserFS's main entry point.\n * It installs all of the needed polyfills, and requires() the main module.\n */\nimport global = require('./core/global');\n\n// IE < 9 does not define this function.\nif (!Date.now) {\n  Date.now = function now() {\n    return new Date().getTime();\n  };\n}\n\n// IE < 9 does not define this function.\nif(!Array.isArray) {\n  Array.isArray = function (vArg): vArg is any[] {\n    return Object.prototype.toString.call(vArg) === \"[object Array]\";\n  };\n}\n\n// IE < 9 does not define this function.\n// From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\nif (!Object.keys) {\n  Object.keys = (function () {\n    'use strict';\n    var hasOwnProperty = Object.prototype.hasOwnProperty,\n        hasDontEnumBug = !({toString: null}).propertyIsEnumerable('toString'),\n        dontEnums = [\n          'toString',\n          'toLocaleString',\n          'valueOf',\n          'hasOwnProperty',\n          'isPrototypeOf',\n          'propertyIsEnumerable',\n          'constructor'\n        ],\n        dontEnumsLength = dontEnums.length;\n\n    return function (obj: any) {\n      if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {\n        throw new TypeError('Object.keys called on non-object');\n      }\n\n      var result: string[] = [], prop: string, i: number;\n\n      for (prop in obj) {\n        if (hasOwnProperty.call(obj, prop)) {\n          result.push(prop);\n        }\n      }\n\n      if (hasDontEnumBug) {\n        for (i = 0; i < dontEnumsLength; i++) {\n          if (hasOwnProperty.call(obj, dontEnums[i])) {\n            result.push(dontEnums[i]);\n          }\n        }\n      }\n      return result;\n    };\n  }());\n}\n\n// IE substr does not support negative indices\nif ('ab'.substr(-1) !== 'b') {\n  String.prototype.substr = function(substr: (start: number, length?: number) => string) {\n    return function(start: number, length?: number): string {\n      // did we get a negative start, calculate how much it is from the\n      // beginning of the string\n      if (start < 0) start = this.length + start;\n      // call the original function\n      return substr.call(this, start, length);\n    }\n  }(String.prototype.substr);\n}\n\n// IE < 9 does not support forEach\nif (!Array.prototype.forEach) {\n  Array.prototype.forEach = function(fn: (value: string, index: number, array: string[]) => void, scope?: any): void {\n    for (var i = 0; i < this.length; ++i) {\n      if (i in this) {\n        fn.call(scope, this[i], i, this);\n      }\n    }\n  };\n}\n\n// IE < 9 does not support filter\n// From https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\nif (!Array.prototype.filter) {\n  Array.prototype.filter = function(fun/*, thisArg*/) {\n    'use strict';\n\n    if (this === void 0 || this === null) {\n      throw new TypeError();\n    }\n\n    var t = Object(this);\n    var len = t.length >>> 0;\n    if (typeof fun !== 'function') {\n      throw new TypeError();\n    }\n\n    var res = [];\n    var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n    for (var i = 0; i < len; i++) {\n      if (i in t) {\n        var val = t[i];\n\n        // NOTE: Technically this should Object.defineProperty at\n        //       the next index, as push can be affected by\n        //       properties on Object.prototype and Array.prototype.\n        //       But that method's new, and collisions should be\n        //       rare, so use the more-compatible alternative.\n        if (fun.call(thisArg, val, i, t)) {\n          res.push(val);\n        }\n      }\n    }\n\n    return res;\n  };\n}\n\n// Only IE10 has setImmediate.\n// @todo: Determine viability of switching to the 'proper' polyfill for this.\nif (typeof setImmediate === 'undefined') {\n  var gScope = global;\n  var timeouts: (() => void)[] = [];\n  var messageName = \"zero-timeout-message\";\n  var canUsePostMessage = function() {\n    if (typeof gScope.importScripts !== 'undefined' || !gScope.postMessage) {\n      return false;\n    }\n    var postMessageIsAsync = true;\n    var oldOnMessage = gScope.onmessage;\n    gScope.onmessage = function() {\n      postMessageIsAsync = false;\n    };\n    gScope.postMessage('', '*');\n    gScope.onmessage = oldOnMessage;\n    return postMessageIsAsync;\n  };\n  if (canUsePostMessage()) {\n    gScope.setImmediate = function(fn: () => void) {\n      timeouts.push(fn);\n      gScope.postMessage(messageName, \"*\");\n    };\n    var handleMessage = function(event: MessageEvent) {\n      if (event.source === self && event.data === messageName) {\n        if (event.stopPropagation) {\n          event.stopPropagation();\n        } else {\n          event.cancelBubble = true;\n        }\n        if (timeouts.length > 0) {\n          var fn = timeouts.shift();\n          return fn();\n        }\n      }\n    };\n    if (gScope.addEventListener) {\n      gScope.addEventListener('message', handleMessage, true);\n    } else {\n      gScope.attachEvent('onmessage', handleMessage);\n    }\n  } else if (gScope.MessageChannel) {\n    // WebWorker MessageChannel\n    var channel = new gScope.MessageChannel();\n    channel.port1.onmessage = (event: any) => {\n      if (timeouts.length > 0) {\n        return timeouts.shift()();\n      }\n    };\n    gScope.setImmediate = (fn: () => void) => {\n      timeouts.push(fn);\n      channel.port2.postMessage('');\n    };\n  } else {\n    gScope.setImmediate = function(fn: () => void) {\n      return setTimeout(fn, 0);\n    };\n  }\n}\n\n// IE<9 does not define indexOf.\n// From: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf\nif (!Array.prototype.indexOf) {\n  Array.prototype.indexOf = function(searchElement: any, fromIndex: number = 0): number {\n    if (!this) {\n      throw new TypeError();\n    }\n\n    var length = this.length;\n    if (length === 0 || pivot >= length) {\n      return -1;\n    }\n\n    var pivot = fromIndex;\n    if (pivot < 0) {\n      pivot = length + pivot;\n    }\n\n    for (var i = pivot; i < length; i++) {\n      if (this[i] === searchElement) {\n        return i;\n      }\n    }\n    return -1;\n  };\n}\n\n// IE<9 does not support forEach\n// From: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\nif (!Array.prototype.forEach) {\n  Array.prototype.forEach = function(fn: (value: string, index: number, array: string[]) => void, scope?: any) {\n    var i: number, len: number;\n    for (i = 0, len = this.length; i < len; ++i) {\n      if (i in this) {\n        fn.call(scope, this[i], i, this);\n      }\n    }\n  };\n}\n\n// IE<9 does not support map\n// From: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\nif (!Array.prototype.map) {\n  Array.prototype.map = function(callback: (value: string, index: number, array: string[]) => any, thisArg?: any): any[] {\n    var T: any, A: any, k: any;\n    if (this == null) {\n      throw new TypeError(\" this is null or not defined\");\n    }\n    // 1. Let O be the result of calling ToObject passing the |this| value as the argument.\n    var O = Object(this);\n    // 2. Let lenValue be the result of calling the Get internal method of O with the argument \"length\".\n    // 3. Let len be ToUint32(lenValue).\n    var len = O.length >>> 0;\n    // 4. If IsCallable(callback) is false, throw a TypeError exception.\n    // See: http://es5.github.com/#x9.11\n    if (typeof callback !== \"function\") {\n      throw new TypeError(callback + \" is not a function\");\n    }\n    // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.\n    if (thisArg) {\n      T = thisArg;\n    }\n    // 6. Let A be a new array created as if by the expression new Array(len) where Array is\n    // the standard built-in constructor with that name and len is the value of len.\n    A = new Array(len);\n    // 7. Let k be 0\n    k = 0;\n    // 8. Repeat, while k < len\n    while(k < len) {\n      var kValue: any, mappedValue: any;\n      // a. Let Pk be ToString(k).\n      //   This is implicit for LHS operands of the in operator\n      // b. Let kPresent be the result of calling the HasProperty internal method of O with argument Pk.\n      //   This step can be combined with c\n      // c. If kPresent is true, then\n      if (k in O) {\n        // i. Let kValue be the result of calling the Get internal method of O with argument Pk.\n        kValue = O[k];\n        // ii. Let mappedValue be the result of calling the Call internal method of callback\n        // with T as the this value and argument list containing kValue, k, and O.\n        mappedValue = callback.call(T, kValue, k, O);\n        // iii. Call the DefineOwnProperty internal method of A with arguments\n        // Pk, Property Descriptor {Value: mappedValue, : true, Enumerable: true, Configurable: true},\n        // and false.\n        // In browsers that support Object.defineProperty, use the following:\n        // Object.defineProperty(A, Pk, { value: mappedValue, writable: true, enumerable: true, configurable: true });\n        // For best browser support, use the following:\n        A[k] = mappedValue;\n      }\n      // d. Increase k by 1.\n      k++;\n    }\n    // 9. return A\n    return A;\n  };\n}\n\n/**\n * IE9 and below only: Injects a VBScript function that converts the\n * 'responseBody' attribute of an XMLHttpRequest into a bytestring.\n * From: http://miskun.com/javascript/internet-explorer-and-binary-files-data-access/#comment-17\n *\n * This is harmless to inject into non-IE browsers.\n */\nif (typeof(document) !== 'undefined' && typeof(window) !== 'undefined' && (<any> window)['chrome'] === undefined) {\n  // Explicitly use Windows-style line endings.\n  const VBFunction = \"Function IEBinaryToArray_ByteStr(Binary)\\r\\n\"+\n    \" IEBinaryToArray_ByteStr = CStr(Binary)\\r\\n\"+\n    \"End Function\\r\\n\"+\n    \"Function IEBinaryToArray_ByteStr_Last(Binary)\\r\\n\"+\n    \" Dim lastIndex\\r\\n\"+\n    \" lastIndex = LenB(Binary)\\r\\n\"+\n    \" if lastIndex mod 2 Then\\r\\n\"+\n    \" IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\\r\\n\"+\n    \" Else\\r\\n\"+\n    \" IEBinaryToArray_ByteStr_Last = \"+'\"\"'+\"\\r\\n\"+\n    \" End If\\r\\n\"+\n    \"End Function\\r\\n\";\n  if (document.readyState === 'loading') {\n    // Inject script into page while loading.\n    document.write(\"<script type='text/vbscript'>\\r\\n\" + VBFunction + \"</script>\\r\\n\");\n  } else {\n    // Add script to HEAD after loaded.\n    const scriptElement = document.createElement('script');\n    scriptElement.type = \"text/vbscript\";\n    scriptElement.innerHTML = VBFunction;\n    document.head.appendChild(scriptElement);\n  }\n}\n\nimport bfs = require('./core/browserfs');\nexport = bfs;"]}